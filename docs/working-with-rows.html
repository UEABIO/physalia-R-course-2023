<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 24 Working with rows | Advancing in R</title>
<meta name="author" content="Philip T. Leftwich">
<meta name="description" content="24.1 Filtering rows based on conditions across multiple columns Suppose you want to filter multiple rows from your data frame that fail to meet a criteria. penguins_clean_split |&gt;  filter(  ...">
<meta name="generator" content="bookdown 0.34 with bs4_book()">
<meta property="og:title" content="Chapter 24 Working with rows | Advancing in R">
<meta property="og:type" content="book">
<meta property="og:url" content="https://ueabio.github.io/physalia-R-course-2023/working-with-rows.html">
<meta property="og:image" content="https://ueabio.github.io/physalia-R-course-2023/images/logos/twitter_card.png">
<meta property="og:description" content="24.1 Filtering rows based on conditions across multiple columns Suppose you want to filter multiple rows from your data frame that fail to meet a criteria. penguins_clean_split |&gt;  filter(  ...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 24 Working with rows | Advancing in R">
<meta name="twitter:description" content="24.1 Filtering rows based on conditions across multiple columns Suppose you want to filter multiple rows from your data frame that fail to meet a criteria. penguins_clean_split |&gt;  filter(  ...">
<meta name="twitter:image" content="https://ueabio.github.io/physalia-R-course-2023/images/logos/twitter_card.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.0/transition.js"></script><script src="libs/bs3compat-0.5.0/tabs.js"></script><script src="libs/bs3compat-0.5.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/font-awesome-5.13.0/js/script.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6NP3MF25W3');
    </script><script language="javascript"> 
        function toggle(id) {
            var ele = document.getElementById("toggleText" + id);
            var text = document.getElementById("displayText" + id);
            var buttonText = text.innerHTML.replace("Show ", "");
            buttonText = buttonText.replace("Hide ", "");
            if(ele.style.display == "block") {
                ele.style.display = "none";
                text.innerHTML = "Show " + buttonText;
            } else {
                ele.style.display = "block";
                text.innerHTML = "Hide " + buttonText;
            }
        } 
    </script><script language="javascript">
        function openCode(evt, codeName, id) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent" + id);
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks" + id);
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(codeName).style.display = "block";
            evt.currentTarget.className += " active";
        }
    </script><script language="javascript">
        function hide(id){
            document.getElementById(id).style.display = "none";
        }
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="include/psyteachr.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="A guide for Biologists and Ecologists">Advancing in R</a>:
        <small class="text-muted">A guide for Biologists and Ecologists</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Overview</a></li>
<li class="book-part">Get Started in R</li>
<li><a class="" href="introduction-to-r-and-rstudio.html"><span class="header-section-number">1</span> Introduction to R and RStudio</a></li>
<li><a class="" href="r-basics.html"><span class="header-section-number">2</span> R basics</a></li>
<li class="book-part">Organising workflows</li>
<li><a class="" href="project-oriented-workflows.html"><span class="header-section-number">3</span> Project-oriented workflows</a></li>
<li><a class="" href="basic-importexport.html"><span class="header-section-number">4</span> Basic Import/Export</a></li>
<li><a class="" href="scripts.html"><span class="header-section-number">5</span> Scripts</a></li>
<li><a class="" href="naming-things.html"><span class="header-section-number">6</span> Naming things</a></li>
<li><a class="" href="penguin-project.html"><span class="header-section-number">7</span> Penguin project</a></li>
<li><a class="" href="data-wrangling-with-dplyr.html"><span class="header-section-number">8</span> Data wrangling with dplyr</a></li>
<li><a class="" href="basic-ggplot.html"><span class="header-section-number">9</span> Basic ggplot</a></li>
<li class="book-part">Data Insights</li>
<li><a class="" href="data-insights-part-one.html"><span class="header-section-number">10</span> Data Insights part one</a></li>
<li><a class="" href="data-insights-part-two.html"><span class="header-section-number">11</span> Data insights part two</a></li>
<li class="book-part">Functional Programming</li>
<li><a class="" href="writing-functions.html"><span class="header-section-number">12</span> Writing Functions</a></li>
<li><a class="" href="flow-control.html"><span class="header-section-number">13</span> Flow control</a></li>
<li><a class="" href="simple-iteration.html"><span class="header-section-number">14</span> Simple iteration</a></li>
<li><a class="" href="loops.html"><span class="header-section-number">15</span> Loops</a></li>
<li><a class="" href="apply.html"><span class="header-section-number">16</span> Apply</a></li>
<li><a class="" href="purrr.html"><span class="header-section-number">17</span> Purrr</a></li>
<li><a class="" href="bonus-simulation.html"><span class="header-section-number">18</span> Bonus: Simulation</a></li>
<li class="book-part">Getting the most out of tidyverse</li>
<li><a class="" href="reading-files-with-readr.html"><span class="header-section-number">19</span> Reading files with readr</a></li>
<li><a class="" href="working-across-columns.html"><span class="header-section-number">20</span> Working across columns</a></li>
<li><a class="" href="modifying-variables.html"><span class="header-section-number">21</span> Modifying variables</a></li>
<li><a class="" href="factors-1.html"><span class="header-section-number">22</span> Factors</a></li>
<li><a class="" href="applying-functions-across-columns.html"><span class="header-section-number">23</span> Applying functions across columns</a></li>
<li><a class="active" href="working-with-rows.html"><span class="header-section-number">24</span> Working with rows</a></li>
<li><a class="" href="group-work.html"><span class="header-section-number">25</span> Group work</a></li>
<li><a class="" href="pivot.html"><span class="header-section-number">26</span> Pivot</a></li>
<li><a class="" href="writing-functions-in-tidyverse.html"><span class="header-section-number">27</span> Writing Functions in Tidyverse</a></li>
<li class="book-part">Data Presentation</li>
<li><a class="" href="customisation-with-ggplot2.html"><span class="header-section-number">28</span> Customisation with ggplot2</a></li>
<li><a class="" href="extensions-for-ggplot2.html"><span class="header-section-number">29</span> Extensions for ggplot2</a></li>
<li><a class="" href="custom-ggplot-themes.html"><span class="header-section-number">30</span> Custom ggplot themes</a></li>
<li><a class="" href="making-tables-with-gt.html"><span class="header-section-number">31</span> Making tables with gt</a></li>
<li class="book-part">Introduction to Shiny</li>
<li><a class="" href="getting-to-work-with-shiny.html"><span class="header-section-number">32</span> Getting to work with Shiny</a></li>
<li><a class="" href="make-our-own-app.html"><span class="header-section-number">33</span> Make our own App</a></li>
<li><a class="" href="inputs.html"><span class="header-section-number">34</span> Inputs</a></li>
<li><a class="" href="outputs.html"><span class="header-section-number">35</span> Outputs</a></li>
<li><a class="" href="reactive.html"><span class="header-section-number">36</span> Reactive</a></li>
<li><a class="" href="shiny-dashboards.html"><span class="header-section-number">37</span> Shiny Dashboards</a></li>
<li><a class="" href="sharing.html"><span class="header-section-number">38</span> Sharing</a></li>
<li class="book-part">Literate Programming and Reproducibility</li>
<li><a class="" href="rmarkdown.html"><span class="header-section-number">39</span> RMarkdown</a></li>
<li><a class="" href="github-1.html"><span class="header-section-number">40</span> Github</a></li>
<li><a class="" href="NA.html">
to upload commits
to the remote repository.
</a></li>
<li class="book-part">Working with big data</li>
<li><a class="" href="reading-3.html"><span class="header-section-number">41</span> Reading</a></li>
<li class="book-part">BONUS: Automated Exploratory Analysis</li>
<li><a class="" href="packages-for-automated-exploratory-data-analysis.html"><span class="header-section-number">42</span> Packages for Automated Exploratory Data Analysis</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/UEABIO/physalia-intro-stats-2023">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="working-with-rows" class="section level1" number="24">
<h1>
<span class="header-section-number">24</span> Working with rows<a class="anchor" aria-label="anchor" href="#working-with-rows"><i class="fas fa-link"></i></a>
</h1>
<div id="filtering-rows-based-on-conditions-across-multiple-columns" class="section level2" number="24.1">
<h2>
<span class="header-section-number">24.1</span> Filtering rows based on conditions across multiple columns<a class="anchor" aria-label="anchor" href="#filtering-rows-based-on-conditions-across-multiple-columns"><i class="fas fa-link"></i></a>
</h2>
<p>Suppose you want to filter multiple rows from your data frame that fail to meet a criteria.</p>
<div class="sourceCode" id="cb441"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins_clean_split</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">if_any</a></span><span class="op">(</span>.cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"culmen"</span><span class="op">)</span>,</span>
<span>           .fns <span class="op">=</span> <span class="op">~</span><span class="va">.</span> <span class="op">&lt;</span> <span class="fl">40</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="filter-rows-based-on-missing-values" class="section level2" number="24.2">
<h2>
<span class="header-section-number">24.2</span> filter rows based on missing values<a class="anchor" aria-label="anchor" href="#filter-rows-based-on-missing-values"><i class="fas fa-link"></i></a>
</h2>
<p>Another very useful use case is filtering rows based on missing values across multiple columns.</p>
<div class="sourceCode" id="cb442"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins_clean_split</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">if_all</a></span><span class="op">(</span>.cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html">where</a></span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>,</span>
<span>           .fns <span class="op">=</span> <span class="op">~</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> </span></code></pre></div>
<div class="try">
<p>
At first the outcome above can seem counter-intuitive, but can be
explained by the <code>!</code> operator. The if_all is evaluating
whether all columns meet the condition of NOT containing NA.
</p>
<p>
You can try different combinations of if_all, if_any and the NOT
operator
</p>
</div>
</div>
<div id="slicing" class="section level2" number="24.3">
<h2>
<span class="header-section-number">24.3</span> slicing<a class="anchor" aria-label="anchor" href="#slicing"><i class="fas fa-link"></i></a>
</h2>
<p>Suppose we want to remove the 10 highest values of body mass from our dataframe - we could do this with <code>slice</code></p>
<div class="sourceCode" id="cb443"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins_clean_split</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="4%">
<col width="5%">
<col width="3%">
<col width="7%">
<col width="2%">
<col width="2%">
<col width="8%">
<col width="5%">
<col width="7%">
<col width="4%">
<col width="7%">
<col width="6%">
<col width="7%">
<col width="5%">
<col width="2%">
<col width="6%">
<col width="6%">
<col width="3%">
</colgroup>
<thead><tr class="header">
<th align="left">study_name</th>
<th align="right">sample_number</th>
<th align="left">species</th>
<th align="left">full_latin_name</th>
<th align="left">region</th>
<th align="left">island</th>
<th align="left">stage</th>
<th align="left">individual_id</th>
<th align="left">clutch_completion</th>
<th align="left">date_egg</th>
<th align="right">culmen_length_mm</th>
<th align="right">culmen_depth_mm</th>
<th align="right">flipper_length_mm</th>
<th align="right">body_mass_g</th>
<th align="left">sex</th>
<th align="right">delta_15_n_o_oo</th>
<th align="right">delta_13_c_o_oo</th>
<th align="left">comments</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">PAL0708</td>
<td align="right">18</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N39A2</td>
<td align="left">Yes</td>
<td align="left">2007-11-27</td>
<td align="right">49.2</td>
<td align="right">15.2</td>
<td align="right">221</td>
<td align="right">6300</td>
<td align="left">MALE</td>
<td align="right">8.27376</td>
<td align="right">-25.00169</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">PAL0708</td>
<td align="right">34</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N56A2</td>
<td align="left">Yes</td>
<td align="left">2007-12-03</td>
<td align="right">59.6</td>
<td align="right">17.0</td>
<td align="right">230</td>
<td align="right">6050</td>
<td align="left">MALE</td>
<td align="right">7.76843</td>
<td align="right">-25.68210</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">PAL0809</td>
<td align="right">78</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N58A2</td>
<td align="left">Yes</td>
<td align="left">2008-11-06</td>
<td align="right">51.1</td>
<td align="right">16.3</td>
<td align="right">220</td>
<td align="right">6000</td>
<td align="left">MALE</td>
<td align="right">8.40327</td>
<td align="right">-26.76821</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">PAL0910</td>
<td align="right">118</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N36A2</td>
<td align="left">Yes</td>
<td align="left">2009-12-01</td>
<td align="right">48.8</td>
<td align="right">16.2</td>
<td align="right">222</td>
<td align="right">6000</td>
<td align="left">MALE</td>
<td align="right">8.33825</td>
<td align="right">-25.88547</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">PAL0809</td>
<td align="right">80</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N60A2</td>
<td align="left">Yes</td>
<td align="left">2008-11-09</td>
<td align="right">45.2</td>
<td align="right">16.4</td>
<td align="right">223</td>
<td align="right">5950</td>
<td align="left">MALE</td>
<td align="right">8.19749</td>
<td align="right">-26.65931</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">PAL0910</td>
<td align="right">112</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N32A2</td>
<td align="left">Yes</td>
<td align="left">2009-11-20</td>
<td align="right">49.8</td>
<td align="right">15.9</td>
<td align="right">229</td>
<td align="right">5950</td>
<td align="left">MALE</td>
<td align="right">8.29226</td>
<td align="right">-26.21019</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">PAL0708</td>
<td align="right">14</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N37A2</td>
<td align="left">Yes</td>
<td align="left">2007-11-29</td>
<td align="right">48.4</td>
<td align="right">14.6</td>
<td align="right">213</td>
<td align="right">5850</td>
<td align="left">MALE</td>
<td align="right">7.82080</td>
<td align="right">-25.48025</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">PAL0708</td>
<td align="right">16</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N38A2</td>
<td align="left">Yes</td>
<td align="left">2007-12-03</td>
<td align="right">49.3</td>
<td align="right">15.7</td>
<td align="right">217</td>
<td align="right">5850</td>
<td align="left">MALE</td>
<td align="right">8.07137</td>
<td align="right">-25.52473</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">PAL0910</td>
<td align="right">116</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N35A2</td>
<td align="left">Yes</td>
<td align="left">2009-11-25</td>
<td align="right">55.1</td>
<td align="right">16.0</td>
<td align="right">230</td>
<td align="right">5850</td>
<td align="left">MALE</td>
<td align="right">8.08354</td>
<td align="right">-26.18161</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">PAL0809</td>
<td align="right">68</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N51A2</td>
<td align="left">Yes</td>
<td align="left">2008-11-09</td>
<td align="right">49.5</td>
<td align="right">16.2</td>
<td align="right">229</td>
<td align="right">5800</td>
<td align="left">MALE</td>
<td align="right">8.49854</td>
<td align="right">-26.74809</td>
<td align="left">NA</td>
</tr>
</tbody>
</table></div>
</div>
<p><code>slice</code> keeps all rows for which you specify positive indices. Note that in R indexing starts with 1 and not with 0 as in most other programming languages. To make it more clear what rows slice keeps, letâ€™s add row numbers to our data frame and slice some arbitrary rows:</p>
<div class="sourceCode" id="cb444"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins_clean_split</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html">rownames_to_column</a></span><span class="op">(</span>var <span class="op">=</span> <span class="st">"row_number"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">123</span>,<span class="fl">307</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="3%">
<col width="3%">
<col width="4%">
<col width="3%">
<col width="7%">
<col width="2%">
<col width="2%">
<col width="6%">
<col width="4%">
<col width="6%">
<col width="3%">
<col width="5%">
<col width="5%">
<col width="6%">
<col width="4%">
<col width="2%">
<col width="5%">
<col width="5%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="left">row_number</th>
<th align="left">study_name</th>
<th align="right">sample_number</th>
<th align="left">species</th>
<th align="left">full_latin_name</th>
<th align="left">region</th>
<th align="left">island</th>
<th align="left">stage</th>
<th align="left">individual_id</th>
<th align="left">clutch_completion</th>
<th align="left">date_egg</th>
<th align="right">culmen_length_mm</th>
<th align="right">culmen_depth_mm</th>
<th align="right">flipper_length_mm</th>
<th align="right">body_mass_g</th>
<th align="left">sex</th>
<th align="right">delta_15_n_o_oo</th>
<th align="right">delta_13_c_o_oo</th>
<th align="left">comments</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">PAL0708</td>
<td align="right">18</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N39A2</td>
<td align="left">Yes</td>
<td align="left">2007-11-27</td>
<td align="right">49.2</td>
<td align="right">15.2</td>
<td align="right">221</td>
<td align="right">6300</td>
<td align="left">MALE</td>
<td align="right">8.27376</td>
<td align="right">-25.00169</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">123</td>
<td align="left">PAL0809</td>
<td align="right">59</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N17A1</td>
<td align="left">Yes</td>
<td align="left">2008-11-06</td>
<td align="right">43.2</td>
<td align="right">14.5</td>
<td align="right">208</td>
<td align="right">4450</td>
<td align="left">FEMALE</td>
<td align="right">8.48367</td>
<td align="right">-26.86485</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">307</td>
<td align="left">PAL0708</td>
<td align="right">17</td>
<td align="left">Chinstrap</td>
<td align="left">Pygoscelis antarctica</td>
<td align="left">Anvers</td>
<td align="left">Dream</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N71A1</td>
<td align="left">No</td>
<td align="left">2007-11-30</td>
<td align="right">50.3</td>
<td align="right">20.0</td>
<td align="right">197</td>
<td align="right">3300</td>
<td align="left">MALE</td>
<td align="right">10.02019</td>
<td align="right">-24.54704</td>
<td align="left">Nest never observed with full clutch.</td>
</tr>
</tbody>
</table></div>
</div>
<p>To remove specific rows, we can use negative indices. Suppose, we want to remove the first 340 rows from our data frame.</p>
<div class="sourceCode" id="cb445"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins_clean_split</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html">rownames_to_column</a></span><span class="op">(</span>var <span class="op">=</span> <span class="st">"row_number"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="op">-</span><span class="fl">340</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="3%">
<col width="3%">
<col width="4%">
<col width="3%">
<col width="7%">
<col width="2%">
<col width="3%">
<col width="6%">
<col width="4%">
<col width="5%">
<col width="3%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="3%">
<col width="2%">
<col width="5%">
<col width="5%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">row_number</th>
<th align="left">study_name</th>
<th align="right">sample_number</th>
<th align="left">species</th>
<th align="left">full_latin_name</th>
<th align="left">region</th>
<th align="left">island</th>
<th align="left">stage</th>
<th align="left">individual_id</th>
<th align="left">clutch_completion</th>
<th align="left">date_egg</th>
<th align="right">culmen_length_mm</th>
<th align="right">culmen_depth_mm</th>
<th align="right">flipper_length_mm</th>
<th align="right">body_mass_g</th>
<th align="left">sex</th>
<th align="right">delta_15_n_o_oo</th>
<th align="right">delta_13_c_o_oo</th>
<th align="left">comments</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">341</td>
<td align="left">PAL0809</td>
<td align="right">65</td>
<td align="left">Adelie</td>
<td align="left">Pygoscelis adeliae</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N29A1</td>
<td align="left">Yes</td>
<td align="left">2008-11-13</td>
<td align="right">36.4</td>
<td align="right">17.1</td>
<td align="right">184</td>
<td align="right">2850</td>
<td align="left">FEMALE</td>
<td align="right">8.62623</td>
<td align="right">-26.11650</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">342</td>
<td align="left">PAL0809</td>
<td align="right">39</td>
<td align="left">Chinstrap</td>
<td align="left">Pygoscelis antarctica</td>
<td align="left">Anvers</td>
<td align="left">Dream</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N72A1</td>
<td align="left">No</td>
<td align="left">2008-11-24</td>
<td align="right">46.9</td>
<td align="right">16.6</td>
<td align="right">192</td>
<td align="right">2700</td>
<td align="left">FEMALE</td>
<td align="right">9.80589</td>
<td align="right">-24.73735</td>
<td align="left">Nest never observed with full clutch.</td>
</tr>
<tr class="odd">
<td align="left">343</td>
<td align="left">PAL0708</td>
<td align="right">4</td>
<td align="left">Adelie</td>
<td align="left">Pygoscelis adeliae</td>
<td align="left">Anvers</td>
<td align="left">Torgersen</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N2A2</td>
<td align="left">Yes</td>
<td align="left">2007-11-16</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">Adult not sampled.</td>
</tr>
<tr class="even">
<td align="left">344</td>
<td align="left">PAL0910</td>
<td align="right">120</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N38A2</td>
<td align="left">No</td>
<td align="left">2009-12-01</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">Adult not sampled. Nest never observed with full clutch.</td>
</tr>
</tbody>
</table></div>
</div>
<p>Helper functions include <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_head()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_tail()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_min()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_sample()</a></code>
We can use these functions to more quickly and easily filter our data under some situations</p>
<div class="sourceCode" id="cb446"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins_clean_split</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span>order_by <span class="op">=</span> <span class="va">body_mass_g</span>,</span>
<span>            n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># we can also use prop e.g. prop =.1 to slice the top 10%</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">body_mass_g</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">species</th>
<th align="right">body_mass_g</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">6300</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">6050</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">6000</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">6000</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">5950</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">5950</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">5850</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">5850</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">5850</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">5800</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">5800</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">5750</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">5700</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">5700</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">5700</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">5700</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">5700</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">5650</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">5650</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">5650</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="groupwise-slicing" class="section level2" number="24.4">
<h2>
<span class="header-section-number">24.4</span> groupwise slicing<a class="anchor" aria-label="anchor" href="#groupwise-slicing"><i class="fas fa-link"></i></a>
</h2>
<p>To apply these functions within different sub-categories, we have to use <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code></p>
<div class="sourceCode" id="cb447"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins_clean_split</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span>order_by <span class="op">=</span> <span class="va">body_mass_g</span>,</span>
<span>            n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">body_mass_g</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">species</th>
<th align="right">body_mass_g</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Adelie</td>
<td align="right">4775</td>
</tr>
<tr class="even">
<td align="left">Adelie</td>
<td align="right">4725</td>
</tr>
<tr class="odd">
<td align="left">Adelie</td>
<td align="right">4700</td>
</tr>
<tr class="even">
<td align="left">Chinstrap</td>
<td align="right">4800</td>
</tr>
<tr class="odd">
<td align="left">Chinstrap</td>
<td align="right">4550</td>
</tr>
<tr class="even">
<td align="left">Chinstrap</td>
<td align="right">4500</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">6300</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">6050</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">6000</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">6000</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="bootstrapping-with-slice" class="section level2" number="24.5">
<h2>
<span class="header-section-number">24.5</span> bootstrapping with slice<a class="anchor" aria-label="anchor" href="#bootstrapping-with-slice"><i class="fas fa-link"></i></a>
</h2>
<p>If we set the replace argument to TRUE in <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice()</a></code>, we will perform sampling with replacement. This means the same row of data can appear twice in our dataframe.</p>
<div class="sourceCode" id="cb448"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_sample</a></span><span class="op">(</span><span class="va">penguins_clean_split</span>, </span>
<span>             prop <span class="op">=</span> <span class="fl">.5</span>, </span>
<span>             replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/duplicated.html">duplicated</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 34</code></pre>
<p>Why would we do this? This functionality allows us to create bootstraps from our data frame. Bootstrapping is a
technique where a set of samples of the same size are drawn from a single original sample.</p>
<p>Some values appear more than once because bootstrapping allows each value to be pulled multiple times from the original data set. Once you have your bootstraps, you can calculate metrics from them. For example, the mean value of each bootstrap. The underlying logic of this technique is that since the sample itself is from a population, the bootstraps act as proxies for other samples from that population. Now that we have created one bootstrap from our sample, we can create many. In the following code I have used map to create 100 bootstraps from my original sample:</p>
<div class="sourceCode" id="cb450"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">342</span><span class="op">)</span></span>
<span><span class="va">bootstraps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span>, </span>
<span>                  <span class="op">~</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_sample</a></span><span class="op">(</span><span class="va">penguins_clean_split</span>, </span>
<span>                                prop <span class="op">=</span> <span class="fl">.1</span>, <span class="co"># 10% of dataframe</span></span>
<span>                                replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">bootstraps</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_dbl</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">_</span> <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"grey80"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins_clean_split</span>,</span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span>,</span>
<span>             linewidth <span class="op">=</span> <span class="fl">2</span>, colour <span class="op">=</span> <span class="st">"red"</span>, linetype  <span class="op">=</span><span class="st">"dashed"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="05-tidyverse_files/figure-html/unnamed-chunk-45-1.png" width="100%" style="display: block; margin: auto;"></div>
</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script><script>
$( document ).ready(function() {
  var cite = ' ';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    license
  );
});
</script><div class="chapter-nav">
<div class="prev"><a href="applying-functions-across-columns.html"><span class="header-section-number">23</span> Applying functions across columns</a></div>
<div class="next"><a href="group-work.html"><span class="header-section-number">25</span> Group work</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#working-with-rows"><span class="header-section-number">24</span> Working with rows</a></li>
<li><a class="nav-link" href="#filtering-rows-based-on-conditions-across-multiple-columns"><span class="header-section-number">24.1</span> Filtering rows based on conditions across multiple columns</a></li>
<li><a class="nav-link" href="#filter-rows-based-on-missing-values"><span class="header-section-number">24.2</span> filter rows based on missing values</a></li>
<li><a class="nav-link" href="#slicing"><span class="header-section-number">24.3</span> slicing</a></li>
<li><a class="nav-link" href="#groupwise-slicing"><span class="header-section-number">24.4</span> groupwise slicing</a></li>
<li><a class="nav-link" href="#bootstrapping-with-slice"><span class="header-section-number">24.5</span> bootstrapping with slice</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/UEABIO/physalia-intro-stats-2023/blob/main/book/05-tidyverse.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/UEABIO/physalia-intro-stats-2023/edit/main/book/05-tidyverse.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Advancing in R</strong>: A guide for Biologists and Ecologists" was written by Philip T. Leftwich. It was last built on 2023-11-06.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
