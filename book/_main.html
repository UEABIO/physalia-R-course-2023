<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Advancing in R</title>

    <meta name="author" content="Philip T. Leftwich" />
  
   <meta name="description" content="<p>This book ...</p>" />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="Advancing in R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="<a href="https://ueabio.github.io/physalia-R-course-2023/" class="uri">https://ueabio.github.io/physalia-R-course-2023/</a>" />
  <meta property="og:image" content="<a href="https://ueabio.github.io/physalia-R-course-2023/" class="uri">https://ueabio.github.io/physalia-R-course-2023/</a>/images/logos/twitter_card.png" />
  <meta property="og:description" content="<p>This book ...</p>" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Advancing in R" />
  
  <meta name="twitter:description" content="<p>This book ...</p>" />
  <meta name="twitter:image" content="<a href="https://ueabio.github.io/physalia-R-course-2023/" class="uri">https://ueabio.github.io/physalia-R-course-2023/</a>/images/logos/twitter_card.png" />
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.5.0/transition.js"></script>
    <script src="libs/bs3compat-0.5.0/tabs.js"></script>
    <script src="libs/bs3compat-0.5.0/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/font-awesome-5.13.0/js/script.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6NP3MF25W3');
    </script>
    <script language="javascript"> 
        function toggle(id) {
            var ele = document.getElementById("toggleText" + id);
            var text = document.getElementById("displayText" + id);
            var buttonText = text.innerHTML.replace("Show ", "");
            buttonText = buttonText.replace("Hide ", "");
            if(ele.style.display == "block") {
                ele.style.display = "none";
                text.innerHTML = "Show " + buttonText;
            } else {
                ele.style.display = "block";
                text.innerHTML = "Hide " + buttonText;
            }
        } 
    </script>

    <script language="javascript">
        function openCode(evt, codeName, id) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent" + id);
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks" + id);
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(codeName).style.display = "block";
            evt.currentTarget.className += " active";
        }
    </script>

    <script language="javascript">
        function hide(id){
            document.getElementById(id).style.display = "none";
        }
    </script>
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
    <style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
      <link rel="stylesheet" href="include/psyteachr.css" />
    <link rel="stylesheet" href="include/webex.css" />
    <link rel="stylesheet" href="include/style.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<!--bookdown:title:start-->
<!--bookdown:title:end-->

<!--bookdown:toc:start-->
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="A guide for Biologists and Ecologists">Advancing in R</a>:
        <small class="text-muted">A guide for Biologists and Ecologists</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<!--bookdown:toc:end-->
<!--bookdown:body:start-->
<div id="overview" class="section level1 unnumbered">
<h1 class="unnumbered">Overview</h1>
<div class="small_right">
<img src="images/logos/logo.png" 
     alt="Data skills Logo" />
</div>
<p>This course is designed for anyone with basic knowledge of R who is looking to enhance their skills and take their programming abilities to the next level. Each session in the course will be hands-on, providing you with practical examples to work through and apply the concepts you've learned, and lots of support to answer questions and overcome any challenges</p>
<div id="learning-outcomes" class="section level2" number="0.1">
<h2><span class="header-section-number">0.1</span> Learning outcomes</h2>
<ol style="list-style-type: decimal">
<li>A grounding in R</li>
<li>Project based workflows</li>
<li>Tidyverse for data wrangling</li>
<li>Writing functions and running iterations</li>
<li>Advanced tidyverse tricks</li>
<li>GGplot for data visuals</li>
<li>Making tables with gt</li>
<li>Making reports with Rmarkdown</li>
<li>Using Github</li>
</ol>
</div>
<div id="packages" class="section level2" number="0.2">
<h2><span class="header-section-number">0.2</span> Packages</h2>
<pre><code>## Core Packages:
- tidyverse 2.0.0
- palmerpenguins
- here
- janitor
- skimr

## Data Exploration:
- GGally
- skimr
- dataxray

## Optimizing Functions:
- microbenchmark
- testthat

## Reproducible Reports:
- rmarkdown
- tinytex

## Working with Tables:
- gt
- gtExtras

## Add-ons for Working with ggplot:
- ggbeeswarm
- gghighlight
- ggh4x
- ggpubr
- png
- ggdensity
- ggdist
- ggbump
- ggtext
- ggalt
- ggridges
- geomtextpath
- colorBlindness
- patchwork

## Working with Shiny:
- shiny
- bslib

## Working with Github:
- gitcreds
- usethis
</code></pre>
<!--chapter:end:index.Rmd-->
</div>
</div>
<div id="part-get-started-in-r" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) Get Started in R</h1>
</div>
<div id="introduction-to-r-and-rstudio" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Introduction to R and RStudio</h1>
<ul>
<li><p>R is the name of the programming language we will learn on this course.</p></li>
<li><p>RStudio is a convenient interface which we will be using throughout the course in order to learn how to organise data, produce accurate data analyses &amp; data visualisations.</p></li>
</ul>
<p>R is a programming language that you will write code in, and RStudio is an Integrated Development Environment (IDE) which makes working with R easier. Think of it as knowing English and using a plain text editor like NotePad to write a book versus using a word processor like Microsoft Word. You could do it, but it wouldn't look as good and it would be much harder without things like spell-checking and formatting. In a similar way, you can use R without R Studio but we wouldn't recommend it. The key thing to remember is that although you will do all of your work using RStudio for this course, you are actually using <strong>two</strong> pieces of software which means that from time-to-time, both of them may have separate updates.</p>
<p>R and RStudio can be downloaded for free onto your <a href="https://www.rstudio.com/products/rstudio/">personal computers</a>(see Appendices), but for convenience we will use a classroom space on <strong>Posit cloud</strong>.</p>
<p><a href="https://rstudio.cloud/">Posit cloud</a> is a cloud-based service where we can log into remotely hosted servers that host our data analysis projects.</p>
<p>The advantage of using Posit cloud is that all the extra packages and functions you need for this course will already be installed. You can log-in to your workspace from any computer as long as you have an internet connection and remember you username and password. I can also "visit" your projects and help out when you get stuck, if they are hosted on Posit cloud.</p>
<p>Eventually we will may also add extra tools like GitHub and RMarkdown for data reproducibility, literate and collaborative programming.</p>
<p>By the end of this course I hope you will have the tools to confidently analyze real data, make informative and beautiful data visuals, and be able to analyze lots of different types of data.</p>
<div id="using-posit-cloud" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Using Posit cloud</h2>
<p>All of our sessions will run on cloud-based software. All you have to do is make a free account, and join our Workspace.</p>
<p>Once you are signed up - you will see that there are two spaces:</p>
<ul>
<li><p>Your workspace - for personal use (20hrs/month)</p></li>
<li><p>Our shared classroom - educational licence (no limit)</p></li>
</ul>
<p>Make sure you are working in the classroom workspace - so that I can distribute project work and 'visit' your projects if needed.</p>
<p>Posit cloud works in exactly the same way as RStudio, but means you don't have to download any software. You can access the hosted cloud server and your projects through any browser connection (Chrome works best), from any computer.</p>
<p>Here is a good reference guide to <a href="https://rstudio.cloud/learn/guide#projects">Posit cloud</a></p>
</div>
<div id="getting-to-know-rstudio" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Getting to know RStudio</h2>
<p>R Studio has a console that you can try out code in (appearing as the bottom left window), there is a script editor (top left), a window showing functions and objects you have created in the "Environment" tab (top right window in the figure), and a window that shows plots, files packages, and help documentation (bottom right).</p>
<div class="figure" style="text-align: center">
<img src="images/rstudio.png" alt="RStudio interface" width="100%" />
<p class="caption">
(#fig:img-rstudio)RStudio interface
</p>
</div>
<p>You will learn more about how to use the features included in R Studio throughout this course, however, I highly recommend watching <a href="https://rstudio.com/resources/webinars/programming-part-1-writing-code-in-rstudio/">RStudio Essentials 1</a> at some point.</p>
<p>The video lasts ~30 minutes and gives a tour of the main parts of R Studio.</p>
<div id="consoles-vs.-scripts" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Consoles vs. scripts</h3>
<ul>
<li><p>The <em>script</em> window is the place to enter and run code so that it is easily edited and saved for future use. Usually the Script Window is shown at the top left in RStudio. If this window is not shown, it will be visible <em>if</em> you open a previously saved R script, <em>or</em> if you create a new R Script. You create new R Script by clicking on File &gt; New File &gt; R Script in the RStudio menu bar.</p></li>
<li><p>To execute your code in the R script, you can either highlight the code and click on Run, or you can highlight the code and press CTRL + Enter on your keyboard.</p></li>
<li><p>The <em>console</em>: you can enter code directly in the Console Window and click Enter. The commands that you run will be shown in the History Window on the top right of RStudio. Though it is much more difficult to keep track of your work this way.</p></li>
</ul>
</div>
<div id="environment" class="section level3" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Environment</h3>
<p>The Environment tab (top right) allows you to see what objects are in the workspace. If you create variables or data frames, you have a visual listing of everything in the current workspace. When you start a new project this should be completely empty.</p>
</div>
<div id="plots-files-packages-help" class="section level3" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> Plots, files, packages, help</h3>
<ol style="list-style-type: decimal">
<li><p>Plots - The Plots panel, shows all your plots. There are buttons for opening the plot in a separate window and exporting the plot as a pdf or jpeg (though you can also do this with code.)</p></li>
<li><p>Files - The files panel gives you access to the file directory on your hard drive.</p></li>
<li><p>Packages - Shows a list of all the R packages installed on your harddrive and indicates whether or not they are currently loaded. Packages that are loaded in the current session are checked while those that are installed but not yet loaded are unchecked. We will discuss packages more later.</p></li>
<li><p>Help - Help menu for R functions. You can either type the name of a function in the search window, or use the code to search for a function with the name</p></li>
</ol>
<div class="figure" style="text-align: center">
<img src="images/RStudio_Screenshot_Labels.png" alt="RStudio interface labelled" width="100%" />
<p class="caption">
(#fig:labelled)RStudio interface labelled
</p>
</div>
</div>
<div id="make-rstudio-your-own" class="section level3" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> Make RStudio your own</h3>
<p>You can <a href="https://support.rstudio.com/hc/en-us/articles/115011846747-Using-Themes-in-the-RStudio-IDE">personalise the RStudio GUI</a> as much as you like.</p>
<p><img src="images/dark_mode.png" width="50%" style="display: block; margin: auto;" /><img src="images/classic_mode.png" width="50%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="get-help" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Get Help!</h2>
<p>There are a lot of sources of information about using R out there. Here are a few helpful places to get help when you have an issue, or just to learn more</p>
<ul>
<li><p>The R help system itself - type <code>help()</code> and put the name of the package or function you are querying inside the brackets</p></li>
<li><p>Vignettes - type <code>browseVignettes()</code> into the console and hit Enter, a list of available vignettes for all the packages we have will be displayed</p></li>
<li><p>Cheat Sheets - available at <a href="https://www.rstudio.com/resources/cheatsheets/">RStudio.com.</a> Most common packages have an associate cheat sheet covering the basics of how to use them. Download/bookmark ones we will use commonly such as ggplot2, data transformation with dplyr, Data tidying with tidyr &amp; Data import.</p></li>
<li><p>Google - I use Google constantly, because I continually forget how to do even basic tasks. If I want to remind myself how to round a number, I might type something like R round number - if I am using a particular package I should include that in the search term as well</p></li>
<li><p>Ask for help - If you are stuck, getting an error message, can't think what to do next, then ask someone. It could be me, it could be a classmate. When you do this it is very important that you show the code, include the error message. "This doesn't work" is not helpful. "Here is my code, this is the data I am using, I want it to do X, and here's the problem I get."</p></li>
</ul>
<div class="info">
<p>
It may be daunting to send your code to someone for help.
</p>
<p>
It is natural and common to feel apprehensive, or to think that your
code is really bad. I still feel the same! But we learn when we share
our mistakes, and eventually you will find it funny when you look back
on your early mistakes, or laugh about the mistakes you still
occasionally make!
</p>
</div>
</div>
</div>
<div id="r-basics" class="section level1" number="2">
<h1><span class="header-section-number">2</span> R basics</h1>
<p>Go to Posit cloud and enter the Project labelled <code>Day One</code> - this will clone the project and provide you with your own project workspace.</p>
<p>Follow the instructions below to get used to the R command line, and how R works as a language.</p>
<div id="your-first-r-command" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Your first R command</h2>
<p>In the RStudio pane, navigate to the <strong>console</strong> (bottom left) and <code>type or copy</code> the below it should appear at the &gt;</p>
<p>Hit Enter on your keyboard.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="dv">10</span> <span class="sc">+</span> <span class="dv">20</span></span></code></pre></div>
<ul>
<li>What answer did you get?</li>
</ul>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="dv">30</span></span></code></pre></div>
</div>
<p>The first line shows the request you made to R, the next line is R's response</p>
<p>You didn't type the <code>&gt;</code> symbol: that's just the R command prompt and isn't part of the actual command.</p>
<p>When a complete expression is entered at the prompt, it is evaluated and the result of the evaluated expression is returned. The result may be auto-printed.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">print</span>(<span class="dv">10</span> <span class="sc">+</span> <span class="dv">20</span>) <span class="do">## explicit printing</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="dv">10</span> <span class="sc">+</span> <span class="dv">20</span> <span class="do">## autoprinting</span></span></code></pre></div>
<p>Usually, with interactive work, we do not explicitly print objects with the print function; it is much easier to auto-print them by typing the name of the object and hitting return/enter. However, when writing scripts, functions, or more extended programs, there is sometimes a need to explicitly print objects.</p>
<p>When an R vector is printed, you will notice that an index for the vector is printed in square brackets <code>[]</code> on the side. For example, see this integer sequence</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">30</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
## [26] 26 27 28 29 30</code></pre>
<p>The numbers in the square brackets are not part of the vector itself; they are merely part of the printed output.</p>
<blockquote>
<p>Note that the : operator is used to create integer sequences</p>
</blockquote>
<div id="operators" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Operators</h3>
<p>There are a few different types of operators to consider in R</p>
<div id="assignment-operator" class="section level4" number="2.1.1.1">
<h4><span class="header-section-number">2.1.1.1</span> Assignment Operator</h4>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&lt;-</td>
<td>used to assign values to variables</td>
</tr>
</tbody>
</table>
</div>
<div id="arithmetic-operators" class="section level4" number="2.1.1.2">
<h4><span class="header-section-number">2.1.1.2</span> Arithmetic Operators</h4>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>+</td>
<td>addition</td>
</tr>
<tr class="even">
<td>-</td>
<td>subtraction</td>
</tr>
<tr class="odd">
<td>*</td>
<td>multiplication</td>
</tr>
<tr class="even">
<td>/</td>
<td>division</td>
</tr>
<tr class="odd">
<td>^</td>
<td>exponentiation</td>
</tr>
</tbody>
</table>
</div>
<div id="relational-operators" class="section level4" number="2.1.1.3">
<h4><span class="header-section-number">2.1.1.3</span> Relational Operators</h4>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&lt;</td>
<td>less than</td>
</tr>
<tr class="even">
<td>&lt;=</td>
<td>less than or equal to</td>
</tr>
<tr class="odd">
<td>&gt;</td>
<td>greater than</td>
</tr>
<tr class="even">
<td>&gt;=</td>
<td>greater than or equal to</td>
</tr>
<tr class="odd">
<td>==</td>
<td>exactly equal to</td>
</tr>
<tr class="even">
<td>!=</td>
<td>not equal to</td>
</tr>
</tbody>
</table>
</div>
<div id="logical-operators" class="section level4" number="2.1.1.4">
<h4><span class="header-section-number">2.1.1.4</span> Logical Operators</h4>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>!</td>
<td>not</td>
</tr>
<tr class="even">
<td>&amp;</td>
<td>AND</td>
</tr>
<tr class="odd">
<td>⎮</td>
<td>OR</td>
</tr>
</tbody>
</table>
</div>
<div id="membership-operators" class="section level4" number="2.1.1.5">
<h4><span class="header-section-number">2.1.1.5</span> Membership Operators</h4>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>%in%</td>
<td>used to check if an element is in a vector or list</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="typos" class="section level3" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Typos</h3>
<div class="warning">
<p>
Before we go on to talk about other types of calculations that we can
do with R, there’s a few other things I want to point out. The first
thing is that, while R is good software, it’s still software. It’s
pretty stupid, and because it’s stupid it can’t handle typos. It takes
it on faith that you meant to type exactly what you did type.
</p>
</div>
<p>Suppose you forget to hit the shift key when trying to type <code>+</code>, and as a result your command ended up being <code>10 = 20</code> rather than <code>10 + 20</code>. Try it for yourself and replicate this error message:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="dv">10</span> <span class="ot">=</span> <span class="dv">20</span></span></code></pre></div>
<div class="webex-solution">
<button>
What answer did you get?
</button>
<p>Error in 10 = 20 : invalid (do_set) left-hand side to assignment</p>
</div>
<p>What's going on: R tries to interpret <code>10 = 20</code> as a command, but it doesn't make sense, so it gives you an error message.</p>
<p>When a person sees this, they might realize it's a typo because the <code>+</code> and <code>=</code> keys are right next to each other on the keyboard. But R doesn't have that insight, so it just gets confused.</p>
<p>What's even trickier is that some typos won't create errors because they accidentally form valid R commands. For example, if I meant to type <code>10 + 20</code> but mistakenly pressed a neighboring key, I'd end up with <code>10 - 20</code>. Now, R can't read your mind to know you wanted to add, not subtract, so something different happens:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="dv">10</span> <span class="sc">-</span> <span class="dv">20</span></span></code></pre></div>
<pre><code>## [1] -10</code></pre>
<p>In this case, R produces the right answer, but to the the wrong question.</p>
</div>
<div id="more-simple-arithmetic" class="section level3" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> More simple arithmetic</h3>
<p>One of the best ways to get familiar with R is to experiment with it. The good news is that it's quite hard to mess things up, so don't stress too much. Just type whatever you like into the console and see what happens.</p>
<p>Now, if your console's last line looks like this:</p>
<pre><code>&gt; 10+
+ </code></pre>
<p>And there's a <em>blinking cursor</em> next to that plus sign, it means R is patiently waiting for you to complete your command. It believes you're still typing, so it hasn't tried to run anything yet. This plus sign is a bit different from the usual prompt (the <code>&gt;</code> symbol). It's there to nudge you that R is ready to "add" what you're typing now to what you typed before. For example, type <code>20</code> and hit enter, and then R will complete the command like this:</p>
<pre><code>&gt; 10 +
+ 20
[1] 30</code></pre>
<p><em>Alternatively</em> hit the escape key, and R will forget what you were trying to do and return to a blank line.</p>
</div>
<div id="try-some-simple-maths" class="section level3" number="2.1.4">
<h3><span class="header-section-number">2.1.4</span> Try some simple maths</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="dv">1</span><span class="sc">+</span><span class="dv">7</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="dv">13-10</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="dv">4</span><span class="sc">*</span><span class="dv">6</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="dv">12</span><span class="sc">/</span><span class="dv">3</span></span></code></pre></div>
<p>Raise a number to the power of another</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="dv">5</span><span class="sc">^</span><span class="dv">4</span></span></code></pre></div>
<p>Multiplying a number <span class="math inline">\(x\)</span> by itself <span class="math inline">\(n\)</span> times is called "raising <span class="math inline">\(x\)</span> to the <span class="math inline">\(n\)</span>-th power". Mathematically, this is written as <span class="math inline">\(x^n\)</span>. Some values of <span class="math inline">\(n\)</span> have special names: in particular <span class="math inline">\(x^2\)</span> is called <span class="math inline">\(x\)</span>-squared, and <span class="math inline">\(x^3\)</span> is called <span class="math inline">\(x\)</span>-cubed. So, the 4th power of 5 is calculated like this:</p>
<p><span class="math display">\[5^4 = 5 \times 5 \times 5 \times 5 \]</span></p>
</div>
<div id="perform-some-combos" class="section level3" number="2.1.5">
<h3><span class="header-section-number">2.1.5</span> Perform some combos</h3>
<p>R follows the standard order of operations (BODMAS/BIDMAS), which means it first calculates within brackets, then deals with exponents, followed by division and multiplication, and finally addition and subtraction.</p>
<p>Let's look at two examples to see how the order of operations affects the results:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="dv">3</span><span class="sc">^</span><span class="dv">2-5</span><span class="sc">/</span><span class="dv">2</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>(<span class="dv">3</span><span class="sc">^</span><span class="dv">2-5</span>)<span class="sc">/</span><span class="dv">2</span></span></code></pre></div>
<p>Similarly if we want to raise a number to a fraction, we need to surround the fraction with parentheses <code>()</code></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="dv">16</span><span class="sc">^</span><span class="dv">1</span><span class="sc">/</span><span class="dv">2</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="dv">16</span><span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">2</span>)</span></code></pre></div>
<p>The first one calculates 16 raised to the power of 1, then divided this answer by two. The second one raises 16 to the power of a half. A big difference in the output.</p>
<div class="info">
<p>
While the cursor is in the console, you can press the up arrow to see
all your previous commands.
</p>
<p>
You can run them again, or edit them. Later on we will look at
scripts, as an essential way to re-use, store and edit commands.
</p>
</div>
</div>
</div>
<div id="true-or-false-data" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> "TRUE or FALSE" data</h2>
<p>Time to make a sidebar onto another kind of data. Many concepts in programming rely on the idea of a <strong><em>logical value</em></strong>. A logical value is an assertion about whether something is true or false. This is implemented in R in a pretty straightforward way. There are two logical values, namely <code>TRUE</code> and <code>FALSE</code>. Despite the simplicity, logical values are very useful things. Let's see how they work.</p>
<div id="assessing-mathematical-truths" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Assessing mathematical truths</h3>
<p>Time to explore a different kind of data. In programming, many concepts rely on logical values. A logical value is a statement about whether something is true or false. In R, this is pretty straightforward. There are two logical values: <code>TRUE</code> and <code>FALSE</code>. Despite their simplicity, these logical values are incredibly useful. Let's dive into how they work.</p>
<p>In R, basic mathematics is solid, and there's no room for manipulation. When you ask R to calculate <code>2 + 2</code>, it always provides the same answer,</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>up to this point, R has been performing calculations without explicitly asserting whether <span class="math inline">\(2 + 2 = 4\)</span> is a true statement. If I want R to make an explicit judgment, I can use a command like this:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">4</span></span></code></pre></div>
<div class="webex-solution">
<button>
Solution
</button>
<p>TRUE</p>
</div>
<p>What I've done here is use the <strong><em>equality operator</em></strong>, <code>==</code>, to force R to make a "true or false" judgement.</p>
<div class="warning">
<p>
This is a very different operator to the assignment operator
<code>=</code> you saw previously.
</p>
<p>
A common typo that people make when trying to write logical commands
in R (or other languages, since the “<code>=</code> versus
<code>==</code>” distinction is important in most programming languages)
is to accidentally type <code>=</code> when you really mean
<code>==</code>.
</p>
</div>
<p>Okay, let's see what R thinks of <code>2 +2 ==5</code>:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="dv">2</span><span class="sc">+</span><span class="dv">2</span> <span class="sc">==</span> <span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Now, let's see what happens when I attempt to make R believe that two plus two equals five by using an assignment statement like <code>2 + 2 = 5</code> or <code>2 + 2 &lt;- 5</code>. Here's the outcome:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span> <span class="ot">=</span> <span class="dv">5</span></span></code></pre></div>
<pre><code>Error in 2 + 2 = 5 : target of assignment expands to non-language object</code></pre>
<p>Indeed, R isn't too fond of this idea. It quickly realizes that <code>2 + 2</code> is not a variable (that's what the "non-language object" part is saying), and it refuses to let you "reassign" it. While R can be quite flexible and allows you to do some remarkable things to redefine parts of itself, there are fundamental truths it simply won't budge on. It won't tamper with the laws of addition, and it won't redefine the number <code>2</code>.</p>
<p>That's probably for the best.</p>
</div>
</div>
<div id="storing-outputs" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Storing outputs</h2>
<p>When dealing with more complex questions, it's often helpful to store our answers and use them in later steps. Fortunately, this is quite easy to do in R. We can assign the results to a name with the <strong>assignment operator</strong>:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">+</span><span class="dv">2</span></span></code></pre></div>
<p>This literally means please <em>assign</em> the value of <code>1+2</code> to the name <code>a</code>. We use the <strong>assignment operator</strong> <code>&lt;-</code> to make this assignment.</p>
<div class="info">
<p>
Note the shortcut key for &lt;- is Alt + - (Windows) or Option + -
(Mac)
</p>
</div>
<p>By performing this action, you'll achieve two things:</p>
<p>You will notice in the top right-hand pane within the <strong>Environment</strong> tab that there is now an <strong>object</strong> labeled a with a value of <code>3</code>.</p>
<div class="figure" style="text-align: center">
<img src="images/environment.png" alt="object a is now visible withe a value of 3 in the Environment Pane" width="100%" />
<p class="caption">
(#fig:img-environment)object a is now visible withe a value of 3 in the Environment Pane
</p>
</div>
<ul>
<li><p>You can check what the variable a contains by typing it into your Console and pressing Enter.</p></li>
<li><p>Keep in mind that you won't see the result of your operations until you type the object into the R console and press Enter.</p></li>
</ul>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>a  <span class="do">## autoprinting</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a><span class="fu">print</span>(a) <span class="do">## explicit printing</span></span></code></pre></div>
<div class="webex-solution">
<button>
What output do you get when you type a into your console?
</button>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="dv">3</span></span></code></pre></div>
</div>
<p>You can now call this object at <em>any time</em> during your R session and perform calculations with it.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="dv">2</span> <span class="sc">*</span> a</span></code></pre></div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="dv">6</span></span></code></pre></div>
</div>
<p>What happens if we assign a value to a named object that <strong>already</strong> exists in our R environment??? for example</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>a</span></code></pre></div>
<p>The value of <code>a</code> is now 10.</p>
<p>You should see that the previous assignment is lost, <em>gone forever</em> and has been replaced by the new value.</p>
<p>We can assign lots of things to objects, and use them in calculations to build more objects.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a>c <span class="ot">&lt;-</span> a <span class="sc">+</span> b</span></code></pre></div>
<div class="warning">
<p>
Remember: If you now change the value of b, the value of c does
<em>not</em> change.
</p>
<p>
Objects are totally <strong>independent</strong> from each other once
they are made.
</p>
<p>
Overwriting objects with new values means the old value is lost.
</p>
</div>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">7</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a>b</span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a>c</span></code></pre></div>
<ul>
<li>What is the value of <code>c</code>?</li>
</ul>
<div class="webex-solution">
<button>
What is the value of c ?
</button>
<p>[1] 15</p>
<p>When <code>c</code> was created it was a product of <code>a</code> and <code>b</code> having values of 10 and 15 respectively.
If we re-ran the command <code>c &lt;- a + b</code> <em>after</em> changing the value of <code>b</code> <strong>then</strong> we would get a value of 17.</p>
</div>
<p>Look at the environment tab again - you should see it's starting to fill up now!</p>
<div class="info">
<p>
RStudio will by default save the objects in its memory when you close
a session.
</p>
<p>
These will then be there the next time you logon. It might seem nice
to be able to close things down and pick up where you left off, but its
actually quite dangerous. It’s messy, and can cause lots of problems
when we work with scripts later, so don’t do this!
</p>
<p>
To stop RStudio from saving objects by default go to Tools &gt;
Project Options option and change “Save workspace to .RData on exit” to
“No” or “Never”.
</p>
<p>
Instead we are going to learn how to use scripts to quickly re-run
analyses we have been working on.
</p>
</div>
<div id="choosing-names" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Choosing names</h3>
<ul>
<li><p>Use informative variable names. As a general rule, using meaningful names like <code>orange</code> and <code>apple</code> is preferred over arbitrary ones like <code>variable1</code> and <code>variable2</code>. Otherwise it's very hard to remember what the contents of different variables actually are.</p></li>
<li><p>Use short variable names. Typing is a pain and no-one likes doing it. So we much prefer to use a name like <code>apple</code> over a name like <code>pink_lady_apple</code>.</p></li>
<li><p>Use one of the conventional naming styles for multi-word variable names. R only lets you use certain things as <strong>legal</strong> names. Legal names must start with a letter <strong>not</strong> a number, which can then be followed by a sequence of letters, numbers, ., or _. R does not like using spaces. Upper and lower case names are allowed, but R is case sensitive so <code>Apple</code> and <code>apple</code> are different.</p></li>
<li><p>My favourite naming convention is <code>snake_case</code> short, lower case only, spaces between words are separated with a _. It's easy to read and easy to remember.</p></li>
</ul>
<div class="figure" style="text-align: center">
<img src="images/snake_case.png" alt="snake_case" width="80%" />
<p class="caption">
(#fig:unnamed-chunk-39)courtesy of Allison Horst
</p>
</div>
</div>
</div>
<div id="r-objects" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> R objects</h2>
<p>In R, there are five fundamental or "atomic" classes of objects:</p>
<ul>
<li><p>Character: These represent text or character strings.</p></li>
<li><p>Numeric (num) or Double (dbl): These are used for real numbers (e.g., decimal numbers).</p></li>
<li><p>Integer: Used for whole numbers.</p></li>
<li><p>Complex: For complex numbers.</p></li>
<li><p>Logical: Represented as True or False, these are used for logical values.</p></li>
</ul>
<p>The most basic type of R object is a vector. You can create empty vectors using the <code>vector()</code> function. The primary rule regarding vectors in R is that a vector can only contain objects of the same class.</p>
<p>However, as with any good rule, there's an exception, which is the "list." Lists are represented as vectors but can hold objects of different classes, which is why they're often used.</p>
<div id="numbers" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Numbers</h3>
<p>In R, both "dbl" and "num" refer to numeric data types, but there is a subtle difference between them:</p>
<ul>
<li><p>dbl ("double"): This refers to double-precision floating-point numbers, which are capable of storing real numbers with high precision. Double-precision numbers have more decimal places of accuracy and can represent a wider range of values without loss of precision. When you perform arithmetic operations, R typically returns results as "dbl" values by default.</p></li>
<li><p>num ("numeric"): "Num" is a more general term that includes not only double-precision floating-point numbers but also integer values. In R, integers are a subtype of numeric data. Numeric data can include both integers and double-precision floating-point numbers, depending on the specific data and how it is represented.</p></li>
</ul>
<p>So, "dbl" specifically denotes double-precision floating-point numbers, while "num" encompasses a broader range of numeric data, including both integers and double-precision numbers. In most cases, you can use "num" to work with numeric data in a more general sense, while "dbl" focuses on the higher-precision representation of real numbers.</p>
</div>
</div>
<div id="attributes" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Attributes</h2>
<p>R objects can come with attributes, which are essentially metadata for the object. These metadata are handy because they help describe the object. For instance, in a data frame, column names serve as attributes, clarifying the data contained in each column. Here are a few examples of R object attributes:</p>
<ul>
<li><p><code>names()</code> and <code>dimnames()</code></p></li>
<li><p>dimensions (e.g., for matrices and arrays) <code>dim()</code></p></li>
<li><p><code>class()</code> (e.g., integer, numeric)</p></li>
<li><p><code>length()</code></p></li>
<li><p>Other user-defined attributes or metadata</p></li>
</ul>
<p>You can access the attributes of an object, if it has any, by using the <code>attributes()</code> function. If an R object doesn't have any attributes, the <code>attributes()</code> function will return NULL.</p>
</div>
<div id="vectors" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> Vectors</h2>
<p>We have been working with R objects containing a single element of data (the technical term is <strong>scalar</strong>), but we will more commonly work with vectors. A vector is a sequence of elements, all of the same data type. These could be logical, numerical, character etc.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a>numeric_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a>character_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;fruits&quot;</span>, <span class="st">&quot;vegetables&quot;</span>, <span class="st">&quot;seeds&quot;</span>)</span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a>logical_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" tabindex="-1"></a>integer_vector <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span></code></pre></div>
<div id="coercion" class="section level3" number="2.6.1">
<h3><span class="header-section-number">2.6.1</span> Coercion</h3>
<p>In R, when different classes of objects are mixed together in a vector, coercion occurs to ensure that every element in the vector belongs to the same class. Coercion is the process of converting objects to a common class to make the combination reasonable. Let's see the effects of implicit coercion in the provided examples:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">2.3</span>, <span class="st">&quot;a&quot;</span>) <span class="co"># Here, we&#39;re mixing a numeric value (1.7) with a character value (&quot;a&quot;). To make them compatible, R coerces both elements into character values. So, y becomes a character vector.</span></span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="dv">2</span>) <span class="co"># In this case, we&#39;re combining a logical value (TRUE) with a numeric value (2). R coerces the logical value into 1, so y becomes a numeric vector.</span></span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="cn">TRUE</span>) <span class="co"># We&#39;re mixing a character value (&quot;a&quot;) with a logical value (TRUE). In this scenario, R coerces the logical value into a character value, resulting in y becoming a character vector.</span></span></code></pre></div>
<p>So, the outcome depends on how R can reasonably represent all the objects in the vector. It aims to create a vector of the most inclusive class to accommodate the mixed objects. Keep in mind that this coercion can lead to unexpected results, so it's essential to be aware of the implicit type conversion when mixing different data types in R.</p>
<p>Objects can also be <strong>explicitly coerced</strong> from one class to another using the as.* functions, if available.</p>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
<p>Create the following vector and check its class, then note what happens when you attempt to coerce to numeric, logical and character</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">5</span></span></code></pre></div>
</div>
</div>
<button id="displayTextunnamed-chunk-43" onclick="javascript:toggle(&#39;unnamed-chunk-43&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-43" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="fu">as.numeric</span>(x)</span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a><span class="fu">as.logical</span>(x)</span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a><span class="fu">as.character</span>(x)</span></code></pre></div>
<pre><code>## [1] 0 1 2 3 4 5
## [1] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
## [1] &quot;0&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot;</code></pre>
</div>
</div>
</div>
<p>Sometimes, R can’t figure out how to coerce an object and this can result in <code>NA</code>s being produced</p>
</div>
<div id="subsetting-vectors" class="section level3" number="2.6.2">
<h3><span class="header-section-number">2.6.2</span> Subsetting vectors</h3>
<p>With numerical indexing, you enter a vector of integers corresponding to the values in the vector you want to access in the form a[index], where a is the vector, and index is a vector of index values. For example, let’s use numerical indexing to get values from our character_vector</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a>character_vector[<span class="dv">2</span>]</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="co"># [1] &quot;vegetables&quot;</span></span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a>character_vector[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a><span class="co"># [1] &quot;fruits&quot;     &quot;vegetables&quot;</span></span>
<span id="cb41-7"><a href="#cb41-7" tabindex="-1"></a></span>
<span id="cb41-8"><a href="#cb41-8" tabindex="-1"></a>character_vector[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)]</span>
<span id="cb41-9"><a href="#cb41-9" tabindex="-1"></a><span class="co"># [1] &quot;fruits&quot; &quot;seeds&quot; </span></span></code></pre></div>
<p>We can also use logical indexing</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>numeric_vector <span class="sc">&lt;=</span><span class="dv">2</span></span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a><span class="co"># [1]  TRUE  TRUE FALSE</span></span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a>character_vector <span class="sc">==</span> <span class="st">&quot;fruits&quot;</span></span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a><span class="co">#[1]  TRUE FALSE FALSE</span></span></code></pre></div>
</div>
<div id="operations-on-vectors" class="section level3" number="2.6.3">
<h3><span class="header-section-number">2.6.3</span> Operations on vectors</h3>
<p>We can run the same basic operations on vectors as we did on scalars</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a><span class="co"># Operations will happen between vectors</span></span>
<span id="cb43-5"><a href="#cb43-5" tabindex="-1"></a>x<span class="sc">*</span>y</span></code></pre></div>
<pre><code>## [1]  2  6 12</code></pre>
<p>A very <em>super-wickedly</em>, <strong>important</strong>, concept: R likes to operate on vectors of the same length, so if it encounters two vectors of different lengths in a binary operation, it merely replicates (recycles) the smaller vector until it is the same length as the longest vector, then it does the operation.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)</span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" tabindex="-1"></a><span class="co"># Operations will happen between vectors</span></span>
<span id="cb45-5"><a href="#cb45-5" tabindex="-1"></a>x<span class="sc">*</span>y</span></code></pre></div>
<pre><code>[1] 1 4 3

Warning: longer object length is not a multiple of shorter object length[1] 1 4 3
</code></pre>
</div>
</div>
<div id="matrices" class="section level2" number="2.7">
<h2><span class="header-section-number">2.7</span> Matrices</h2>
<p>Matrices can be thought of as vectors with an added dimension attribute. This dimension attribute is a two-element integer vector specifying the number of rows and columns, which defines the shape and structure of the matrix.</p>
<div class="info">
<p>
Data frames are also two-dimensional but can store columns of
different data types - matrices are simpler as they consist of elements
of the same data type.
</p>
</div>
<p>Matrices are constructed "columns-first" so entries start in the "upper left" and and run down columns.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>) </span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="fu">attributes</span>(m)</span></code></pre></div>
<pre><code>## $dim
## [1] 2 3</code></pre>
<p>We can create matrices in several ways:</p>
<ul>
<li><p>Adding a <code>dim()</code> to existing vectors</p></li>
<li><p>Column/row-binding vectors with <code>cbind()</code> and <code>rbind()</code></p></li>
</ul>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb51-2"><a href="#cb51-2" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" tabindex="-1"></a><span class="fu">dim</span>(m) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb51-4"><a href="#cb51-4" tabindex="-1"></a></span>
<span id="cb51-5"><a href="#cb51-5" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span></span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb53-3"><a href="#cb53-3" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb53-4"><a href="#cb53-4" tabindex="-1"></a></span>
<span id="cb53-5"><a href="#cb53-5" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">cbind</span>(a,b,c)</span>
<span id="cb53-6"><a href="#cb53-6" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##      a b c
## [1,] 1 3 5
## [2,] 2 4 6</code></pre>
<p>You will see how in this last operation column names were added to the matrix, we can add, change or remove column and rownames on a matrix with <code>colnames()</code> and <code>rownames()</code></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a><span class="fu">rownames</span>(m) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;y&quot;</span>,<span class="st">&quot;z&quot;</span>)</span>
<span id="cb55-2"><a href="#cb55-2" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##   a b c
## y 1 3 5
## z 2 4 6</code></pre>
</div>
<div id="lists" class="section level2" number="2.8">
<h2><span class="header-section-number">2.8</span> Lists</h2>
<p>Lists are a versatile and fundamental data type in R. They set themselves apart from regular vectors by allowing you to store elements of different classes within the same list. This flexibility is what makes lists so powerful for various data structures and data manipulation tasks.</p>
<p>You can create lists explicitly using the <code>list()</code> function, which can take an arbitrary number of arguments. Lists, when combined with functions like the "apply" family, enable you to perform complex and versatile data manipulations and analyses in R. Lists are often used to represent heterogeneous data structures, such as datasets where different columns can have different data types and structures.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="st">&quot;apple&quot;</span>, <span class="cn">TRUE</span> )</span>
<span id="cb57-2"><a href="#cb57-2" tabindex="-1"></a>l</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1
## 
## [[2]]
## [1] &quot;apple&quot;
## 
## [[3]]
## [1] TRUE</code></pre>
<p>We can also create empty lists of set lengths with the <code>vector()</code> function, this can be useful for preallocating memory for iterations - as we will see later</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="dv">3</span>)</span>
<span id="cb59-2"><a href="#cb59-2" tabindex="-1"></a>l</span></code></pre></div>
<pre><code>## [[1]]
## NULL
## 
## [[2]]
## NULL
## 
## [[3]]
## NULL</code></pre>
<p>Lists can also have names</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" tabindex="-1"></a><span class="fu">names</span>(l) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>,<span class="st">&quot;orange&quot;</span>,<span class="st">&quot;pear&quot;</span>)</span></code></pre></div>
</div>
<div id="dataframes" class="section level2" number="2.9">
<h2><span class="header-section-number">2.9</span> Dataframes</h2>
<p>Data frames are essential for storing tabular data in R and find extensive use in various statistical modeling and data analysis applications. They offer a structured way to manage and work with data in R, and packages like dplyr, developed by Hadley Wickham, provide optimized functions for efficient data manipulation with data frames.</p>
<p>Here are some key characteristics and advantages of data frames:</p>
<ul>
<li><p>Tabular Structure: Data frames are a type of list, where each element in the list represents a column. The number of rows in each column is the same, and this tabular structure makes them suitable for working with datasets.</p></li>
<li><p>Mixed Data Types: Unlike matrices, data frames can contain columns with different classes of objects. This flexibility allows you to handle real-world datasets that often include variables of different data types.</p></li>
<li><p>Column and Row Names: Data frames include column names, which describe the variables or predictors. Additionally, they have a special attribute called "row.names" that provides information about each row in the data frame.</p></li>
<li><p>Creation and Conversion: Data frames can be created in various ways, such as reading data from files using functions like read.table() and read.csv(). You can also create data frames explicitly with data.frame().</p></li>
<li><p>Working with Data: Data frames are especially useful when working with datasets that require data cleaning, transformation, or merging. They provide a high level of data organization, and many R packages are designed to work seamlessly with data frames.</p></li>
<li><p>dplyr: The <code>dplyr</code> package is optimized for efficient data manipulation with data frames. It offers a set of functions to perform data operations quickly and intuitively.</p></li>
</ul>
<p>Data frames are a fundamental structure for managing tabular data in R. They excel in handling datasets with mixed data types and are essential for various data analysis and modeling tasks.</p>
<p>To create a dataframe from vectors we use the <code>data.frame()</code> function</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a>survey <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">&quot;index&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>),</span>
<span id="cb62-2"><a href="#cb62-2" tabindex="-1"></a>                     <span class="st">&quot;sex&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;f&quot;</span>),</span>
<span id="cb62-3"><a href="#cb62-3" tabindex="-1"></a>                     <span class="st">&quot;age&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">99</span>, <span class="dv">46</span>, <span class="dv">23</span>, <span class="dv">54</span>, <span class="dv">23</span>))</span></code></pre></div>
<p>There is one key argument to <code>data.frame()</code> and similar functions called <code>stringsAsFactors</code>. By default, the data.frame() function will automatically convert any string columns to a specific type of object called a factor in R. A factor is a nominal variable that has a well-specified possible set of values that it can take on. For example, one can create a factor sex that can only take on the values "male" and "female".</p>
<div class="warning">
<p>
Since R ver 4.0 release, stringsAsFactors is set FALSE by
default!
</p>
</div>
<p>However, as I’m sure you’ll discover, having R automatically convert your string data to factors can lead to lots of strange results. For example: if you have a factor of sex data, but then you want to add a new value called other, R will yell at you and return an error. I hate, hate, HATE when this happens. While there are very, very rare cases when I find factors useful, I almost always don’t want or need them. For this reason, I avoid them at all costs.</p>
<p>To tell R to not convert your string columns to factors, you need to include the argument <code>stringsAsFactors = FALSE</code> when using functions such as <code>data.frame()</code></p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" tabindex="-1"></a><span class="fu">str</span>(survey)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    5 obs. of  3 variables:
##  $ index: num  1 2 3 4 5
##  $ sex  : chr  &quot;m&quot; &quot;m&quot; &quot;m&quot; &quot;f&quot; ...
##  $ age  : num  99 46 23 54 23</code></pre>
<p>To access a specific column in a dataframe by name, you use the <code>$</code> operator in the form <code>df$name</code> where <code>df</code> is the name of the dataframe, and name is the name of the column you are interested in. This operation will then return the column you want as a vector.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" tabindex="-1"></a>survey<span class="sc">$</span>sex</span></code></pre></div>
<pre><code>## [1] &quot;m&quot; &quot;m&quot; &quot;m&quot; &quot;f&quot; &quot;f&quot;</code></pre>
<p>Because the <code>$</code> operator returns a vector, you can easily calculate descriptive statistics on columns of a dataframe by applying your favorite vector function (like <code>mean()</code>).</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" tabindex="-1"></a><span class="fu">mean</span>(survey<span class="sc">$</span>age)</span></code></pre></div>
<pre><code>## [1] 49</code></pre>
<p>We can also use the <code>$</code> to add new vectors to a dataframe</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" tabindex="-1"></a>survey<span class="sc">$</span>follow_up <span class="ot">&lt;-</span> <span class="fu">c</span>(T,F,T,F,F)</span>
<span id="cb69-2"><a href="#cb69-2" tabindex="-1"></a>survey</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="right">index</th>
<th align="left">sex</th>
<th align="right">age</th>
<th align="left">follow_up</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">m</td>
<td align="right">99</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">m</td>
<td align="right">46</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">m</td>
<td align="right">23</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">f</td>
<td align="right">54</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">f</td>
<td align="right">23</td>
<td align="left">FALSE</td>
</tr>
</tbody>
</table>
</div>
<p>Changing column names is easy with a combination of <code>names()</code> and indexing</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" tabindex="-1"></a><span class="fu">names</span>(survey)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;ID&quot;</span></span>
<span id="cb70-2"><a href="#cb70-2" tabindex="-1"></a></span>
<span id="cb70-3"><a href="#cb70-3" tabindex="-1"></a>survey</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="left">sex</th>
<th align="right">age</th>
<th align="left">follow_up</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">m</td>
<td align="right">99</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">m</td>
<td align="right">46</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">m</td>
<td align="right">23</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">f</td>
<td align="right">54</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">f</td>
<td align="right">23</td>
<td align="left">FALSE</td>
</tr>
</tbody>
</table>
</div>
<div id="slice-dataframes" class="section level3" number="2.9.1">
<h3><span class="header-section-number">2.9.1</span> Slice dataframes</h3>
<p>Matrices and dataframes can be sliced with <code>[,]</code></p>
<pre><code># Return row 1
df[1, ]


# Return column 5 as vector
df[, 5]

# Return column as data.frame
df[5]

# Rows 1:5 and column 2
df[1:5, 2]

# Single element
df[[1,2]]
</code></pre>
<p>Or slice with <code>subset</code></p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" tabindex="-1"></a>survey_slice <span class="ot">&lt;-</span> <span class="fu">subset</span>(<span class="at">x =</span> survey,</span>
<span id="cb72-2"><a href="#cb72-2" tabindex="-1"></a>      <span class="at">subset =</span> age <span class="sc">&lt;</span> <span class="dv">50</span> <span class="sc">&amp;</span></span>
<span id="cb72-3"><a href="#cb72-3" tabindex="-1"></a>               sex <span class="sc">==</span> <span class="st">&quot;m&quot;</span>)</span>
<span id="cb72-4"><a href="#cb72-4" tabindex="-1"></a></span>
<span id="cb72-5"><a href="#cb72-5" tabindex="-1"></a>survey_slice</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">ID</th>
<th align="left">sex</th>
<th align="right">age</th>
<th align="left">follow_up</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2</td>
<td align="right">2</td>
<td align="left">m</td>
<td align="right">46</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="left">3</td>
<td align="right">3</td>
<td align="left">m</td>
<td align="right">23</td>
<td align="left">TRUE</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="tibbles" class="section level3" number="2.9.2">
<h3><span class="header-section-number">2.9.2</span> Tibbles</h3>
<p>“Tibbles” are a new modern data frame. It keeps many important features of the original data frame</p>
<ul>
<li><p>A tibble never changes the input type.</p></li>
<li><p>A tibble can have columns that are lists.</p></li>
<li><p>A tibble can have non-standard variable names.</p>
<ul>
<li>can start with a number or contain spaces.
-to use this refer to these in a backtick.</li>
</ul></li>
<li><p>Tibbles only print the first 10 rows and all the columns that fit on a screen. - Each column displays its data type</p></li>
</ul>
<p>The way we make tibbles is very similar to making dataframes</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" tabindex="-1"></a>survey_tibble <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">&quot;index&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>),</span>
<span id="cb73-2"><a href="#cb73-2" tabindex="-1"></a>                     <span class="st">&quot;sex&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;f&quot;</span>),</span>
<span id="cb73-3"><a href="#cb73-3" tabindex="-1"></a>                     <span class="st">&quot;age&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">99</span>, <span class="dv">46</span>, <span class="dv">23</span>, <span class="dv">54</span>, <span class="dv">23</span>))</span></code></pre></div>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" tabindex="-1"></a><span class="co"># Some R functions for looking at tibbles and dataframes</span></span>
<span id="cb74-2"><a href="#cb74-2" tabindex="-1"></a></span>
<span id="cb74-3"><a href="#cb74-3" tabindex="-1"></a><span class="fu">head</span>(survey_tibble, <span class="at">n=</span><span class="dv">2</span>)</span>
<span id="cb74-4"><a href="#cb74-4" tabindex="-1"></a><span class="fu">tail</span>(survey_tibble, <span class="at">n=</span><span class="dv">1</span>)</span>
<span id="cb74-5"><a href="#cb74-5" tabindex="-1"></a><span class="fu">nrow</span>(survey_tibble)</span>
<span id="cb74-6"><a href="#cb74-6" tabindex="-1"></a><span class="fu">ncol</span>(survey_tibble)</span>
<span id="cb74-7"><a href="#cb74-7" tabindex="-1"></a><span class="fu">colnames</span>(survey_tibble)</span>
<span id="cb74-8"><a href="#cb74-8" tabindex="-1"></a><span class="fu">view</span>(survey_tibble)</span>
<span id="cb74-9"><a href="#cb74-9" tabindex="-1"></a><span class="fu">glimpse</span>(survey_tibble)</span>
<span id="cb74-10"><a href="#cb74-10" tabindex="-1"></a><span class="fu">str</span>(survey_tibble)</span></code></pre></div>
</div>
<div id="brackets-with-tibbles" class="section level3" number="2.9.3">
<h3><span class="header-section-number">2.9.3</span> Brackets with tibbles</h3>
<p>The behaviour of single [] indexing with tibbles is slightly different.</p>
<p>In a dataframe [,1] extracts a single column as a vector, but with a tibble this conversion does not occur. Instead it returns as a tibble with a single column, not a vector.</p>
<p>To extract a vector we must use:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" tabindex="-1"></a><span class="co"># pull function</span></span>
<span id="cb75-2"><a href="#cb75-2" tabindex="-1"></a><span class="fu">pull</span>(survey_tibble, sex)</span>
<span id="cb75-3"><a href="#cb75-3" tabindex="-1"></a></span>
<span id="cb75-4"><a href="#cb75-4" tabindex="-1"></a><span class="co"># double brackets</span></span>
<span id="cb75-5"><a href="#cb75-5" tabindex="-1"></a>survey_tibble[[<span class="dv">2</span>]]</span></code></pre></div>
<p><a href="https://tibble.tidyverse.org/" class="uri">https://tibble.tidyverse.org/</a></p>
<p><a href="https://cran.r-project.org/web/packages/tibble/vignettes/tibble.html" class="uri">https://cran.r-project.org/web/packages/tibble/vignettes/tibble.html</a></p>
</div>
</div>
<div id="matrix-dataframe-tibble-functions" class="section level2" number="2.10">
<h2><span class="header-section-number">2.10</span> Matrix, dataframe, tibble functions</h2>
<p>Important functions for understanding matrices and dataframes.</p>
<table>
<colgroup>
<col width="36%" />
<col width="63%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>head(x), tail(x)</code></td>
<td>Print the first few rows (or last few rows).</td>
</tr>
<tr class="even">
<td><code>View(x)</code></td>
<td>Open the entire object in a new window.</td>
</tr>
<tr class="odd">
<td><code>nrow(x), ncol(x), dim(x)</code></td>
<td>Count the number of rows and columns.</td>
</tr>
<tr class="even">
<td><code>rownames(), colnames(), names()</code></td>
<td>Show the row (or column) names.</td>
</tr>
<tr class="odd">
<td><code>str(x), summary(x)</code></td>
<td>Show the structure of the dataframe (i.e., dimensions and classes) and summary statistics.</td>
</tr>
</tbody>
</table>
</div>
<div id="functions" class="section level2" number="2.11">
<h2><span class="header-section-number">2.11</span> Functions</h2>
<p>Functions are the tools of R. Each one helps us to do a different task.</p>
<p>Take for example the function that we use to round a number to a certain number of digits - this function is called <code>round</code></p>
<p>Here's an example:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" tabindex="-1"></a><span class="fu">round</span>(<span class="at">x  =</span> <span class="fl">2.4326782647</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span></code></pre></div>
<p>We start the command with the function name <code>round</code>. The name is followed by parentheses <code>()</code>. Within these we place the <em>arguments</em> for the function, each of which is separated by a comma.</p>
<p>The arguments:</p>
<ul>
<li><p><code>x =</code> 2.4326782647 (the number we would like to round)</p></li>
<li><p><code>digits =</code> 2 (the number of decimal places we would like to round to)</p></li>
</ul>
<p><strong>Arguments are the inputs we give to a function</strong>. These arguments are in the form <code>name = value</code> the name specifies the argument, and the value is what we are providing to define the input. That is the first argument <code>x</code> is the number we would like to round, it has a value of 2.4326782647. The second argument <code>digits</code> is how we would like the number to be rounded and we specify 2. There is no limit to how many arguments a function <em>could</em> have.</p>
<div class="try">
<p>
Copy and paste the following code into the console.
</p>
</div>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" tabindex="-1"></a><span class="fu">help</span>(round)</span></code></pre></div>
<p>The help documentation for <code>round()</code>should appear in the bottom right help panel. In the usage section, we see that <code>round()</code>takes the following form:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" tabindex="-1"></a><span class="fu">round</span>(x, <span class="at">digits =</span> <span class="dv">0</span>)</span></code></pre></div>
<p>In the arguments section, there are explanations for each of the arguments. <code>x</code>is the number or vector where we wish to round values. <code>digits</code> is the number of decimal places to be used. In the description we can see that if no value is supplied for <code>digits</code> it will default to 0 or whole number rounding.</p>
<p>Read the 'Details' section to find out what happens when rounding when the last digit is a 5.</p>
<p>Let's try an example and just change the required argument <code>digits</code></p>
<div class="try">
<p>
Copy and paste the following code into the console.
</p>
</div>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" tabindex="-1"></a><span class="fu">round</span>(<span class="at">x  =</span> <span class="fl">2.4326782647</span>)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Now we can change the additional arguments to produce a different set of numbers.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" tabindex="-1"></a><span class="fu">round</span>(<span class="at">x  =</span> <span class="fl">2.4326782647</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 2.43</code></pre>
<p>This time R has still rounded the number, but it has done so to a set number of 'decimal places'.</p>
<p>Always remember to use the help documentation to help you understand what arguments a function requires.</p>
<div id="storing-the-output-of-functions" class="section level3" number="2.11.1">
<h3><span class="header-section-number">2.11.1</span> Storing the output of functions</h3>
<p>What if we need the answer from a function in a later calculation. The answer is to use the assignment operator again <code>&lt;-</code>.</p>
<p>In this example we assign values to two R objects that we can then call inside our R function <strong>as though we were putting numbers in directly</strong>.</p>
<div class="try">
<p>
Copy and paste the following code into the console.
</p>
</div>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" tabindex="-1"></a>number_of_digits <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb83-2"><a href="#cb83-2" tabindex="-1"></a></span>
<span id="cb83-3"><a href="#cb83-3" tabindex="-1"></a>my_number <span class="ot">&lt;-</span> <span class="fl">2.4326782647</span></span>
<span id="cb83-4"><a href="#cb83-4" tabindex="-1"></a></span>
<span id="cb83-5"><a href="#cb83-5" tabindex="-1"></a>rounded_number <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="at">x  =</span> my_number, </span>
<span id="cb83-6"><a href="#cb83-6" tabindex="-1"></a>                        <span class="at">digits =</span> number_of_digits)</span></code></pre></div>
<p><strong>What value is assigned to the R object <code>rounded_number</code></strong> <strong>?</strong></p>
<div class="webex-solution">
<button>
Solution
</button>
<p>[1] 2.433</p>
</div>
</div>
<div id="more-fun-with-functions" class="section level3" number="2.11.2">
<h3><span class="header-section-number">2.11.2</span> More fun with functions</h3>
<p>Copy and paste this:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">2.4326782647</span>, <span class="dv">2</span>)</span></code></pre></div>
<p>Looks like we don't even <em>have</em> to give the names of arguments for a function to still work. This works because the function <code>round</code> expects us to give the number value first, and the argument for rounding digits second. <em>But</em> this assumes we know the expected ordering within a function, this might be the case for functions we use a lot. If you give arguments their proper names <em>then</em> you can actually introduce them in <strong>any order you want</strong>.</p>
<p>Try this:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" tabindex="-1"></a><span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">2</span>, <span class="at">x  =</span> <span class="fl">2.4326782647</span>)</span></code></pre></div>
<p>But this gives a different answer</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" tabindex="-1"></a><span class="fu">round</span>(<span class="dv">2</span>, <span class="fl">2.4326782647</span>)</span></code></pre></div>
<div class="warning">
<p>
Remember naming arguments overrides the position defaults
</p>
</div>
<p>How do we <strong>know</strong> the argument orders and defaults? Well we get to know how a lot of functions work through practice, but we can also use <code>help()</code> .</p>
</div>
</div>
<div id="packages-1" class="section level2" number="2.12">
<h2><span class="header-section-number">2.12</span> Packages</h2>
<p>When you install R you will have access to a range of functions including options for data wrangling and statistical analysis. The functions that are included in the default installation are typically referred to as <strong>Base R</strong> and there is a useful cheat sheet that shows many Base R functions <a href="%5Bhttps://www.rstudio.com/wp-content/uploads/2016/05/base-r.pdf">here</a></p>
<p>However, the power of R is that it is extendable and open source - anyone can create a new <strong>package</strong> that extends the functions of R.</p>
<p>An R package is a container for various things including functions and data. These make it easy to do very complicated protocols by using custom-built functions. Later we will see how we can write our own simple functions. Packages are a lot like new apps extending the functionality of what your phone can do.</p>
<div id="loading-packages" class="section level3" number="2.12.1">
<h3><span class="header-section-number">2.12.1</span> Loading packages</h3>
<p>To use the functions from a package in our script they must be loaded <em>before</em> we call on the functions or data they contain. So the most sensible place to put library calls for packages is at the very <strong>top</strong> of our script.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" tabindex="-1"></a><span class="fu">library</span>(package_name)</span></code></pre></div>
</div>
<div id="calling-functions-from-packages" class="section level3" number="2.12.2">
<h3><span class="header-section-number">2.12.2</span> Calling Functions from Packages</h3>
<p>After loading a package, you can call its functions using either <code>function()</code> or the full <code>package_name::function_name()</code> syntax. This allows you to specify the package explicitly when using a particular function.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb88-2"><a href="#cb88-2" tabindex="-1"></a></span>
<span id="cb88-3"><a href="#cb88-3" tabindex="-1"></a><span class="fu">filter</span>(dataframe, condition)</span>
<span id="cb88-4"><a href="#cb88-4" tabindex="-1"></a></span>
<span id="cb88-5"><a href="#cb88-5" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">filter</span>(dataframe, conditions)</span></code></pre></div>
<p>Calling a function explicitly via its package can be useful for</p>
<ol style="list-style-type: decimal">
<li>Avoiding Conflicts:</li>
</ol>
<p>Sometimes, multiple packages may have functions with the same name. By explicitly specifying the package with package_name::, you avoid naming conflicts and ensure that R uses the function from the intended package.</p>
<ol start="2" style="list-style-type: decimal">
<li>Clarity:</li>
</ol>
<p>It can make your code more transparent and easier to understand, especially in cases where the function's origin is not immediately obvious. This is helpful for both yourself and others who read your code.</p>
<blockquote>
<p>Though it is still good practice to comment at the top of your script that this package is required even if you don't include library(package)</p>
</blockquote>
<ol start="3" style="list-style-type: decimal">
<li>Debugging:</li>
</ol>
<p>When troubleshooting issues or debugging code, specifying the package source of a function can help pinpoint problems and ensure that the correct function is being used.</p>
</div>
</div>
<div id="error" class="section level2" number="2.13">
<h2><span class="header-section-number">2.13</span> Error</h2>
<p>Things will go wrong eventually, they always do...</p>
<p>R is <em>very</em> pedantic, even the smallest typo can result in failure and typos are impossilbe to avoid. So we will make mistakes. One type of mistake we will make is an <strong>error</strong>. The code fails to run. The most common causes for an error are:</p>
<ul>
<li><p>typos</p></li>
<li><p>missing commas</p></li>
<li><p>missing brackets</p></li>
</ul>
<p>There's nothing wrong with making <em>lots</em> of errors. The trick is not to panic or get frustrated, but to read the error message and our script carefully and start to <em>debug</em> (more on this later)...</p>
<p>... and sometimes we need to walk away and come back later!</p>
<div class="try">
<p>
Try typing the command <code>help()</code> into the R console, it
should open a new tab on the bottom right.
</p>
<p>
Put a function or package into the brackets to get help with a
specific topic
</p>
</div>
<div class="figure" style="text-align: center">
<img src="images/Error.jpg" alt="R Error" width="80%" />
<p class="caption">
(#fig:unnamed-chunk-82)courtesy of Allison Horst
</p>
</div>
</div>
<div id="activity" class="section level2" number="2.14">
<h2><span class="header-section-number">2.14</span> Activity</h2>
<div id="complete-this-quiz" class="section level3" number="2.14.1">
<h3><span class="header-section-number">2.14.1</span> Complete this Quiz</h3>
<p>When you get the correct answer, the answer box will turn green. Sometimes this doesn't work on Internet Explorer or Edge so be sure to use Chrome or Firefox.</p>
<p><strong>Question 1.</strong> What is the output from 5^4</p>
<p><input class='webex-solveme nospaces' size='3' data-answer='["625"]'/></p>
<p><strong>Question 2.</strong> What answer will you get when you type <code>2+2 = 4</code> into the R console?</p>
<p><select class='webex-select'><option value='blank'></option><option value=''>TRUE</option><option value=''>FALSE</option><option value='answer'>Error</option></select></p>
<div class="webex-solution">
<button>
Solution
</button>
<p>If we wanted R to make a judgement we must use == not = otherwise we will get an Error message</p>
</div>
<p><strong>Question 3.</strong> What symbol do I use if I want to <strong>assign</strong> a value or output of a function to an R object</p>
<p><input class='webex-solveme nospaces' size='2' data-answer='["<-"]'/></p>
<p><strong>Question 4.</strong> What is the value of <code>a</code> if I ran the following commands?</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" tabindex="-1"></a>a <span class="ot">&lt;-</span>  <span class="dv">12</span><span class="sc">*</span><span class="dv">2</span></span>
<span id="cb89-2"><a href="#cb89-2" tabindex="-1"></a></span>
<span id="cb89-3"><a href="#cb89-3" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">5</span></span></code></pre></div>
<p><input class='webex-solveme nospaces' size='1' data-answer='["5"]'/></p>
<p><strong>Question 5.</strong> Which of these variable naming conventions is <strong>not</strong> written correctly?</p>
<p><select class='webex-select'><option value='blank'></option><option value=''>snake_case</option><option value=''>camelCase</option><option value='answer'>Screaming_Snake_Case</option><option value=''>kebab-case</option></select></p>
<p><strong>Question 6.</strong> What should I type into the R console if I want <code>help</code> with the <code>round()</code> function?</p>
<p><input class='webex-solveme nospaces' size='11' data-answer='["help(round)"]'/></p>
<p><strong>Question 7.</strong> Which of these statements about function arguments <strong>is not true</strong></p>
<p><select class='webex-select'><option value='blank'></option><option value=''>Arguments are the inputs we give to a function</option><option value='answer'>Values for R arguments must always be defined by the user</option><option value=''>Naming arguments supersedes position in a function</option><option value=''>There is no limit to the number of arguments a function could have</option></select></p>
<p><strong>Question 8.</strong> Evaluate this statement "An R Package can contain code functions, data, or both."</p>
<p><select class='webex-select'><option value='blank'></option><option value='answer'>TRUE</option><option value=''>FALSE</option></select></p>
<!--chapter:end:01-intro-to-r.Rmd-->
</div>
</div>
</div>
<div id="part-organising-workflows" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) Organising workflows</h1>
</div>
<div id="project-oriented-workflows" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Project-oriented workflows</h1>
<p>In RStudio, a project is a way to organize your work within the IDE. It's a fundamental concept designed to enhance your workflow by providing a structured and efficient means of managing your R-related tasks and files. Here's why R projects are useful:</p>
<p><strong>1. Organized File Structure:</strong> R projects encourage you to maintain a well-organized file structure for your work. Instead of having scattered R scripts, data files, and figures, you create a dedicated folder for each project. This folder typically contains all project-related materials, including data, code, figures, notes, and any other relevant files.</p>
<p><strong>2. Working Directory Management:</strong> When you open an R project in RStudio, it automatically sets the working directory to the project's folder. This ensures that all file paths are relative to the project's location. This working directory intentionality eliminates the need for setting working directories manually or using absolute paths in your code.</p>
<p><strong>3. Portability and Collaboration:</strong> R projects make your work more portable and collaborative. Since all paths are relative to the project folder, the project can be easily shared with others. It ensures that the code works consistently across different computers and for other users, promoting collaboration and reproducibility.</p>
<p><strong>4. RStudio Integration:</strong> RStudio integrates project management seamlessly. You can designate a folder as an R project, and RStudio leaves a <code>.Rproj</code> file in that folder to store project-specific settings. When you double-click on this file, it opens a fresh instance of RStudio with the project's working directory and file browser pointed at the project folder.</p>
<p><strong>5. Efficient Workflow:</strong> RStudio provides various menu options and keyboard shortcuts for managing projects. This includes the ability to open existing projects, switch between projects, and even launch multiple instances of RStudio for different projects.</p>
<p>In essence, R projects help you maintain a clean and organized workspace, improve collaboration, and ensure that your work remains reproducible and transferable across different environments and over time. It's a best practice for data scientists and analysts working with R, as it fosters the disciplined use of relative file paths and working directories, which is crucial for the reliability and scalability of your R projects.</p>
<div id="setting-up-a-new-project" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Setting up a new project</h2>
<p>You should start a new R project when you begin working on a distinct task, research project, or analysis. This ensures that your work is well-organized, and it's especially beneficial when you need to collaborate, share, or revisit the project later.</p>
<p>To create and open an R project in RStudio:</p>
<ol style="list-style-type: decimal">
<li><p>Go to "File" in the RStudio menu.</p></li>
<li><p>Select "New Project..."</p></li>
<li><p>Choose a project type or create a new directory for the project.</p></li>
<li><p>Click "Create Project."</p></li>
</ol>
<p>The new project will be created with a .Rproj file. You can open it by double-clicking on this file or by using the "File" menu in RStudio.</p>
<p>This will set up a dedicated workspace for your project, ensuring that the working directory and file paths are appropriately managed.</p>
</div>
<div id="avoiding-setwd-and-promoting-safe-file-paths" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Avoiding setwd() and Promoting Safe File Paths:</h2>
<p>To maintain a clean and efficient workflow in R, it's advisable to avoid using <code>setwd()</code> at the beginning of each script. This practice promotes the use of safe file paths and is particularly important for projects with multiple collaborators or when working across different computers.</p>
<div id="absolute-vs.-relative-paths" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Absolute vs. Relative Paths:</h3>
<p>While absolute file paths provide an explicit way to locate resources, they have significant drawbacks, such as incompatibility and reduced reproducibility. Relative file paths, on the other hand, are relative to the current working directory, making them shorter, more portable, and more reproducible.</p>
<p>An <strong>Absolute file path</strong> is a path that contains the entire path to a file or directory starting from your Home directory and ending at the file or directory you wish to access e.g.</p>
<pre><code>/home/your-username/project/data/penguins_raw.csv</code></pre>
<ul>
<li><p>If you share files, another user won’t have the same directory structure as you, so they will need to recreate the file paths</p></li>
<li><p>If you alter your directory structure, you’ll need to rewrite the paths</p></li>
<li><p>An absolute file path will likely be longer than a relative path, more of the backslashes will need to be edited, so there is more scope for error.</p></li>
</ul>
<p>A <strong>Relative filepath</strong> is the path that is relative to the working directory location on your computer.</p>
<p>When you use RStudio Projects, wherever the <code>.Rproj</code> file is located is set to the working directory. This means that if the <code>.Rproj</code> file is located in your project folder then the relative path to your data is:</p>
<pre><code>data/penguins_raw.csv</code></pre>
<p>This filepath is shorter and it means you could share your project with someone else and the script would run without any editing.</p>
</div>
<div id="organizing-projects" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Organizing Projects:</h3>
<p>A key aspect of this workflow is organizing each logical project into a separate folder on your computer. This ensures that files and scripts are well-structured, making it easier to manage your work.</p>
</div>
<div id="the-here-package" class="section level3" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> The <code>here</code> Package:</h3>
<p>To further enhance this organization and ensure that file paths are independent of specific working directories, the here package comes into play. The <code>here()</code> function provided by this package builds file paths relative to the top-level directory of your project.</p>
<pre><code>my_project.RProj/
    |- data/
    |   |- raw/
    |       |- penguins_raw.csv
    |   |- processed/
    |- scripts/
    |   |- analysis.R
    |- results/

</code></pre>
<p>In the above project example you have raw data files in the data/raw directory, scripts in the scripts directory, and you want to save processed data in the data/processed directory.</p>
<p>To access this data using a relative filepath we need:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" tabindex="-1"></a>raw_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/raw/penguins_raw.csv&quot;</span>)</span></code></pre></div>
<p>To access this data with <code>here</code> we provide the directories and desired file, and <code>here()</code> builds the required filepath starting at the top level of our project each time</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb94-2"><a href="#cb94-2" tabindex="-1"></a></span>
<span id="cb94-3"><a href="#cb94-3" tabindex="-1"></a>raw_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;raw&quot;</span>, <span class="st">&quot;penguins.csv&quot;</span>))</span></code></pre></div>
<div id="here-and-rmarkdown" class="section level4" number="3.2.3.1">
<h4><span class="header-section-number">3.2.3.1</span> here and Rmarkdown</h4>
<p>One quirk of working in a <code>.Rmd</code> Rmarkdown file is that when you "knit" all code is compiled with the working directory as the folder that .Rmd file lives in, but if you are working in a script <code>.R</code> or in a live session then the default working directory is the top level of the project file. This frustrating and confusing process can lead to errors when attempting to compile documents.</p>
<p><strong>BUT</strong> if you use the <code>here</code> package then this default behaviour is overridden. The working directory when knitting will be the top-level .Rproj location again!</p>
</div>
</div>
<div id="reading" class="section level3" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> Reading</h3>
<p><a href="https://github.com/jennybc/here_here" class="uri">https://github.com/jennybc/here_here</a></p>
<p><a href="https://cran.r-project.org/web/packages/here/index.html" class="uri">https://cran.r-project.org/web/packages/here/index.html</a></p>
</div>
</div>
<div id="blank-slates" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Blank slates</h2>
<p>When working on data analysis and coding projects in R, it's crucial to ensure that your analysis remains clean, reproducible, and free from hidden dependencies.</p>
<p>Hidden dependencies are elements in your R session that might not be immediately apparent but can significantly impact the reliability and predictability of your work.</p>
<p>For example many data analysis scripts start with the command <code>rm(list = ls())</code>. While this command clears user-created objects from the workspace, it leaves hidden dependencies as it does not reset the R session, and can cause issues such as:</p>
<ul>
<li><p><strong>Hidden Dependencies:</strong> Users might unintentionally rely on packages or settings applied in the current session.</p></li>
<li><p><strong>Incomplete Reset:</strong> Package attachments made with <code>library()</code> persist, and customized options remain set.</p></li>
<li><p><strong>Working Directory:</strong> The working directory is not affected, potentially causing path-related problems in future scripts.</p></li>
</ul>
<div id="restart-r-sessions" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Restart R sessions</h3>
<p>Restarting R sessions and using scripts as your history is a best practice for maintaining a clean, reproducible, and efficient workflow. It addresses the limitations of <code>rm(list = ls())</code> by ensuring a complete reset and minimizing hidden dependencies, enhancing code organization, and ensuring your analysis remains robust and predictable across sessions and when shared with others.</p>
<p><img src="images/rstudio-workspace.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div id="basic-importexport" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Basic Import/Export</h1>
<p>When loading data into R, the choice of method matters, especially for tabular data like CSV files. There are three common approaches:</p>
<ul>
<li><p>base R's <code>read.csv()</code></p></li>
<li><p>the <code>data.table</code> package with <code>fread()</code></p></li>
</ul>
<p>the <code>readr</code> package with functions like <code>read_csv()</code></p>
<p>The performance gains of <code>data.table</code> and <code>readr</code> become significant as data size grows, especially for datasets with many rows. For files larger than 100 MB, <code>fread()</code> and <code>read_csv()</code> are about five times faster than <code>read.csv()</code>. However, the choice should consider memory usage, as very large datasets may impact it.</p>
<p>Keep in mind that <code>data.table</code> and <code>readr</code> are separate packages, requiring installation and loading.</p>
<blockquote>
<p>readr functions</p>
</blockquote>
<table>
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>read_csv()</code></td>
<td>CSV file format</td>
</tr>
<tr class="even">
<td><code>read_tsv()</code></td>
<td>TSV (Tab-Separated Values) file format</td>
</tr>
<tr class="odd">
<td><code>read_delim()</code></td>
<td>User-specified delimited files</td>
</tr>
<tr class="even">
<td><code>read_fwf()</code></td>
<td>Fixed-width files</td>
</tr>
<tr class="odd">
<td><code>read_table()</code></td>
<td>Whitespace-separated files</td>
</tr>
<tr class="even">
<td><code>read_log()</code></td>
<td>Web log files</td>
</tr>
</tbody>
</table>
<div id="export" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Export</h2>
<p>Each of these packages and functions has the inverse "write" function to produce files in a variety of formats from R objects.</p>
</div>
<div id="r-data-files" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> R data files</h2>
<p>R has binary file formats for easy saving and loading of data, <code>.Rdata</code> and <code>RDS</code>:</p>
<p><strong>.Rdata</strong> file is a binary file format in R used to save the entire workspace, which includes objects, functions, data frames, and more. It captures the current R session's state, allowing you to save and load the entire workspace, including all objects, in a single file.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" tabindex="-1"></a><span class="co"># Create some sample data</span></span>
<span id="cb95-2"><a href="#cb95-2" tabindex="-1"></a>my_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb95-3"><a href="#cb95-3" tabindex="-1"></a>  <span class="at">ID =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,</span>
<span id="cb95-4"><a href="#cb95-4" tabindex="-1"></a>  <span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Alice&quot;</span>, <span class="st">&quot;Bob&quot;</span>, <span class="st">&quot;Charlie&quot;</span>),</span>
<span id="cb95-5"><a href="#cb95-5" tabindex="-1"></a>  <span class="at">Score =</span> <span class="fu">c</span>(<span class="dv">95</span>, <span class="dv">87</span>, <span class="dv">92</span>)</span>
<span id="cb95-6"><a href="#cb95-6" tabindex="-1"></a>)</span>
<span id="cb95-7"><a href="#cb95-7" tabindex="-1"></a></span>
<span id="cb95-8"><a href="#cb95-8" tabindex="-1"></a><span class="co"># Save the entire workspace to an .Rdata file</span></span>
<span id="cb95-9"><a href="#cb95-9" tabindex="-1"></a><span class="fu">save.image</span>(<span class="at">file =</span> <span class="st">&quot;my_workspace.Rdata&quot;</span>)</span>
<span id="cb95-10"><a href="#cb95-10" tabindex="-1"></a></span>
<span id="cb95-11"><a href="#cb95-11" tabindex="-1"></a><span class="co"># Clear the current workspace</span></span>
<span id="cb95-12"><a href="#cb95-12" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb95-13"><a href="#cb95-13" tabindex="-1"></a></span>
<span id="cb95-14"><a href="#cb95-14" tabindex="-1"></a><span class="co"># Load the entire workspace from the .Rdata file</span></span>
<span id="cb95-15"><a href="#cb95-15" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;my_workspace.Rdata&quot;</span>)</span>
<span id="cb95-16"><a href="#cb95-16" tabindex="-1"></a></span>
<span id="cb95-17"><a href="#cb95-17" tabindex="-1"></a><span class="co"># Access the loaded data</span></span>
<span id="cb95-18"><a href="#cb95-18" tabindex="-1"></a><span class="fu">print</span>(my_data)</span></code></pre></div>
<p><strong>.RDS</strong> file, or R Data Serialization file, is a binary file format in R used to save individual R objects. Unlike .Rdata, it is not meant to save the entire workspace but specific objects or data structures.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" tabindex="-1"></a><span class="co"># Create some sample data</span></span>
<span id="cb96-2"><a href="#cb96-2" tabindex="-1"></a>my_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb96-3"><a href="#cb96-3" tabindex="-1"></a>  <span class="at">ID =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,</span>
<span id="cb96-4"><a href="#cb96-4" tabindex="-1"></a>  <span class="at">Name =</span> <span class="fu">c</span>(<span class="st">&quot;Alice&quot;</span>, <span class="st">&quot;Bob&quot;</span>, <span class="st">&quot;Charlie&quot;</span>),</span>
<span id="cb96-5"><a href="#cb96-5" tabindex="-1"></a>  <span class="at">Score =</span> <span class="fu">c</span>(<span class="dv">95</span>, <span class="dv">87</span>, <span class="dv">92</span>)</span>
<span id="cb96-6"><a href="#cb96-6" tabindex="-1"></a>)</span>
<span id="cb96-7"><a href="#cb96-7" tabindex="-1"></a></span>
<span id="cb96-8"><a href="#cb96-8" tabindex="-1"></a><span class="co"># Save the data frame to an .RDS file</span></span>
<span id="cb96-9"><a href="#cb96-9" tabindex="-1"></a><span class="fu">saveRDS</span>(my_data, <span class="at">file =</span> <span class="st">&quot;my_data.RDS&quot;</span>)</span>
<span id="cb96-10"><a href="#cb96-10" tabindex="-1"></a></span>
<span id="cb96-11"><a href="#cb96-11" tabindex="-1"></a><span class="co"># Clear the current workspace</span></span>
<span id="cb96-12"><a href="#cb96-12" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb96-13"><a href="#cb96-13" tabindex="-1"></a></span>
<span id="cb96-14"><a href="#cb96-14" tabindex="-1"></a><span class="co"># Load the data frame from the .RDS file</span></span>
<span id="cb96-15"><a href="#cb96-15" tabindex="-1"></a>loaded_data <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;my_data.RDS&quot;</span>)</span>
<span id="cb96-16"><a href="#cb96-16" tabindex="-1"></a></span>
<span id="cb96-17"><a href="#cb96-17" tabindex="-1"></a><span class="co"># Access the loaded data</span></span>
<span id="cb96-18"><a href="#cb96-18" tabindex="-1"></a><span class="fu">print</span>(loaded_data)</span></code></pre></div>
<p>Using these file formats can have several advantages:</p>
<p><strong>Preservation of Data Types and Structure:</strong> .RDS files preserve the original data types and structure of R objects, including lists, data frames, functions and more.</p>
<p><strong>Efficiency and Speed:</strong> Reading and writing data in the .RDS format is more efficient and faster than working with text-based formats like CSV.</p>
<p><strong>Control Over Specific Objects:</strong> .RDS files allow you to save and load specific R objects or datasets, providing control and flexibility.</p>
<div id="objects-that-take-a-long-time" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Objects that take a long time</h3>
<p>If there are parts of your analysis that are time-consuming to execute, it's an indication that it's a suitable time to adopt a modular approach. This approach involves dividing your analysis into distinct phases, with each phase having its dedicated script and resulting outputs.</p>
<p>You can address this by isolating computationally intensive steps in separate scripts and saving the critical object to a file using <code>saveRDS</code>. Subsequently, you can create scripts for downstream tasks that reload the essential object with <code>readRDS</code>. Breaking down your analysis into logical steps with clear inputs and outputs is generally a sound practice.</p>
</div>
</div>
</div>
<div id="scripts" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Scripts</h1>
<p>To ensure clarity and understanding, begin your script with a brief description of its purpose. This description will serve as a reference point for anyone who accesses your script. Even if you make updates later on, having this initial description will help maintain clarity and context, preventing confusion when revisiting the code in the future.</p>
<div id="organised-scripts" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Organised scripts</h2>
<p>Load all necessary packages at the beginning of your script.
It's common to start with basic packages and then add more specialized libraries as your analysis progresses. However, it's crucial to load all required packages at the beginning of your script. This practice ensures that when you or someone else needs to run the script again, all necessary libraries are readily available, preventing issues in the middle of execution due to unrecognized functions. Small coding details matter.</p>
<p>Name your code sections and use them for quick navigation.
As your code grows, it may become extensive and challenging to manage. To keep it organized, divide your code into sections, each with a specific name, which can be folded or unfolded for easy navigation. You can also use the 'drop-up' menu at the bottom of the script screen to move between sections.</p>
<p>To create a new code section, insert "####" or "----" at the end of a comment that marks the beginning of a new section.</p>
<p><img src="images/organised%20script.png" width="80%" style="display: block; margin: auto;" /></p>
<p>I understand, we all have good intentions, but we often neglect the task of thoroughly commenting our code. I've made that promise to myself many times, but even now, I struggle to do it consistently. Why, you ask? Here are a few reasons:</p>
<ol style="list-style-type: decimal">
<li>I often tell myself that the analysis itself is more crucial.</li>
<li>I believe I understand my own code.</li>
<li>I usually don't have immediate collaborators who need to use my code.</li>
</ol>
<p>However, these arguments are somewhat shortsighted. The reality is that:</p>
<ul>
<li>The most valuable and relevant analysis loses its value if neither you nor others can understand it. (More on this below)</li>
<li>While you may know what you're doing at the moment, it won't feel the same way in a month or two when you've moved on to another project, and someone innocently asks you about how you defined a critical variable. Our memory is unreliable. It's important not to rely on it for every piece of code you produce.</li>
<li>Even if you don't have active collaborators at the time of your analysis, someone will eventually need to use your code. You won't be in the same position forever. You're creating a legacy that, someday, someone will rely on, no matter how distant that day may seem right now.</li>
</ul>
<p>So, what makes code good and reproducible?</p>
<ol style="list-style-type: decimal">
<li>Thoughtful and clear comments.</li>
<li>Code that is logical and efficient.</li>
<li>Code that has been appropriately timed and tested.</li>
</ol>
</div>
<div id="use-style-guides" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Use style guides</h2>
<p>Consider using a style guide, such as the <a href="https://style.tidyverse.org/">tidyverse style guide</a>, is a beneficial practice for several reasons:</p>
<p>Consistency: A style guide enforces consistent code formatting and naming conventions throughout your project. This consistency improves code readability and makes it easier for you and others to understand the code. When you have multiple people working on a project, a shared style guide ensures that everyone's code looks similar, reducing confusion and errors.</p>
<p>Readability: Following a style guide leads to more readable code. Code is often read more frequently than it is written, so making it easy to understand is crucial. The tidyverse style guide, for example, emphasizes clear and self-explanatory code, improving comprehension for both current and future users. Good coding style is like correct punctuation: you can manage without it, butitsuremakesthingseasiertoread</p>
<p>Collaboration: When working with a team, adhering to a common style guide makes it easier to collaborate. It reduces the friction associated with different team members using varying coding styles and preferences. This streamlines code reviews and simplifies the process of maintaining and extending the codebase.</p>
<p>Error Reduction: A style guide can help identify and prevent common coding errors. It promotes best practices and can include guidelines for avoiding pitfalls and potential issues. This reduces the likelihood of bugs and enhances the overall quality of the code.</p>
</div>
<div id="separate-your-scripts" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Separate your scripts</h2>
<p>Separating your analysis into distinct scripts for different steps is a sound practice in data analysis. Each script can focus on a specific task or step, making your work more organized and understandable.</p>
<p>You can use the <code>source</code> function in R to run previous dependencies, ensuring that you can reproduce your work easily. Additionally, for computationally intensive processes or when dealing with large datasets, you can save and load intermediate results in RDS format. This approach not only conserves memory but also saves time when re-running your analysis.</p>
<pre><code>project_folder/
│
├── data/
│   ├── data.csv
│   ├── processed_data.rds
│
├── scripts/
│   ├── data_preparation.R
│   ├── data_analysis.R
│   ├── visualization.R
│   ├── helper_functions.R
│
├── output/
│   ├── result.csv
│
├── README.md
│
├── project.Rproj
</code></pre>
</div>
<div id="activity-1" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Activity</h2>
<p>Using the <a href="https://style.tidyverse.org/index.html">Tidyverse style guide</a> for help, how could you improve the layout and readability of this script?</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" tabindex="-1"></a><span class="co"># Install and load necessary packages</span></span>
<span id="cb98-2"><a href="#cb98-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb98-3"><a href="#cb98-3" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb98-4"><a href="#cb98-4" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb98-5"><a href="#cb98-5" tabindex="-1"></a></span>
<span id="cb98-6"><a href="#cb98-6" tabindex="-1"></a>penguins_clean <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(penguins_raw)</span>
<span id="cb98-7"><a href="#cb98-7" tabindex="-1"></a></span>
<span id="cb98-8"><a href="#cb98-8" tabindex="-1"></a></span>
<span id="cb98-9"><a href="#cb98-9" tabindex="-1"></a><span class="do">## Data is selected by species, island, culmen length and depth and flipper, then NAs are dropped and a new column is made of length/depth and the mean is summaries for flipper length and length/depth ratio</span></span>
<span id="cb98-10"><a href="#cb98-10" tabindex="-1"></a>penguins_clean <span class="sc">|&gt;</span> <span class="fu">select</span>(species, island, culmen_length_mm, culmen_depth_mm, flipper_length_mm)  <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(culmen_length_mm, culmen_depth_mm, flipper_length_mm) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">culmen_ratio =</span> culmen_length_mm <span class="sc">/</span> culmen_depth_mm) <span class="sc">|&gt;</span> <span class="fu">group_by</span>(species, island) <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(flipper_length_mm), <span class="at">mean_culmen_ratio =</span> <span class="fu">mean</span>(culmen_ratio)) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(species, island) <span class="ot">-&gt;</span> penguins_culmen_ratio</span>
<span id="cb98-11"><a href="#cb98-11" tabindex="-1"></a></span>
<span id="cb98-12"><a href="#cb98-12" tabindex="-1"></a><span class="do">## View summary table</span></span>
<span id="cb98-13"><a href="#cb98-13" tabindex="-1"></a><span class="fu">print</span>(penguins_culmen_ratio)</span>
<span id="cb98-14"><a href="#cb98-14" tabindex="-1"></a></span>
<span id="cb98-15"><a href="#cb98-15" tabindex="-1"></a></span>
<span id="cb98-16"><a href="#cb98-16" tabindex="-1"></a><span class="do">### Data visualization </span></span>
<span id="cb98-17"><a href="#cb98-17" tabindex="-1"></a>penguins_clean <span class="sc">|&gt;</span></span>
<span id="cb98-18"><a href="#cb98-18" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> culmen_length_mm, <span class="at">y =</span> culmen_depth_mm, <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb98-19"><a href="#cb98-19" tabindex="-1"></a>          <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb98-20"><a href="#cb98-20" tabindex="-1"></a>                <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Culmen Length (mm)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Culmen Depth (mm)&quot;</span>) <span class="sc">+</span></span>
<span id="cb98-21"><a href="#cb98-21" tabindex="-1"></a>                      <span class="fu">theme_minimal</span>()</span></code></pre></div>
<div class="webex-solution">
<button>
Check your script
</button>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" tabindex="-1"></a><span class="co"># Packages ----</span></span>
<span id="cb99-2"><a href="#cb99-2" tabindex="-1"></a><span class="co"># Install and load necessary packages</span></span>
<span id="cb99-3"><a href="#cb99-3" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb99-4"><a href="#cb99-4" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb99-5"><a href="#cb99-5" tabindex="-1"></a><span class="co"># Loads the penguins dataset</span></span>
<span id="cb99-6"><a href="#cb99-6" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb99-7"><a href="#cb99-7" tabindex="-1"></a></span>
<span id="cb99-8"><a href="#cb99-8" tabindex="-1"></a></span>
<span id="cb99-9"><a href="#cb99-9" tabindex="-1"></a><span class="co"># Clean the data ----</span></span>
<span id="cb99-10"><a href="#cb99-10" tabindex="-1"></a>penguins_raw <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(penguins_raw)</span>
<span id="cb99-11"><a href="#cb99-11" tabindex="-1"></a></span>
<span id="cb99-12"><a href="#cb99-12" tabindex="-1"></a><span class="co"># Analysis----</span></span>
<span id="cb99-13"><a href="#cb99-13" tabindex="-1"></a><span class="co"># Data exploration and manipulation to make culmen ratio</span></span>
<span id="cb99-14"><a href="#cb99-14" tabindex="-1"></a>penguins_culmen_ratio <span class="ot">&lt;-</span> penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb99-15"><a href="#cb99-15" tabindex="-1"></a>  <span class="fu">select</span>(species, island, culmen_length_mm, culmen_depth_mm, flipper_length_mm)  <span class="sc">|&gt;</span> </span>
<span id="cb99-16"><a href="#cb99-16" tabindex="-1"></a>  <span class="fu">drop_na</span>(culmen_length_mm, culmen_depth_mm, flipper_length_mm) <span class="sc">|&gt;</span> </span>
<span id="cb99-17"><a href="#cb99-17" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">culmen_ratio =</span> culmen_length_mm <span class="sc">/</span> culmen_depth_mm) <span class="sc">|&gt;</span></span>
<span id="cb99-18"><a href="#cb99-18" tabindex="-1"></a>  <span class="fu">group_by</span>(species, island) <span class="sc">|&gt;</span></span>
<span id="cb99-19"><a href="#cb99-19" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(flipper_length_mm), </span>
<span id="cb99-20"><a href="#cb99-20" tabindex="-1"></a>            <span class="at">mean_culmen_ratio =</span> <span class="fu">mean</span>(culmen_ratio)) <span class="sc">|&gt;</span></span>
<span id="cb99-21"><a href="#cb99-21" tabindex="-1"></a>  <span class="fu">arrange</span>(species, island)</span>
<span id="cb99-22"><a href="#cb99-22" tabindex="-1"></a></span>
<span id="cb99-23"><a href="#cb99-23" tabindex="-1"></a><span class="co"># View summary table</span></span>
<span id="cb99-24"><a href="#cb99-24" tabindex="-1"></a><span class="fu">print</span>(penguins_culmen_ratio)</span>
<span id="cb99-25"><a href="#cb99-25" tabindex="-1"></a></span>
<span id="cb99-26"><a href="#cb99-26" tabindex="-1"></a><span class="co"># Plots----</span></span>
<span id="cb99-27"><a href="#cb99-27" tabindex="-1"></a><span class="co"># Data visualization using ggplot2</span></span>
<span id="cb99-28"><a href="#cb99-28" tabindex="-1"></a>penguins_clean <span class="sc">|&gt;</span></span>
<span id="cb99-29"><a href="#cb99-29" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> culmen_length_mm, <span class="at">y =</span> culmen_depth_mm, <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb99-30"><a href="#cb99-30" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb99-31"><a href="#cb99-31" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Culmen Length (mm)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Culmen Depth (mm)&quot;</span>) <span class="sc">+</span></span>
<span id="cb99-32"><a href="#cb99-32" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
</div>
</div>
</div>
<div id="naming-things" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Naming things</h1>
<p>So as we are reading things into and out of our environment we come to filenames.</p>
<p>So, what makes a good file name? Well, there are a few key principles to keep in mind:</p>
<p><strong>1. Machine Readable:</strong> Your file names should be machine-readable, meaning they work well with regular expressions and globbing. This allows you to search for files using keywords, with the help of regex and the stringr package. To achieve this, avoid spaces, punctuation, accented characters, and case sensitivity. This makes searching for files and filtering lists based on names easier in the future.</p>
<p><img src="images/jenny1.png" width="80%" style="display: block; margin: auto;" /></p>
<p><strong>2. Easy to Compute On:</strong> File names should be structured consistently, with each part of the name serving a distinct purpose and separated by delimiters. This structure makes it easy to extract information from file names, such as splitting them into meaningful components.</p>
<p><img src="images/jenny2.png" width="80%" style="display: block; margin: auto;" /></p>
<p><strong>3. Human Readable:</strong> A good file name should be human-readable. It should provide a clear indication of what the file contains, just by looking at its name. It's important that even someone unfamiliar with your work can easily understand the file's content.</p>
<p><img src="images/jenny3.png" width="80%" style="display: block; margin: auto;" /></p>
<p><strong>4. Compatible with Default Ordering:</strong> Your computer will automatically sort your files, whether you like it or not. To ensure files are sorted sensibly, consider the following:</p>
<ul>
<li><p>Put something numeric at the beginning of the file name. If the order of sourcing files matters, state when the file was created. If not, indicate the logical order of the files.</p></li>
<li><p>Use the YYYY-MM-DD format for dates (it's an ISO 8601 standard). This format helps maintain chronological order, even for Americans.</p></li>
<li><p>Left-pad numbers with zeroes to avoid incorrect sorting (e.g., 01 not 1).</p></li>
</ul>
<p><img src="images/jenny4.png" width="80%" style="display: block; margin: auto;" />
Taking these simple but effective steps can significantly enhance your workflow and help your colleagues as well. Remember, good file names are a small change that can make a big difference in your productivity.</p>
<p>These examples from a great set of slides by R expert <a href="https://t.co/99waX8liuQ">Jenny Bryan</a></p>
<!--chapter:end:02-loading-data.Rmd-->
</div>
<div id="penguin-project" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Penguin project</h1>
<p>In this workshop we will work through setting up a project and loading data. Once we have a curated and cleaned the dataset we can work on generating insights from the data.</p>
<p>As a biologist you should be used to asking questions and gathering data. It is also important that you learn all aspects of the research process. This includes responsible data management (understanding data files &amp; spreadsheet organisation, keeping data safe) and data analysis.</p>
<p>In this chapter we will look at the structure of data files, and how to read these with R. We will also continue to develop reproducible scripts. This means that we are writing scripts that are well organised and easy to read, and also making sure that our scripts are complete and capable of reproducing an analysis from start to finish.</p>
<p>Transparency and reproducibility are key values in scientific research, when you analyse data in a reproducible way it means that others can understand and check your work. It also means that the most important person can benefit from your work, YOU! When you return to an analysis after even a short break, you will be thanking your earlier self if you have worked in a clear and reproducible way, as you can pick up right where you left off.</p>
<div id="meet-the-penguins" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Meet the Penguins</h2>
<p>This data, taken from the <code>palmerpenguins</code> (<span class="citation">Horst et al. (<a href="#ref-R-palmerpenguins">2022</a>)</span>) package was originally published by <span class="citation">Gorman et al. (<a href="#ref-Antarctic">2014</a>)</span>. In our course we will work with real data that has been shared by other researchers.</p>
<p>The palmer penguins data contains size measurements, clutch observations, and blood isotope ratios for three penguin species observed on three islands in the Palmer Archipelago, Antarctica over a study period of three years.</p>
<p><img src="images/gorman-penguins.jpg" alt="Photo of three penguin species, Chinstrap, Gentoo, Adelie" width="80%" style="display: block; margin: auto;" /></p>
<p>These data were collected from 2007 - 2009 by Dr. Kristen Gorman with the Palmer Station Long Term Ecological Research Program, part of the US Long Term Ecological Research Network. The data were imported directly from the Environmental Data Initiative (EDI) Data Portal, and are available for use by CC0 license (“No Rights Reserved”) in accordance with the Palmer Station Data Policy. We gratefully acknowledge Palmer Station LTER and the US LTER Network. Special thanks to Marty Downs (Director, LTER Network Office) for help regarding the data license &amp; use. Here is our intrepid package co-author, Dr. Gorman, in action collecting some penguin data:</p>
<p><img src="images/penguin-expedition.jpg" alt="Photo of Dr Gorman in the middle of a flock of penguins" width="80%" style="display: block; margin: auto;" /></p>
<p>Here is a map of the study site</p>
<p><img src="images/antarctica-map.png" alt="Antarctic Peninsula and the Palmer Field Station" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="activity-1-organising-our-workspace" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Activity 1: Organising our workspace</h2>
<p>Before we can begin working with the data, we need to do some set-up.</p>
<ul>
<li><p>Go to RStudio Cloud and open the <code>Penguins</code> R project</p></li>
<li><p>Create the following folders using the + New Folder button in the Files tab</p>
<ul>
<li>data</li>
<li>outputs</li>
<li>scripts</li>
</ul></li>
</ul>
<div class="warning">
<p>
R is case-sensitive so type everything EXACTLY as printed here
</p>
</div>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;data&quot;</span>,</span>
<span id="cb100-2"><a href="#cb100-2" tabindex="-1"></a>           <span class="at">showWarnings =</span> <span class="cn">FALSE</span>)</span>
<span id="cb100-3"><a href="#cb100-3" tabindex="-1"></a></span>
<span id="cb100-4"><a href="#cb100-4" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;outputs&quot;</span>,</span>
<span id="cb100-5"><a href="#cb100-5" tabindex="-1"></a>           <span class="at">showWarnings =</span> <span class="cn">FALSE</span>)</span>
<span id="cb100-6"><a href="#cb100-6" tabindex="-1"></a></span>
<span id="cb100-7"><a href="#cb100-7" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;scripts&quot;</span>,</span>
<span id="cb100-8"><a href="#cb100-8" tabindex="-1"></a>           <span class="at">showWarnings =</span> <span class="cn">FALSE</span>)</span>
<span id="cb100-9"><a href="#cb100-9" tabindex="-1"></a></span>
<span id="cb100-10"><a href="#cb100-10" tabindex="-1"></a><span class="co"># or this can be run using apply</span></span>
<span id="cb100-11"><a href="#cb100-11" tabindex="-1"></a><span class="fu">lapply</span>(<span class="fu">c</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;outputs&quot;</span>, <span class="st">&quot;scripts&quot;</span>), <span class="cf">function</span>(dir_name) {</span>
<span id="cb100-12"><a href="#cb100-12" tabindex="-1"></a>  <span class="fu">dir.create</span>(dir_name, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>)</span>
<span id="cb100-13"><a href="#cb100-13" tabindex="-1"></a>})</span></code></pre></div>
<p>Having these separate subfolders within our project helps keep things tidy, means it's harder to lose things, and lets you easily tell R exactly where to go to retrieve data.</p>
<p>The next step of our workflow is to have a well organised project space. RStudio Cloud does a lot of the hard work for you, each new data project can be set up with its own Project space.</p>
<p>We will define a project as a series of linked questions that uses one (or sometimes several) datasets. For example a coursework assignment for a particular module would be its own project, a series of linked experiments or particular research project might be its own project.</p>
<p>A Project will contain several files, possibly organised into sub-folders containing data, R scripts and final outputs. You might want to keep any information (wider reading) you have gathered that is relevant to your project.</p>
<div class="figure" style="text-align: center">
<img src="images/project.png" alt="An example of a typical R project set-up" width="80%" />
<p class="caption">
(#fig:unnamed-chunk-7)An example of a typical R project set-up
</p>
</div>
<p>Within this project you will notice there is already one file <em>.Rproj</em>. This is an R project file, this is a very useful feature, it interacts with R to tell it you are working in a very specific place on the computer (in this case the cloud server we have dialed into). It means R will automatically treat the location of your project file as the 'working directory' and makes importing and exporting easier<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>.</p>
<div class="warning">
<p>
It is very important to NEVER to move the .Rproj file, this may
prevent your workspace from opening properly.
</p>
</div>
</div>
<div id="activity-2-access-our-data" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Activity 2: Access our data</h2>
<p>Now that we have a project workspace, we are ready to import some data.</p>
<ul>
<li><p>Use the link below to open a page in your browser with the data open</p></li>
<li><p>Right-click Save As to download in csv format to your computer (Make a note of <strong>where</strong> the file is being downloaded to e.g. Downloads)</p></li>
</ul>
<a href="https://raw.githubusercontent.com/UEABIO/data-sci-v1/main/book/files/penguins_raw.csv">
<button class="btn btn-success"><i class="fa fa-save"></i> Download penguin data as csv</button>
</a>
<div class="figure" style="text-align: center">
<img src="images/excel_csv.png" alt="excel view, csv view" width="80%" />
<p class="caption">
(#fig:unnamed-chunk-10)Top image: Penguins data viewed in Excel, Bottom image: Penguins data in native csv format
</p>
</div>
<p>In raw format, each line of a CSV is separated by commas for different values. When you open this in a spreadsheet program like Excel it automatically converts those comma-separated values into tables and columns.</p>
</div>
<div id="activity-3-upload-our-data" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> Activity 3: Upload our data</h2>
<ul>
<li><p>The data is now in your Downloads folder on your computer</p></li>
<li><p>We need to upload the data to our remote cloud-server (RStudio Cloud), select the upload files to server button in the Files tab</p></li>
<li><p>Put your file into the data folder - if you make a mistake select the tickbox for your file, go to the cogs button and choose the option Move.</p></li>
</ul>
<div class="figure" style="text-align: center">
<img src="images/upload.png" alt="File tab" width="80%" />
<p class="caption">
(#fig:unnamed-chunk-11)Highlighted the buttons to upload files, and more options
</p>
</div>
<div id="read-data-from-a-url" class="section level3" number="7.4.1">
<h3><span class="header-section-number">7.4.1</span> Read data from a url</h3>
<p>It is also possible to use a url as a filepath</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/UEABIO/data-sci-v1/main/book/files/penguins_raw.csv&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="activity-4-make-a-script" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Activity 4: Make a script</h2>
<p>Let's now create a new R script file in which we will write instructions and store comments for manipulating data, developing tables and figures. Use the <code>File &gt; New Script</code> menu item and select an R Script.</p>
<p>Add the following:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" tabindex="-1"></a><span class="co">#___________________________----</span></span>
<span id="cb102-2"><a href="#cb102-2" tabindex="-1"></a><span class="co"># SET UP ----</span></span>
<span id="cb102-3"><a href="#cb102-3" tabindex="-1"></a><span class="do">## An analysis of the bill dimensions of male and female Adelie, Gentoo and Chinstrap penguins ----</span></span>
<span id="cb102-4"><a href="#cb102-4" tabindex="-1"></a></span>
<span id="cb102-5"><a href="#cb102-5" tabindex="-1"></a><span class="do">### Data first published in  Gorman, KB, TD Williams, and WR Fraser. 2014. “Ecological Sexual Dimorphism and Environmental Variability Within a Community of Antarctic Penguins (Genus Pygoscelis).” PLos One 9 (3): e90081. https://doi.org/10.1371/journal.pone.0090081. ----</span></span>
<span id="cb102-6"><a href="#cb102-6" tabindex="-1"></a><span class="co">#__________________________----</span></span></code></pre></div>
<p>Then load the following add-on package to the R script, just underneath these comments. Tidyverse isn't actually one package, but a bundle of many different packages that play well together - for example it <em>includes</em> <code>ggplot2</code> which we used in the last session, so we don't have to call that separately</p>
<p>Add the following to your script:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" tabindex="-1"></a><span class="co"># PACKAGES ----</span></span>
<span id="cb103-2"><a href="#cb103-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># tidy data packages</span></span>
<span id="cb103-3"><a href="#cb103-3" tabindex="-1"></a><span class="fu">library</span>(janitor) <span class="co"># cleans variable names</span></span>
<span id="cb103-4"><a href="#cb103-4" tabindex="-1"></a><span class="co">#__________________________----</span></span></code></pre></div>
<p>Save this file inside the scripts folder and call it <code>01_import_penguins_data.R</code></p>
<div class="try">
<p>
Click on the document outline button (top right of script pane). This
will show you how the use of the visual outline
</p>
<p>
Allows us to build a series of headers and subheaders, this is very
useful when using longer scripts.
</p>
</div>
</div>
<div id="activity-5-read-in-data" class="section level2" number="7.6">
<h2><span class="header-section-number">7.6</span> Activity 5: Read in data</h2>
<p>Now we can read in the data. To do this we will use the function <code>readr::read_csv()</code> that allows us to read in .csv files. There are also functions that allow you to read in .xlsx files and other formats, however in this course we will only use .csv files.</p>
<ul>
<li><p>First, we will create an object called <code>penguins_data</code> that contains the data in the <code>penguins_raw.csv</code> file.</p></li>
<li><p>Add the following to your script, and check the document outline:</p></li>
</ul>
<div class="tab">
<button class="tablinksunnamed-chunk-16 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-16&#39;, &#39;unnamed-chunk-16&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-16" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-16&#39;, &#39;unnamed-chunk-16&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-16" class="tabcontentunnamed-chunk-16">
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" tabindex="-1"></a>penguins_raw <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/penguins_raw.csv&quot;</span>)</span>
<span id="cb104-2"><a href="#cb104-2" tabindex="-1"></a></span>
<span id="cb104-3"><a href="#cb104-3" tabindex="-1"></a><span class="co"># penguins_raw &lt;- read.csv(here(&quot;data&quot;, &quot;penguins_raw.csv&quot;))</span></span>
<span id="cb104-4"><a href="#cb104-4" tabindex="-1"></a></span>
<span id="cb104-5"><a href="#cb104-5" tabindex="-1"></a><span class="fu">attributes</span>(penguins_raw) <span class="co"># reads as data.frame</span></span>
<span id="cb104-6"><a href="#cb104-6" tabindex="-1"></a></span>
<span id="cb104-7"><a href="#cb104-7" tabindex="-1"></a><span class="fu">head</span>(penguins_raw) <span class="co"># check the data has loaded, prints first 10 rows of dataframe</span></span></code></pre></div>
</div>
<div id="option2unnamed-chunk-16" class="tabcontentunnamed-chunk-16">
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" tabindex="-1"></a><span class="co"># IMPORT DATA ----</span></span>
<span id="cb105-2"><a href="#cb105-2" tabindex="-1"></a>penguins_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span> (<span class="st">&quot;data/penguins_raw.csv&quot;</span>)</span>
<span id="cb105-3"><a href="#cb105-3" tabindex="-1"></a></span>
<span id="cb105-4"><a href="#cb105-4" tabindex="-1"></a><span class="co"># penguins_raw &lt;- read_csv(here(&quot;data&quot;, &quot;penguins_raw.csv&quot;))</span></span>
<span id="cb105-5"><a href="#cb105-5" tabindex="-1"></a></span>
<span id="cb105-6"><a href="#cb105-6" tabindex="-1"></a><span class="fu">attributes</span>(penguins_raw) <span class="co"># reads as tibble</span></span>
<span id="cb105-7"><a href="#cb105-7" tabindex="-1"></a></span>
<span id="cb105-8"><a href="#cb105-8" tabindex="-1"></a><span class="fu">head</span>(penguins_raw) <span class="co"># check the data has loaded, prints first 10 rows of dataframe</span></span>
<span id="cb105-9"><a href="#cb105-9" tabindex="-1"></a><span class="co">#__________________________----</span></span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-16') </script>
<div class="danger">
<p>
Note the differences between <code>read.csv()</code> and
<code>read_csv</code>. We covered this in differences between tibbles
and dataframes - here most obviously is a difference in column
names.
</p>
</div>
</div>
<div id="activity-check-your-script" class="section level2" number="7.7">
<h2><span class="header-section-number">7.7</span> Activity: Check your script</h2>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" tabindex="-1"></a><span class="co">#___________________________----</span></span>
<span id="cb106-2"><a href="#cb106-2" tabindex="-1"></a><span class="co"># SET UP ----</span></span>
<span id="cb106-3"><a href="#cb106-3" tabindex="-1"></a><span class="do">## An analysis of the bill dimensions of male and female Adelie, Gentoo and Chinstrap penguins ----</span></span>
<span id="cb106-4"><a href="#cb106-4" tabindex="-1"></a></span>
<span id="cb106-5"><a href="#cb106-5" tabindex="-1"></a><span class="do">### Data first published in  Gorman, KB, TD Williams, and WR Fraser. 2014. “Ecological Sexual Dimorphism and Environmental Variability Within a Community of Antarctic Penguins (Genus Pygoscelis).” PLos One 9 (3): e90081. https://doi.org/10.1371/journal.pone.0090081. ----</span></span>
<span id="cb106-6"><a href="#cb106-6" tabindex="-1"></a><span class="co">#__________________________----</span></span>
<span id="cb106-7"><a href="#cb106-7" tabindex="-1"></a></span>
<span id="cb106-8"><a href="#cb106-8" tabindex="-1"></a><span class="co"># PACKAGES ----</span></span>
<span id="cb106-9"><a href="#cb106-9" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># tidy data packages</span></span>
<span id="cb106-10"><a href="#cb106-10" tabindex="-1"></a><span class="fu">library</span>(janitor) <span class="co"># cleans variable names</span></span>
<span id="cb106-11"><a href="#cb106-11" tabindex="-1"></a><span class="fu">library</span>(lubridate) <span class="co"># make sure dates are processed properly</span></span>
<span id="cb106-12"><a href="#cb106-12" tabindex="-1"></a><span class="co">#__________________________----</span></span>
<span id="cb106-13"><a href="#cb106-13" tabindex="-1"></a></span>
<span id="cb106-14"><a href="#cb106-14" tabindex="-1"></a><span class="co"># IMPORT DATA ----</span></span>
<span id="cb106-15"><a href="#cb106-15" tabindex="-1"></a>penguins_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span> (<span class="st">&quot;data/penguins_raw.csv&quot;</span>)</span>
<span id="cb106-16"><a href="#cb106-16" tabindex="-1"></a></span>
<span id="cb106-17"><a href="#cb106-17" tabindex="-1"></a><span class="fu">head</span>(penguins_raw) <span class="co"># check the data has loaded, prints first 10 rows of dataframe</span></span>
<span id="cb106-18"><a href="#cb106-18" tabindex="-1"></a><span class="co">#__________________________----</span></span></code></pre></div>
</div>
</div>
<div id="activity-test-yourself" class="section level2" number="7.8">
<h2><span class="header-section-number">7.8</span> Activity: Test yourself</h2>
<p><strong>Question 1.</strong> In order to make your R project reproducible what filepath should you use?</p>
<p><select class='webex-select'><option value='blank'></option><option value=''>Absolute filepath</option><option value='answer'>Relative filepath</option></select></p>
<p><strong>Question 2.</strong> Which of these would be acceptable to include in a raw datafile?</p>
<p><select class='webex-select'><option value='blank'></option><option value=''>Highlighting some blocks of cells</option><option value=''>Excel formulae</option><option value='answer'>A column of observational notes from the field</option><option value=''>a mix of ddmmyy and yymmdd date formats</option></select></p>
<p><strong>Question 3.</strong> What should always be the first set of functions in our script? <code>?()</code></p>
<p><input class='webex-solveme nospaces' size='9' data-answer='["library()"]'/></p>
<p><strong>Question 4.</strong> When reading in data to R we should use</p>
<p><select class='webex-select'><option value='blank'></option><option value='answer'>read_csv()</option><option value=''>read.csv()</option></select></p>
<p><strong>Question 5.</strong> What format is the <code>penguins_raw</code> data in?</p>
<p><select class='webex-select'><option value='blank'></option><option value=''>wide data</option><option value='answer'>long data</option></select></p>
<div class="webex-solution">
<button>
Explain This Answer
</button>
<p>Each column is a unique variable and each row is a unique observation so this data is in a long (tidy) format</p>
</div>
<p><strong>Question 6.</strong> The working directory for your projects is by default set to the location of?</p>
<p><select class='webex-select'><option value='blank'></option><option value=''>your data files</option><option value='answer'>the .Rproj file</option><option value=''>your R script</option></select></p>
<p><strong>Question 7.</strong> Using the filepath <code>"data/penguins_raw.csv"</code> is an example of</p>
<p><select class='webex-select'><option value='blank'></option><option value=''>an absolute filepath</option><option value='answer'>a relative filepath</option></select></p>
<p><strong>Question 8.</strong> What operator do I need to use if I wish to assign the output of the <code>read_csv</code> function to an R object (rather than just print the dataframe into the console)?</p>
<p><input class='webex-solveme nospaces' size='2' data-answer='["<-"]'/></p>
</div>
</div>
<div id="data-wrangling-with-dplyr" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Data wrangling with dplyr</h1>
<p>In this chapter you will learn how to use tidyverse functions to data clean and wrangle:</p>
<div id="activity-1-change-column-names" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Activity 1: Change column names</h2>
<p>We are going to learn how to organise data using the <em>tidy</em> format<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. This is because we are using the <code>tidyverse</code> packages <span class="citation">Wickham (<a href="#ref-R-tidyverse">2023</a>)</span>. This is an opinionated, but highly effective method for generating reproducible analyses with a wide-range of data manipulation tools. Tidy data is an easy format for computers to read. It is also the required data structure for our <strong>statistical tests</strong> that we will work with later.</p>
<p>Here 'tidy' refers to a specific structure that lets us manipulate and visualise data with ease. In a tidy dataset each <em>variable</em> is in one column and each row contains one <em>observation</em>. Each cell of the table/spreadsheet contains the <em>values</em>. One observation you might make about tidy data is it is quite long - it generates a lot of rows of data - you might remember then that <em>tidy</em> data can be referred to as <em>long</em>-format data (as opposed to <em>wide</em> data).</p>
<p><img src="images/tidy-1.png" alt="tidy data overview" width="80%" style="display: block; margin: auto;" /></p>
<p>So we know our data is in R, and we know the columns and names have been imported. But we still don't know whether all of our values imported correctly, or whether it captured all the rows.</p>
<div id="add-this-to-your-script" class="section level4" number="8.1.0.1">
<h4><span class="header-section-number">8.1.0.1</span> Add this to your script</h4>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" tabindex="-1"></a><span class="co"># CHECK DATA----</span></span>
<span id="cb107-2"><a href="#cb107-2" tabindex="-1"></a><span class="co"># check the data</span></span>
<span id="cb107-3"><a href="#cb107-3" tabindex="-1"></a><span class="fu">colnames</span>(penguins_raw)</span>
<span id="cb107-4"><a href="#cb107-4" tabindex="-1"></a><span class="co">#__________________________----</span></span></code></pre></div>
<p>When we run <code>colnames()</code> we get the identities of each column in our dataframe</p>
<ul>
<li><p><strong>Study name</strong>: an identifier for the year in which sets of observations were made</p></li>
<li><p><strong>Region</strong>: the area in which the observation was recorded</p></li>
<li><p><strong>Island</strong>: the specific island where the observation was recorded</p></li>
<li><p><strong>Stage</strong>: Denotes reproductive stage of the penguin</p></li>
<li><p><strong>Individual</strong> ID: the unique ID of the individual</p></li>
<li><p><strong>Clutch completion</strong>: if the study nest observed with a full clutch e.g. 2 eggs</p></li>
<li><p><strong>Date egg</strong>: the date at which the study nest observed with 1 egg</p></li>
<li><p><strong>Culmen length</strong>: length of the dorsal ridge of the bird's bill (mm)</p></li>
<li><p><strong>Culmen depth</strong>: depth of the dorsal ridge of the bird's bill (mm)</p></li>
<li><p><strong>Flipper Length</strong>: length of bird's flipper (mm)</p></li>
<li><p><strong>Body Mass</strong>: Bird's mass in (g)</p></li>
<li><p><strong>Sex</strong>: Denotes the sex of the bird</p></li>
<li><p><strong>Delta 15N</strong> : the ratio of stable Nitrogen isotopes 15N:14N from blood sample</p></li>
<li><p><strong>Delta 13C</strong>: the ratio of stable Carbon isotopes 13C:12C from blood sample</p></li>
</ul>
</div>
<div id="clean-column-names" class="section level4" number="8.1.0.2">
<h4><span class="header-section-number">8.1.0.2</span> Clean column names</h4>
<p>Often we might want to change the names of our variables. They might be non-intuitive, or too long. Our data has a couple of issues:</p>
<ul>
<li><p>Some of the names contain spaces</p></li>
<li><p>Some of the names have capitalised letters</p></li>
<li><p>Some of the names contain brackets</p></li>
</ul>
<p>This dataframe does not like these so let's correct these quickly. R is case-sensitive and also doesn't like spaces or brackets in variable names</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" tabindex="-1"></a><span class="co"># CLEAN DATA ----</span></span>
<span id="cb108-2"><a href="#cb108-2" tabindex="-1"></a></span>
<span id="cb108-3"><a href="#cb108-3" tabindex="-1"></a><span class="co"># clean all variable names to snake_case using the clean_names function from the janitor package</span></span>
<span id="cb108-4"><a href="#cb108-4" tabindex="-1"></a><span class="co"># note we are using assign &lt;- to overwrite the old version of penguins with a version that has updated names</span></span>
<span id="cb108-5"><a href="#cb108-5" tabindex="-1"></a><span class="co"># this changes the data in our R workspace but NOT the original csv file</span></span>
<span id="cb108-6"><a href="#cb108-6" tabindex="-1"></a></span>
<span id="cb108-7"><a href="#cb108-7" tabindex="-1"></a>penguins_clean <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(penguins_raw) <span class="co"># clean the column names</span></span>
<span id="cb108-8"><a href="#cb108-8" tabindex="-1"></a></span>
<span id="cb108-9"><a href="#cb108-9" tabindex="-1"></a><span class="fu">colnames</span>(penguins_clean) <span class="co"># quickly check the new variable names</span></span></code></pre></div>
<pre><code>##  [1] &quot;study_name&quot;        &quot;sample_number&quot;     &quot;species&quot;          
##  [4] &quot;region&quot;            &quot;island&quot;            &quot;stage&quot;            
##  [7] &quot;individual_id&quot;     &quot;clutch_completion&quot; &quot;date_egg&quot;         
## [10] &quot;culmen_length_mm&quot;  &quot;culmen_depth_mm&quot;   &quot;flipper_length_mm&quot;
## [13] &quot;body_mass_g&quot;       &quot;sex&quot;               &quot;delta_15_n_o_oo&quot;  
## [16] &quot;delta_13_c_o_oo&quot;   &quot;comments&quot;</code></pre>
</div>
<div id="rename-columns-manually" class="section level4" number="8.1.0.3">
<h4><span class="header-section-number">8.1.0.3</span> Rename columns (manually)</h4>
<p>The <code>clean_names</code> function quickly converts all variable names into snake case. The N and C blood isotope ratio names are still quite long though, so let's clean those with <code>dplyr::rename()</code> where "new_name" = "old_name".</p>
<div class="tab">
<button class="tablinksunnamed-chunk-25 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-25&#39;, &#39;unnamed-chunk-25&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-25" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-25&#39;, &#39;unnamed-chunk-25&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-25" class="tabcontentunnamed-chunk-25">
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" tabindex="-1"></a><span class="fu">names</span>(penguins)[<span class="fu">names</span>(penguins_clean) <span class="sc">==</span> <span class="st">&quot;delta_15_n_o_oo&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;delta_15n&quot;</span></span>
<span id="cb110-2"><a href="#cb110-2" tabindex="-1"></a></span>
<span id="cb110-3"><a href="#cb110-3" tabindex="-1"></a><span class="fu">names</span>(penguins)[<span class="fu">names</span>(penguins_clean) <span class="sc">==</span> <span class="st">&quot;delta_13_c_o_oo&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;delta_13c&quot;</span></span></code></pre></div>
</div>
<div id="option2unnamed-chunk-25" class="tabcontentunnamed-chunk-25">
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" tabindex="-1"></a><span class="co"># shorten the variable names for N and C isotope blood samples</span></span>
<span id="cb111-2"><a href="#cb111-2" tabindex="-1"></a></span>
<span id="cb111-3"><a href="#cb111-3" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">rename</span>(penguins_clean,</span>
<span id="cb111-4"><a href="#cb111-4" tabindex="-1"></a>         <span class="st">&quot;delta_15n&quot;</span><span class="ot">=</span><span class="st">&quot;delta_15_n_o_oo&quot;</span>,  <span class="co"># use rename from the dplyr package</span></span>
<span id="cb111-5"><a href="#cb111-5" tabindex="-1"></a>         <span class="st">&quot;delta_13c&quot;</span><span class="ot">=</span><span class="st">&quot;delta_13_c_o_oo&quot;</span>)</span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-25') </script>
</div>
</div>
<div id="check-data" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Check data</h2>
<div id="glimpse-check-data-format" class="section level4" number="8.2.0.1">
<h4><span class="header-section-number">8.2.0.1</span> glimpse: check data format</h4>
<p>When we run <code>glimpse()</code> we get several lines of output. The number of observations "rows", the number of variables "columns". Check this against the csv file you have - they should be the same. In the next lines we see variable names and the type of data.</p>
<div class="tab">
<button class="tablinksunnamed-chunk-26 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-26&#39;, &#39;unnamed-chunk-26&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-26" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-26&#39;, &#39;unnamed-chunk-26&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-26" class="tabcontentunnamed-chunk-26">
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" tabindex="-1"></a><span class="fu">attributes</span>(penguins)</span></code></pre></div>
</div>
<div id="option2unnamed-chunk-26" class="tabcontentunnamed-chunk-26">
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" tabindex="-1"></a><span class="fu">glimpse</span>(penguins)</span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-26') </script>
<p>We can see a dataset with 345 rows (including the headers) and 17 variables
It also provides information on the <em>type</em> of data in each column</p>
<ul>
<li><p><code>&lt;chr&gt;</code> - means character or text data</p></li>
<li><p><code>&lt;dbl&gt;</code> - means numerical data</p></li>
</ul>
</div>
<div id="rename-text-values" class="section level4" number="8.2.0.2">
<h4><span class="header-section-number">8.2.0.2</span> Rename text values</h4>
<p>Sometimes we may want to rename the values in our variables in order to make a shorthand that is easier to follow. This is changing the <strong>values</strong> in our columns, not the column names.</p>
<div class="tab">
<button class="tablinksunnamed-chunk-27 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-27&#39;, &#39;unnamed-chunk-27&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-27" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-27&#39;, &#39;unnamed-chunk-27&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-27" class="tabcontentunnamed-chunk-27">
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" tabindex="-1"></a>penguins<span class="sc">$</span>species <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(penguins<span class="sc">$</span>species <span class="sc">==</span> <span class="st">&quot;Adelie Penguin (Pygoscelis adeliae)&quot;</span>, <span class="st">&quot;Adelie&quot;</span>,</span>
<span id="cb114-2"><a href="#cb114-2" tabindex="-1"></a>                          <span class="fu">ifelse</span>(penguins<span class="sc">$</span>species <span class="sc">==</span> <span class="st">&quot;Gentoo penguin (Pygoscelis papua)&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>,</span>
<span id="cb114-3"><a href="#cb114-3" tabindex="-1"></a>                                 <span class="fu">ifelse</span>(penguins<span class="sc">$</span>species <span class="sc">==</span> <span class="st">&quot;Chinstrap penguin (Pygoscelis antarctica)&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span>,</span>
<span id="cb114-4"><a href="#cb114-4" tabindex="-1"></a>                                        penguins<span class="sc">$</span>species)))</span></code></pre></div>
</div>
<div id="option2unnamed-chunk-27" class="tabcontentunnamed-chunk-27">
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" tabindex="-1"></a><span class="co"># use mutate and case_when for a statement that conditionally changes the names of the values in a variable</span></span>
<span id="cb115-2"><a href="#cb115-2" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb115-3"><a href="#cb115-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">case_when</span>(species <span class="sc">==</span> <span class="st">&quot;Adelie Penguin (Pygoscelis adeliae)&quot;</span> <span class="sc">~</span> <span class="st">&quot;Adelie&quot;</span>,</span>
<span id="cb115-4"><a href="#cb115-4" tabindex="-1"></a>                             species <span class="sc">==</span> <span class="st">&quot;Gentoo penguin (Pygoscelis papua)&quot;</span> <span class="sc">~</span> <span class="st">&quot;Gentoo&quot;</span>,</span>
<span id="cb115-5"><a href="#cb115-5" tabindex="-1"></a>                             species <span class="sc">==</span> <span class="st">&quot;Chinstrap penguin (Pygoscelis antarctica)&quot;</span> <span class="sc">~</span> <span class="st">&quot;Chinstrap&quot;</span>))</span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-27') </script>
<div class="warning">
<p>
Have you checked that the above code block worked? Inspect your new
tibble and check the variables have been renamed as you wanted.
</p>
</div>
</div>
</div>
<div id="dplyr-verbs" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> dplyr verbs</h2>
<p>In this section we will be introduced to some of the most commonly used data wrangling functions, these come from the <code>dplyr</code> package (part of the <code>tidyverse</code>). These are functions you are likely to become <em>very</em> familiar with.</p>
<div class="kable-table">
<table>
<thead>
<tr>
<th style="text-align:left;">
verb
</th>
<th style="text-align:left;">
action
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
select()
</td>
<td style="text-align:left;">
take a subset of columns
</td>
</tr>
<tr>
<td style="text-align:left;">
filter()
</td>
<td style="text-align:left;">
take a subset of rows
</td>
</tr>
<tr>
<td style="text-align:left;">
arrange()
</td>
<td style="text-align:left;">
reorder the rows
</td>
</tr>
<tr>
<td style="text-align:left;">
summarise()
</td>
<td style="text-align:left;">
reduce raw data to user defined summaries
</td>
</tr>
<tr>
<td style="text-align:left;">
group_by()
</td>
<td style="text-align:left;">
group the rows by a specified column
</td>
</tr>
<tr>
<td style="text-align:left;">
mutate()
</td>
<td style="text-align:left;">
create a new variable
</td>
</tr>
</tbody>
</table>
</div>
<div id="select" class="section level3" number="8.3.1">
<h3><span class="header-section-number">8.3.1</span> Select</h3>
<p>If we wanted to create a dataset that only includes certain variables, we can use the <code>select()</code> function from the <code>dplyr</code> package.</p>
<p>For example I might wish to create a simplified dataset that only contains <code>species</code>, <code>sex</code>, <code>flipper_length_mm</code> and <code>body_mass_g</code>.</p>
<p>Run the below code to select only those columns</p>
<div class="tab">
<button class="tablinksunnamed-chunk-30 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-30&#39;, &#39;unnamed-chunk-30&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-30" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-30&#39;, &#39;unnamed-chunk-30&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-30" class="tabcontentunnamed-chunk-30">
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" tabindex="-1"></a>penguins[<span class="fu">c</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;sex&quot;</span>, <span class="st">&quot;flipper_length_mm&quot;</span>, <span class="st">&quot;body_mass_g&quot;</span>)]</span></code></pre></div>
</div>
<div id="option2unnamed-chunk-30" class="tabcontentunnamed-chunk-30">
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" tabindex="-1"></a><span class="co"># DPLYR VERBS ----</span></span>
<span id="cb117-2"><a href="#cb117-2" tabindex="-1"></a></span>
<span id="cb117-3"><a href="#cb117-3" tabindex="-1"></a><span class="fu">select</span>(<span class="at">.data =</span> penguins, <span class="co"># the data object</span></span>
<span id="cb117-4"><a href="#cb117-4" tabindex="-1"></a>       species, sex, flipper_length_mm, body_mass_g) <span class="co"># the variables you want to select</span></span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-30') </script>
<p>Alternatively you could tell R the columns you <strong>don't</strong> want e.g.</p>
<div class="tab">
<button class="tablinksunnamed-chunk-31 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-31&#39;, &#39;unnamed-chunk-31&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-31" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-31&#39;, &#39;unnamed-chunk-31&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-31" class="tabcontentunnamed-chunk-31">
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" tabindex="-1"></a>penguins[, <span class="sc">!</span><span class="fu">colnames</span>(penguins) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;study_name&quot;</span>, <span class="st">&quot;sample_number&quot;</span>)]</span></code></pre></div>
</div>
<div id="option2unnamed-chunk-31" class="tabcontentunnamed-chunk-31">
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" tabindex="-1"></a><span class="fu">select</span>(<span class="at">.data =</span> penguins,</span>
<span id="cb119-2"><a href="#cb119-2" tabindex="-1"></a>       <span class="sc">-</span>study_name, <span class="sc">-</span>sample_number)</span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-31') </script>
<p>Note that <code>select()</code> does <strong>not</strong> change the original <code>penguins</code> tibble. It spits out the new tibble directly into your console.</p>
<p>If you don't <strong>save</strong> this new tibble, it won't be stored. If you want to keep it, then you must create a new object.</p>
<p>When you run this new code, you will not see anything in your console, but you will see a new object appear in your Environment pane.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" tabindex="-1"></a>new_penguins <span class="ot">&lt;-</span> <span class="fu">select</span>(<span class="at">.data =</span> penguins, </span>
<span id="cb120-2"><a href="#cb120-2" tabindex="-1"></a>       species, sex, flipper_length_mm, body_mass_g)</span></code></pre></div>
</div>
<div id="filter" class="section level3" number="8.3.2">
<h3><span class="header-section-number">8.3.2</span> Filter</h3>
<p>Having previously used <code>select()</code> to select certain variables, we will now use <code>filter()</code> to select only certain rows or observations. For example only Adelie penguins.</p>
<p>We can do this with the equivalence operator <code>==</code></p>
<div class="tab">
<button class="tablinksunnamed-chunk-33 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-33&#39;, &#39;unnamed-chunk-33&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-33" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-33&#39;, &#39;unnamed-chunk-33&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-33" class="tabcontentunnamed-chunk-33">
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" tabindex="-1"></a>filtered_penguins <span class="ot">&lt;-</span> new_penguins[new_penguins<span class="sc">$</span>species <span class="sc">==</span> <span class="st">&quot;Adelie Penguin (Pygoscelis adeliae&quot;</span><span class="er">)</span>, ]</span></code></pre></div>
</div>
<div id="option2unnamed-chunk-33" class="tabcontentunnamed-chunk-33">
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" tabindex="-1"></a><span class="fu">filter</span>(<span class="at">.data =</span> new_penguins, species <span class="sc">==</span> <span class="st">&quot;Adelie Penguin (Pygoscelis adeliae)&quot;</span>)</span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-33') </script>
<p>We can use several different operators to assess the way in which we should filter our data that work the same in tidyverse or base R.</p>
<table class="table" style="font-size: 16px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
(#tab:unnamed-chunk-34)Boolean expressions
</caption>
<thead>
<tr>
<th style="text-align:left;">
Operator
</th>
<th style="text-align:left;">
Name
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
A &lt; B
</td>
<td style="text-align:left;">
less than
</td>
</tr>
<tr>
<td style="text-align:left;">
A &lt;= B
</td>
<td style="text-align:left;">
less than or equal to
</td>
</tr>
<tr>
<td style="text-align:left;">
A &gt; B
</td>
<td style="text-align:left;">
greater than
</td>
</tr>
<tr>
<td style="text-align:left;">
A &gt;= B
</td>
<td style="text-align:left;">
greater than or equal to
</td>
</tr>
<tr>
<td style="text-align:left;">
A == B
</td>
<td style="text-align:left;">
equivalence
</td>
</tr>
<tr>
<td style="text-align:left;">
A != B
</td>
<td style="text-align:left;">
not equal
</td>
</tr>
<tr>
<td style="text-align:left;">
A %in% B
</td>
<td style="text-align:left;">
in
</td>
</tr>
</tbody>
</table>
<p>If you wanted to select all the Penguin species except Adelies, you use 'not equals'.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" tabindex="-1"></a><span class="fu">filter</span>(<span class="at">.data =</span> new_penguins, species <span class="sc">!=</span> <span class="st">&quot;Adelie&quot;</span>)</span></code></pre></div>
<p>This is the same as</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" tabindex="-1"></a><span class="fu">filter</span>(<span class="at">.data =</span> new_penguins, species <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>))</span></code></pre></div>
<p>You can include multiple expressions within <code>filter()</code> and it will pull out only those rows that evaluate to <code>TRUE</code> for all of your conditions.</p>
<p>For example the below code will pull out only those observations of Adelie penguins where flipper length was measured as greater than 190mm.</p>
<div class="tab">
<button class="tablinksunnamed-chunk-37 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-37&#39;, &#39;unnamed-chunk-37&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-37" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-37&#39;, &#39;unnamed-chunk-37&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-37" class="tabcontentunnamed-chunk-37">
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" tabindex="-1"></a>new_penguins[new_penguins<span class="sc">$</span>species <span class="sc">==</span> <span class="st">&quot;Adelie&quot;</span> <span class="sc">&amp;</span> new_penguins<span class="sc">$</span>flipper_length_mm <span class="sc">&gt;</span> <span class="dv">190</span>, ]</span></code></pre></div>
</div>
<div id="option2unnamed-chunk-37" class="tabcontentunnamed-chunk-37">
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" tabindex="-1"></a><span class="fu">filter</span>(<span class="at">.data =</span> new_penguins, species <span class="sc">==</span> <span class="st">&quot;Adelie&quot;</span>, flipper_length_mm <span class="sc">&gt;</span> <span class="dv">190</span>)</span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-37') </script>
</div>
<div id="arrange" class="section level3" number="8.3.3">
<h3><span class="header-section-number">8.3.3</span> Arrange</h3>
<p>The function <code>arrange()</code> sorts the rows in the table according to the columns supplied. For example</p>
<div class="tab">
<button class="tablinksunnamed-chunk-38 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-38&#39;, &#39;unnamed-chunk-38&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-38" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-38&#39;, &#39;unnamed-chunk-38&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-38" class="tabcontentunnamed-chunk-38">
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" tabindex="-1"></a>new_penguins[<span class="fu">order</span>(new_penguins<span class="sc">$</span>sex), ] <span class="co"># define columns to be arranged</span></span></code></pre></div>
</div>
<div id="option2unnamed-chunk-38" class="tabcontentunnamed-chunk-38">
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" tabindex="-1"></a><span class="fu">arrange</span>(<span class="at">.data =</span> new_penguins, sex)</span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-38') </script>
<p>The data is now arranged in alphabetical order by sex. So all of the observations of female penguins are listed before males.</p>
<p>You can also reverse this with <code>desc()</code></p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" tabindex="-1"></a><span class="fu">arrange</span>(<span class="at">.data =</span> new_penguins, <span class="fu">desc</span>(sex))</span></code></pre></div>
<p>You can also sort by more than one column, what do you think the code below does?</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" tabindex="-1"></a><span class="fu">arrange</span>(<span class="at">.data =</span> new_penguins,</span>
<span id="cb130-2"><a href="#cb130-2" tabindex="-1"></a>        sex,</span>
<span id="cb130-3"><a href="#cb130-3" tabindex="-1"></a>        <span class="fu">desc</span>(species),</span>
<span id="cb130-4"><a href="#cb130-4" tabindex="-1"></a>        <span class="fu">desc</span>(flipper_length_mm))</span></code></pre></div>
</div>
<div id="mutate" class="section level3" number="8.3.4">
<h3><span class="header-section-number">8.3.4</span> Mutate</h3>
<p>Sometimes we need to create a new variable that doesn't exist in our dataset. For example we might want to figure out what the flipper length is when factoring in body mass.</p>
<p>To create new variables we use the function <code>mutate()</code>.</p>
<p>Note that as before, if you want to save your new column you must save it as an object. Here we are mutating a new column and attaching it to the <code>new_penguins</code> data oject.</p>
<div class="tab">
<button class="tablinksunnamed-chunk-41 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-41&#39;, &#39;unnamed-chunk-41&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-41" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-41&#39;, &#39;unnamed-chunk-41&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-41" class="tabcontentunnamed-chunk-41">
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" tabindex="-1"></a>new_penguins<span class="sc">$</span>body_mass_kg <span class="ot">&lt;-</span> new_penguins<span class="sc">$</span>body_mass_g <span class="sc">/</span> <span class="dv">1000</span></span></code></pre></div>
</div>
<div id="option2unnamed-chunk-41" class="tabcontentunnamed-chunk-41">
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" tabindex="-1"></a>new_penguins <span class="ot">&lt;-</span> <span class="fu">mutate</span>(<span class="at">.data =</span> new_penguins,</span>
<span id="cb132-2"><a href="#cb132-2" tabindex="-1"></a>                     <span class="at">body_mass_kg =</span> body_mass_g<span class="sc">/</span><span class="dv">1000</span>)</span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-41') </script>
</div>
</div>
<div id="pipes" class="section level2" number="8.4">
<h2><span class="header-section-number">8.4</span> Pipes</h2>
<p><img src="images/pipe_order.jpg" alt="Pipes make code more human readable" width="80%" style="display: block; margin: auto;" /></p>
<p>Pipes look like this: <code>|&gt;</code> Pipes allow you to send the output from one function straight into another function. Specifically, they send the result of the function before <code>|&gt;</code> to be the <strong>first</strong> argument of the function after <code>|&gt;</code>. As usual, it's easier to show, rather than tell so let's look at an example.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" tabindex="-1"></a><span class="co"># this example uses brackets to nest and order functions</span></span>
<span id="cb133-2"><a href="#cb133-2" tabindex="-1"></a><span class="fu">arrange</span>(<span class="at">.data =</span> <span class="fu">filter</span>(<span class="at">.data =</span> <span class="fu">select</span>(<span class="at">.data =</span> penguins, species, sex, flipper_length_mm), sex <span class="sc">==</span> <span class="st">&quot;MALE&quot;</span>), <span class="fu">desc</span>(flipper_length_mm))</span></code></pre></div>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" tabindex="-1"></a><span class="co"># this example uses sequential R objects to make the code more readable</span></span>
<span id="cb134-2"><a href="#cb134-2" tabindex="-1"></a>object_1 <span class="ot">&lt;-</span> <span class="fu">select</span>(<span class="at">.data =</span> penguins, species, sex, flipper_length_mm)</span>
<span id="cb134-3"><a href="#cb134-3" tabindex="-1"></a>object_2 <span class="ot">&lt;-</span> <span class="fu">filter</span>(<span class="at">.data =</span> object_1, sex <span class="sc">==</span> <span class="st">&quot;MALE&quot;</span>)</span>
<span id="cb134-4"><a href="#cb134-4" tabindex="-1"></a><span class="fu">arrange</span>(object_2, <span class="fu">desc</span>(flipper_length_mm))</span></code></pre></div>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" tabindex="-1"></a><span class="co"># this example is human readable without intermediate objects</span></span>
<span id="cb135-2"><a href="#cb135-2" tabindex="-1"></a>penguins <span class="sc">|&gt;</span>  </span>
<span id="cb135-3"><a href="#cb135-3" tabindex="-1"></a>  <span class="fu">select</span>(species, sex, flipper_length_mm) <span class="sc">|&gt;</span>  </span>
<span id="cb135-4"><a href="#cb135-4" tabindex="-1"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">&quot;MALE&quot;</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb135-5"><a href="#cb135-5" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(flipper_length_mm))</span></code></pre></div>
<p>The reason that this function is called a pipe is because it 'pipes' the data through to the next function. When you wrote the code previously, the first argument of each function was the dataset you wanted to work on. When you use pipes it will automatically take the data from the previous line of code so you don't need to specify it again.</p>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Try and write out as plain English what the |&gt; above is doing? You can read the |&gt; as THEN
</div>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<p>Take the penguins data AND THEN
Select only the species, sex and flipper length columns AND THEN
Filter to keep only those observations labelled as sex equals male AND THEN
Arrange the data from HIGHEST to LOWEST flipper lengths.</p>
</div>
<div class="info">
<p>
From R version 4 onwards there is now a “native pipe”
<code>|&gt;</code>
</p>
<p>
This doesn’t require the tidyverse <code>magrittr</code> package and
the “old pipe” <code>%&gt;%</code> or any other packages to load and
use.
</p>
<p>
You may be familiar with the magrittr pipe or see it in other
tutorials, and website usages. The native pipe works equivalntly in most
situations but if you want to read about some of the operational
differences, <a
href="https://www.infoworld.com/article/3621369/use-the-new-r-pipe-built-into-r-41.html">this
site</a> does a good job of explaining .
</p>
</div>
</div>
<div id="a-few-more-handy-functions" class="section level2" number="8.5">
<h2><span class="header-section-number">8.5</span> A few more handy functions</h2>
<div id="check-for-duplication" class="section level3" number="8.5.1">
<h3><span class="header-section-number">8.5.1</span> Check for duplication</h3>
<p>It is very easy when inputting data to make mistakes, copy something in twice for example, or if someone did a lot of copy-pasting to assemble a spreadsheet (yikes!). We can check this pretty quickly</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" tabindex="-1"></a><span class="co"># check for duplicate rows in the data</span></span>
<span id="cb136-2"><a href="#cb136-2" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb136-3"><a href="#cb136-3" tabindex="-1"></a>  <span class="fu">duplicated</span>() <span class="sc">|&gt;</span>  <span class="co"># produces a list of TRUE/FALSE statements for duplicated or not</span></span>
<span id="cb136-4"><a href="#cb136-4" tabindex="-1"></a>  <span class="fu">sum</span>() <span class="co"># sums all the TRUE statements</span></span></code></pre></div>
<pre><code>[1] 0</code></pre>
<p>Great!</p>
<p>If I did have duplications I could investigate further</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" tabindex="-1"></a><span class="co"># Check duplicated rows</span></span>
<span id="cb138-2"><a href="#cb138-2" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb138-3"><a href="#cb138-3" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">duplicated</span>(penguins))</span></code></pre></div>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" tabindex="-1"></a><span class="co"># Keep only unduplicated data</span></span>
<span id="cb139-2"><a href="#cb139-2" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb139-3"><a href="#cb139-3" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">duplicated</span>(penguins))</span></code></pre></div>
</div>
<div id="summarise" class="section level3" number="8.5.2">
<h3><span class="header-section-number">8.5.2</span> Summarise</h3>
<p>We can also explore our data for very obvious typos by checking for implausibly small or large values, this is a simple use of the <code>summarise</code> function.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" tabindex="-1"></a><span class="co"># use summarise to make calculations</span></span>
<span id="cb140-2"><a href="#cb140-2" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb140-3"><a href="#cb140-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min=</span><span class="fu">min</span>(body_mass_g, <span class="at">na.rm=</span><span class="cn">TRUE</span>), </span>
<span id="cb140-4"><a href="#cb140-4" tabindex="-1"></a>            <span class="at">max=</span><span class="fu">max</span>(body_mass_g, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code></pre></div>
<p>The minimum weight for our penguins is 2.7kg, and the max is 6.3kg - not outrageous. If the min had come out at 27g we might have been suspicious. We will use <code>summarise</code> again to calculate other metrics in the future.</p>
<div class="info">
<p>
Our first data insight, the difference the smallest adult penguin in
our dataset is nearly half the size of the largest penguin.
</p>
</div>
</div>
<div id="group-by" class="section level3" number="8.5.3">
<h3><span class="header-section-number">8.5.3</span> Group By</h3>
<p>Many data analysis tasks can be approached using the “split-apply-combine” paradigm: split the data into groups, apply some analysis to each group, and then combine the results. <code>dplyr</code> makes this very easy with the <code>group_by()</code> function. In the <code>summarise</code> example above we were able to find the max-min body mass values for the penguins in our dataset. But what if we wanted to break that down by a grouping such as species of penguin. This is where <code>group_by()</code> comes in.</p>
<div class="tab">
<button class="tablinksunnamed-chunk-53 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-53&#39;, &#39;unnamed-chunk-53&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-53" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-53&#39;, &#39;unnamed-chunk-53&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-53" class="tabcontentunnamed-chunk-53">
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" tabindex="-1"></a><span class="co">#Things start to get more complicated with Base R</span></span>
<span id="cb141-2"><a href="#cb141-2" tabindex="-1"></a></span>
<span id="cb141-3"><a href="#cb141-3" tabindex="-1"></a><span class="fu">split</span>(penguins<span class="sc">$</span>body_mass_g, penguins<span class="sc">$</span>species) <span class="sc">|&gt;</span> </span>
<span id="cb141-4"><a href="#cb141-4" tabindex="-1"></a>    <span class="fu">lapply</span>(<span class="cf">function</span>(x) <span class="fu">c</span>(<span class="fu">min</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">max</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb141-5"><a href="#cb141-5" tabindex="-1"></a>    <span class="fu">do.call</span>(rbind, <span class="at">args =</span> _ ) <span class="sc">|&gt;</span> </span>
<span id="cb141-6"><a href="#cb141-6" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span></code></pre></div>
</div>
<div id="option2unnamed-chunk-53" class="tabcontentunnamed-chunk-53">
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb142-2"><a href="#cb142-2" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span>  <span class="co"># subsequent functions are perform &quot;by group&quot;</span></span>
<span id="cb142-3"><a href="#cb142-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min=</span><span class="fu">min</span>(body_mass_g, <span class="at">na.rm=</span><span class="cn">TRUE</span>), </span>
<span id="cb142-4"><a href="#cb142-4" tabindex="-1"></a>            <span class="at">max=</span><span class="fu">max</span>(body_mass_g, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-53') </script>
<p>Now we know a little more about our data, the max weight of our Gentoo penguins is much larger than the other two species. In fact, the minimum weight of a Gentoo penguin is not far off the max weight of the other two species.</p>
</div>
<div id="distinct" class="section level3" number="8.5.4">
<h3><span class="header-section-number">8.5.4</span> Distinct</h3>
<p>We can also look for typos by asking R to produce all of the distinct values in a variable. This is more useful for categorical data, where we expect there to be only a few distinct categories</p>
<div class="tab">
<button class="tablinksunnamed-chunk-54 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-54&#39;, &#39;unnamed-chunk-54&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-54" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-54&#39;, &#39;unnamed-chunk-54&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-54" class="tabcontentunnamed-chunk-54">
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" tabindex="-1"></a><span class="fu">unique</span>(penquins<span class="sc">$</span>sex) <span class="co"># only works on vectord</span></span></code></pre></div>
</div>
<div id="option2unnamed-chunk-54" class="tabcontentunnamed-chunk-54">
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span>  </span>
<span id="cb144-2"><a href="#cb144-2" tabindex="-1"></a>  <span class="fu">distinct</span>(sex)</span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-54') </script>
<p>Here if someone had mistyped e.g. 'FMALE' it would be obvious. We could do the same thing (and probably should have before we changed the names) for species.</p>
</div>
<div id="missing-values-na" class="section level3" number="8.5.5">
<h3><span class="header-section-number">8.5.5</span> Missing values: NA</h3>
<p>There are multiple ways to check for missing values in our data</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" tabindex="-1"></a><span class="co"># Get a sum of how many observations are missing in our dataframe</span></span>
<span id="cb145-2"><a href="#cb145-2" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb145-3"><a href="#cb145-3" tabindex="-1"></a>  <span class="fu">is.na</span>() <span class="sc">|&gt;</span> </span>
<span id="cb145-4"><a href="#cb145-4" tabindex="-1"></a>  <span class="fu">sum</span>()</span></code></pre></div>
<p>But this doesn't tell us where these are, fortunately the function <code>summary</code> does this easily</p>
</div>
</div>
<div id="summary" class="section level2" number="8.6">
<h2><span class="header-section-number">8.6</span> <code>Summary</code></h2>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" tabindex="-1"></a><span class="co"># produce a summary of our data</span></span>
<span id="cb146-2"><a href="#cb146-2" tabindex="-1"></a><span class="fu">summary</span>(penguins)</span>
<span id="cb146-3"><a href="#cb146-3" tabindex="-1"></a><span class="co">#__________________________----</span></span></code></pre></div>
<p>This provides a quick breakdown of the max and min for all numeric variables, as well as a list of how many missing observations there are for each one. As we can see there appear to be two missing observations for measurements in body mass, bill lengths, flipper lengths and several more for blood measures. We don't know for sure without inspecting our data further, <em>but</em> it is likely that the two birds are missing multiple measurements, and that several more were measured but didn't have their blood drawn.</p>
<p>We will leave the NA's alone for now, but it's useful to know how many we have.</p>
<p>We've now got a clean &amp; tidy dataset, with a handful of first insights into the data.</p>
</div>
<div id="more-summary-tools" class="section level2" number="8.7">
<h2><span class="header-section-number">8.7</span> More summary tools</h2>
<p>Very often we want to make calculations aobut groups of observations, such as the mean or median. We are often interested in comparing responses among groups. For example, we previously found the number of distinct penguins in our entire dataset.</p>
<div class="try">
<p>
Add these new lines of code to your script as you try them. Comment
out # and add short descriptions of what you are achieving with them
</p>
</div>
<div class="tab">
<button class="tablinksunnamed-chunk-60 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-60&#39;, &#39;unnamed-chunk-60&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-60" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-60&#39;, &#39;unnamed-chunk-60&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-60" class="tabcontentunnamed-chunk-60">
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" tabindex="-1"></a><span class="fu">unique</span>(penguins<span class="sc">$</span>individual_id) <span class="sc">|&gt;</span> </span>
<span id="cb147-2"><a href="#cb147-2" tabindex="-1"></a>  <span class="fu">length</span>()</span></code></pre></div>
</div>
<div id="option2unnamed-chunk-60" class="tabcontentunnamed-chunk-60">
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb148-2"><a href="#cb148-2" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n_distinct</span>(individual_id))</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr>
<th style="text-align:right;">
n_distinct(individual_id)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
190
</td>
</tr>
</tbody>
</table>
</div>
</div>
<script> javascript:hide('option2unnamed-chunk-60') </script>
<p>Now consider when the groups are subsets of observations, as when we find out the number of penguins in each species and sex.</p>
<div class="tab">
<button class="tablinksunnamed-chunk-61 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-61&#39;, &#39;unnamed-chunk-61&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-61" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-61&#39;, &#39;unnamed-chunk-61&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-61" class="tabcontentunnamed-chunk-61">
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" tabindex="-1"></a><span class="co"># note aggregate doesn&#39;t have functionality to deal with missing data</span></span>
<span id="cb149-2"><a href="#cb149-2" tabindex="-1"></a><span class="fu">aggregate</span>(individual_id <span class="sc">~</span> species <span class="sc">+</span> sex, </span>
<span id="cb149-3"><a href="#cb149-3" tabindex="-1"></a>          <span class="at">data =</span> penguins, </span>
<span id="cb149-4"><a href="#cb149-4" tabindex="-1"></a>          <span class="at">FUN =</span> <span class="cf">function</span>(x) <span class="fu">length</span>(<span class="fu">unique</span>(x)))</span></code></pre></div>
</div>
<div id="option2unnamed-chunk-61" class="tabcontentunnamed-chunk-61">
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb150-2"><a href="#cb150-2" tabindex="-1"></a>  <span class="fu">group_by</span>(species, sex) <span class="sc">|&gt;</span> </span>
<span id="cb150-3"><a href="#cb150-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n_distinct</span>(individual_id))</span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-61') </script>
<p>As we progress, not only are we learning how to use our data wrangling tools. We are also gaining insights into our data.</p>
<p><strong>Question</strong> How many female Adelie penguins are in our dataset?</p>
<p><input class='webex-solveme nospaces' size='2' data-answer='["65"]'/></p>
<p><br></p>
<p><strong>Question</strong> How many Gentoo penguins <strong>did not</strong> have their sex recorded?</p>
<p><input class='webex-solveme nospaces' size='1' data-answer='["5"]'/></p>
<p><br></p>
<p>We are using summarise and group_by a lot! They are very powerful functions:</p>
<ul>
<li><p><code>group_by</code> adds <em>grouping</em> information into a data object, so that subsequent calculations happen on a <em>group-specific</em> basis.</p></li>
<li><p><code>summarise</code> is a data aggregation function thart calculates summaries of one or more variables, and it will do this separately for any groups defined by <code>group_by</code></p></li>
</ul>
<div id="summarise-1" class="section level3" number="8.7.1">
<h3><span class="header-section-number">8.7.1</span> summarise()</h3>
<p><code>summarise()</code> has a whole list of useful functions for producing <em>descriptive</em> statistics</p>
<div class="kable-table">
<table>
<thead>
<tr>
<th style="text-align:left;">
verb
</th>
<th style="text-align:left;">
action
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
mean(), median()
</td>
<td style="text-align:left;">
Center data
</td>
</tr>
<tr>
<td style="text-align:left;">
sd(), IQR()
</td>
<td style="text-align:left;">
Spread of data
</td>
</tr>
<tr>
<td style="text-align:left;">
min(), max(), quantile()
</td>
<td style="text-align:left;">
Range of data
</td>
</tr>
<tr>
<td style="text-align:left;">
first(), last(), nth()
</td>
<td style="text-align:left;">
Position
</td>
</tr>
<tr>
<td style="text-align:left;">
n(), n_distinct()
</td>
<td style="text-align:left;">
Count
</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><p><code>min</code> and <code>max</code> to calculate minimum and maximum values of a numeric vector</p></li>
<li><p><code>mean</code> and <code>median</code> to calculate averages of a numeric vector</p></li>
<li><p><code>sd</code> and <code>var</code> calculate standard deviation and variance of a numeric vector</p></li>
</ul>
<p>Using <code>summarise</code> we can calculate the mean flipper and bill lengths of our penguins:</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb151-2"><a href="#cb151-2" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb151-3"><a href="#cb151-3" tabindex="-1"></a>    <span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb151-4"><a href="#cb151-4" tabindex="-1"></a>     <span class="at">mean_culmen_length =</span> <span class="fu">mean</span>(culmen_length_mm, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code></pre></div>
<div class="info">
<p>
Note - we provide informative names for ourselves on the left side of
the <code>=</code>
</p>
<p>
When performing calculations in summarise it is important to set
<code>na.rm = TRUE</code>, this removes missing values from the
calculation
</p>
</div>
<div class="try">
<p>
What happens when you try to produce calculations that include
<code>NA</code>? e.g <code>NA</code> + 4 or <code>NA</code> * 5
</p>
</div>
<p>We can use several functions in <code>summarise</code>. Which means we can string several calculations together in a single step, and generate more insights into our data.</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb152-2"><a href="#cb152-2" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>(), <span class="co"># number of rows of data</span></span>
<span id="cb152-3"><a href="#cb152-3" tabindex="-1"></a>            <span class="at">num_penguins =</span> <span class="fu">n_distinct</span>(individual_id), <span class="co"># number of unique individuals</span></span>
<span id="cb152-4"><a href="#cb152-4" tabindex="-1"></a>            <span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="co"># mean flipper length</span></span>
<span id="cb152-5"><a href="#cb152-5" tabindex="-1"></a>            <span class="at">prop_female =</span> <span class="fu">sum</span>(sex <span class="sc">==</span> <span class="st">&quot;FEMALE&quot;</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fu">n</span>()) <span class="co"># proportion of observations that are coded as female</span></span></code></pre></div>
<button id="displayTextunnamed-chunk-67" onclick="javascript:toggle(&#39;unnamed-chunk-67&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-67" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<p>There are 190 unique IDs and 344 total observations so it would appear that there are roughly twice as many observations as unique individuals. The sex ratio is roughly even (48% female) and the average flipper length is 201 mm.</p>
</div>
</div>
</div>
<div id="summarize-across-columns" class="section level4" number="8.7.1.1">
<h4><span class="header-section-number">8.7.1.1</span> Summarize <code>across</code> columns</h4>
<p><code>across</code> has two arguments, <code>.cols</code> and <code>.fns</code>.</p>
<ul>
<li><p>The <code>.cols</code> argument lets you select the columns you wish to apply functions to</p></li>
<li><p>The <code>.fns</code> argument applies the required function to all of the selected columns.</p></li>
</ul>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" tabindex="-1"></a><span class="co"># Across ----</span></span>
<span id="cb153-2"><a href="#cb153-2" tabindex="-1"></a><span class="co"># The mean of ALL numeric columns in the data, where(is.numeric == TRUE) hunts for numeric columns</span></span>
<span id="cb153-3"><a href="#cb153-3" tabindex="-1"></a></span>
<span id="cb153-4"><a href="#cb153-4" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb153-5"><a href="#cb153-5" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">where</span>(is.numeric), </span>
<span id="cb153-6"><a href="#cb153-6" tabindex="-1"></a>                   <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">mean</span>(., <span class="at">na.rm=</span><span class="cn">TRUE</span>)))</span></code></pre></div>
<p>The above example calculates the means of any &amp; all numeric variables in the dataset.</p>
<p>The below example is a slightly complicated way of running the n_distinct for summarise. The <code>.cols()</code> looks for any column that contains the word "penguin" and then runs the <code>n_distinct()</code>command on these</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" tabindex="-1"></a><span class="co"># number of distinct penguins, as only one column contains the word penguin</span></span>
<span id="cb154-2"><a href="#cb154-2" tabindex="-1"></a><span class="co"># the argument contains looks for columns that match a character expression</span></span>
<span id="cb154-3"><a href="#cb154-3" tabindex="-1"></a></span>
<span id="cb154-4"><a href="#cb154-4" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb154-5"><a href="#cb154-5" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">contains</span>(<span class="st">&quot;individual&quot;</span>), </span>
<span id="cb154-6"><a href="#cb154-6" tabindex="-1"></a>                   <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">n_distinct</span>(.)))</span></code></pre></div>
</div>
</div>
<div id="group_by-revisited" class="section level3" number="8.7.2">
<h3><span class="header-section-number">8.7.2</span> group_by revisited</h3>
<p>The <code>group_by</code> function provides the ability to separate our summary functions according to any subgroups we wish to make. The real magic happens when we pair this with <code>summarise</code> and <code>mutate</code>.</p>
<p>In this example, by grouping on the individual penguin ids, then summarising by n - we can see how many times each penguin was monitored in the course of this study.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" tabindex="-1"></a>penguin_stats <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb155-2"><a href="#cb155-2" tabindex="-1"></a>  <span class="fu">group_by</span>(individual_id) <span class="sc">|&gt;</span> </span>
<span id="cb155-3"><a href="#cb155-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">num=</span><span class="fu">n</span>())</span></code></pre></div>
<div class="info">
<p>
Remember the actions of <code>group_by</code> are “invisible”.
Subsequent functions are applied in a “grouped by” manner - but the
dataframe itself looks unchanged.
</p>
</div>
<div id="more-than-one-grouping-variable" class="section level4" number="8.7.2.1">
<h4><span class="header-section-number">8.7.2.1</span> More than one grouping variable</h4>
<p>What if we need to calculate by more than one variable at a time?
No problem we can submit several arguments:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" tabindex="-1"></a>penguins_grouped <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb156-2"><a href="#cb156-2" tabindex="-1"></a>  <span class="fu">group_by</span>(sex, species)</span></code></pre></div>
<p>We can then calculate the mean flipper length of penguins in each of the six combinations</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" tabindex="-1"></a>penguins_grouped <span class="sc">|&gt;</span> </span>
<span id="cb157-2"><a href="#cb157-2" tabindex="-1"></a><span class="fu">summarise</span>(<span class="at">mean_flipper =</span> <span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code></pre></div>
<p>Now the first row of our summary table shows us the mean flipper length (in mm) for female Adelie penguins. There are eight rows in total, six unique combinations and two rows where the sex of the penguins was not recorded(<code>NA</code>)</p>
</div>
<div id="using-group_by-with-mutate" class="section level4" number="8.7.2.2">
<h4><span class="header-section-number">8.7.2.2</span> using group_by with mutate</h4>
<p>So far we have only used <code>group_by</code> with the <code>summarise</code> function, but this doesn't always have to be the case.
When <code>mutate</code> is used with <code>group_by</code>, the calculations occur by 'group'. Here's an example:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" tabindex="-1"></a><span class="co"># Using mutate and group_by ----</span></span>
<span id="cb158-2"><a href="#cb158-2" tabindex="-1"></a>centered_penguins <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb158-3"><a href="#cb158-3" tabindex="-1"></a>  <span class="fu">group_by</span>(sex, species) <span class="sc">|&gt;</span> </span>
<span id="cb158-4"><a href="#cb158-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">flipper_centered =</span> flipper_length_mm<span class="sc">-</span><span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb158-5"><a href="#cb158-5" tabindex="-1"></a></span>
<span id="cb158-6"><a href="#cb158-6" tabindex="-1"></a>centered_penguins <span class="sc">|&gt;</span> </span>
<span id="cb158-7"><a href="#cb158-7" tabindex="-1"></a>  <span class="fu">select</span>(flipper_centered)</span>
<span id="cb158-8"><a href="#cb158-8" tabindex="-1"></a><span class="co"># Each row now returns a value for EACH penguin of how much greater/lesser than the group average (sex and species) its flipper is. </span></span></code></pre></div>
<p>Here we are calculating a <strong>group centered mean</strong>, this new variable contains the <em>difference</em> between each observation and the mean of whichever group that observation is in.</p>
</div>
<div id="remove-group_by" class="section level4" number="8.7.2.3">
<h4><span class="header-section-number">8.7.2.3</span> remove group_by</h4>
<p>On occasion we may need to remove the grouping information from a dataset. This is often required when we string pipes together, when we need to work using a grouping structure, then revert back to the whole dataset again</p>
<p>Look at our grouped dataframe, and we can see the information on groups is at the top of the data:</p>
<pre><code># A tibble: 344 x 10
# Groups:   sex, species [8]
   species island culmen_length_mm culmen_depth_mm flipper_length_~ body_mass_g
   &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt;
 1 Adelie  Torge~           39.1          18.7              181        3750
 2 Adelie  Torge~           39.5          17.4              186        3800
 3 Adelie  Torge~           40.3          18                195        3250</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" tabindex="-1"></a><span class="co"># Run this command will remove the groups - but this is only saved if assigned BACK to an object</span></span>
<span id="cb160-2"><a href="#cb160-2" tabindex="-1"></a></span>
<span id="cb160-3"><a href="#cb160-3" tabindex="-1"></a>centered_penguins <span class="ot">&lt;-</span> centered_penguins <span class="sc">|&gt;</span> </span>
<span id="cb160-4"><a href="#cb160-4" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb160-5"><a href="#cb160-5" tabindex="-1"></a></span>
<span id="cb160-6"><a href="#cb160-6" tabindex="-1"></a>centered_penguins</span></code></pre></div>
<p>Look at this output - you can see the information on groups has now been removed from the data.</p>
</div>
</div>
</div>
<div id="working-with-character-strings" class="section level2" number="8.8">
<h2><span class="header-section-number">8.8</span> Working with character strings</h2>
<p>Datasets often contain words, and we call these words "(character) strings".</p>
<p>Often these aren't quite how we want them to be, but we can manipulate these as much as we like. Functions in the package <code>stringr</code>, are fantastic. And the number of different types of manipulations are endless!</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" tabindex="-1"></a><span class="co"># Stringr ----</span></span>
<span id="cb161-2"><a href="#cb161-2" tabindex="-1"></a></span>
<span id="cb161-3"><a href="#cb161-3" tabindex="-1"></a><span class="fu">str_replace_all</span>(<span class="fu">names</span>(penguins), <span class="fu">c</span>(<span class="st">&quot;e&quot;</span><span class="ot">=</span> <span class="st">&quot;E&quot;</span>))</span>
<span id="cb161-4"><a href="#cb161-4" tabindex="-1"></a><span class="co"># replace all character &quot;e&quot; with &quot;E&quot;</span></span></code></pre></div>
<div id="more-stringr" class="section level3" number="8.8.1">
<h3><span class="header-section-number">8.8.1</span> More stringr</h3>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" tabindex="-1"></a>penguins  <span class="sc">|&gt;</span>  </span>
<span id="cb162-2"><a href="#cb162-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species=</span><span class="fu">str_to_upper</span>(species))</span>
<span id="cb162-3"><a href="#cb162-3" tabindex="-1"></a><span class="co"># Capitalise all letters</span></span></code></pre></div>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb163-2"><a href="#cb163-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species=</span><span class="fu">str_remove_all</span>(species, <span class="st">&quot;e&quot;</span>))</span>
<span id="cb163-3"><a href="#cb163-3" tabindex="-1"></a><span class="co"># remove every character &quot;e&quot; from selected variables</span></span></code></pre></div>
<p>We can also trim leading or trailing empty spaces with <code>str_trim</code>. These are often problematic and difficult to spot e.g.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">label=</span><span class="fu">c</span>(<span class="st">&quot;penguin&quot;</span>, <span class="st">&quot; penguin&quot;</span>, <span class="st">&quot;penguin &quot;</span>)) </span>
<span id="cb164-2"><a href="#cb164-2" tabindex="-1"></a>df2 <span class="co"># make a test dataframe</span></span></code></pre></div>
<p>We can easily imagine a scenario where data is manually input, and trailing or leading spaces are left in. These are difficult to spot by eye - but problematic because as far as R is concerned these are different values. We can use the function <code>distinct</code> to return the names of all the different levels it can find in this dataframe.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" tabindex="-1"></a>df2 <span class="sc">|&gt;</span> </span>
<span id="cb165-2"><a href="#cb165-2" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code></pre></div>
<p>If we pipe the data throught the <code>str_trim</code> function to remove any gaps, then pipe this on to <code>distinct</code> again - by removing the whitespace, R now recognises just one level to this data.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" tabindex="-1"></a>df2 <span class="sc">|&gt;</span> </span>
<span id="cb166-2"><a href="#cb166-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">label=</span><span class="fu">str_trim</span>(label, <span class="at">side=</span><span class="st">&quot;both&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb166-3"><a href="#cb166-3" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code></pre></div>
<p>A quick example of how to extract partial strings according to a pattern is to use <code>str_detect</code>. Combined with <code>filter</code> it is possible to subset a dataframe by searching for all the strings that match provided information, such as all the penguin IDs that start with "N1"</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb167-2"><a href="#cb167-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(individual_id, <span class="st">&quot;N1&quot;</span>))</span></code></pre></div>
</div>
<div id="separate" class="section level3" number="8.8.2">
<h3><span class="header-section-number">8.8.2</span> separate</h3>
<p>Sometimes a string might contain two pieces of information in one. This does not confirm to our tidy data principles. But we can easily separate the information with <code>separate()</code> from the <code>tidyr</code> package.</p>
<p>First we produce some made-up data</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">label=</span><span class="fu">c</span>(<span class="st">&quot;a-1&quot;</span>, <span class="st">&quot;a-2&quot;</span>, <span class="st">&quot;a-3&quot;</span>)) </span>
<span id="cb168-2"><a href="#cb168-2" tabindex="-1"></a><span class="co">#make a one column tibble</span></span>
<span id="cb168-3"><a href="#cb168-3" tabindex="-1"></a>df</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr>
<th style="text-align:left;">
label
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
a-1
</td>
</tr>
<tr>
<td style="text-align:left;">
a-2
</td>
</tr>
<tr>
<td style="text-align:left;">
a-3
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" tabindex="-1"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb169-2"><a href="#cb169-2" tabindex="-1"></a>  <span class="fu">separate</span>(label, <span class="co"># name of variable</span></span>
<span id="cb169-3"><a href="#cb169-3" tabindex="-1"></a>           <span class="fu">c</span>(<span class="st">&quot;treatment&quot;</span>, <span class="st">&quot;replicate&quot;</span>), <span class="co"># new column names</span></span>
<span id="cb169-4"><a href="#cb169-4" tabindex="-1"></a>           <span class="at">sep=</span><span class="st">&quot;-&quot;</span>) <span class="co"># the character to mark where the separation occurs</span></span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr>
<th style="text-align:left;">
treatment
</th>
<th style="text-align:left;">
replicate
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
a
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
a
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
a
</td>
<td style="text-align:left;">
3
</td>
</tr>
</tbody>
</table>
</div>
<p>We started with one variable called <code>label</code> and then split it into two variables, <code>treatment</code> and <code>replicate</code>, with the split made where <code>-</code> occurs.
The opposite of this function is <code>unite()</code></p>
</div>
</div>
<div id="working-with-dates" class="section level2" number="8.9">
<h2><span class="header-section-number">8.9</span> Working with dates</h2>
<p>Working with dates can be tricky, treating date as strictly numeric is problematic, it won't account for number of days in months or number of months in a year.</p>
<p>Additionally there's a lot of different ways to write the same date:</p>
<ul>
<li><p>13-10-2019</p></li>
<li><p>10-13-2019</p></li>
<li><p>13-10-19</p></li>
<li><p>13th Oct 2019</p></li>
<li><p>2019-10-13</p></li>
</ul>
<p>This variability makes it difficult to tell our software how to read the information, luckily we can use the functions in the <code>lubridate</code> package.</p>
<div class="warning">
<p>
If you get a warning that some dates could not be parsed, then you
might find the date has been inconsistently entered into the
dataset.
</p>
<p>
Pay attention to warning and error messages
</p>
</div>
<p>Depending on how we interpret the date ordering in a file, we can use <code>ymd()</code>, <code>ydm()</code>, <code>mdy()</code>, <code>dmy()</code></p>
<ul>
<li><strong>Question</strong> What is the appropriate function from the above to use on the <code>date_egg</code> variable?</li>
</ul>
<div id="radio_ALGSWJORRQ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_ALGSWJORRQ" value=""></input> <span>ymd()</span></label><label><input type="radio" autocomplete="off" name="radio_ALGSWJORRQ" value=""></input> <span>ydm()</span></label><label><input type="radio" autocomplete="off" name="radio_ALGSWJORRQ" value=""></input> <span>mdy()</span></label><label><input type="radio" autocomplete="off" name="radio_ALGSWJORRQ" value="answer"></input> <span>dmy()</span></label>
</div>
<button id="displayTextunnamed-chunk-86" onclick="javascript:toggle(&#39;unnamed-chunk-86&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-86" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span></span>
<span id="cb170-2"><a href="#cb170-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_egg_proper =</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(date_egg))</span></code></pre></div>
</div>
</div>
</div>
<p>Here we use the <code>mutate</code> function from <code>dplyr</code> to create a <em>new variable</em> called <code>date_egg_proper</code> based on the output of converting the characters in <code>date_egg</code> to date format. The original variable is left intact, if we had specified the "new" variable was also called <code>date_egg</code> then it would have overwritten the original variable.</p>
<p>Once we have established our date data, we are able to perform calculations. Such as the date range across which our data was collected.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb171-2"><a href="#cb171-2" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min_date=</span><span class="fu">min</span>(date_egg_proper),</span>
<span id="cb171-3"><a href="#cb171-3" tabindex="-1"></a>            <span class="at">max_date=</span><span class="fu">max</span>(date_egg_proper))</span></code></pre></div>
<div id="calculations-with-dates" class="section level4" number="8.9.0.1">
<h4><span class="header-section-number">8.9.0.1</span> Calculations with dates</h4>
<p>How many times was each penguin measured, and across what total time period?</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb172-2"><a href="#cb172-2" tabindex="-1"></a>  <span class="fu">group_by</span>(individual_id) <span class="sc">|&gt;</span> </span>
<span id="cb172-3"><a href="#cb172-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">first_observation=</span><span class="fu">min</span>(date_egg_proper), </span>
<span id="cb172-4"><a href="#cb172-4" tabindex="-1"></a>            <span class="at">last_observation=</span><span class="fu">max</span>(date_egg_proper), </span>
<span id="cb172-5"><a href="#cb172-5" tabindex="-1"></a>            <span class="at">study_duration =</span> last_observation<span class="sc">-</span>first_observation, </span>
<span id="cb172-6"><a href="#cb172-6" tabindex="-1"></a>            <span class="at">n=</span><span class="fu">n</span>())</span></code></pre></div>
<p>Cool we can also convert intervals such as days into weeks, months or years with <code>dweeks(1)</code>, <code>dmonths(1)</code>, <code>dyears(1)</code>.</p>
<p>As with all cool functions, you should check out the RStudio <a href="https://www.rstudio.com/resources/cheatsheets/">cheat sheet</a> for more information. Date type data is common in datasets, and learning to work with it is a useful skill.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb173-2"><a href="#cb173-2" tabindex="-1"></a>  <span class="fu">group_by</span>(individual_id) <span class="sc">|&gt;</span> </span>
<span id="cb173-3"><a href="#cb173-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">first_observation=</span><span class="fu">min</span>(date_egg_proper), </span>
<span id="cb173-4"><a href="#cb173-4" tabindex="-1"></a>            <span class="at">last_observation=</span><span class="fu">max</span>(date_egg_proper), </span>
<span id="cb173-5"><a href="#cb173-5" tabindex="-1"></a>            <span class="at">study_duration_years =</span> (last_observation<span class="sc">-</span>first_observation)<span class="sc">/</span>lubridate<span class="sc">::</span><span class="fu">dyears</span>(<span class="dv">1</span>), </span>
<span id="cb173-6"><a href="#cb173-6" tabindex="-1"></a>            <span class="at">n=</span><span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb173-7"><a href="#cb173-7" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(study_duration_years))</span></code></pre></div>
<p>Or extract the year from the date - let's do this now and update our dataframe</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb174-2"><a href="#cb174-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.integer</span>(lubridate<span class="sc">::</span><span class="fu">year</span>(date_egg_proper)))</span></code></pre></div>
</div>
</div>
<div id="factors" class="section level2" number="8.10">
<h2><span class="header-section-number">8.10</span> Factors</h2>
<p>In R, factors are a class of data that allow for <strong>ordered categories</strong> with a fixed set of acceptable values.</p>
<p>Typically, you would convert a column from character or numeric class to a factor if you want to set an intrinsic order to the values (“levels”) so they can be displayed non-alphabetically in plots and tables, or for use in linear model analyses (more on this later).</p>
<p>Another common use of factors is to standardise the legends of plots so they do not fluctuate if certain values are temporarily absent from the data.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb175-2"><a href="#cb175-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">flipper_range =</span> <span class="fu">case_when</span>(flipper_length_mm <span class="sc">&lt;=</span> <span class="dv">190</span> <span class="sc">~</span> <span class="st">&quot;small&quot;</span>,</span>
<span id="cb175-3"><a href="#cb175-3" tabindex="-1"></a>                                   flipper_length_mm <span class="sc">&gt;</span><span class="dv">190</span> <span class="sc">&amp;</span> flipper_length_mm <span class="sc">&lt;</span> <span class="dv">213</span> <span class="sc">~</span> <span class="st">&quot;medium&quot;</span>,</span>
<span id="cb175-4"><a href="#cb175-4" tabindex="-1"></a>                                   flipper_length_mm <span class="sc">&gt;=</span> <span class="dv">213</span> <span class="sc">~</span> <span class="st">&quot;large&quot;</span>))</span></code></pre></div>
<p>If we make a barplot, the order of the values on the x axis will typically be in alphabetical order for any character data</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb176-2"><a href="#cb176-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_range))<span class="sc">+</span></span>
<span id="cb176-3"><a href="#cb176-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="02a-penguin_files/figure-html/unnamed-chunk-93-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>To convert a character or numeric column to class factor, you can use any function from the <code>forcats</code> package. They will convert to class factor and then also perform or allow certain ordering of the levels - for example using <code>forcats::fct_relevel()</code> lets you manually specify the level order.</p>
<p>The function <code>as_factor()</code> simply converts the class without any further capabilities.</p>
<p>The <code>base R</code> function <code>factor()</code> converts a column to factor and allows you to manually specify the order of the levels, as a character vector to its <code>levels =</code> argument.</p>
<p>Below we use <code>mutate()</code> and <code>fct_relevel()</code> to convert the column flipper_range from class character to class factor.</p>
<div class="tab">
<button class="tablinksunnamed-chunk-94 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-94&#39;, &#39;unnamed-chunk-94&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-94" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-94&#39;, &#39;unnamed-chunk-94&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-94" class="tabcontentunnamed-chunk-94">
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" tabindex="-1"></a>penguins<span class="sc">$</span>flipper_range <span class="ot">&lt;-</span> <span class="fu">factor</span>(penguins<span class="sc">$</span>flipper_range)</span></code></pre></div>
</div>
<div id="option2unnamed-chunk-94" class="tabcontentunnamed-chunk-94">
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb178-2"><a href="#cb178-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">flipper_range =</span> <span class="fu">fct_relevel</span>(flipper_range))</span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-94') </script>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" tabindex="-1"></a><span class="fu">levels</span>(penguins<span class="sc">$</span>flipper_range)</span></code></pre></div>
<pre><code>## [1] &quot;large&quot;  &quot;medium&quot; &quot;small&quot;</code></pre>
<div class="tab">
<button class="tablinksunnamed-chunk-96 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-96&#39;, &#39;unnamed-chunk-96&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-96" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-96&#39;, &#39;unnamed-chunk-96&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-96" class="tabcontentunnamed-chunk-96">
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" tabindex="-1"></a>penguins<span class="sc">$</span>flipper_range <span class="ot">&lt;-</span> <span class="fu">factor</span>(penguins<span class="sc">$</span>flipper_range,</span>
<span id="cb181-2"><a href="#cb181-2" tabindex="-1"></a>                                  <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;small&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;large&quot;</span>))</span></code></pre></div>
</div>
<div id="option2unnamed-chunk-96" class="tabcontentunnamed-chunk-96">
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" tabindex="-1"></a><span class="co"># Correct the code in your script with this version</span></span>
<span id="cb182-2"><a href="#cb182-2" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb182-3"><a href="#cb182-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">flipper_range =</span> <span class="fu">fct_relevel</span>(flipper_range, <span class="st">&quot;small&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;large&quot;</span>))</span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-96') </script>
<p>Now when we call a plot, we can see that the x axis categories match the intrinsic order we have specified with our factor levels.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb183-2"><a href="#cb183-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_range))<span class="sc">+</span></span>
<span id="cb183-3"><a href="#cb183-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="02a-penguin_files/figure-html/unnamed-chunk-97-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="info">
<p>
Factors will also be important when we build linear models a bit
later. The reference or intercept for a categorical predictor variable
when it is read as a <code>&lt;chr&gt;</code> is set by R as the first
one when ordered alphabetically. This may not always be the most
appropriate choice, and by changing this to an ordered
<code>&lt;fct&gt;</code> we can manually set the intercept.
</p>
</div>
</div>
<div id="finished" class="section level2" number="8.11">
<h2><span class="header-section-number">8.11</span> Finished</h2>
<ul>
<li><p>Make sure you have <strong>saved your script 💾</strong> and given it the filename "01_import_penguins_data.R" in the <a href="#activity-1-organising-our-workspace">"scripts" folder</a>.</p></li>
<li><p>You have been playing with a lot of dplyr functions, think - what functions do I actually need to make sure I have a tidy and clean dataset with appropriate column names and formatted data?</p></li>
<li><p>We want : snake_case names, shorter isotope names, simpler species values and properly formatted date data with a new column for year.</p></li>
</ul>
<div class="webex-solution">
<button>
Check your script
</button>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" tabindex="-1"></a><span class="co">#___________________________----</span></span>
<span id="cb184-2"><a href="#cb184-2" tabindex="-1"></a><span class="co"># SET UP ----</span></span>
<span id="cb184-3"><a href="#cb184-3" tabindex="-1"></a><span class="do">## An analysis of the bill dimensions of male and female Adelie, Gentoo and Chinstrap penguins ----</span></span>
<span id="cb184-4"><a href="#cb184-4" tabindex="-1"></a></span>
<span id="cb184-5"><a href="#cb184-5" tabindex="-1"></a><span class="do">### Data first published in  Gorman, KB, TD Williams, and WR Fraser. 2014. “Ecological Sexual Dimorphism and Environmental Variability Within a Community of Antarctic Penguins (Genus Pygoscelis).” PLos One 9 (3): e90081. https://doi.org/10.1371/journal.pone.0090081. ----</span></span>
<span id="cb184-6"><a href="#cb184-6" tabindex="-1"></a><span class="co">#__________________________----</span></span>
<span id="cb184-7"><a href="#cb184-7" tabindex="-1"></a></span>
<span id="cb184-8"><a href="#cb184-8" tabindex="-1"></a><span class="co"># PACKAGES ----</span></span>
<span id="cb184-9"><a href="#cb184-9" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># tidy data packages</span></span>
<span id="cb184-10"><a href="#cb184-10" tabindex="-1"></a><span class="fu">library</span>(janitor) <span class="co"># cleans variable names</span></span>
<span id="cb184-11"><a href="#cb184-11" tabindex="-1"></a><span class="co">#__________________________----</span></span>
<span id="cb184-12"><a href="#cb184-12" tabindex="-1"></a><span class="co"># IMPORT DATA ----</span></span>
<span id="cb184-13"><a href="#cb184-13" tabindex="-1"></a>penguins_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span> (<span class="st">&quot;data/penguins_raw.csv&quot;</span>)</span>
<span id="cb184-14"><a href="#cb184-14" tabindex="-1"></a></span>
<span id="cb184-15"><a href="#cb184-15" tabindex="-1"></a><span class="fu">attributes</span>(penguins_raw) <span class="co"># reads as tibble</span></span>
<span id="cb184-16"><a href="#cb184-16" tabindex="-1"></a></span>
<span id="cb184-17"><a href="#cb184-17" tabindex="-1"></a><span class="fu">head</span>(penguins_raw) <span class="co"># check the data has loaded, prints first 10 rows of dataframe</span></span>
<span id="cb184-18"><a href="#cb184-18" tabindex="-1"></a><span class="co">#__________________________----</span></span>
<span id="cb184-19"><a href="#cb184-19" tabindex="-1"></a><span class="co"># CLEAN DATA ----</span></span>
<span id="cb184-20"><a href="#cb184-20" tabindex="-1"></a></span>
<span id="cb184-21"><a href="#cb184-21" tabindex="-1"></a><span class="co"># clean all variable names to snake_case using the clean_names function from the janitor package</span></span>
<span id="cb184-22"><a href="#cb184-22" tabindex="-1"></a><span class="co"># note we are using assign &lt;- to overwrite the old version of penguins with a version that has updated names</span></span>
<span id="cb184-23"><a href="#cb184-23" tabindex="-1"></a><span class="co"># this changes the data in our R workspace but NOT the original csv file</span></span>
<span id="cb184-24"><a href="#cb184-24" tabindex="-1"></a></span>
<span id="cb184-25"><a href="#cb184-25" tabindex="-1"></a>penguins_clean <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(penguins_raw) <span class="co"># clean the column names</span></span>
<span id="cb184-26"><a href="#cb184-26" tabindex="-1"></a></span>
<span id="cb184-27"><a href="#cb184-27" tabindex="-1"></a><span class="fu">colnames</span>(penguins_clean) <span class="co"># quickly check the new variable names</span></span>
<span id="cb184-28"><a href="#cb184-28" tabindex="-1"></a></span>
<span id="cb184-29"><a href="#cb184-29" tabindex="-1"></a><span class="co"># shorten the variable names for N and C isotope blood samples</span></span>
<span id="cb184-30"><a href="#cb184-30" tabindex="-1"></a></span>
<span id="cb184-31"><a href="#cb184-31" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">rename</span>(penguins_clean,</span>
<span id="cb184-32"><a href="#cb184-32" tabindex="-1"></a>         <span class="st">&quot;delta_15n&quot;</span><span class="ot">=</span><span class="st">&quot;delta_15_n_o_oo&quot;</span>,  <span class="co"># use rename from the dplyr package</span></span>
<span id="cb184-33"><a href="#cb184-33" tabindex="-1"></a>         <span class="st">&quot;delta_13c&quot;</span><span class="ot">=</span><span class="st">&quot;delta_13_c_o_oo&quot;</span>)</span>
<span id="cb184-34"><a href="#cb184-34" tabindex="-1"></a></span>
<span id="cb184-35"><a href="#cb184-35" tabindex="-1"></a><span class="co"># use mutate and case_when for a statement that conditionally changes the names of the values in a variable</span></span>
<span id="cb184-36"><a href="#cb184-36" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb184-37"><a href="#cb184-37" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">case_when</span>(species <span class="sc">==</span> <span class="st">&quot;Adelie Penguin (Pygoscelis adeliae)&quot;</span> <span class="sc">~</span> <span class="st">&quot;Adelie&quot;</span>,</span>
<span id="cb184-38"><a href="#cb184-38" tabindex="-1"></a>                             species <span class="sc">==</span> <span class="st">&quot;Gentoo penguin (Pygoscelis papua)&quot;</span> <span class="sc">~</span> <span class="st">&quot;Gentoo&quot;</span>,</span>
<span id="cb184-39"><a href="#cb184-39" tabindex="-1"></a>                             species <span class="sc">==</span> <span class="st">&quot;Chinstrap penguin (Pygoscelis antarctica)&quot;</span> <span class="sc">~</span> <span class="st">&quot;Chinstrap&quot;</span>))</span>
<span id="cb184-40"><a href="#cb184-40" tabindex="-1"></a></span>
<span id="cb184-41"><a href="#cb184-41" tabindex="-1"></a><span class="co"># use lubridate to format date and extract the year</span></span>
<span id="cb184-42"><a href="#cb184-42" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span></span>
<span id="cb184-43"><a href="#cb184-43" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_egg_proper =</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(date_egg))</span>
<span id="cb184-44"><a href="#cb184-44" tabindex="-1"></a></span>
<span id="cb184-45"><a href="#cb184-45" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb184-46"><a href="#cb184-46" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.integer</span>(lubridate<span class="sc">::</span><span class="fu">year</span>(date_egg_proper)))</span>
<span id="cb184-47"><a href="#cb184-47" tabindex="-1"></a></span>
<span id="cb184-48"><a href="#cb184-48" tabindex="-1"></a><span class="co"># Export tidy dataframe for use in future sessions</span></span>
<span id="cb184-49"><a href="#cb184-49" tabindex="-1"></a></span>
<span id="cb184-50"><a href="#cb184-50" tabindex="-1"></a><span class="fu">saveRDS</span>(penguins, <span class="at">file =</span> <span class="st">&quot;outputs/2024_11_01_penguin_clean.RDS&quot;</span>)</span></code></pre></div>
</div>
<ul>
<li><p>Some parts of our script are <em>redundant</em> for the purposes of generating a clean dataframe, we need the <code>penguins</code> data in a tidy/rectangular format, checked for missing values, duplicated data and with clean column names.</p></li>
<li><p>If we have that we can generate a .RDS file to save this dataframe for use in data insights scripts</p></li>
</ul>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" tabindex="-1"></a><span class="fu">saveRDS</span>(penguins, <span class="at">file =</span> <span class="st">&quot;outputs/2024_11_01_penguin_clean.RDS&quot;</span>)</span></code></pre></div>
<ul>
<li>Does your workspace look like the below?</li>
</ul>
<div class="figure" style="text-align: center">
<img src="images/project_penguin.png" alt="My neat project layout" width="100%" />
<p class="caption">
(#fig:unnamed-chunk-101)My neat project layout
</p>
</div>
<div class="figure" style="text-align: center">
<img src="images/r_script.png" alt="My scripts and file subdirectory" width="100%" />
<p class="caption">
(#fig:unnamed-chunk-102)My scripts and file subdirectory
</p>
</div>
</div>
<div id="activity-test-yourself-1" class="section level2" number="8.12">
<h2><span class="header-section-number">8.12</span> Activity: Test yourself</h2>
<p><strong>Question 1.</strong> In order to subset a data by <strong>rows</strong> I should use the function <select class='webex-select'><option value='blank'></option><option value=''>select()</option><option value='answer'>filter()</option><option value=''>group_by()</option></select></p>
<p><strong>Question 2.</strong> In order to subset a data by <strong>columns</strong> I should use the function <select class='webex-select'><option value='blank'></option><option value='answer'>select()</option><option value=''>filter()</option><option value=''>group_by()</option></select></p>
<p><strong>Question 3.</strong> In order to make a new column I should use the function <select class='webex-select'><option value='blank'></option><option value=''>group_by()</option><option value=''>select()</option><option value='answer'>mutate()</option><option value=''>arrange()</option></select></p>
<p><strong>Question 4.</strong> Which operator should I use to send the output from line of code into the next line? <input class='webex-solveme nospaces' size='2' data-answer='["|>"]'/&gt;</p>
<p><strong>Question 5.</strong> What will be the outcome of the following line of code?</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb186-2"><a href="#cb186-2" tabindex="-1"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">&quot;Adelie&quot;</span>)</span></code></pre></div>
<p><select class='webex-select'><option value='blank'></option><option value=''>The penguins dataframe object is reduced to include only Adelie penguins from now on</option><option value='answer'>A new filtered dataframe of only Adelie penguins will be printed into the console</option></select></p>
<div class="webex-solution">
<button>
Explain this answer
</button>
<p>Unless the output of a series of functions is "assigned" to an object using <code>&lt;-</code> it will not be saved, the results will be immediately printed. This code would have to be modified to the below in order to create a new filtered object <code>penguins_filtered</code></p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" tabindex="-1"></a>penguins_filtered <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb187-2"><a href="#cb187-2" tabindex="-1"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">&quot;Adelie&quot;</span>)</span></code></pre></div>
</div>
<p><br></p>
<p><strong>Question 6.</strong> What is the main point of a data "pipe"?</p>
<p><select class='webex-select'><option value='blank'></option><option value=''>The code runs faster</option><option value='answer'>The code is easier to read</option></select></p>
<p><strong>Question 7.</strong> The naming convention outputted by the function `janitor::clean_names() is
<select class='webex-select'><option value='blank'></option><option value='answer'>snake_case</option><option value=''>camelCase</option><option value=''>SCREAMING_SNAKE_CASE</option><option value=''>kebab-case</option></select></p>
<p><strong>Question 8.</strong> Which package provides useful functions for manipulating character strings?</p>
<p><select class='webex-select'><option value='blank'></option><option value='answer'>stringr</option><option value=''>ggplot2</option><option value=''>lubridate</option><option value=''>forcats</option></select></p>
<p><strong>Question 9.</strong> Which package provides useful functions for manipulating dates?</p>
<p><select class='webex-select'><option value='blank'></option><option value=''>stringr</option><option value=''>ggplot2</option><option value='answer'>lubridate</option><option value=''>forcats</option></select></p>
<p><strong>Question 10.</strong> If we do not specify a character variable as a factor, then ordering will default to what?</p>
<p><select class='webex-select'><option value='blank'></option><option value=''>numerical</option><option value='answer'>alphabetical</option><option value=''>order in the dataframe</option></select></p>
</div>
</div>
<div id="data-reshaping" class="section level1" number="9">
<h1><span class="header-section-number">9</span> Data reshaping</h1>
<p>While neither <em>wide</em> or <em>long</em> data is more correct than the other, we will work with <em>long</em> data as it is clearer how many distinct types of variables there are in our data <em>and</em> the tools we will be using from the <code>tidyverse</code> are designed to work with <em>long</em> data.</p>
<div id="using-pivot-functions" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Using <code>pivot</code> functions</h2>
<p>There are functions found as part of the <code>tidyverse</code> that can help us to reshape data.</p>
<ul>
<li><p><code>tidyr::pivot_wider()</code> - from <em>long</em> to <em>wide</em> format</p></li>
<li><p><code>tidyr::pivot_longer()</code> - from <em>wide</em> to <em>long</em> format</p></li>
</ul>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" tabindex="-1"></a> country <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>, <span class="st">&quot;z&quot;</span>)</span>
<span id="cb188-2"><a href="#cb188-2" tabindex="-1"></a> yr1960 <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>)</span>
<span id="cb188-3"><a href="#cb188-3" tabindex="-1"></a> yr1970 <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="dv">13</span>, <span class="dv">23</span>, <span class="dv">33</span>)</span>
<span id="cb188-4"><a href="#cb188-4" tabindex="-1"></a> yr2010 <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">25</span>, <span class="dv">35</span>)</span>
<span id="cb188-5"><a href="#cb188-5" tabindex="-1"></a></span>
<span id="cb188-6"><a href="#cb188-6" tabindex="-1"></a>country_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(country, yr1960, yr1970, yr2010)</span>
<span id="cb188-7"><a href="#cb188-7" tabindex="-1"></a>country_data</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:right;">
yr1960
</th>
<th style="text-align:right;">
yr1970
</th>
<th style="text-align:right;">
yr2010
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
x
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
y
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
25
</td>
</tr>
<tr>
<td style="text-align:left;">
z
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
35
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" tabindex="-1"></a><span class="fu">pivot_longer</span>(<span class="at">data =</span> country_data,</span>
<span id="cb189-2"><a href="#cb189-2" tabindex="-1"></a>             <span class="at">cols =</span> yr1960<span class="sc">:</span>yr2010,</span>
<span id="cb189-3"><a href="#cb189-3" tabindex="-1"></a>             <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>,</span>
<span id="cb189-4"><a href="#cb189-4" tabindex="-1"></a>             <span class="at">names_prefix =</span> <span class="st">&quot;yr&quot;</span>,</span>
<span id="cb189-5"><a href="#cb189-5" tabindex="-1"></a>             <span class="at">values_to =</span> <span class="st">&quot;metric&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="images/tidyr_pivot.png" alt="Reshaping data with pivot" width="100%" />
<p class="caption">
(#fig:img-pivot)Reshaping data with pivot
</p>
</div>
<p>To <em>save</em> these changes to your data format, you must assign this to an object, and you have two options</p>
<ul>
<li><p>Use the same name as the original R object, this will <em>overwrite</em> the original with the new format</p></li>
<li><p>Use a <em>new</em> name for the reformatted data both R objects will exist in your Environment</p></li>
</ul>
<p>Neither is more <em>correct</em> than the other but be aware of what you are doing.</p>
<div id="overwrite-the-original-object" class="section level3" number="9.1.1">
<h3><span class="header-section-number">9.1.1</span> Overwrite the original object</h3>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" tabindex="-1"></a>country_data <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(<span class="at">data =</span> country_data,</span>
<span id="cb190-2"><a href="#cb190-2" tabindex="-1"></a>             <span class="at">cols =</span> yr1960<span class="sc">:</span>yr2010,</span>
<span id="cb190-3"><a href="#cb190-3" tabindex="-1"></a>             <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>,</span>
<span id="cb190-4"><a href="#cb190-4" tabindex="-1"></a>             <span class="at">names_prefix =</span> <span class="st">&quot;yr&quot;</span>,</span>
<span id="cb190-5"><a href="#cb190-5" tabindex="-1"></a>             <span class="at">values_to =</span> <span class="st">&quot;metric&quot;</span>)</span></code></pre></div>
</div>
<div id="create-a-new-r-object" class="section level3" number="9.1.2">
<h3><span class="header-section-number">9.1.2</span> Create a new r object</h3>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" tabindex="-1"></a>long_country_data <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(<span class="at">data =</span> country_data,</span>
<span id="cb191-2"><a href="#cb191-2" tabindex="-1"></a>             <span class="at">cols =</span> yr1960<span class="sc">:</span>yr2010,</span>
<span id="cb191-3"><a href="#cb191-3" tabindex="-1"></a>             <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>,</span>
<span id="cb191-4"><a href="#cb191-4" tabindex="-1"></a>             <span class="at">names_prefix =</span> <span class="st">&quot;yr&quot;</span>,</span>
<span id="cb191-5"><a href="#cb191-5" tabindex="-1"></a>             <span class="at">values_to =</span> <span class="st">&quot;metric&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="join-functions" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Join functions</h2>
<p>Frequently, analysis of data will require merging these separately managed tables back together. There are multiple ways to join the observations in two tables, based on how the rows of one table are merged with the rows of the other.</p>
<p>When conceptualizing merges, one can think of two tables, one on the left and one on the right. The most common (and often useful) join is when you merge the subset of rows that have matches in both the left table and the right table: this is called an INNER JOIN. Other types of join are possible as well.</p>
<ul>
<li><p>A LEFT JOIN takes all of the rows from the left table, and merges on the data from matching rows in the right table. Keys that don’t match from the left table are still provided with a missing value (NA) from the right table.</p></li>
<li><p>A RIGHT JOIN is the same, except that all of the rows from the right table are included with matching data from the left, or a missing value.</p></li>
<li><p>Finally, a FULL JOIN includes all data from all rows in both tables, and includes missing values wherever necessary.</p></li>
</ul>
<p><img src="images/join-diagrams.png" width="100%" style="display: block; margin: auto;" /></p>
<div id="left-join" class="section level3" number="9.2.1">
<h3><span class="header-section-number">9.2.1</span> Left join</h3>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" tabindex="-1"></a><span class="co"># Create tibbles df_primary and df_secondary</span></span>
<span id="cb192-2"><a href="#cb192-2" tabindex="-1"></a>df_primary <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb192-3"><a href="#cb192-3" tabindex="-1"></a>  <span class="at">ID =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;F&quot;</span>),</span>
<span id="cb192-4"><a href="#cb192-4" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">0</span>, <span class="dv">9</span>)</span>
<span id="cb192-5"><a href="#cb192-5" tabindex="-1"></a>)</span>
<span id="cb192-6"><a href="#cb192-6" tabindex="-1"></a></span>
<span id="cb192-7"><a href="#cb192-7" tabindex="-1"></a>df_secondary <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb192-8"><a href="#cb192-8" tabindex="-1"></a>  <span class="at">ID =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;E&quot;</span>),</span>
<span id="cb192-9"><a href="#cb192-9" tabindex="-1"></a>  <span class="at">z =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">25</span>, <span class="dv">29</span>)</span>
<span id="cb192-10"><a href="#cb192-10" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" tabindex="-1"></a><span class="fu">left_join</span>(df_primary, df_secondary, <span class="at">by =</span><span class="st">&#39;ID&#39;</span>)</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr>
<th style="text-align:left;">
ID
</th>
<th style="text-align:right;">
y
</th>
<th style="text-align:right;">
z
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
30
</td>
</tr>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
21
</td>
</tr>
<tr>
<td style="text-align:left;">
C
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
D
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
25
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
NA
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="right-join" class="section level3" number="9.2.2">
<h3><span class="header-section-number">9.2.2</span> Right join</h3>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" tabindex="-1"></a><span class="fu">right_join</span>(df_primary, df_secondary, <span class="at">by =</span> <span class="st">&#39;ID&#39;</span>)</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr>
<th style="text-align:left;">
ID
</th>
<th style="text-align:right;">
y
</th>
<th style="text-align:right;">
z
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
30
</td>
</tr>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
21
</td>
</tr>
<tr>
<td style="text-align:left;">
C
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
D
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
25
</td>
</tr>
<tr>
<td style="text-align:left;">
E
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
29
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="full-join" class="section level3" number="9.2.3">
<h3><span class="header-section-number">9.2.3</span> Full join</h3>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" tabindex="-1"></a><span class="fu">full_join</span>(df_primary, df_secondary, <span class="at">by =</span> <span class="st">&#39;ID&#39;</span>)</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr>
<th style="text-align:left;">
ID
</th>
<th style="text-align:right;">
y
</th>
<th style="text-align:right;">
z
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
30
</td>
</tr>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
21
</td>
</tr>
<tr>
<td style="text-align:left;">
C
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
D
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
25
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
E
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
29
</td>
</tr>
</tbody>
</table>
</div>
<!--chapter:end:02a-penguin.Rmd-->
</div>
</div>
</div>
<div id="basic-ggplot" class="section level1" number="10">
<h1><span class="header-section-number">10</span> Basic ggplot</h1>
<div id="intro-to-grammar" class="section level2" number="10.1">
<h2><span class="header-section-number">10.1</span> Intro to grammar</h2>
<p>The ggplot2 package is widely used and valued for its simple, consistent approach to making data visuals.</p>
<p>The 'grammar of graphics' relates to the different components of a plot that function like different parts of linguistic grammar. For example, all plots require axes, so the x and y axes form one part of the ‘language’ of a plot. Similarly, all plots have data represented between the axes, often as points, lines or bars. The visual way that the data is represented forms another component of the grammar of graphics. Furthermore, the colour, shape or size of points and lines can be used to encode additional information in the plot. This information is usually clarified in a key, or legend, which can also be considered part of this ‘grammar’.</p>
<p>The philosophy of ggplot is much better explained by the package author, Hadley Wickham (<span class="citation">Wickham et al. (<a href="#ref-R-ggplot2">2023</a>)</span>). For now, we just need to be aware that ggplots are constructed by specifying the different components that we want to display, based on underlying information in a data frame.</p>
<div class="figure" style="text-align: center">
<img src="images/ambitious.png" alt="An example of what we can produce in ggplot" width="100%" />
<p class="caption">
(#fig:ambitious-figure)An example of what we can produce in ggplot
</p>
</div>
</div>
<div id="building-a-plot" class="section level2" number="10.2">
<h2><span class="header-section-number">10.2</span> Building a plot</h2>
<p>To start building the plot We are going to use the penguin data we have been working with previously. First we must specify the data frame that contains the relevant data for our plot. We can do this in two ways:</p>
<ol style="list-style-type: decimal">
<li>Here we are ‘sending the penguins data set into the ggplot function’:</li>
</ol>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" tabindex="-1"></a><span class="co"># Building a ggplot step by step ----</span></span>
<span id="cb196-2"><a href="#cb196-2" tabindex="-1"></a><span class="do">## Render a plot background ----</span></span>
<span id="cb196-3"><a href="#cb196-3" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb196-4"><a href="#cb196-4" tabindex="-1"></a>  <span class="fu">ggplot</span>()</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Here we are specifying the dataframe <em>within</em> the <code>ggplot()</code> function</li>
</ol>
<p>The output is identical</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins)</span></code></pre></div>
<p><img src="02b-basic-ggplot_files/figure-html/unnamed-chunk-4-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="info">
<p>
Running this command will produce an empty grey panel. This is
because we need to specify how different columns of the data frame
should be represented in the plot.
</p>
</div>
<div id="aesthetics---aes" class="section level3" number="10.2.1">
<h3><span class="header-section-number">10.2.1</span> Aesthetics - <code>aes()</code></h3>
<p>We can call in different columns of data from any dataset based on their column names. Column names are given as ‘aesthetic’ elements to the ggplot function, and are wrapped in the aes() function.</p>
<p>Because we want a scatter plot, each point will have an x and a y coordinate. We want the x axis to represent flipper length ( x = flipper_length_mm ), and the y axis to represent the body mass ( y = body_mass_g ).</p>
<p>We give these specifications separated by a comma. Quotes are not required when giving variables within <code>aes()</code>.</p>
<div class="info">
<p>
Those interested in why quotes aren’t required can read about <a
href="https://edwinth.github.io/blog/nse/">non-standard
evaluation</a>.
</p>
</div>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" tabindex="-1"></a><span class="do">## Set axes ----</span></span>
<span id="cb198-2"><a href="#cb198-2" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb198-3"><a href="#cb198-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb198-4"><a href="#cb198-4" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g))</span></code></pre></div>
<p><img src="02b-basic-ggplot_files/figure-html/unnamed-chunk-7-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>So far we have the grid lines for our x and y axis. <code>ggplot()</code> knows the variables required for the plot, and thus the scale, but has no information about how to display the data points.</p>
</div>
</div>
<div id="geometric-representations---geom" class="section level2" number="10.3">
<h2><span class="header-section-number">10.3</span> Geometric representations - geom()</h2>
<p>Given we want a scatter plot, we need to specify that the geometric representation of the data will be in point form, using geom_point(). <a href="https://ggplot2.tidyverse.org/reference/#geoms">There are many geometric object types</a>.</p>
<div class="figure" style="text-align: center">
<img src="images/geoms.png" alt="geom shapes" width="100%" />
<p class="caption">
(#fig:img-objects-enviro)geom shapes
</p>
</div>
<p>Here we are adding a layer (hence the + sign) of points to the plot. We can think of this as similar to e.g. Adobe Photoshop which uses layers of images that can be reordered and modified individually. Because we add to plots layer by layer <strong>the order</strong> of your geoms may be important for your final aesthetic design.</p>
<p>For ggplot, each layer will be added over the plot according to its position in the code. Below I first show the full breakdown of the components in a layer. Each layer requires information on</p>
<ul>
<li>data</li>
<li>aesthetics</li>
<li>geometric type</li>
<li>any summary of the data</li>
<li>position</li>
</ul>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" tabindex="-1"></a><span class="do">## Add a geom ----</span></span>
<span id="cb199-2"><a href="#cb199-2" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb199-3"><a href="#cb199-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb199-4"><a href="#cb199-4" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g))<span class="sc">+</span></span>
<span id="cb199-5"><a href="#cb199-5" tabindex="-1"></a>  <span class="fu">layer</span>(                <span class="co"># layer inherits data and aesthetic arguments from previous</span></span>
<span id="cb199-6"><a href="#cb199-6" tabindex="-1"></a>    <span class="at">geom=</span><span class="st">&quot;point&quot;</span>,       <span class="co"># draw point objects</span></span>
<span id="cb199-7"><a href="#cb199-7" tabindex="-1"></a>    <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>,    <span class="co"># each individual data point gets a geom (no summaries)</span></span>
<span id="cb199-8"><a href="#cb199-8" tabindex="-1"></a>    <span class="at">position=</span><span class="fu">position_identity</span>()) <span class="co"># data points are not moved in any way e.g. we could specify jitter or dodge if we want to avoid busy overlapping data</span></span></code></pre></div>
<p>This is quite a complicate way to write new layers - and it is more usual to see a simpler more compact approach</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb200-2"><a href="#cb200-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb200-3"><a href="#cb200-3" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g))<span class="sc">+</span></span>
<span id="cb200-4"><a href="#cb200-4" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="co"># geom_point function will always draw points, and unless specified otherwise the arguments for position and stat are both &quot;identity&quot;.</span></span></code></pre></div>
<p><img src="02b-basic-ggplot_files/figure-html/unnamed-chunk-9-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Now we have the scatter plot! Each row (except for two rows of missing data) in the penguins data set now has an x coordinate, a y coordinate, and a designated geometric representation (point).</p>
<p>From this we can see that smaller penguins tend to have smaller flipper lengths.</p>
<div id="and" class="section level3" number="10.3.1">
<h3><span class="header-section-number">10.3.1</span> %&gt;% and +</h3>
<p>ggplot2, an early component of the tidyverse package, was written before the pipe was introduced. The + sign in ggplot2 functions in a similar way to the pipe in other functions in the tidyverse: by allowing code to be written from left to right.</p>
</div>
<div id="colour" class="section level3" number="10.3.2">
<h3><span class="header-section-number">10.3.2</span> Colour</h3>
<p>The colors of lines and points can be set directly using <code>colour="red"</code>, replacing “red” with a color name. The colors of filled objects, like bars, can be set using <code>fill="red"</code>.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb201-2"><a href="#cb201-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb201-3"><a href="#cb201-3" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g))<span class="sc">+</span></span>
<span id="cb201-4"><a href="#cb201-4" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">colour=</span><span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="02b-basic-ggplot_files/figure-html/unnamed-chunk-10-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>However the current plot could be more informative if colour was used to convey information about the species of each penguin.</p>
<p>In order to achieve this we need to use <code>aes()</code> again, and make the colour conditional upon a variable.</p>
<p>Here, the <code>aes()</code> function containing the relevant column name, is given within the <code>geom_point()</code> function.</p>
<div class="warning">
<p>
A common mistake is to get confused about when to use (or not use)
<code>aes()</code>
</p>
<p>
If specifying a fixed aesthetic e.g. red for everything it DOES NOT
go inside <code>aes()</code> instead specify e.g. colour = “red” or
shape =21.
</p>
<p>
If you wish to modify an aethetic according to a variable in your
data THEN it DOES go inside <code>aes()</code>
e.g. <code>aes(colour = species)</code>
</p>
</div>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb202-2"><a href="#cb202-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb202-3"><a href="#cb202-3" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g))<span class="sc">+</span></span>
<span id="cb202-4"><a href="#cb202-4" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour=</span>species))</span></code></pre></div>
<p><img src="02b-basic-ggplot_files/figure-html/unnamed-chunk-12-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="info">
<p>
You may (or may not) have noticed that the grammar of ggplot (and
tidyverse in general) accepts British/Americanization for
spelling!!!
</p>
</div>
<p>With data visualisations we can start to gain insights into our data very quickly, we can see that the Gentoo penguins tend to be both larger and have longer flippers</p>
<div class="info">
<p>
Add carriage returns (new lines) after each %&gt;% or + symbols.
</p>
<p>
In most cases, R is blind to white space and new lines, so this is
simply to make our code more readable, and allow us to add readable
comments.
</p>
</div>
</div>
<div id="more-layers" class="section level3" number="10.3.3">
<h3><span class="header-section-number">10.3.3</span> More layers</h3>
<p>We can see the relationship between body size and flipper length. But what if we want to model this relationship with a trend line? We can add another ‘layer’ to this plot, using a different geometric representation of the data. In this case a trend line, which is in fact a summary of the data rather than a representation of each point.</p>
<p>The <code>geom_smooth()</code> function draws a trend line through the data. The default behaviour is to draw a local regression line (curve) through the points, however these can be hard to interpret. We want to add a straight line based on a linear model (‘lm’) of the relationship between x and y.</p>
<p>This is our <strong>first</strong> encounter with linear models in this course, but we will learn a lot more about them later on.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" tabindex="-1"></a><span class="do">## Add a second geom ----</span></span>
<span id="cb203-2"><a href="#cb203-2" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb203-3"><a href="#cb203-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb203-4"><a href="#cb203-4" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g))<span class="sc">+</span></span>
<span id="cb203-5"><a href="#cb203-5" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour=</span>species))<span class="sc">+</span></span>
<span id="cb203-6"><a href="#cb203-6" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>,    <span class="co">#add another layer of data representation.</span></span>
<span id="cb203-7"><a href="#cb203-7" tabindex="-1"></a>              <span class="at">se=</span><span class="cn">FALSE</span>,</span>
<span id="cb203-8"><a href="#cb203-8" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">colour=</span>species)) <span class="co"># note layers inherit information from the top ggplot() function but not previous layers - if we want separate lines per species we need to either specify this again *or* move the color aesthetic to the top layer. </span></span></code></pre></div>
<p><img src="02b-basic-ggplot_files/figure-html/unnamed-chunk-15-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>In the example above we may notice that we are assigning colour to the same variable (species) in both geometric layers. This means we have the option to simplify our code. Aesthetics set in the "top layer" of <code>ggplot()</code> are inherited by all subsequent layers.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb204-2"><a href="#cb204-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb204-3"><a href="#cb204-3" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g,</span>
<span id="cb204-4"><a href="#cb204-4" tabindex="-1"></a>             <span class="at">colour=</span>species))<span class="sc">+</span> <span class="do">### now colour is set here it will be inherited by ALL layers</span></span>
<span id="cb204-5"><a href="#cb204-5" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb204-6"><a href="#cb204-6" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>,    <span class="co">#add another layer of data representation.</span></span>
<span id="cb204-7"><a href="#cb204-7" tabindex="-1"></a>              <span class="at">se=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="02b-basic-ggplot_files/figure-html/unnamed-chunk-16-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="try">
<p>
Note - that the trend line is blocking out certain points, because it
is the ‘top layer’ of the plot. The geom layers that appear early in the
command are drawn first, and can be obscured by the geom layers that
come after them.
</p>
<p>
What happens if you switch the order of the geom_point() and
geom_smooth() functions above? What do you notice about the trend
line?
</p>
</div>
</div>
</div>
<div id="more-plots" class="section level2" number="10.4">
<h2><span class="header-section-number">10.4</span> More plots</h2>
<div id="jitter" class="section level3" number="10.4.1">
<h3><span class="header-section-number">10.4.1</span> Jitter</h3>
<p>The <code>geom_jitter()</code> command adds some random scatter to the points which can reduce over-plotting. Compare these two plots:</p>
<p><img src="02b-basic-ggplot_files/figure-html/unnamed-chunk-18-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" tabindex="-1"></a><span class="do">## geom point</span></span>
<span id="cb205-2"><a href="#cb205-2" tabindex="-1"></a></span>
<span id="cb205-3"><a href="#cb205-3" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> culmen_length_mm)) <span class="sc">+</span></span>
<span id="cb205-4"><a href="#cb205-4" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species),</span>
<span id="cb205-5"><a href="#cb205-5" tabindex="-1"></a>              <span class="at">alpha =</span> <span class="fl">0.7</span>, </span>
<span id="cb205-6"><a href="#cb205-6" tabindex="-1"></a>              <span class="at">show.legend =</span> <span class="cn">FALSE</span>) </span>
<span id="cb205-7"><a href="#cb205-7" tabindex="-1"></a></span>
<span id="cb205-8"><a href="#cb205-8" tabindex="-1"></a><span class="do">## More geoms ----</span></span>
<span id="cb205-9"><a href="#cb205-9" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> culmen_length_mm)) <span class="sc">+</span></span>
<span id="cb205-10"><a href="#cb205-10" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">color =</span> species),</span>
<span id="cb205-11"><a href="#cb205-11" tabindex="-1"></a>              <span class="at">width =</span> <span class="fl">0.1</span>, <span class="co"># specifies the width, change this to change the range of scatter</span></span>
<span id="cb205-12"><a href="#cb205-12" tabindex="-1"></a>              <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="co"># specifies the amount of transparency in the points</span></span>
<span id="cb205-13"><a href="#cb205-13" tabindex="-1"></a>              <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="co"># don&#39;t leave a legend in a plot, if it doesn&#39;t add value</span></span></code></pre></div>
</div>
<div id="boxplots" class="section level3" number="10.4.2">
<h3><span class="header-section-number">10.4.2</span> Boxplots</h3>
<p>Box plots, or ‘box &amp; whisker plots’ are another essential tool for data analysis. Box plots summarize the distribution of a set of values by displaying the minimum and maximum values, the median (i.e. middle-ranked value), and the range of the middle 50% of values (inter-quartile range).
The whisker line extending above and below the IQR box define Q3 + (1.5 x IQR), and Q1 - (1.5 x IQR) respectively. You can watch a short video to learn more about box plots <a href="https://www.youtube.com/watch?v=fHLhBnmwUM0">here</a>.</p>
<p><img src="images/boxplot.png" width="80%" style="display: block; margin: auto;" /></p>
<p>To create a box plot from our data we use (no prizes here) <code>geom_boxplot()</code></p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> culmen_length_mm)) <span class="sc">+</span></span>
<span id="cb206-2"><a href="#cb206-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> species),</span>
<span id="cb206-3"><a href="#cb206-3" tabindex="-1"></a>              <span class="at">alpha =</span> <span class="fl">0.7</span>, </span>
<span id="cb206-4"><a href="#cb206-4" tabindex="-1"></a>              <span class="at">width =</span> <span class="fl">0.5</span>, <span class="co"># change width of boxplot</span></span>
<span id="cb206-5"><a href="#cb206-5" tabindex="-1"></a>              <span class="at">show.legend =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="02b-basic-ggplot_files/figure-html/unnamed-chunk-21-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="try">
<p>
Note that when specifying colour variables using <code>aes()</code>
some geometric shapes support an internal colour “fill” and an external
colour “colour”. Try changing the aes fill for colour in the code above,
and note what happens.
</p>
</div>
<p>The points indicate outlier values [i.e., those greater than Q3 + (1.5 x IQR)].</p>
<p>We can overlay a boxplot on the scatter plot for the entire dataset, to fully communicate both the raw and summary data. Here we reduce the width of the jitter points slightly.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> culmen_length_mm)) <span class="sc">+</span></span>
<span id="cb207-2"><a href="#cb207-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> species), <span class="co"># note fill is &quot;inside&quot; colour and colour is &quot;edges&quot; - try it for yourself</span></span>
<span id="cb207-3"><a href="#cb207-3" tabindex="-1"></a>              <span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="co"># fainter boxes so the points &quot;pop&quot;</span></span>
<span id="cb207-4"><a href="#cb207-4" tabindex="-1"></a>              <span class="at">width =</span> <span class="fl">0.5</span>, <span class="co"># change width of boxplot</span></span>
<span id="cb207-5"><a href="#cb207-5" tabindex="-1"></a>              <span class="at">outlier.shape=</span><span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb207-6"><a href="#cb207-6" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">colour =</span> species),</span>
<span id="cb207-7"><a href="#cb207-7" tabindex="-1"></a>                <span class="at">width=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb207-8"><a href="#cb207-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="02b-basic-ggplot_files/figure-html/unnamed-chunk-23-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="warning">
<p>
In the above example I switched from using show.legend=FALSE inside
the geom layer to using theme(legend.position=“none”). Why? This is an
example of reducing redundant code. I would have to specify
show.legend=FALSE for every geom layer in my plot, but the theme
function applies to every layer. Save code, save time, reduce
errors!
</p>
</div>
<div id="grouped-boxplot" class="section level4" number="10.4.2.1">
<h4><span class="header-section-number">10.4.2.1</span> Grouped boxplot</h4>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb208-2"><a href="#cb208-2" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb208-3"><a href="#cb208-3" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> culmen_length_mm)) <span class="sc">+</span></span>
<span id="cb208-4"><a href="#cb208-4" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> sex), </span>
<span id="cb208-5"><a href="#cb208-5" tabindex="-1"></a>              <span class="at">width =</span> <span class="fl">0.5</span>) <span class="co"># change width of boxplot</span></span></code></pre></div>
<p><img src="02b-basic-ggplot_files/figure-html/unnamed-chunk-25-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="violin-plots" class="section level3" number="10.4.3">
<h3><span class="header-section-number">10.4.3</span> Violin plots</h3>
<p>Violin plots display the distribution of a dataset and can be created by calling geom_violin(). They are so-called because the shape they make sometimes looks something like a violin. They are essentially sideways, mirrored density plots. Note that the below code is identical to the code used to draw the boxplots above, except for the call to <code>geom_violin()</code> rather than <code>geom_boxplot()</code>.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb209-2"><a href="#cb209-2" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb209-3"><a href="#cb209-3" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> culmen_length_mm)) <span class="sc">+</span></span>
<span id="cb209-4"><a href="#cb209-4" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">fill =</span> sex),</span>
<span id="cb209-5"><a href="#cb209-5" tabindex="-1"></a>              <span class="at">width =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="02b-basic-ggplot_files/figure-html/unnamed-chunk-26-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="bar-plots" class="section level3" number="10.4.4">
<h3><span class="header-section-number">10.4.4</span> Bar plots</h3>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb210-2"><a href="#cb210-2" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species)) <span class="sc">+</span></span>
<span id="cb210-3"><a href="#cb210-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="02b-basic-ggplot_files/figure-html/unnamed-chunk-27-1.png" width="100%" style="display: block; margin: auto;" /></p>
<blockquote>
<p>If your dataset already has the counts that you want to plot, you can set stat="identity" inside of geom_bar() to use that number instead of counting rows.</p>
</blockquote>
<p>We could go for a stacked bar approach</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span>  </span>
<span id="cb211-2"><a href="#cb211-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>,</span>
<span id="cb211-3"><a href="#cb211-3" tabindex="-1"></a>             <span class="at">fill=</span>species))<span class="sc">+</span> </span>
<span id="cb211-4"><a href="#cb211-4" tabindex="-1"></a>  <span class="co"># specify fill = species to ensure colours are defined by species</span></span>
<span id="cb211-5"><a href="#cb211-5" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">&quot;fill&quot;</span>)<span class="sc">+</span> </span>
<span id="cb211-6"><a href="#cb211-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>,</span>
<span id="cb211-7"><a href="#cb211-7" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="02b-basic-ggplot_files/figure-html/unnamed-chunk-28-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>This graph is OK but not great, the height of each section of the bar represents the relative proportions of each species in the dataset, but this type of chart becomes increasingly difficult to read as more categories are included. Colours become increasingly samey,and it is difficult to read where on the y-axis a category starts and stops, you then have to do some subtraction to work out the values.</p>
</div>
<div id="density-and-histogram" class="section level3" number="10.4.5">
<h3><span class="header-section-number">10.4.5</span> Density and histogram</h3>
<p>The base statistic for <code>geom_histogram()</code> is count, and by default <code>geom_histogram()</code> divides the x-axis into 30 "bins" and counts how many observations are in each bin and so the y-axis does not need to be specified. When you run the code to produce the histogram, you will get the message "stat_bin() using bins = 30. Pick better value with binwidth". You can change this by either setting the number of bins (e.g., bins = 20) or the width of each bin (e.g., binwidth = 5) as an argument.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb212-2"><a href="#cb212-2" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>culmen_length_mm, <span class="at">fill=</span>species))<span class="sc">+</span></span>
<span id="cb212-3"><a href="#cb212-3" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">50</span>)</span></code></pre></div>
<p><img src="02b-basic-ggplot_files/figure-html/unnamed-chunk-29-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>The layer system makes it easy to create new types of plots by adapting existing recipes. For example, rather than creating a histogram, we can create a smoothed density plot by calling geom_density() rather than geom_histogram(). The rest of the code remains identical.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb213-2"><a href="#cb213-2" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>culmen_length_mm, <span class="at">fill=</span>species))<span class="sc">+</span></span>
<span id="cb213-3"><a href="#cb213-3" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">alpha =</span> .<span class="dv">775</span>)</span></code></pre></div>
<p><img src="02b-basic-ggplot_files/figure-html/unnamed-chunk-30-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" tabindex="-1"></a><span class="co">#Because the density plots are overlapping, we set alpha = 0.75 to make the geoms 75% transparent.</span></span></code></pre></div>
<!--chapter:end:02b-basic-ggplot.Rmd-->
</div>
</div>
</div>
<div id="part-data-insights" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) Data Insights</h1>
</div>
<div id="data-insights-part-one" class="section level1" number="11">
<h1><span class="header-section-number">11</span> Data Insights part one</h1>
<p>In these last chapters we are concentrating on generating insights into our data using visualisations and descriptive statistics. The easiest way to do this is to use questions as tools to guide your investigation. When you ask a question, the question focuses your attention on a specific part of your dataset and helps you decide which graphs, models, or transformations to make.</p>
<p>For this exercise we will propose that our task is to generate insights into the body mass of our penguins, in order to answer the question</p>
<ul>
<li>How is body mass associated with bill length and depth in penguins?</li>
</ul>
<p>In order to answer this question properly we should first understand our different variables and how they might relate to each other.</p>
<ul>
<li>Distribution of data types</li>
<li>Central tendency</li>
<li>Relationship between variables</li>
<li>Confounding variables</li>
</ul>
<p>This inevitably leads to more and a variety of questions. Each new question that you ask will expose you to a <em>new aspect</em> of your data.</p>
<div id="data-wrangling" class="section level3" number="11.0.1">
<h3><span class="header-section-number">11.0.1</span> Data wrangling</h3>
<p>Importantly you should have already generated an understanding of the variables contained within your dataset during the <a href="#data-wrangling-part-one">data wrangling</a> steps. Including:</p>
<ul>
<li><p>The number of variables</p></li>
<li><p>The data format of each variable</p></li>
<li><p>Checked for missing data</p></li>
<li><p>Checked for typos, duplications or other data errors</p></li>
<li><p>Cleaned column or factor names</p></li>
</ul>
<div class="warning">
<p>
It is very important to not lose site of the questions you are
asking
</p>
<p>
You should also play close attention to the data, and remind yourself
<strong>frequently</strong> how many variables do you have and what are
their names?
</p>
<p>
How many rows/observations do you have?
</p>
<p>
Pay close attention to the outputs, errors and warnings from the R
console.
</p>
</div>
</div>
<div id="load-data" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> Load data</h2>
<p>Make a script</p>
<p>Let's now create a new R script file in which we will write instructions and store comments for manipulating data, developing tables and figures. Use the <code>File &gt; New Script</code> menu item and select an R Script.</p>
<p>Add the following:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" tabindex="-1"></a><span class="co">#___________________________----</span></span>
<span id="cb215-2"><a href="#cb215-2" tabindex="-1"></a><span class="co"># EDA ----</span></span>
<span id="cb215-3"><a href="#cb215-3" tabindex="-1"></a><span class="do">## Exploratory data analysis of the bill dimensions of male and female Adelie, Gentoo and Chinstrap penguins ----</span></span>
<span id="cb215-4"><a href="#cb215-4" tabindex="-1"></a></span>
<span id="cb215-5"><a href="#cb215-5" tabindex="-1"></a><span class="co">#__________________________----</span></span>
<span id="cb215-6"><a href="#cb215-6" tabindex="-1"></a></span>
<span id="cb215-7"><a href="#cb215-7" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;outputs/2024_11_01_penguin_clean.RDS&quot;</span>)</span></code></pre></div>
<p>Save this file inside the scripts folder and call it <code>02_eda_penguins.R</code></p>
</div>
<div id="quick-view-of-variables" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> Quick view of variables</h2>
<p>Let's take a look at some of our variables, these functions will give a quick snapshot overview.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" tabindex="-1"></a><span class="fu">glimpse</span>(penguins)</span>
<span id="cb216-2"><a href="#cb216-2" tabindex="-1"></a><span class="fu">summary</span>(penguins)</span></code></pre></div>
<p>We can see that bill length contains numbers, and that many of these are fractions, but only down to 0.1mm. By comparison body mass all appear to be discrete number variables. Does this make body mass an integer? The underlying quantity (bodyweight) is clearly continuous, it is clearly possible for a penguin to weigh 3330.7g but it might <em>look</em> like an integer because of the way it was measured. This illustrates the importance of understanding the the type of variable you are working with - just looking at the values isn't enough.</p>
<p>On the other hand, how we choose to measure and record data <em>can</em> change the way it is presented in a dataset. If the researchers had decided to simply record small, medium and large classes of bodyweight, then we would be dealing with ordinal categorical variables (factors). These distinctions can become less clear if we start to deal with multiple classes of ordinal categories - for example if the researchers were measuring body mass to the nearest 10g. It might be reasonable to treat these as integers...</p>
</div>
<div id="categorical-variables" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> Categorical variables</h2>
<div id="frequency" class="section level3" number="11.3.1">
<h3><span class="header-section-number">11.3.1</span> Frequency</h3>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb217-2"><a href="#cb217-2" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb217-3"><a href="#cb217-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">species</th>
<th align="right">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Adelie</td>
<td align="right">152</td>
</tr>
<tr class="even">
<td align="left">Chinstrap</td>
<td align="right">68</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">124</td>
</tr>
</tbody>
</table>
</div>
<p>It might be useful for us to make some quick data summaries here, like relative frequency</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1" tabindex="-1"></a>prob_obs_species <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb218-2"><a href="#cb218-2" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb218-3"><a href="#cb218-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb218-4"><a href="#cb218-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prob_obs =</span> n<span class="sc">/</span><span class="fu">sum</span>(n))</span>
<span id="cb218-5"><a href="#cb218-5" tabindex="-1"></a></span>
<span id="cb218-6"><a href="#cb218-6" tabindex="-1"></a>prob_obs_species</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">species</th>
<th align="right">n</th>
<th align="right">prob_obs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Adelie</td>
<td align="right">152</td>
<td align="right">0.4418605</td>
</tr>
<tr class="even">
<td align="left">Chinstrap</td>
<td align="right">68</td>
<td align="right">0.1976744</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">124</td>
<td align="right">0.3604651</td>
</tr>
</tbody>
</table>
</div>
<p>So about 44% of our sample is made up of observations from Adelie penguins. When it comes to making summaries about categorical data, that's about the best we can do, we can make observations about the most common categorical observations, and the relative proportions.</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb219-2"><a href="#cb219-2" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb219-3"><a href="#cb219-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span>species))</span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-8-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>This chart is ok - but can we make anything better?</p>
<p>We could go for a stacked bar approach</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb220-2"><a href="#cb220-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>,</span>
<span id="cb220-3"><a href="#cb220-3" tabindex="-1"></a>             <span class="at">fill=</span>species))<span class="sc">+</span> </span>
<span id="cb220-4"><a href="#cb220-4" tabindex="-1"></a>  <span class="co"># specify fill = species to ensure colours are defined by species</span></span>
<span id="cb220-5"><a href="#cb220-5" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">&quot;fill&quot;</span>)<span class="sc">+</span> </span>
<span id="cb220-6"><a href="#cb220-6" tabindex="-1"></a>  <span class="co"># specify fill forces geom_bar to calculate percentages</span></span>
<span id="cb220-7"><a href="#cb220-7" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>percent)<span class="sc">+</span> </span>
<span id="cb220-8"><a href="#cb220-8" tabindex="-1"></a>  <span class="co">#use scales package to turn y axis into percentages easily</span></span>
<span id="cb220-9"><a href="#cb220-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>,</span>
<span id="cb220-10"><a href="#cb220-10" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;&quot;</span>)<span class="sc">+</span></span>
<span id="cb220-11"><a href="#cb220-11" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-9-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>This graph is OK <em>but not great</em>, the height of each section of the bar represents the relative proportions of each species in the dataset, but this type of chart becomes increasingly difficult to read as more categories are included. Colours become increasingly samey,and it is difficult to read where on the y-axis a category starts and stops, you then have to do some subtraction to work out the values.</p>
<p>The best graph is then probably the first one we made - with a few minor tweak we can rapidly improve this.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb221-2"><a href="#cb221-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species=</span><span class="fu">factor</span>(species, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span>,</span>
<span id="cb221-3"><a href="#cb221-3" tabindex="-1"></a>                                          <span class="st">&quot;Gentoo&quot;</span>,</span>
<span id="cb221-4"><a href="#cb221-4" tabindex="-1"></a>                                          <span class="st">&quot;Chinstrap&quot;</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb221-5"><a href="#cb221-5" tabindex="-1"></a>  <span class="co"># set as factor and provide levels</span></span>
<span id="cb221-6"><a href="#cb221-6" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb221-7"><a href="#cb221-7" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span>species),</span>
<span id="cb221-8"><a href="#cb221-8" tabindex="-1"></a>           <span class="at">fill=</span><span class="st">&quot;steelblue&quot;</span>,</span>
<span id="cb221-9"><a href="#cb221-9" tabindex="-1"></a>           <span class="at">width=</span><span class="fl">0.8</span>)<span class="sc">+</span></span>
<span id="cb221-10"><a href="#cb221-10" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Species&quot;</span>,</span>
<span id="cb221-11"><a href="#cb221-11" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Number of observations&quot;</span>)<span class="sc">+</span></span>
<span id="cb221-12"><a href="#cb221-12" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>prob_obs_species,</span>
<span id="cb221-13"><a href="#cb221-13" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">y=</span>(n<span class="sc">+</span><span class="dv">10</span>),</span>
<span id="cb221-14"><a href="#cb221-14" tabindex="-1"></a>                <span class="at">x=</span>species,</span>
<span id="cb221-15"><a href="#cb221-15" tabindex="-1"></a>                <span class="at">label=</span>scales<span class="sc">::</span><span class="fu">percent</span>(prob_obs)))<span class="sc">+</span></span>
<span id="cb221-16"><a href="#cb221-16" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb221-17"><a href="#cb221-17" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-10-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>This is an example of a figure we might use in a report or paper. Having cleaned up the theme, added some simple colour, made sure our labels are clear and descriptive, ordered our categories in ascending frequency order, and included some simple text of percentages to aid readability.</p>
</div>
<div id="two-categorical-variables" class="section level3" number="11.3.2">
<h3><span class="header-section-number">11.3.2</span> Two categorical variables</h3>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Think about what might be a suitable confounding variable to investigate and graph here?
</div>
</div>
<p>Understanding how frequency is broken down by species and sex might be useful information to have.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb222-2"><a href="#cb222-2" tabindex="-1"></a>  <span class="fu">group_by</span>(species, sex) <span class="sc">|&gt;</span> </span>
<span id="cb222-3"><a href="#cb222-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb222-4"><a href="#cb222-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prob_obs =</span> n<span class="sc">/</span><span class="fu">sum</span>(n))</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">species</th>
<th align="left">sex</th>
<th align="right">n</th>
<th align="right">prob_obs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Adelie</td>
<td align="left">FEMALE</td>
<td align="right">73</td>
<td align="right">0.4802632</td>
</tr>
<tr class="even">
<td align="left">Adelie</td>
<td align="left">MALE</td>
<td align="right">73</td>
<td align="right">0.4802632</td>
</tr>
<tr class="odd">
<td align="left">Adelie</td>
<td align="left">NA</td>
<td align="right">6</td>
<td align="right">0.0394737</td>
</tr>
<tr class="even">
<td align="left">Chinstrap</td>
<td align="left">FEMALE</td>
<td align="right">34</td>
<td align="right">0.5000000</td>
</tr>
<tr class="odd">
<td align="left">Chinstrap</td>
<td align="left">MALE</td>
<td align="right">34</td>
<td align="right">0.5000000</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="left">FEMALE</td>
<td align="right">58</td>
<td align="right">0.4677419</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="left">MALE</td>
<td align="right">61</td>
<td align="right">0.4919355</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="left">NA</td>
<td align="right">5</td>
<td align="right">0.0403226</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="continuous-variables" class="section level2" number="11.4">
<h2><span class="header-section-number">11.4</span> Continuous variables</h2>
<div id="visualising-distributions" class="section level3" number="11.4.1">
<h3><span class="header-section-number">11.4.1</span> Visualising distributions</h3>
<p><strong>Variation</strong> is the tendency of the values of a variable to change from measurement to measurement. You can see variation easily in real life; if you measure any continuous variable twice, you will get two different results. This is true even if you measure quantities that are constant, like the speed of light. Each of your measurements will include a small amount of error that varies from measurement to measurement. Every variable has its own pattern of variation, which can reveal interesting information. The best way to understand that pattern is to visualise the distribution of the variable’s values.</p>
<p>This is the script to plot a frequency distribution, we only specify an x variable, because we intend to plot a histogram, and the y variable is always the count of observations. Here we ask the data to be presented in 10 equally sized bins of data. In this case chopping the x axis range into 10 equal parts and counting the number of observations that fall within each one.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb223-2"><a href="#cb223-2" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb223-3"><a href="#cb223-3" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>body_mass_g),</span>
<span id="cb223-4"><a href="#cb223-4" tabindex="-1"></a>                 <span class="at">fill =</span> <span class="st">&quot;grey&quot;</span>,</span>
<span id="cb223-5"><a href="#cb223-5" tabindex="-1"></a>                 <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb223-6"><a href="#cb223-6" tabindex="-1"></a>                 <span class="at">bins=</span><span class="dv">10</span>)</span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-13-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="try">
<p>
Change the value specified to the bins argument and observe how the
figure changes. It is usually a very good idea to try more than one set
of bins in order to have better insights into the data
</p>
</div>
<p>To get the most out of your data, combine data you collected from the <code>summary()</code> function and the histogram here</p>
<ul>
<li><p>Which values are the most common? <select class='webex-select'><option value='blank'></option><option value=''>&lt; 3500g</option><option value='answer'>3500-4000g</option><option value=''>4000-4500g</option><option value=''>4500-5000g</option><option value=''>5000-5500g</option><option value=''>5500-6000g</option><option value=''>&gt;6500g</option></select></p></li>
<li><p>Which values are rare? Why? Does that match your expectations?
<select class='webex-select'><option value='blank'></option><option value=''>&lt; 3500g</option><option value=''>3500-4000g</option><option value=''>4000-4500g</option><option value=''>4500-5000g</option><option value=''>5000-5500g</option><option value=''>5500-6000g</option><option value='answer'>&gt;6500g</option></select></p></li>
<li><p>Can you see any unusual patterns? <select class='webex-select'><option value='blank'></option><option value=''>Yes</option><option value='answer'>No</option></select></p></li>
<li><p>How many observations are missing body mass information? <input class='webex-solveme nospaces' size='1' data-answer='["2"]'/></p></li>
</ul>
<button id="displayTextunnamed-chunk-15" onclick="javascript:toggle(&#39;unnamed-chunk-15&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-15" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<p>Penguins weighing less than 3kg and more than 6kg are rare.
The most common weight appears to be just under 4kg.</p>
There appear to be more data points to the right of the peak of the histogram than there are too the left. E.g. the histogram is not symmetrical. But there is no evidence for any extreme outliers.
</div>
</div>
</div>
<div id="atypical-values" class="section level4" number="11.4.1.1">
<h4><span class="header-section-number">11.4.1.1</span> Atypical values</h4>
<p>If you found atypical values at this point, you could decide to exclude them from the dataset (using <code>filter()</code>). BUT you should only do this at this stage if you have a very strong reason for believing this is a mistake in the data entry, rather than a true outlier.</p>
</div>
</div>
<div id="central-tendency" class="section level3" number="11.4.2">
<h3><span class="header-section-number">11.4.2</span> Central tendency</h3>
<p>Central tendency is a descriptive summary of a dataset through a single value that reflects the center of the data distribution. The three most widely used measures of central tendency are <strong>mean</strong>, <strong>median</strong> and <strong>mode</strong>.</p>
<p>The <strong>mean</strong> is defined as the sum of all values of the variable divided by the total number of values. The <strong>median</strong> is the middle value. If N is odd and if N is even, it is the average of the two middle values. The <strong>mode</strong> is the most frequently occurring observation in a data set, but is arguable least useful for understanding biological datasets.</p>
<p>We can find both the mean and median easily with the summarise function. The <strong>mean</strong> is usually the best measure of central tendency when the distribution is symmetrical, and the <strong>mode</strong> is the best measure when the distribution is asymmetrical/skewed.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" tabindex="-1"></a>penguin_body_mass_summary <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb224-2"><a href="#cb224-2" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean_body_mass=</span><span class="fu">mean</span>(body_mass_g, <span class="at">na.rm=</span>T), </span>
<span id="cb224-3"><a href="#cb224-3" tabindex="-1"></a>              <span class="at">sd =</span> <span class="fu">sd</span>(body_mass_g, <span class="at">na.rm =</span> T),</span>
<span id="cb224-4"><a href="#cb224-4" tabindex="-1"></a>              <span class="at">min =</span> <span class="fu">min</span>(body_mass_g, <span class="at">na.rm =</span> T),</span>
<span id="cb224-5"><a href="#cb224-5" tabindex="-1"></a>              <span class="at">max=</span><span class="fu">max</span>(body_mass_g, <span class="at">na.rm =</span> T),</span>
<span id="cb224-6"><a href="#cb224-6" tabindex="-1"></a>              <span class="at">median_body_mass=</span><span class="fu">median</span>(body_mass_g, <span class="at">na.rm=</span>T), </span>
<span id="cb224-7"><a href="#cb224-7" tabindex="-1"></a>              <span class="at">iqr =</span> <span class="fu">IQR</span>(body_mass_g, <span class="at">na.rm =</span> T))</span>
<span id="cb224-8"><a href="#cb224-8" tabindex="-1"></a></span>
<span id="cb224-9"><a href="#cb224-9" tabindex="-1"></a>penguin_body_mass_summary</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="right">mean_body_mass</th>
<th align="right">sd</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">median_body_mass</th>
<th align="right">iqr</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">4201.754</td>
<td align="right">801.9545</td>
<td align="right">2700</td>
<td align="right">6300</td>
<td align="right">4050</td>
<td align="right">1200</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb225-2"><a href="#cb225-2" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb225-3"><a href="#cb225-3" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>body_mass_g),</span>
<span id="cb225-4"><a href="#cb225-4" tabindex="-1"></a>               <span class="at">alpha=</span><span class="fl">0.8</span>,</span>
<span id="cb225-5"><a href="#cb225-5" tabindex="-1"></a>               <span class="at">bins =</span> <span class="dv">10</span>,</span>
<span id="cb225-6"><a href="#cb225-6" tabindex="-1"></a>               <span class="at">fill=</span><span class="st">&quot;steelblue&quot;</span>,</span>
<span id="cb225-7"><a href="#cb225-7" tabindex="-1"></a>               <span class="at">colour=</span><span class="st">&quot;darkgrey&quot;</span>)<span class="sc">+</span></span>
<span id="cb225-8"><a href="#cb225-8" tabindex="-1"></a>   <span class="fu">geom_vline</span>(<span class="at">data=</span>penguin_body_mass_summary,</span>
<span id="cb225-9"><a href="#cb225-9" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">xintercept=</span>mean_body_mass),</span>
<span id="cb225-10"><a href="#cb225-10" tabindex="-1"></a>             <span class="at">colour=</span><span class="st">&quot;red&quot;</span>,</span>
<span id="cb225-11"><a href="#cb225-11" tabindex="-1"></a>             <span class="at">linetype=</span><span class="st">&quot;dashed&quot;</span>)<span class="sc">+</span></span>
<span id="cb225-12"><a href="#cb225-12" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">data=</span>penguin_body_mass_summary,</span>
<span id="cb225-13"><a href="#cb225-13" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">xintercept=</span>median_body_mass),</span>
<span id="cb225-14"><a href="#cb225-14" tabindex="-1"></a>             <span class="at">colour=</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb225-15"><a href="#cb225-15" tabindex="-1"></a>             <span class="at">linetype=</span><span class="st">&quot;dashed&quot;</span>)<span class="sc">+</span></span>
<span id="cb225-16"><a href="#cb225-16" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>penguin_body_mass_summary,</span>
<span id="cb225-17"><a href="#cb225-17" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x =</span> mean_body_mass), </span>
<span id="cb225-18"><a href="#cb225-18" tabindex="-1"></a>            <span class="at">y =</span> <span class="dv">90</span>, <span class="at">label =</span> <span class="st">&quot;mean&quot;</span>, <span class="at">hjust =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb225-19"><a href="#cb225-19" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>penguin_body_mass_summary,</span>
<span id="cb225-20"><a href="#cb225-20" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x =</span> median_body_mass), </span>
<span id="cb225-21"><a href="#cb225-21" tabindex="-1"></a>            <span class="at">y =</span> <span class="dv">90</span>, <span class="at">label =</span> <span class="st">&quot;median&quot;</span>, <span class="at">hjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">colour =</span> <span class="st">&quot;red&quot;</span>)<span class="sc">+</span></span>
<span id="cb225-22"><a href="#cb225-22" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Body mass (g)&quot;</span>,</span>
<span id="cb225-23"><a href="#cb225-23" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Count&quot;</span>)<span class="sc">+</span></span>
<span id="cb225-24"><a href="#cb225-24" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>( <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">90</span>), <span class="at">expand =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="02c-insights_files/figure-html/unnamed-chunk-17-1.png" alt="Red dashed line represents the mean, Black dashed line is the median value" width="100%" />
<p class="caption">
(#fig:unnamed-chunk-17)Red dashed line represents the mean, Black dashed line is the median value
</p>
</div>
</div>
<div id="normal-distribution" class="section level3" number="11.4.3">
<h3><span class="header-section-number">11.4.3</span> Normal distribution</h3>
<p>From our histogram we can likely already tell whether we have normally distributed data.</p>
<div class="info">
<p>
Normal distribution, also known as the “Gaussian distribution”, is a
probability distribution that is symmetric about the mean, showing that
data near the mean are more frequent in occurrence than data far from
the mean. In graphical form, the normal distribution appears as a “bell
curve”.
</p>
</div>
<p>But we can simulate and add a normal distribution with the same mean and sd:</p>
<p>If our data follows a normal distribution, then we can predict the spread of our data, and the likelihood of observing a datapoint of any given value with only the mean and standard deviation.</p>
<p>Here we can simulate what a normally distributed dataset would look like with our sample size, mean and standard deviation.</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" tabindex="-1"></a>x_values <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">2700</span>,<span class="dv">6300</span>, <span class="dv">100</span>)</span>
<span id="cb226-2"><a href="#cb226-2" tabindex="-1"></a></span>
<span id="cb226-3"><a href="#cb226-3" tabindex="-1"></a>norm_mass <span class="ot">&lt;-</span> <span class="fu">dnorm</span>(x_values,</span>
<span id="cb226-4"><a href="#cb226-4" tabindex="-1"></a>      <span class="at">mean =</span> <span class="fl">4201.754</span>,</span>
<span id="cb226-5"><a href="#cb226-5" tabindex="-1"></a>      <span class="at">sd =</span> <span class="fl">801.9545</span>) <span class="sc">|&gt;</span> </span>
<span id="cb226-6"><a href="#cb226-6" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb226-7"><a href="#cb226-7" tabindex="-1"></a></span>
<span id="cb226-8"><a href="#cb226-8" tabindex="-1"></a>density <span class="ot">&lt;-</span> <span class="fu">tibble</span>(x_values, norm_mass)</span>
<span id="cb226-9"><a href="#cb226-9" tabindex="-1"></a></span>
<span id="cb226-10"><a href="#cb226-10" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb226-11"><a href="#cb226-11" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb226-12"><a href="#cb226-12" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>body_mass_g, <span class="at">y =</span> ..density..),</span>
<span id="cb226-13"><a href="#cb226-13" tabindex="-1"></a>               <span class="at">alpha=</span><span class="fl">0.8</span>,</span>
<span id="cb226-14"><a href="#cb226-14" tabindex="-1"></a>               <span class="at">bins =</span> <span class="dv">10</span>,</span>
<span id="cb226-15"><a href="#cb226-15" tabindex="-1"></a>               <span class="at">fill=</span><span class="st">&quot;steelblue&quot;</span>,</span>
<span id="cb226-16"><a href="#cb226-16" tabindex="-1"></a>               <span class="at">colour=</span><span class="st">&quot;darkgrey&quot;</span>)<span class="sc">+</span></span>
<span id="cb226-17"><a href="#cb226-17" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> norm_mass, <span class="fu">aes</span>(<span class="at">x =</span>x_values, <span class="at">y =</span> value))<span class="sc">+</span></span>
<span id="cb226-18"><a href="#cb226-18" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Body mass (g)&quot;</span>,</span>
<span id="cb226-19"><a href="#cb226-19" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Count&quot;</span>)</span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-19-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>We can also use the <code>stat_function</code> to add any distribution curve to a plot</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb227-2"><a href="#cb227-2" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb227-3"><a href="#cb227-3" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>body_mass_g, <span class="at">y =</span> ..density..),</span>
<span id="cb227-4"><a href="#cb227-4" tabindex="-1"></a>               <span class="at">alpha=</span><span class="fl">0.8</span>,</span>
<span id="cb227-5"><a href="#cb227-5" tabindex="-1"></a>               <span class="at">bins =</span> <span class="dv">10</span>,</span>
<span id="cb227-6"><a href="#cb227-6" tabindex="-1"></a>               <span class="at">fill=</span><span class="st">&quot;steelblue&quot;</span>,</span>
<span id="cb227-7"><a href="#cb227-7" tabindex="-1"></a>               <span class="at">colour=</span><span class="st">&quot;darkgrey&quot;</span>)<span class="sc">+</span></span>
<span id="cb227-8"><a href="#cb227-8" tabindex="-1"></a>  <span class="fu">stat_function</span>(<span class="at">fun =</span> <span class="cf">function</span>(x){</span>
<span id="cb227-9"><a href="#cb227-9" tabindex="-1"></a>    <span class="fu">dnorm</span>(x,</span>
<span id="cb227-10"><a href="#cb227-10" tabindex="-1"></a>          <span class="at">mean =</span> <span class="fl">4201.754</span>,</span>
<span id="cb227-11"><a href="#cb227-11" tabindex="-1"></a>      <span class="at">sd =</span> <span class="fl">801.9545</span>)</span>
<span id="cb227-12"><a href="#cb227-12" tabindex="-1"></a>  })</span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-20-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Body mass (g)&quot;</span>,</span>
<span id="cb228-2"><a href="#cb228-2" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Count&quot;</span>)</span></code></pre></div>
<pre><code>## $x
## [1] &quot;Body mass (g)&quot;
## 
## $y
## [1] &quot;Count&quot;
## 
## attr(,&quot;class&quot;)
## [1] &quot;labels&quot;</code></pre>
<div id="qq-plot" class="section level4" number="11.4.3.1">
<h4><span class="header-section-number">11.4.3.1</span> QQ-plot</h4>
<p>A QQ plot is a classic way of checking whether a sample distribution is the same as another (or theoretical distribution). They look a bit odd at first, but they are actually fairly easy to understand, and very useful! The qqplot distributes your data on the y-axis, and a theoretical normal distribution on the x-axis. If the residuals follow a normal distribution, they should meet to produce a perfect diagonal line across the plot.</p>
<p>Watch this video to see <a href="https://www.youtube.com/watch?v=okjYjClSjOg">QQ plots explained</a></p>
<div class="figure" style="text-align: center">
<img src="images/qq_example.png" alt="Examples of qqplots with different deviations from a normal distribution" width="80%" />
<p class="caption">
(#fig:unnamed-chunk-21)Examples of qqplots with different deviations from a normal distribution
</p>
</div>
<p>In our example we can see that <em>most</em> of our residuals can be explained by a normal distribution, except at the low end of our data.</p>
<p>So the fit is not perfect, but it is also not terrible!</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">sample =</span> body_mass_g))<span class="sc">+</span></span>
<span id="cb230-2"><a href="#cb230-2" tabindex="-1"></a>  <span class="fu">stat_qq</span>() <span class="sc">+</span> </span>
<span id="cb230-3"><a href="#cb230-3" tabindex="-1"></a>  <span class="fu">stat_qq_line</span>()</span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-22-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><strong>How do we know how much deviation from an idealised distribution is ok?</strong></p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb231-2"><a href="#cb231-2" tabindex="-1"></a>  <span class="fu">pull</span>(body_mass_g) <span class="sc">|&gt;</span> </span>
<span id="cb231-3"><a href="#cb231-3" tabindex="-1"></a>  car<span class="sc">::</span><span class="fu">qqPlot</span>()</span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-23-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>## [1] 170 186</code></pre>
<p>The qqPlot() function from the R package car provides 95% confidence interval margins to help you determine how severely your quantiles deviate from your idealised distribution.</p>
<p>With the information from the qqPlot which section of the distribution deviates most clearly from a normal distribution <select class='webex-select'><option value='blank'></option><option value='answer'>&lt;3500g</option><option value=''>3500-4000g</option><option value=''>4000-4500g</option><option value=''>5000-5500g</option><option value=''>&gt;5500g</option></select></p>
<button id="displayTextunnamed-chunk-24" onclick="javascript:toggle(&#39;unnamed-chunk-24&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-24" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
There are is a 'truncated' left tail of our normal distribution. We would predict more penguins with body masses lower than 3000g under the normal distribution.
</div>
</div>
</div>
</div>
</div>
<div id="variation" class="section level3" number="11.4.4">
<h3><span class="header-section-number">11.4.4</span> Variation</h3>
<p>Dispersion (how spread out the data is) is an important component towards understanding any numeric variable. While measures of central tendency are used to estimate the central value of a dataset, measures of dispersion are important for describing the spread of data.</p>
<p>Two data sets can have an equal mean (that is, measure of central tendency) but vastly different variability.</p>
<p>Important measures for dispersion are <strong>range</strong>, <strong>interquartile range</strong>, <strong>variance</strong> and <strong>standard deviation</strong>.</p>
<ul>
<li><p>The <strong>range</strong> is defined as the difference between the highest and lowest values in a dataset. The disadvantage of defining range as a measure of dispersion is that it does not take into account all values for calculation.</p></li>
<li><p>The <strong>interquartile range</strong> is defined as the difference between the third quartile denoted by 𝑸_𝟑 and the lower quartile denoted by 𝑸_𝟏 . 75% of observations lie below the third quartile and 25% of observations lie below the first quartile.</p></li>
<li><p><strong>Variance</strong> is defined as the sum of squares of deviations from the mean, divided by the total number of observations. The standard deviation is the positive square root of the variance. The <strong>standard deviation</strong> is preferred instead of variance as it has the same units as the original values.</p></li>
</ul>
<div id="interquartile-range" class="section level4" number="11.4.4.1">
<h4><span class="header-section-number">11.4.4.1</span> Interquartile range</h4>
<p>We used the IQR function in <code>summarise()</code> to find the interquartile range of the body mass variable.</p>
<p>The IQR is also useful when applied to the summary plots 'box and whisker plots'. We can also calculate the values of the IQR margins, and add labels with <code>scales</code> <span class="citation">Wickham &amp; Seidel (<a href="#ref-R-scales">2022</a>)</span>.</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb233-2"><a href="#cb233-2" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">q_body_mass =</span> <span class="fu">quantile</span>(body_mass_g, <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb233-3"><a href="#cb233-3" tabindex="-1"></a>            <span class="at">quantile =</span> scales<span class="sc">::</span><span class="fu">percent</span>(<span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>))) <span class="co"># scales package allows easy converting from data values to perceptual properties</span></span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="right">q_body_mass</th>
<th align="left">quantile</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">3550</td>
<td align="left">25%</td>
</tr>
<tr class="even">
<td align="right">4050</td>
<td align="left">50%</td>
</tr>
<tr class="odd">
<td align="right">4750</td>
<td align="left">75%</td>
</tr>
</tbody>
</table>
</div>
<p>We can see for ourselves the IQR is obtained by subtracting the body mass at tht 75% quantile from the 25% quantile (4750-3550 = 1200).</p>
</div>
</div>
<div id="visualising-dispersion" class="section level3" number="11.4.5">
<h3><span class="header-section-number">11.4.5</span> Visualising dispersion</h3>
<div class="figure" style="text-align: center">
<img src="images/distribution_gif.gif" alt="Visualising dispersion with different figures" width="80%" />
<p class="caption">
(#fig:unnamed-chunk-26)Visualising dispersion with different figures
</p>
</div>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" tabindex="-1"></a>colour_fill <span class="ot">&lt;-</span> <span class="st">&quot;darkorange&quot;</span></span>
<span id="cb234-2"><a href="#cb234-2" tabindex="-1"></a>colour_line <span class="ot">&lt;-</span> <span class="st">&quot;steelblue&quot;</span></span>
<span id="cb234-3"><a href="#cb234-3" tabindex="-1"></a>lims <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">7000</span>)</span>
<span id="cb234-4"><a href="#cb234-4" tabindex="-1"></a></span>
<span id="cb234-5"><a href="#cb234-5" tabindex="-1"></a>body_weight_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb234-6"><a href="#cb234-6" tabindex="-1"></a>  </span>
<span id="cb234-7"><a href="#cb234-7" tabindex="-1"></a>  penguins <span class="sc">|&gt;</span> </span>
<span id="cb234-8"><a href="#cb234-8" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="st">&quot;&quot;</span>,</span>
<span id="cb234-9"><a href="#cb234-9" tabindex="-1"></a>             <span class="at">y=</span> body_mass_g))<span class="sc">+</span></span>
<span id="cb234-10"><a href="#cb234-10" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span> <span class="st">&quot; &quot;</span>,</span>
<span id="cb234-11"><a href="#cb234-11" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Mass (g)&quot;</span>)<span class="sc">+</span></span>
<span id="cb234-12"><a href="#cb234-12" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> lims)<span class="sc">+</span></span>
<span id="cb234-13"><a href="#cb234-13" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb234-14"><a href="#cb234-14" tabindex="-1"></a>}</span>
<span id="cb234-15"><a href="#cb234-15" tabindex="-1"></a></span>
<span id="cb234-16"><a href="#cb234-16" tabindex="-1"></a>plot_1 <span class="ot">&lt;-</span> <span class="fu">body_weight_plot</span>()<span class="sc">+</span></span>
<span id="cb234-17"><a href="#cb234-17" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">fill =</span> colour_fill,</span>
<span id="cb234-18"><a href="#cb234-18" tabindex="-1"></a>               <span class="at">colour =</span> colour_line,</span>
<span id="cb234-19"><a href="#cb234-19" tabindex="-1"></a>               <span class="at">width =</span> <span class="fl">0.2</span>,</span>
<span id="cb234-20"><a href="#cb234-20" tabindex="-1"></a>              <span class="at">shape =</span> <span class="dv">21</span>)</span>
<span id="cb234-21"><a href="#cb234-21" tabindex="-1"></a></span>
<span id="cb234-22"><a href="#cb234-22" tabindex="-1"></a>plot_2 <span class="ot">&lt;-</span> <span class="fu">body_weight_plot</span>()<span class="sc">+</span></span>
<span id="cb234-23"><a href="#cb234-23" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill =</span> colour_fill,</span>
<span id="cb234-24"><a href="#cb234-24" tabindex="-1"></a>               <span class="at">colour =</span> colour_line,</span>
<span id="cb234-25"><a href="#cb234-25" tabindex="-1"></a>               <span class="at">width =</span> <span class="fl">0.4</span>)</span>
<span id="cb234-26"><a href="#cb234-26" tabindex="-1"></a></span>
<span id="cb234-27"><a href="#cb234-27" tabindex="-1"></a>plot_3 <span class="ot">&lt;-</span> penguin_body_mass_summary <span class="sc">|&gt;</span> </span>
<span id="cb234-28"><a href="#cb234-28" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">&quot; &quot;</span>,</span>
<span id="cb234-29"><a href="#cb234-29" tabindex="-1"></a>             <span class="at">y =</span> mean_body_mass))<span class="sc">+</span></span>
<span id="cb234-30"><a href="#cb234-30" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>,</span>
<span id="cb234-31"><a href="#cb234-31" tabindex="-1"></a>           <span class="at">fill =</span> colour_fill,</span>
<span id="cb234-32"><a href="#cb234-32" tabindex="-1"></a>           <span class="at">colour =</span> colour_line,</span>
<span id="cb234-33"><a href="#cb234-33" tabindex="-1"></a>               <span class="at">width =</span> <span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb234-34"><a href="#cb234-34" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="at">data =</span> penguin_body_mass_summary,</span>
<span id="cb234-35"><a href="#cb234-35" tabindex="-1"></a>                <span class="fu">aes</span>(<span class="at">ymin =</span> mean_body_mass <span class="sc">-</span> sd,</span>
<span id="cb234-36"><a href="#cb234-36" tabindex="-1"></a>                    <span class="at">ymax =</span> mean_body_mass <span class="sc">+</span> sd),</span>
<span id="cb234-37"><a href="#cb234-37" tabindex="-1"></a>                <span class="at">colour =</span> colour_line,</span>
<span id="cb234-38"><a href="#cb234-38" tabindex="-1"></a>                <span class="at">width =</span> <span class="fl">0.1</span>)<span class="sc">+</span></span>
<span id="cb234-39"><a href="#cb234-39" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot; &quot;</span>,</span>
<span id="cb234-40"><a href="#cb234-40" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Body mass (g)&quot;</span>)<span class="sc">+</span></span>
<span id="cb234-41"><a href="#cb234-41" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> lims)<span class="sc">+</span></span>
<span id="cb234-42"><a href="#cb234-42" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb234-43"><a href="#cb234-43" tabindex="-1"></a></span>
<span id="cb234-44"><a href="#cb234-44" tabindex="-1"></a></span>
<span id="cb234-45"><a href="#cb234-45" tabindex="-1"></a>plot_1 <span class="sc">+</span> plot_2 <span class="sc">+</span> plot_3 </span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-27-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>We now have several compact representations of the body_mass_g including a histogram, boxplot and summary calculations. You can <em>and should</em> generate the same summaries for your other numeric variables. These tables and graphs provide the detail you need to understand the central tendency and dispersion of numeric variables.</p>
</div>
<div id="drop_na" class="section level3" number="11.4.6">
<h3><span class="header-section-number">11.4.6</span> drop_na</h3>
<p>Missing values <code>NA</code> can really mess up our calculations. There are a few different ways we can deal with missing data:</p>
<ul>
<li><p><code>drop_na()</code> on everything before we start. This runs the risk that we lose <strong>a lot</strong> of data as <em>every</em> row, with an NA in <em>any column</em> will be removed</p></li>
<li><p><code>drop_na()</code> on a particular variable. This is fine, but we should approach this cautiously - if we do this in a way where we write this data into a new object e.g. <code>penguins &lt;- penguins |&gt; drop_na(body_mass_g)</code> then we have removed this data forever - perhaps we only want to drop those rows for a specific calculation - again they might contain useful information in other variables.</p></li>
<li><p><code>drop_na()</code> for a specific task - this is a more cautious approach <strong>but</strong> we need to be aware of another phenomena. Is the data <strong>missing at random</strong>? You might need to investigate <em>where</em> your missing values are in a dataset. Data that is truly <strong>missing at random</strong> can be removed from a dataset without introducing bias. However, if bad weather conditions meant that researchers could not get to a particular island to measure one set of penguins that data is <strong>missing not at random</strong> this should be treated with caution. If that island contained one particular species of penguin, it might mean we have complete data for only two out of three penguin species. There is nothing you can do about incomplete data other than be aware that data not missing at random could influence your distributions.</p></li>
</ul>
</div>
</div>
<div id="categorical-and-continuous-variables" class="section level2" number="11.5">
<h2><span class="header-section-number">11.5</span> Categorical and continuous variables</h2>
<p>It’s common to want to explore the distribution of a continuous variable broken down by a categorical variable.</p>
<div class="webex-solution">
<button>
Think about which other variables might affect body mass?
</button>
<div class="figure" style="text-align: center">
<img src="images/body-mass-interaction.png" alt="Species and sex are both likely to affect body mass" width="80%" />
<p class="caption">
(#fig:unnamed-chunk-28)Species and sex are both likely to affect body mass
</p>
</div>
<p>So it is reasonable to think that perhaps either species or sex might affect the morphology of beaks directly - or that these might affect body mass (so that if there is a direct relationship between mass and beak length, there will also be an indirect relationship with sex or species).</p>
</div>
<p>The best and simplest place to start exploring these possible relationships is by producing simple figures.</p>
<p>Let's start by looking at the distribution of body mass by species.</p>
</div>
<div id="activity-1-produce-a-plot-which-allows-you-to-look-at-the-distribution-of-penguin-body-mass-observations-by-species" class="section level2" number="11.6">
<h2><span class="header-section-number">11.6</span> Activity 1: Produce a plot which allows you to look at the distribution of penguin body mass observations by species</h2>
<button id="displayTextunnamed-chunk-29" onclick="javascript:toggle(&#39;unnamed-chunk-29&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-29" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" tabindex="-1"></a>jitter_plot <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb235-2"><a href="#cb235-2" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species,</span>
<span id="cb235-3"><a href="#cb235-3" tabindex="-1"></a>               <span class="at">y =</span> body_mass_g))<span class="sc">+</span></span>
<span id="cb235-4"><a href="#cb235-4" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(<span class="at">shape =</span> <span class="dv">21</span>,</span>
<span id="cb235-5"><a href="#cb235-5" tabindex="-1"></a>                <span class="at">fill =</span> colour_fill,</span>
<span id="cb235-6"><a href="#cb235-6" tabindex="-1"></a>                <span class="at">colour =</span> colour_line,</span>
<span id="cb235-7"><a href="#cb235-7" tabindex="-1"></a>                <span class="at">width =</span> <span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb235-8"><a href="#cb235-8" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span>
<span id="cb235-9"><a href="#cb235-9" tabindex="-1"></a></span>
<span id="cb235-10"><a href="#cb235-10" tabindex="-1"></a>box_plot <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb235-11"><a href="#cb235-11" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species,</span>
<span id="cb235-12"><a href="#cb235-12" tabindex="-1"></a>               <span class="at">y =</span> body_mass_g))<span class="sc">+</span></span>
<span id="cb235-13"><a href="#cb235-13" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">fill =</span> colour_fill,</span>
<span id="cb235-14"><a href="#cb235-14" tabindex="-1"></a>                <span class="at">colour =</span> colour_line,</span>
<span id="cb235-15"><a href="#cb235-15" tabindex="-1"></a>                <span class="at">width =</span> <span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb235-16"><a href="#cb235-16" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span>
<span id="cb235-17"><a href="#cb235-17" tabindex="-1"></a></span>
<span id="cb235-18"><a href="#cb235-18" tabindex="-1"></a>histogram_plot <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb235-19"><a href="#cb235-19" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> species))<span class="sc">+</span></span>
<span id="cb235-20"><a href="#cb235-20" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> body_mass_g,</span>
<span id="cb235-21"><a href="#cb235-21" tabindex="-1"></a>                       <span class="at">y =</span> ..density..),</span>
<span id="cb235-22"><a href="#cb235-22" tabindex="-1"></a>                   <span class="at">position =</span> <span class="st">&quot;identity&quot;</span>,</span>
<span id="cb235-23"><a href="#cb235-23" tabindex="-1"></a>                   <span class="at">alpha =</span> <span class="fl">0.6</span>,</span>
<span id="cb235-24"><a href="#cb235-24" tabindex="-1"></a>                <span class="at">colour =</span> colour_line)</span>
<span id="cb235-25"><a href="#cb235-25" tabindex="-1"></a></span>
<span id="cb235-26"><a href="#cb235-26" tabindex="-1"></a>jitter_plot<span class="sc">/</span>box_plot<span class="sc">/</span>histogram_plot</span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-52-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>So it is reasonable to think that perhaps either species or sex might affect body mass, and we can visualise this in a number of different ways. The last method, a density histogram, looks a little crowded now, so I will use the excellent <code>ggridges</code> package to help out</p>
</div>
</div>
</div>
</div>
<div id="ggridges" class="section level2" number="11.7">
<h2><span class="header-section-number">11.7</span> GGridges</h2>
<p>The package <code>ggridges</code> (<span class="citation">Wilke (<a href="#ref-R-ggridges">2022</a>)</span>) provides some excellent extra geoms to supplement <code>ggplot</code>. One if its most useful features is to to allow different groups to be mapped to the y axis, so that histograms are more easily viewed.</p>
<button id="displayTextunnamed-chunk-30" onclick="javascript:toggle(&#39;unnamed-chunk-30&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-30" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" tabindex="-1"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb236-2"><a href="#cb236-2" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> species)) <span class="sc">+</span> </span>
<span id="cb236-3"><a href="#cb236-3" tabindex="-1"></a>  ggridges<span class="sc">::</span><span class="fu">geom_density_ridges</span>(<span class="at">fill =</span> colour_fill,</span>
<span id="cb236-4"><a href="#cb236-4" tabindex="-1"></a>                <span class="at">colour =</span> colour_line,</span>
<span id="cb236-5"><a href="#cb236-5" tabindex="-1"></a>                <span class="at">alpha =</span> <span class="fl">0.8</span>)</span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-53-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<p><strong>Q. Does each species have a data distribution that appears to be normally distributed?</strong></p>
<ul>
<li><p>Gentoo <select class='webex-select'><option value='blank'></option><option value='answer'>Yes</option><option value=''>No</option></select></p></li>
<li><p>Chinstrap <select class='webex-select'><option value='blank'></option><option value='answer'>Yes</option><option value=''>No</option></select></p></li>
<li><p>Adelie <select class='webex-select'><option value='blank'></option><option value='answer'>Yes</option><option value=''>No</option></select></p></li>
</ul>
<button id="displayTextunnamed-chunk-31" onclick="javascript:toggle(&#39;unnamed-chunk-31&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-31" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb237-2"><a href="#cb237-2" tabindex="-1"></a>  <span class="fu">group_split</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb237-3"><a href="#cb237-3" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">pull</span>(.x, body_mass_g) </span>
<span id="cb237-4"><a href="#cb237-4" tabindex="-1"></a>      <span class="sc">|&gt;</span> car<span class="sc">::</span><span class="fu">qqPlot</span>())</span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-54-1.png" width="100%" style="display: block; margin: auto;" /><img src="02c-insights_files/figure-html/unnamed-chunk-54-2.png" width="100%" style="display: block; margin: auto;" /><img src="02c-insights_files/figure-html/unnamed-chunk-54-3.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>## [[1]]
## [1] 110 102
## 
## [[2]]
## [1] 38 39
## 
## [[3]]
## [1] 18 41</code></pre>
<p>While the Gentoo density plot appears to show two peaks, our qqplot indicates this does not deviate from what me might expect from a normal distribution. But we could still investigate whether there are "two populations" here.</p>
</div>
</div>
</div>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb239-2"><a href="#cb239-2" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span> </span>
<span id="cb239-3"><a href="#cb239-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> species)) <span class="sc">+</span> </span>
<span id="cb239-4"><a href="#cb239-4" tabindex="-1"></a>    <span class="fu">geom_density_ridges</span>(<span class="fu">aes</span>(<span class="at">fill =</span> sex),</span>
<span id="cb239-5"><a href="#cb239-5" tabindex="-1"></a>                        <span class="at">colour =</span> colour_line,</span>
<span id="cb239-6"><a href="#cb239-6" tabindex="-1"></a>                        <span class="at">alpha =</span> <span class="fl">0.8</span>,</span>
<span id="cb239-7"><a href="#cb239-7" tabindex="-1"></a>                        <span class="at">bandwidth =</span> <span class="dv">175</span>)</span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-32-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" tabindex="-1"></a><span class="co"># try playing with the bandwidth argument - this behaves similar to binning which you should be familiar with from using geom_histogram</span></span></code></pre></div>
</div>
<div id="activity-2-test-yourself" class="section level2" number="11.8">
<h2><span class="header-section-number">11.8</span> Activity 2: Test yourself</h2>
<p><strong>Question 1.</strong> Write down some insights you have made about the data and relationships you have observed. Compare these to the ones below. Do you agree with these? Did you miss any? What observations did you make that are <strong>not</strong> in the list below.</p>
<div class="webex-solution">
<button>
What data insights have you made?
</button>
<p>This is revealing some really interesting insights into the shape and distribution of body sizes in our penguin populations now.</p>
<p>For example:</p>
<ul>
<li><p>Gentoo penguins appear to show strong sexual dimorphism with almost all males being larger than females (little overlap on density curves).</p></li>
<li><p>Gentoo males and females are on average larger than the other two penguin species</p></li>
<li><p>Gentoo females have two distinct peaks of body mass.</p></li>
<li><p>Chinstrap penguins also show evidence of sexual dimorphism, though with greater overlap.</p></li>
<li><p>Adelie penguins have larger males than females on average, but a wide spread of male body mass, (possibly two groups?)</p></li>
</ul>
<p>Note how we are able to understand our data better, by spending time making data visuals. While descriptive data statistics (mean, median) and measures of variance (range, IQR, sd) are important. They are not substitutes for spending time thinking about data and making exploratory analyses.</p>
</div>
<p><strong>Question 2.</strong> Using <code>summarise</code> we can quickly calculate <span class="math inline">\(s\)</span> but can you replicate this by hand with <code>dplyr</code> functions? - do this for total <span class="math inline">\(s\)</span> (not by category).</p>
<ul>
<li><p>Residuals</p></li>
<li><p>Squared residuals</p></li>
<li><p>Sum of squares</p></li>
<li><p>Variance = SS/df</p></li>
<li><p><span class="math inline">\(s=\sqrt{Variance}\)</span></p></li>
</ul>
<button id="displayTextunnamed-chunk-33" onclick="javascript:toggle(&#39;unnamed-chunk-33&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-33" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" tabindex="-1"></a>mean <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb241-2"><a href="#cb241-2" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> T))</span>
<span id="cb241-3"><a href="#cb241-3" tabindex="-1"></a></span>
<span id="cb241-4"><a href="#cb241-4" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb241-5"><a href="#cb241-5" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">residuals =</span> (body_mass_g <span class="sc">-</span> <span class="fu">pull</span>(mean)),</span>
<span id="cb241-6"><a href="#cb241-6" tabindex="-1"></a>           <span class="at">sqrd_resid =</span> residuals<span class="sc">^</span><span class="dv">2</span>) <span class="sc">|&gt;</span> </span>
<span id="cb241-7"><a href="#cb241-7" tabindex="-1"></a>    <span class="fu">drop_na</span>(sqrd_resid) <span class="sc">|&gt;</span> </span>
<span id="cb241-8"><a href="#cb241-8" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">sum_squares =</span> <span class="fu">sum</span>(sqrd_resid),</span>
<span id="cb241-9"><a href="#cb241-9" tabindex="-1"></a>              <span class="at">variance =</span> sum_squares<span class="sc">/</span>(<span class="at">n=</span><span class="fu">n</span>())<span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb241-10"><a href="#cb241-10" tabindex="-1"></a>              <span class="at">sd =</span> <span class="fu">sqrt</span>(variance))</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="right">sum_squares</th>
<th align="right">variance</th>
<th align="right">sd</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">219307697</td>
<td align="right">641249.6</td>
<td align="right">800.7806</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="data-insights-part-two" class="section level1" number="12">
<h1><span class="header-section-number">12</span> Data insights part two</h1>
<p>In the previous chapter we looked at individual variables, and understanding the different types of data. We made numeric and graphical summaries of the distributions of features within each variable. This week we will continue to work in the same space, and extend our understanding to include relationships between variables.</p>
<p>Understanding the relationship between two or more variables is often the basis of most of our scientific questions. These might include comparing variables of the same type (numeric against numeric) or different types (numeric against categorical). In this chapter we will see how we can use descriptive statistics and visuals to explore associations</p>
<div id="associations-between-numerical-variables" class="section level2" number="12.1">
<h2><span class="header-section-number">12.1</span> Associations between numerical variables</h2>
<div id="correlations" class="section level3" number="12.1.1">
<h3><span class="header-section-number">12.1.1</span> Correlations</h3>
<p>A common measure of association between two numerical variables is the <strong>correlation coefficient</strong>. The correlation metric is a numerical measure of the <em>strength of an association</em></p>
<p>There are several measures of correlation including:</p>
<ul>
<li><p><strong>Pearson's correlation coefficient</strong> : good for describing linear associations</p></li>
<li><p><strong>Spearman's rank correlation coefficient</strong>: a rank ordered correlation - good for when the assumptions for Pearson's correlation is not met.</p></li>
</ul>
<p>Pearson's correlation coefficient <em>r</em> is designed to measure the strength of a linear (straight line) association. Pearson's takes a value between -1 and 1.</p>
<ul>
<li><p>A value of 0 means there is no linear association between the variables</p></li>
<li><p>A value of 1 means there is a perfect <em>positive</em> association between the variables</p></li>
<li><p>A value of -1 means there is a perfect <em>negative</em> association between the variables</p></li>
</ul>
<p>A <em>perfect</em> association is one where we can predict the value of one variable with complete accuracy, just by knowing the value of the other variable.</p>
<p>We can use the <code>cor</code> function in R to calculate Pearson's correlation coefficient.</p>
<div class="tab">
<button class="tablinksunnamed-chunk-35 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-35&#39;, &#39;unnamed-chunk-35&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-35" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-35&#39;, &#39;unnamed-chunk-35&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-35" class="tabcontentunnamed-chunk-35">
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" tabindex="-1"></a><span class="fu">cor.test</span>(penguins<span class="sc">$</span>culmen_length_mm, penguins<span class="sc">$</span>culmen_depth_mm)</span></code></pre></div>
<pre><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  penguins$culmen_length_mm and penguins$culmen_depth_mm
## t = -4.4591, df = 340, p-value = 1.12e-05
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  -0.3328072 -0.1323004
## sample estimates:
##        cor 
## -0.2350529</code></pre>
</div>
<div id="option2unnamed-chunk-35" class="tabcontentunnamed-chunk-35">
<pre><code>{r}
library(rstatix)

penguins |&gt; 
  cor_test(culmen_length_mm, culmen_depth_mm)</code></pre>
</div>
<script> javascript:hide('option2unnamed-chunk-35') </script>
<p>This tells us two features of the association. It's <em>sign</em> and <em>magnitude</em>. The coefficient is negative, so as bill length increases, bill depth decreases. The value -0.22 indicates that only about 22% of the variation in bill length can be explained by changes in bill depth (and <em>vice-versa</em>), suggesting that the variables are not closely related.</p>
<div class="figure" style="text-align: center">
<img src="images/correlation_examples.png" alt="Different relationships between two numeric variables. Each number represents the Pearson's correlation coefficient of each association" width="80%" />
<p class="caption">
(#fig:unnamed-chunk-36)Different relationships between two numeric variables. Each number represents the Pearson's correlation coefficient of each association
</p>
</div>
<ul>
<li><p>Because Pearson's coefficient is designed to summarise the strength of a linear relationship, this can be misleading if the relationship is <em>not linear</em> e.g. curved or humped. This is why it's always a good idea to plot the relationship <em>first</em> (see above).</p></li>
<li><p>Even when the relationship is linear, it doesn't tell us anything about the steepness of the association (see above). It <em>only</em> tells us how often a change in one variable can predict the change in the other <em>not</em> the value of that change.</p></li>
</ul>
<p>This can be difficult to understand at first, so carefully consider the figure above.</p>
<ul>
<li><p>The first row above shows differing levels of the strength of association. If we drew a perfect straight line between two variables, how closely do the data points fit around this line.</p></li>
<li><p>The second row shows a series of <em>perfect</em> linear relationships. We can accurately predict the value of one variable just by knowing the value of the other variable, but the steepness of the relationship in each example is very different. This is <strong>important</strong> because it means a perfect association can still have a small effect.</p></li>
<li><p>The third row shows a series of associations where there is <em>clearly</em> a relationship between the two variables, but it is also not linear so would be inappropriate for a Pearson's correlation.</p></li>
</ul>
</div>
<div id="non-linear-correlations" class="section level3" number="12.1.2">
<h3><span class="header-section-number">12.1.2</span> Non-linear correlations</h3>
<p>So what should we do if the relationship between our variables is non-linear? Instead of using Pearson's correlation coefficient we can calculate something called a <strong>rank correlation</strong>.</p>
<p>Instead of working with the raw values of our two variables we can use rank ordering instead. The idea is pretty simple if we start with the lowest vaule in a variable and order it as '1', then assign labels '2', '3' etc. as we ascend in rank order. We can see a way that this could be applied manually with the function <code>dense_rank</code> from dplyr below:</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> <span class="fu">select</span>(culmen_length_mm, </span>
<span id="cb245-2"><a href="#cb245-2" tabindex="-1"></a>                    culmen_depth_mm) <span class="sc">|&gt;</span> </span>
<span id="cb245-3"><a href="#cb245-3" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span> </span>
<span id="cb245-4"><a href="#cb245-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank_length=</span><span class="fu">dense_rank</span>((culmen_length_mm)), </span>
<span id="cb245-5"><a href="#cb245-5" tabindex="-1"></a>         <span class="at">rank_depth=</span><span class="fu">dense_rank</span>((culmen_depth_mm))) <span class="sc">|&gt;</span> </span>
<span id="cb245-6"><a href="#cb245-6" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="right">culmen_length_mm</th>
<th align="right">culmen_depth_mm</th>
<th align="right">rank_length</th>
<th align="right">rank_depth</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">39.1</td>
<td align="right">18.7</td>
<td align="right">43</td>
<td align="right">57</td>
</tr>
<tr class="even">
<td align="right">39.5</td>
<td align="right">17.4</td>
<td align="right">46</td>
<td align="right">44</td>
</tr>
<tr class="odd">
<td align="right">40.3</td>
<td align="right">18.0</td>
<td align="right">52</td>
<td align="right">50</td>
</tr>
<tr class="even">
<td align="right">36.7</td>
<td align="right">19.3</td>
<td align="right">23</td>
<td align="right">63</td>
</tr>
<tr class="odd">
<td align="right">39.3</td>
<td align="right">20.6</td>
<td align="right">45</td>
<td align="right">75</td>
</tr>
<tr class="even">
<td align="right">38.9</td>
<td align="right">17.8</td>
<td align="right">41</td>
<td align="right">48</td>
</tr>
</tbody>
</table>
</div>
<p>Measures of rank correlation then are just a comparison of the rank orders between two variables, with a value between -1 and 1 just like Pearsons's. We already know from our Pearson's correlation coefficient, that we expect this relationship to be negative. So it should come as no surprise that the highest rank order values for bill_length_mm appear to be associated with lower rank order values for bill_depth_mm.</p>
<p>To calculate Spearman's <span class="math inline">\(\rho\)</span> 'rho' is pretty easy, you can use the cor functions again, but this time specify a hidden argument to <code>method="spearman"</code>.</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb246-2"><a href="#cb246-2" tabindex="-1"></a>  <span class="fu">cor_test</span>(culmen_length_mm, culmen_depth_mm, <span class="at">method=</span><span class="st">&quot;spearman&quot;</span>)</span></code></pre></div>
<div class="kable-table">
<table>
<colgroup>
<col width="25%" />
<col width="23%" />
<col width="8%" />
<col width="14%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">var1</th>
<th align="left">var2</th>
<th align="right">cor</th>
<th align="right">statistic</th>
<th align="right">p</th>
<th align="left">method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">culmen_length_mm</td>
<td align="left">culmen_depth_mm</td>
<td align="right">-0.22</td>
<td align="right">8145268</td>
<td align="right">3.51e-05</td>
<td align="left">Spearman</td>
</tr>
</tbody>
</table>
</div>
<p>What we can see in this example is that Pearson's <em>r</em> and Spearman's <span class="math inline">\(\rho\)</span> are basically identical.</p>
</div>
<div id="graphical-summaries-between-numeric-variables" class="section level3" number="12.1.3">
<h3><span class="header-section-number">12.1.3</span> Graphical summaries between numeric variables</h3>
<p>Correlation coefficients are a quick and simple way to attach a metric to the level of association between two variables. They are limited however in that a single number can never capture the every aspect of their relationship. This is why we visualise our data.</p>
<p>We have already covered scatter plots and <code>ggplot2()</code> extensively in previous chapters, so here we will just cover some of the different ways in which you could present the nature of a relationship</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" tabindex="-1"></a>length_depth_scatterplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x=</span> culmen_length_mm, </span>
<span id="cb247-2"><a href="#cb247-2" tabindex="-1"></a>                                                 <span class="at">y=</span> culmen_depth_mm)) <span class="sc">+</span></span>
<span id="cb247-3"><a href="#cb247-3" tabindex="-1"></a>                            <span class="fu">geom_point</span>()</span>
<span id="cb247-4"><a href="#cb247-4" tabindex="-1"></a></span>
<span id="cb247-5"><a href="#cb247-5" tabindex="-1"></a>length_depth_scatterplot</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="02c-insights_files/figure-html/unnamed-chunk-39-1.png" alt="A scatter plot of bill depth against bill length in mm" width="100%" />
<p class="caption">
(#fig:unnamed-chunk-39)A scatter plot of bill depth against bill length in mm
</p>
</div>
<blockquote>
<p>Note - Remember there are a number of different options available when constructing a plot including changing alpha to produce transparency if plots are lying on top of each other, colours (and shapes) to separate subgroups and ways to present third numerical variables such as setting aes(size=body_mass_g).</p>
</blockquote>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1" tabindex="-1"></a><span class="fu">library</span>(patchwork) <span class="co"># package calls should be placed at the TOP of your script</span></span>
<span id="cb248-2"><a href="#cb248-2" tabindex="-1"></a></span>
<span id="cb248-3"><a href="#cb248-3" tabindex="-1"></a>bill_depth_marginal <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb248-4"><a href="#cb248-4" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb248-5"><a href="#cb248-5" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x=</span>culmen_depth_mm), <span class="at">fill=</span><span class="st">&quot;darkgrey&quot;</span>)<span class="sc">+</span></span>
<span id="cb248-6"><a href="#cb248-6" tabindex="-1"></a>  <span class="fu">theme_void</span>()<span class="sc">+</span></span>
<span id="cb248-7"><a href="#cb248-7" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="co"># this graph needs to be rotated</span></span>
<span id="cb248-8"><a href="#cb248-8" tabindex="-1"></a></span>
<span id="cb248-9"><a href="#cb248-9" tabindex="-1"></a>bill_length_marginal <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb248-10"><a href="#cb248-10" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb248-11"><a href="#cb248-11" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x=</span>culmen_length_mm), <span class="at">fill=</span><span class="st">&quot;darkgrey&quot;</span>)<span class="sc">+</span></span>
<span id="cb248-12"><a href="#cb248-12" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb248-13"><a href="#cb248-13" tabindex="-1"></a></span>
<span id="cb248-14"><a href="#cb248-14" tabindex="-1"></a>layout <span class="ot">&lt;-</span> <span class="st">&quot;</span></span>
<span id="cb248-15"><a href="#cb248-15" tabindex="-1"></a><span class="st">AA#</span></span>
<span id="cb248-16"><a href="#cb248-16" tabindex="-1"></a><span class="st">BBC</span></span>
<span id="cb248-17"><a href="#cb248-17" tabindex="-1"></a><span class="st">BBC&quot;</span></span>
<span id="cb248-18"><a href="#cb248-18" tabindex="-1"></a><span class="co"># layout is easiest to organise using a text distribution, where ABC equal the three plots in order, and the grid is how much space they take up. We could easily make the main plot bigger and marginals smaller with</span></span>
<span id="cb248-19"><a href="#cb248-19" tabindex="-1"></a></span>
<span id="cb248-20"><a href="#cb248-20" tabindex="-1"></a><span class="co"># layout &lt;- &quot;</span></span>
<span id="cb248-21"><a href="#cb248-21" tabindex="-1"></a><span class="co"># AAA#</span></span>
<span id="cb248-22"><a href="#cb248-22" tabindex="-1"></a><span class="co"># BBBC</span></span>
<span id="cb248-23"><a href="#cb248-23" tabindex="-1"></a><span class="co"># BBBC&quot;</span></span>
<span id="cb248-24"><a href="#cb248-24" tabindex="-1"></a><span class="co"># BBBC</span></span>
<span id="cb248-25"><a href="#cb248-25" tabindex="-1"></a></span>
<span id="cb248-26"><a href="#cb248-26" tabindex="-1"></a>bill_length_marginal<span class="sc">+</span>length_depth_scatterplot<span class="sc">+</span>bill_depth_marginal<span class="sc">+</span> <span class="co"># order of plots is important</span></span>
<span id="cb248-27"><a href="#cb248-27" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">design=</span>layout) <span class="co"># uses the layout argument defined above to arrange the size and position of plots</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="02c-insights_files/figure-html/unnamed-chunk-40-1.png" alt="Using patchwork we can easily arrange extra plots to fit as marginals - these could be boxplots, histograms or density plots" width="100%" />
<p class="caption">
(#fig:unnamed-chunk-40)Using patchwork we can easily arrange extra plots to fit as marginals - these could be boxplots, histograms or density plots
</p>
</div>
<p>These efforts allow us to capture details about the spread and distribution of both variables <strong>and</strong> how they relate to each other. This figure provides us with insights into</p>
<ul>
<li><p>The central tendency of each variable</p></li>
<li><p>The spread of data in each variable</p></li>
<li><p>The correlation between the two variables</p></li>
</ul>
</div>
</div>
<div id="associations-between-categorical-variables" class="section level2" number="12.2">
<h2><span class="header-section-number">12.2</span> Associations between categorical variables</h2>
<p>Exploring associations between different categorical variables is not quite as simple as the previous numeric-numeric examples. Generally speaking we are interested in whether different combinations of categories are uniformally distributed or show evidence of clustering leading to <em>over- or under-represented</em> combinations.
The simplest way to investigate this is to use <code>group_by</code> and <code>summarise</code> as we have used previously.</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" tabindex="-1"></a>island_species_summary <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb249-2"><a href="#cb249-2" tabindex="-1"></a>  <span class="fu">group_by</span>(island, species) <span class="sc">|&gt;</span> </span>
<span id="cb249-3"><a href="#cb249-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>(),</span>
<span id="cb249-4"><a href="#cb249-4" tabindex="-1"></a>            <span class="at">n_distinct=</span><span class="fu">n_distinct</span>(individual_id)) <span class="sc">|&gt;</span> </span>
<span id="cb249-5"><a href="#cb249-5" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="co"># needed to remove group calculations</span></span>
<span id="cb249-6"><a href="#cb249-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">freq=</span>n<span class="sc">/</span><span class="fu">sum</span>(n)) <span class="co"># then calculates percentage of each group across WHOLE dataset</span></span>
<span id="cb249-7"><a href="#cb249-7" tabindex="-1"></a></span>
<span id="cb249-8"><a href="#cb249-8" tabindex="-1"></a>island_species_summary</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">island</th>
<th align="left">species</th>
<th align="right">n</th>
<th align="right">n_distinct</th>
<th align="right">freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Biscoe</td>
<td align="left">Adelie</td>
<td align="right">44</td>
<td align="right">44</td>
<td align="right">0.1279070</td>
</tr>
<tr class="even">
<td align="left">Biscoe</td>
<td align="left">Gentoo</td>
<td align="right">124</td>
<td align="right">94</td>
<td align="right">0.3604651</td>
</tr>
<tr class="odd">
<td align="left">Dream</td>
<td align="left">Adelie</td>
<td align="right">56</td>
<td align="right">56</td>
<td align="right">0.1627907</td>
</tr>
<tr class="even">
<td align="left">Dream</td>
<td align="left">Chinstrap</td>
<td align="right">68</td>
<td align="right">58</td>
<td align="right">0.1976744</td>
</tr>
<tr class="odd">
<td align="left">Torgersen</td>
<td align="left">Adelie</td>
<td align="right">52</td>
<td align="right">52</td>
<td align="right">0.1511628</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>Note - remember that group_by() applies functions which comes after it in a group-specific pattern.</p>
</blockquote>
<p>What does the above tell us, that 168 observations were made on the Island of Biscoe, with three times as many Gentoo penguin observations made as Adelie penguins (remeber this is observations made, not individual penguins). When we account for penguin ID we see there are around twice as many Gentoo penguins recorded. We can see there are no Chinstrap penguins recorded on Biscoe. Conversely we can see that Gentoo penguins are <strong>only</strong> observed on Biscoe.
The island of Dream has two populations of Adelie and Chinstrap penguins of roughly equal size, while the island of Torgensen appears to have a population comprised only of Adelie penguins.</p>
<p>We could also use a bar chart in ggplot to represent this count data.</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1" tabindex="-1"></a>penguins<span class="sc">|&gt;</span> </span>
<span id="cb250-2"><a href="#cb250-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>island, <span class="at">fill=</span>species))<span class="sc">+</span></span>
<span id="cb250-3"><a href="#cb250-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="fu">position_dodge</span>())<span class="sc">+</span></span>
<span id="cb250-4"><a href="#cb250-4" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-42-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>This is fine, but it looks a bit odd, because the bars expand to fill the available space on the category axis. Luckily there is an advanced version of the postion_dodge argument.</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" tabindex="-1"></a>penguins<span class="sc">|&gt;</span> </span>
<span id="cb251-2"><a href="#cb251-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>island, <span class="at">fill=</span>species))<span class="sc">+</span></span>
<span id="cb251-3"><a href="#cb251-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="fu">position_dodge2</span>(<span class="at">preserve=</span><span class="st">&quot;single&quot;</span>))<span class="sc">+</span> </span>
<span id="cb251-4"><a href="#cb251-4" tabindex="-1"></a>  <span class="co">#keeps bars to appropriate widths</span></span>
<span id="cb251-5"><a href="#cb251-5" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-43-1.png" width="100%" style="display: block; margin: auto;" />
&gt;Note the default for bar charts would have been a stacked option, but we have already seen how that can produce graphs that are difficult to read.</p>
<p>An alternative approach would be to look at the 'relative proportions' of each population in our overall dataset. Using the same methods as we used previously when looking at single variables. Let's add in a few aesthetic tweaks to improve the look.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="#cb252-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb252-2"><a href="#cb252-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>island, <span class="at">fill=</span>species))<span class="sc">+</span></span>
<span id="cb252-3"><a href="#cb252-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="fu">position_dodge2</span>(<span class="at">preserve=</span><span class="st">&quot;single&quot;</span>))<span class="sc">+</span> </span>
<span id="cb252-4"><a href="#cb252-4" tabindex="-1"></a>  <span class="co">#keeps bars to appropriate widths</span></span>
<span id="cb252-5"><a href="#cb252-5" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Island&quot;</span>,</span>
<span id="cb252-6"><a href="#cb252-6" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Number of observations&quot;</span>)<span class="sc">+</span></span>
<span id="cb252-7"><a href="#cb252-7" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>island_species_summary, <span class="co"># use the data from the summarise object</span></span>
<span id="cb252-8"><a href="#cb252-8" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x=</span>island,</span>
<span id="cb252-9"><a href="#cb252-9" tabindex="-1"></a>                <span class="at">y=</span> n<span class="sc">+</span><span class="dv">10</span>, <span class="co"># offset text to be slightly to the right of bar</span></span>
<span id="cb252-10"><a href="#cb252-10" tabindex="-1"></a>                <span class="at">group=</span>species, <span class="co"># need species group to separate text</span></span>
<span id="cb252-11"><a href="#cb252-11" tabindex="-1"></a>                <span class="at">label=</span>scales<span class="sc">::</span><span class="fu">percent</span>(freq) <span class="co"># automatically add %</span></span>
<span id="cb252-12"><a href="#cb252-12" tabindex="-1"></a>                ),</span>
<span id="cb252-13"><a href="#cb252-13" tabindex="-1"></a>            <span class="at">position=</span><span class="fu">position_dodge2</span>(<span class="at">width=</span><span class="fl">0.8</span>))<span class="sc">+</span> <span class="co"># set width of dodge</span></span>
<span id="cb252-14"><a href="#cb252-14" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;cyan&quot;</span>,</span>
<span id="cb252-15"><a href="#cb252-15" tabindex="-1"></a>                            <span class="st">&quot;darkorange&quot;</span>,</span>
<span id="cb252-16"><a href="#cb252-16" tabindex="-1"></a>                            <span class="st">&quot;purple&quot;</span></span>
<span id="cb252-17"><a href="#cb252-17" tabindex="-1"></a>                            ))<span class="sc">+</span></span>
<span id="cb252-18"><a href="#cb252-18" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb252-19"><a href="#cb252-19" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb252-20"><a href="#cb252-20" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;bottom&quot;</span>) <span class="co"># put legend at the bottom of the graph</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="02c-insights_files/figure-html/unnamed-chunk-44-1.png" alt="A dodged barplot showing the numbers and relative proportions of data observations recorded by penguin species and location" width="100%" />
<p class="caption">
(#fig:unnamed-chunk-44)A dodged barplot showing the numbers and relative proportions of data observations recorded by penguin species and location
</p>
</div>
</div>
<div id="associations-between-categorical-numerical-variables" class="section level2" number="12.3">
<h2><span class="header-section-number">12.3</span> Associations between Categorical-numerical variables</h2>
<p>Associations between categorical and numerical variables can be explored through various statistical methods and data visualization techniques. One common approach is to use summary statistics or box plots to examine how numerical values (e.g., body mass) differ across different categories (e.g., sex or species). This allows us to identify trends or disparities in the data.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb253-2"><a href="#cb253-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>species,</span>
<span id="cb253-3"><a href="#cb253-3" tabindex="-1"></a>             <span class="at">y=</span>body_mass_g))<span class="sc">+</span></span>
<span id="cb253-4"><a href="#cb253-4" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()<span class="sc">+</span></span>
<span id="cb253-5"><a href="#cb253-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y=</span><span class="st">&quot;Body mass (g)&quot;</span>,</span>
<span id="cb253-6"><a href="#cb253-6" tabindex="-1"></a>         <span class="at">x=</span> <span class="st">&quot;Species&quot;</span>)</span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-45-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Histograms can also be used to explore associations between categorical and numerical variables, with overlapping histograms comparing distributions within categories and faceted histograms providing a structured view of how different categories impact numerical data distributions. These visualizations reveal patterns and variations, aiding in data analysis and hypothesis testing.</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb254-2"><a href="#cb254-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>body_mass_g,</span>
<span id="cb254-3"><a href="#cb254-3" tabindex="-1"></a>             <span class="at">fill=</span>species))<span class="sc">+</span></span>
<span id="cb254-4"><a href="#cb254-4" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">alpha=</span><span class="fl">0.6</span>,</span>
<span id="cb254-5"><a href="#cb254-5" tabindex="-1"></a>         <span class="at">bins=</span><span class="dv">30</span>,</span>
<span id="cb254-6"><a href="#cb254-6" tabindex="-1"></a>         <span class="at">position=</span><span class="st">&quot;identity&quot;</span>)<span class="sc">+</span></span>
<span id="cb254-7"><a href="#cb254-7" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>species,</span>
<span id="cb254-8"><a href="#cb254-8" tabindex="-1"></a>             <span class="at">ncol=</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-46-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="activity-2" class="section level2" number="12.4">
<h2><span class="header-section-number">12.4</span> Activity</h2>
<p>Start thinking about more complex interactions. We wish to investigate the relationship between body mass and beak length. What other variables should we consider?</p>
<div class='webex-solution'>
<button>
Confounding variables
</button>
<p><img src="images/complexity.png" alt="Variables such as species or sex may directly or indirectly affect the relationship between body mass and beak length" width="80%" style="display: block; margin: auto;" /></p>
<p>It is reasonable to think that perhaps either species or sex might affect the morphology of beaks directly - or that these might affect body mass (so that if there is a direct relationship between mass and beak length, there will also be an indirect relationship with sex or species).</p>
<p>Failure to account for complex interactions can lead to misleading insights about your data.</p>
<p><code>r unhide()</code></p>
<p>Once you have some parameters for investigation - investigate them visually and then check against some worked answers below:</p>
<div class="webex-solution">
<button>
Solution
</button>
<p>Remember when we first correlated bill length and bill depth against each other we found an overall negative correlation of -0.22. However, this is because of a confounding variable we had not accounted for - species.</p>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-48-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>What we have demonstrated is an example of <a href="https://en.wikipedia.org/wiki/Simpson%27s_paradox"><strong>Simpson's Paradox</strong></a>. This is another example of why carefully studying your data - and carefully considering those variables which are likely to affect each other are studied or controlled for. It is an entirely reasonable hypothesis that different penguin species might have different bill shapes that might make an overall trend misleading. We can easily check the effect of a categoricial variable on our two numeric variables by assigning the aesthetic colour.</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="#cb255-1" tabindex="-1"></a>colours <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;cyan&quot;</span>,</span>
<span id="cb255-2"><a href="#cb255-2" tabindex="-1"></a>             <span class="st">&quot;darkorange&quot;</span>,</span>
<span id="cb255-3"><a href="#cb255-3" tabindex="-1"></a>             <span class="st">&quot;purple&quot;</span>)</span>
<span id="cb255-4"><a href="#cb255-4" tabindex="-1"></a></span>
<span id="cb255-5"><a href="#cb255-5" tabindex="-1"></a>length_depth_scatterplot_2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x=</span> culmen_length_mm, </span>
<span id="cb255-6"><a href="#cb255-6" tabindex="-1"></a>                     <span class="at">y=</span> culmen_depth_mm,</span>
<span id="cb255-7"><a href="#cb255-7" tabindex="-1"></a>                     <span class="at">colour=</span>species)) <span class="sc">+</span></span>
<span id="cb255-8"><a href="#cb255-8" tabindex="-1"></a>    <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb255-9"><a href="#cb255-9" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>,</span>
<span id="cb255-10"><a href="#cb255-10" tabindex="-1"></a>              <span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb255-11"><a href="#cb255-11" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values=</span>colours)<span class="sc">+</span></span>
<span id="cb255-12"><a href="#cb255-12" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb255-13"><a href="#cb255-13" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)<span class="sc">+</span></span>
<span id="cb255-14"><a href="#cb255-14" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Bill length (mm)&quot;</span>,</span>
<span id="cb255-15"><a href="#cb255-15" tabindex="-1"></a>         <span class="at">y=</span><span class="st">&quot;Bill depth (mm)&quot;</span>)</span>
<span id="cb255-16"><a href="#cb255-16" tabindex="-1"></a></span>
<span id="cb255-17"><a href="#cb255-17" tabindex="-1"></a>length_depth_scatterplot</span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-49-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1" tabindex="-1"></a>bill_depth_marginal_2 <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb256-2"><a href="#cb256-2" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb256-3"><a href="#cb256-3" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x=</span>culmen_depth_mm,</span>
<span id="cb256-4"><a href="#cb256-4" tabindex="-1"></a>                   <span class="at">fill=</span>species),</span>
<span id="cb256-5"><a href="#cb256-5" tabindex="-1"></a>               <span class="at">alpha=</span><span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb256-6"><a href="#cb256-6" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span>colours)<span class="sc">+</span></span>
<span id="cb256-7"><a href="#cb256-7" tabindex="-1"></a>  <span class="fu">theme_void</span>()<span class="sc">+</span></span>
<span id="cb256-8"><a href="#cb256-8" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="co"># this graph needs to be rotated</span></span>
<span id="cb256-9"><a href="#cb256-9" tabindex="-1"></a></span>
<span id="cb256-10"><a href="#cb256-10" tabindex="-1"></a>bill_length_marginal_2 <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb256-11"><a href="#cb256-11" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb256-12"><a href="#cb256-12" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x=</span>culmen_length_mm,</span>
<span id="cb256-13"><a href="#cb256-13" tabindex="-1"></a>                   <span class="at">fill=</span>species),</span>
<span id="cb256-14"><a href="#cb256-14" tabindex="-1"></a>               <span class="at">alpha=</span><span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb256-15"><a href="#cb256-15" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span>colours)<span class="sc">+</span></span>
<span id="cb256-16"><a href="#cb256-16" tabindex="-1"></a>  <span class="fu">theme_void</span>()<span class="sc">+</span></span>
<span id="cb256-17"><a href="#cb256-17" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span>
<span id="cb256-18"><a href="#cb256-18" tabindex="-1"></a></span>
<span id="cb256-19"><a href="#cb256-19" tabindex="-1"></a>layout2 <span class="ot">&lt;-</span> <span class="st">&quot;</span></span>
<span id="cb256-20"><a href="#cb256-20" tabindex="-1"></a><span class="st">AAA#</span></span>
<span id="cb256-21"><a href="#cb256-21" tabindex="-1"></a><span class="st">BBBC</span></span>
<span id="cb256-22"><a href="#cb256-22" tabindex="-1"></a><span class="st">BBBC</span></span>
<span id="cb256-23"><a href="#cb256-23" tabindex="-1"></a><span class="st">BBBC&quot;</span></span>
<span id="cb256-24"><a href="#cb256-24" tabindex="-1"></a></span>
<span id="cb256-25"><a href="#cb256-25" tabindex="-1"></a>bill_length_marginal_2<span class="sc">+</span>length_depth_scatterplot_2<span class="sc">+</span>bill_depth_marginal_2<span class="sc">+</span> <span class="co"># order of plots is important</span></span>
<span id="cb256-26"><a href="#cb256-26" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">design=</span>layout2) <span class="co"># uses the layout argument defined above to arrange the size and position of plots</span></span></code></pre></div>
<p><img src="02c-insights_files/figure-html/unnamed-chunk-49-2.png" width="100%" style="display: block; margin: auto;" /></p>
<p>We now clearly see a striking reversal of our previous trend, that in fact <em>within</em> each species of penguin there is an overall positive association between bill length and depth.</p>
<p>This should prompt us to re-evaluate our correlation metrics:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="#cb257-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb257-2"><a href="#cb257-2" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb257-3"><a href="#cb257-3" tabindex="-1"></a>  <span class="fu">cor_test</span>(culmen_length_mm, culmen_depth_mm)</span></code></pre></div>
<div class="kable-table">
<table>
<colgroup>
<col width="10%" />
<col width="18%" />
<col width="17%" />
<col width="5%" />
<col width="10%" />
<col width="6%" />
<col width="10%" />
<col width="10%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">species</th>
<th align="left">var1</th>
<th align="left">var2</th>
<th align="right">cor</th>
<th align="right">statistic</th>
<th align="right">p</th>
<th align="right">conf.low</th>
<th align="right">conf.high</th>
<th align="left">method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Adelie</td>
<td align="left">culmen_length_mm</td>
<td align="left">culmen_depth_mm</td>
<td align="right">0.39</td>
<td align="right">5.193285</td>
<td align="right">7e-07</td>
<td align="right">0.2472226</td>
<td align="right">0.5187796</td>
<td align="left">Pearson</td>
</tr>
<tr class="even">
<td align="left">Chinstrap</td>
<td align="left">culmen_length_mm</td>
<td align="left">culmen_depth_mm</td>
<td align="right">0.65</td>
<td align="right">7.014647</td>
<td align="right">0e+00</td>
<td align="right">0.4917326</td>
<td align="right">0.7717134</td>
<td align="left">Pearson</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="left">culmen_length_mm</td>
<td align="left">culmen_depth_mm</td>
<td align="right">0.64</td>
<td align="right">9.244703</td>
<td align="right">0e+00</td>
<td align="right">0.5262952</td>
<td align="right">0.7365271</td>
<td align="left">Pearson</td>
</tr>
</tbody>
</table>
</div>
<p>We now see that the correlation values for all three species is &gt;0.22 - indicating these associations are much closer than previously estimated.</p>
</div>
</div>
<div id="summing-up" class="section level2" number="12.5">
<h2><span class="header-section-number">12.5</span> Summing up</h2>
<p>This is our last data handling workshop. We have built up towards being able to discover and examine relationships and differences among variables in our data. You now have the skills to handle many different types of data, tidy it, and produce visuals to generate insight and communicate this to others.</p>
<p>A note of caution is required - it is very easy to spot and identify patterns.</p>
<p>When you do spot a trend, difference or relationship, it is important to recognise that you may not have enough evidence to assign a reason behind this observation. As scientists it is important to develope hypotheses based on knowledge and understanding, this can help (sometimes) with avoiding spurious associations.</p>
<p>Sometimes we may see a pattern in our data, but it has likely occurred due to random chance, rather than as a result of an underlying process. This is where formal statistical analysis, to quantitatively assess the evidence, assess probability and study effect sizes can be incredibly powerful. We will delve into these exciting topics next term.</p>
<p>That's it! Thank you for taking the time to get this far. Be kind to yourself if you found it difficult. You have done incredibly well.</p>
<!--chapter:end:02c-insights.Rmd-->
</div>
</div>
<div id="part-functional-programming" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) Functional Programming</h1>
</div>
<div id="writing-functions" class="section level1" number="13">
<h1><span class="header-section-number">13</span> Writing Functions</h1>
<div id="structuring-a-function" class="section level2" number="13.1">
<h2><span class="header-section-number">13.1</span> Structuring a function</h2>
<p>R makes it easy to create user defined functions by using <code>function()</code>. Here is how it works:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1" tabindex="-1"></a><span class="co"># this is an example function</span></span>
<span id="cb258-2"><a href="#cb258-2" tabindex="-1"></a>my_function_name <span class="ot">&lt;-</span> <span class="cf">function</span>(my_args) {</span>
<span id="cb258-3"><a href="#cb258-3" tabindex="-1"></a>  <span class="co"># document your function here</span></span>
<span id="cb258-4"><a href="#cb258-4" tabindex="-1"></a>  <span class="co"># what the function does</span></span>
<span id="cb258-5"><a href="#cb258-5" tabindex="-1"></a>  <span class="co"># function inputs and outputs</span></span>
<span id="cb258-6"><a href="#cb258-6" tabindex="-1"></a>  some_calculated_output <span class="ot">&lt;-</span> (argument1 <span class="sc">+</span> argument2 )</span>
<span id="cb258-7"><a href="#cb258-7" tabindex="-1"></a>  </span>
<span id="cb258-8"><a href="#cb258-8" tabindex="-1"></a>  <span class="fu">return</span>(some_calculated_output)</span>
<span id="cb258-9"><a href="#cb258-9" tabindex="-1"></a>}</span></code></pre></div>
<ul>
<li><p>Give your function an object name and assign the function to it, e.g. <code>my_function_name &lt;- function()</code>.</p></li>
<li><p>Within the parentheses you specify inputs and arguments just like how pre-written functions work, e.g. <code>function(my_args)</code>.</p></li>
<li><p>Next, put all the code you want your function to execute inside curly brackets like this: <code>function(my_args) {code to run}</code></p></li>
<li><p>Use <code>return()</code> to specify what you want to your function to output once it is done running the code.</p></li>
</ul>
<div id="activity-understand-the-function" class="section level3" number="13.1.1">
<h3><span class="header-section-number">13.1.1</span> Activity: Understand the function</h3>
<p>Here is a very simple function. Can you guess what it does?</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1" tabindex="-1"></a>add_one <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb259-2"><a href="#cb259-2" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb259-3"><a href="#cb259-3" tabindex="-1"></a>}</span></code></pre></div>
<div class="info">
<p>
There is now a shortcut to writing functions in R <code>(x)</code>
that removes the need to call <code>function()</code> or use curly
braces<code>{}</code>.
</p>
<p>
In this tutorial I will use the older method for now, but briefly
demonstrate the simpler syntax
</p>
</div>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="#cb260-1" tabindex="-1"></a>add_one <span class="ot">&lt;-</span> \(x) x <span class="sc">+</span> <span class="dv">1</span></span></code></pre></div>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1" tabindex="-1"></a><span class="fu">add_one</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 11</code></pre>
<p>What value did you get when running the function above? <input class='webex-solveme nospaces' size='2' data-answer='["11"]'/></p>
<p>Now try applying your function to this vector:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1" tabindex="-1"></a>number_series <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>)</span></code></pre></div>
<p>You should see it worked on <em>each element</em> inside the vector. This emphasises that R is a vector based language (it will by default apply functions on all elements in an object).</p>
</div>
</div>
<div id="function-environments" class="section level2" number="13.2">
<h2><span class="header-section-number">13.2</span> Function environments</h2>
<p>When a function is evaluated, it creates it's own environment. All of the arguments that are passed to the function,
along with any variables created in the function are stored in this new environment.</p>
<p>The function's environment's parent will be the global environment, so we can see all of the variables created in the
global environment. Variables that are created in the function's environment aren't visible from the global environment
though.</p>
<p>If we reassign a variable in a function it will take a copy of that variable rather than mutating the value in the global environment. If we want to update <code>x</code> in the global environment we need to use the <code>&lt;&lt;-</code> operator.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="#cb264-1" tabindex="-1"></a><span class="co"># x has a value of 1 in the global environment</span></span>
<span id="cb264-2"><a href="#cb264-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span> </span>
<span id="cb264-3"><a href="#cb264-3" tabindex="-1"></a></span>
<span id="cb264-4"><a href="#cb264-4" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="cf">function</span>(y) {</span>
<span id="cb264-5"><a href="#cb264-5" tabindex="-1"></a> <span class="co"># the value of x is copied from the global environment</span></span>
<span id="cb264-6"><a href="#cb264-6" tabindex="-1"></a> <span class="co"># but any changes remain only within the function environment</span></span>
<span id="cb264-7"><a href="#cb264-7" tabindex="-1"></a>  x <span class="ot">&lt;-</span> x <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb264-8"><a href="#cb264-8" tabindex="-1"></a>  z <span class="ot">&lt;-</span> x <span class="sc">+</span> y</span>
<span id="cb264-9"><a href="#cb264-9" tabindex="-1"></a>  <span class="fu">return</span>(z)</span>
<span id="cb264-10"><a href="#cb264-10" tabindex="-1"></a>}</span>
<span id="cb264-11"><a href="#cb264-11" tabindex="-1"></a></span>
<span id="cb264-12"><a href="#cb264-12" tabindex="-1"></a><span class="fu">fn</span>(<span class="dv">2</span>)</span>
<span id="cb264-13"><a href="#cb264-13" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 4
## [1] 1</code></pre>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
<p>create a function called <code>fahr_to_kelvin</code> that converts temperature values from degrees Fahrenheit to Kelvin.</p>
The conversion is <code>temp_in_kelvin &lt;- (temp_fahr - 32) * (5 / 9)) + 273.15</code>
</div>
</div>
<button id="displayTextunnamed-chunk-11" onclick="javascript:toggle(&#39;unnamed-chunk-11&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-11" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1" tabindex="-1"></a>fahr_to_kelvin <span class="ot">&lt;-</span> <span class="cf">function</span>(fahr) {</span>
<span id="cb266-2"><a href="#cb266-2" tabindex="-1"></a></span>
<span id="cb266-3"><a href="#cb266-3" tabindex="-1"></a>  kelvin <span class="ot">&lt;-</span> ((fahr <span class="sc">-</span> <span class="dv">32</span>) <span class="sc">*</span> (<span class="dv">5</span> <span class="sc">/</span> <span class="dv">9</span>)) <span class="sc">+</span> <span class="fl">273.15</span></span>
<span id="cb266-4"><a href="#cb266-4" tabindex="-1"></a>  <span class="fu">return</span>(kelvin)</span>
<span id="cb266-5"><a href="#cb266-5" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
</div>
<p>The <code>return()</code> function can return only a single object. If we want to return multiple values in R, we can use a <code>list</code> (or other objects) and return it.</p>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
To convert temperature to Celsius from kelvin, you subtract 273.15 from the temperature value in kelvin.
Write a function that performs this conversion and returns "both" kelvin and celsius.
</div>
</div>
<button id="displayTextunnamed-chunk-13" onclick="javascript:toggle(&#39;unnamed-chunk-13&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-13" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="#cb267-1" tabindex="-1"></a>fahr_to_kelvin_celsius <span class="ot">&lt;-</span> <span class="cf">function</span>(fahr) {</span>
<span id="cb267-2"><a href="#cb267-2" tabindex="-1"></a></span>
<span id="cb267-3"><a href="#cb267-3" tabindex="-1"></a>  celsius <span class="ot">&lt;-</span> ((fahr <span class="sc">-</span> <span class="dv">32</span>) <span class="sc">*</span> (<span class="dv">5</span> <span class="sc">/</span> <span class="dv">9</span>))</span>
<span id="cb267-4"><a href="#cb267-4" tabindex="-1"></a>  kelvin <span class="ot">&lt;-</span> celsius <span class="sc">+</span>  <span class="sc">+</span> <span class="fl">273.15</span></span>
<span id="cb267-5"><a href="#cb267-5" tabindex="-1"></a>  </span>
<span id="cb267-6"><a href="#cb267-6" tabindex="-1"></a>  temps <span class="ot">&lt;-</span> <span class="fu">list</span>(celsius, kelvin)</span>
<span id="cb267-7"><a href="#cb267-7" tabindex="-1"></a>  <span class="fu">names</span>(temps) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;celsius&quot;</span>, <span class="st">&quot;kelvin&quot;</span>)</span>
<span id="cb267-8"><a href="#cb267-8" tabindex="-1"></a>  </span>
<span id="cb267-9"><a href="#cb267-9" tabindex="-1"></a>  <span class="fu">return</span>(temps)</span>
<span id="cb267-10"><a href="#cb267-10" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
</div>
<div class="info">
<p>
A general rule of thumb. If you end up repeating a line of code more
than three times in a script - you should write a function to do the
work instead. And write clear comments on its use!
</p>
<p>
Why?
</p>
<p>
It reduces the numbers of lines of code in your script, it reduces
the amount of repetition in the code, if you need to make changes you
can change the function without having to hunt through all of your
code.
</p>
<p>
A really good way to organise your functions is to organise them into
a separate script to the rest of your analysis. Write functions in a
separate script and use source(“scripts/functions.R”)
</p>
</div>
<div id="argument-defaults" class="section level3" number="13.2.1">
<h3><span class="header-section-number">13.2.1</span> Argument defaults</h3>
<p>This is an example of a very simple function that just prints the string "Hello World" whenever you type the function <code>say_hello()</code></p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="#cb268-1" tabindex="-1"></a>say_hello <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb268-2"><a href="#cb268-2" tabindex="-1"></a>  <span class="fu">paste</span>(<span class="st">&quot;Hello World&quot;</span>) </span>
<span id="cb268-3"><a href="#cb268-3" tabindex="-1"></a>}</span>
<span id="cb268-4"><a href="#cb268-4" tabindex="-1"></a></span>
<span id="cb268-5"><a href="#cb268-5" tabindex="-1"></a><span class="fu">say_hello</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Hello World&quot;</code></pre>
</div>
<div id="activity-understanding-arguments" class="section level3" number="13.2.2">
<h3><span class="header-section-number">13.2.2</span> Activity: Understanding arguments</h3>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
<p>What happens when you try to put something in the brackets when <strong>using</strong> this function?</p>
e.g. say_hello("Phil")
</div>
</div>
<button id="displayTextunnamed-chunk-17" onclick="javascript:toggle(&#39;unnamed-chunk-17&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-17" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
Error in say_hello( or something similar, this function has not been set with any arguments, therefore it doesn't know what to do with any values provided to it.
</div>
</div>
</div>
<p>Now lets try a similar function, but we include an argument:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="#cb270-1" tabindex="-1"></a>say_morning <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb270-2"><a href="#cb270-2" tabindex="-1"></a>  <span class="fu">paste</span>(<span class="st">&quot;Good morning&quot;</span>, x)</span>
<span id="cb270-3"><a href="#cb270-3" tabindex="-1"></a>}</span>
<span id="cb270-4"><a href="#cb270-4" tabindex="-1"></a></span>
<span id="cb270-5"><a href="#cb270-5" tabindex="-1"></a><span class="co">#  what about this one?</span></span>
<span id="cb270-6"><a href="#cb270-6" tabindex="-1"></a><span class="fu">say_morning</span>(<span class="st">&quot;Phil&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Good morning Phil&quot;</code></pre>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
What happens when you DO NOT put something in the brackets when using this function?
</div>
</div>
<button id="displayTextunnamed-chunk-20" onclick="javascript:toggle(&#39;unnamed-chunk-20&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-20" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="#cb272-1" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">paste</span>(<span class="st">&quot;Good morning&quot;</span>, x) <span class="sc">:</span> </span>
<span id="cb272-2"><a href="#cb272-2" tabindex="-1"></a>  argument <span class="st">&quot;x&quot;</span> is missing, with no default</span></code></pre></div>
</div>
</div>
</div>
<p>So that was an example where we included an argument for our function. But now it requires a value be provided in order to work.</p>
<div id="argument-defaults-1" class="section level4" number="13.2.2.1">
<h4><span class="header-section-number">13.2.2.1</span> Argument defaults</h4>
<p>However, you are probably used to the idea that many functions have "default" values for arguments, and we can easily set these.</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="#cb273-1" tabindex="-1"></a>say_morning_default <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">name =</span> <span class="st">&quot;you&quot;</span>){</span>
<span id="cb273-2"><a href="#cb273-2" tabindex="-1"></a>  <span class="fu">paste</span>(<span class="st">&quot;Good morning&quot;</span>, name)</span>
<span id="cb273-3"><a href="#cb273-3" tabindex="-1"></a>}</span>
<span id="cb273-4"><a href="#cb273-4" tabindex="-1"></a></span>
<span id="cb273-5"><a href="#cb273-5" tabindex="-1"></a><span class="fu">say_morning_default</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Good morning you&quot;</code></pre>
<div class="try">
<p>
There is now a default value supplied to the argument, but this
should still be able to changed when running the function. Try it!
</p>
</div>
</div>
</div>
</div>
<div id="wrapper-functions" class="section level2" number="13.3">
<h2><span class="header-section-number">13.3</span> Wrapper functions</h2>
<p>Wrapper functions in R are a powerful tool for simplifying and customizing the use of existing functions. These functions act as intermediaries between the user and the underlying function, allowing you to add additional functionality, handle errors, or make the function more user-friendly. They are especially useful when you want to streamline repetitive tasks, create more intuitive interfaces, or modify the behavior of built-in functions without altering their source code. In this brief introduction, we'll explore the concept of wrapper functions, their benefits, and how to create and use them effectively in R.</p>
<div id="default-values" class="section level3" number="13.3.1">
<h3><span class="header-section-number">13.3.1</span> Default values</h3>
<p>ou can create a wrapper function that calls an existing function with default argument values to simplify its usage. For instance, if you frequently use the <code>mean</code> function with a specific argument, you can create a wrapper like this:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1" tabindex="-1"></a>my_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb275-2"><a href="#cb275-2" tabindex="-1"></a>  <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb275-3"><a href="#cb275-3" tabindex="-1"></a>}</span></code></pre></div>
<p>Now, you can use <code>my_mean(x)</code> to calculate the mean while always ignoring <code>NA</code> values.</p>
<p>What happens when you try to use your new function <code>my_mean</code> and set na.rm = F?</p>
<button id="displayTextunnamed-chunk-24" onclick="javascript:toggle(&#39;unnamed-chunk-24&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-24" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<pre><code>Error in my_mean(c(5, 6, 7, 8), na.rm = F) : unused argument (na.rm = F)</code></pre>
</div>
</div>
</div>
<p>If we want to be able to allow users to specify their own values for <code>na.rm = T</code> then we need to modify the wrapper function</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1" tabindex="-1"></a>my_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb277-2"><a href="#cb277-2" tabindex="-1"></a>  <span class="fu">mean</span>(x, <span class="at">na.rm =</span> na.rm)</span>
<span id="cb277-3"><a href="#cb277-3" tabindex="-1"></a>}</span></code></pre></div>
<p>With this modification, users can provide their own value for the na.rm argument when calling my_mean. For example:</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="#cb278-1" tabindex="-1"></a><span class="fu">my_mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">4</span>))<span class="co"># By default, NA values are removed</span></span>
<span id="cb278-2"><a href="#cb278-2" tabindex="-1"></a><span class="fu">my_mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">4</span>), <span class="at">na.rm =</span> <span class="cn">FALSE</span>)  <span class="co"># NA values are not removed</span></span></code></pre></div>
<pre><code>## [1] 2.333333
## [1] NA</code></pre>
<p>This modification makes the na.rm argument in the my_mean function flexible and allows users to override the default behavior when needed.</p>
</div>
<div id="using-..." class="section level3" number="13.3.2">
<h3><span class="header-section-number">13.3.2</span> Using "..."</h3>
<p>You can allow the user to access the original arguments of mean() by using the <code>...</code> (ellipsis) argument in your wrapper function.</p>
<p>In R the ellipse, ..., is used by functions for one of two things.</p>
<ul>
<li><p>to capture an unknown number of arguments</p></li>
<li><p>or to pass arguments through to some underlying function, as in ?print().</p></li>
</ul>
<p>The <code>...</code> argument allows you to pass additional arguments directly to the underlying function. Here's how you can modify the <code>my_mean</code> function to maintain the flexibility of the mean() function's arguments:</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="#cb280-1" tabindex="-1"></a>my_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(..., <span class="at">na.rm =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb280-2"><a href="#cb280-2" tabindex="-1"></a>  <span class="fu">mean</span>(..., <span class="at">na.rm =</span> na.rm)</span>
<span id="cb280-3"><a href="#cb280-3" tabindex="-1"></a>}</span></code></pre></div>
<p>Now we can pass arguments directly to mean, and we have a version that by default removes <code>NA</code> from our dataframe (but can be overidden if necessary)</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1" tabindex="-1"></a><span class="fu">my_mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">4</span>))</span></code></pre></div>
<pre><code>## [1] 2.333333</code></pre>
<p>And we can pass any additional arguments found in mean to our new function e.g. trim</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="#cb283-1" tabindex="-1"></a><span class="fu">my_mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">4</span>), <span class="at">trim =</span> <span class="dv">1</span>) </span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="warning">
<p>
Not all functions are designed to accept arbitrary or unspecified
additional arguments via …. In the case of the lm() function for
example, it does not have a formal … argument that allows arbitrary
additional arguments to be passed.
</p>
<p>
If a function doesn’t support …, attempting to pass extra arguments
using … will result in an error, such as the “used in an incorrect
context, no … to look in” error that you encountered.
</p>
</div>
</div>
</div>
<div id="documenting-functions" class="section level2" number="13.4">
<h2><span class="header-section-number">13.4</span> Documenting functions</h2>
<p>It is important to document your functions to:</p>
<ul>
<li><p>Remind your future self what the function does</p></li>
<li><p>Show your future self and your colleagues how to use the function</p></li>
<li><p>Help anyone else looking at your code understand what you think the function does</p></li>
</ul>
<p>A common way to add documentation in software is to add comments to your function that specify</p>
<ul>
<li><p>What does this function do?</p></li>
<li><p>What are the arguments (inputs) to the function, and what are these supposed to be (e.g., what class are they? Character, numeric, logical?)</p></li>
<li><p>What does the function return, and what kind of object is it?</p></li>
</ul>
<p>Like this:</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="#cb285-1" tabindex="-1"></a><span class="co"># Function: fahr_to_kelvin_celsius</span></span>
<span id="cb285-2"><a href="#cb285-2" tabindex="-1"></a><span class="co"># Description: Converts a temperature in degrees Fahrenheit to degrees Celsius and Kelvin.</span></span>
<span id="cb285-3"><a href="#cb285-3" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb285-4"><a href="#cb285-4" tabindex="-1"></a><span class="co"># Input:</span></span>
<span id="cb285-5"><a href="#cb285-5" tabindex="-1"></a><span class="co">#   fahr: Numeric value representing temperature in degrees Fahrenheit.</span></span>
<span id="cb285-6"><a href="#cb285-6" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb285-7"><a href="#cb285-7" tabindex="-1"></a><span class="co"># Output:</span></span>
<span id="cb285-8"><a href="#cb285-8" tabindex="-1"></a><span class="co">#   A list containing two elements:</span></span>
<span id="cb285-9"><a href="#cb285-9" tabindex="-1"></a><span class="co">#   - celsius: Numeric value representing temperature in degrees Celsius.</span></span>
<span id="cb285-10"><a href="#cb285-10" tabindex="-1"></a><span class="co">#   - kelvin: Numeric value representing temperature in Kelvin.</span></span>
<span id="cb285-11"><a href="#cb285-11" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb285-12"><a href="#cb285-12" tabindex="-1"></a><span class="co"># Example Output:</span></span>
<span id="cb285-13"><a href="#cb285-13" tabindex="-1"></a><span class="co">#   If you call fahr_to_kelvin_celsius(32), the result would be:</span></span>
<span id="cb285-14"><a href="#cb285-14" tabindex="-1"></a><span class="co">#   celsius: 0</span></span>
<span id="cb285-15"><a href="#cb285-15" tabindex="-1"></a><span class="co">#   kelvin: 273.15</span></span>
<span id="cb285-16"><a href="#cb285-16" tabindex="-1"></a>  </span>
<span id="cb285-17"><a href="#cb285-17" tabindex="-1"></a></span>
<span id="cb285-18"><a href="#cb285-18" tabindex="-1"></a>fahr_to_kelvin_celsius <span class="ot">&lt;-</span> <span class="cf">function</span>(fahr) {</span>
<span id="cb285-19"><a href="#cb285-19" tabindex="-1"></a></span>
<span id="cb285-20"><a href="#cb285-20" tabindex="-1"></a> <span class="co"># Calculate the temperature in degrees Celsius  </span></span>
<span id="cb285-21"><a href="#cb285-21" tabindex="-1"></a>  celsius <span class="ot">&lt;-</span> ((fahr <span class="sc">-</span> <span class="dv">32</span>) <span class="sc">*</span> (<span class="dv">5</span> <span class="sc">/</span> <span class="dv">9</span>))</span>
<span id="cb285-22"><a href="#cb285-22" tabindex="-1"></a>  </span>
<span id="cb285-23"><a href="#cb285-23" tabindex="-1"></a>  <span class="co"># Calculate the temperature in Kelvin</span></span>
<span id="cb285-24"><a href="#cb285-24" tabindex="-1"></a>  kelvin <span class="ot">&lt;-</span> celsius <span class="sc">+</span>  <span class="sc">+</span> <span class="fl">273.15</span></span>
<span id="cb285-25"><a href="#cb285-25" tabindex="-1"></a>  </span>
<span id="cb285-26"><a href="#cb285-26" tabindex="-1"></a>  <span class="co"># Create a list to store the results </span></span>
<span id="cb285-27"><a href="#cb285-27" tabindex="-1"></a>  temps <span class="ot">&lt;-</span> <span class="fu">list</span>(celsius, kelvin)</span>
<span id="cb285-28"><a href="#cb285-28" tabindex="-1"></a>  <span class="fu">names</span>(temps) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;celsius&quot;</span>, <span class="st">&quot;kelvin&quot;</span>)</span>
<span id="cb285-29"><a href="#cb285-29" tabindex="-1"></a> </span>
<span id="cb285-30"><a href="#cb285-30" tabindex="-1"></a>  <span class="co"># Return the list of temperatures </span></span>
<span id="cb285-31"><a href="#cb285-31" tabindex="-1"></a>  <span class="fu">return</span>(temps)</span>
<span id="cb285-32"><a href="#cb285-32" tabindex="-1"></a>}</span></code></pre></div>
<div class="info">
<p>
Formal documentation for R functions that you see when you access the
help in R is written in separate .Rd using a markup language similar to
LaTeX. You see the result of this documentation when you look at the
help file for a given function, e.g. ?read.csv. The
<code>roxygen2</code> package allows R coders to write documentation
alongside the function code and then process it into the appropriate .Rd
files. You should consider switching this more formal method of writing
documentation when you start working on more complicated R projects. Or
if you aspire to write packages in R! <a href="https://r-pkgs.org/">R
packages 2nd Edition</a>
</p>
</div>
<div id="exercise" class="section level3" number="13.4.1">
<h3><span class="header-section-number">13.4.1</span> Exercise</h3>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Here is a custom script to print model diagnostics when running a linear model. Can you comment out this code to document it properly?
</div>
</div>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="#cb286-1" tabindex="-1"></a>my_lm <span class="ot">&lt;-</span> <span class="cf">function</span>(formula, data) {</span>
<span id="cb286-2"><a href="#cb286-2" tabindex="-1"></a> </span>
<span id="cb286-3"><a href="#cb286-3" tabindex="-1"></a>  model <span class="ot">&lt;-</span> <span class="fu">lm</span>(formula, <span class="at">data =</span> data)</span>
<span id="cb286-4"><a href="#cb286-4" tabindex="-1"></a>  </span>
<span id="cb286-5"><a href="#cb286-5" tabindex="-1"></a></span>
<span id="cb286-6"><a href="#cb286-6" tabindex="-1"></a>  summary_model <span class="ot">&lt;-</span> <span class="fu">summary</span>(model)</span>
<span id="cb286-7"><a href="#cb286-7" tabindex="-1"></a>  </span>
<span id="cb286-8"><a href="#cb286-8" tabindex="-1"></a>  </span>
<span id="cb286-9"><a href="#cb286-9" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Coefficients:</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb286-10"><a href="#cb286-10" tabindex="-1"></a>  <span class="fu">print</span>(summary_model<span class="sc">$</span>coefficients)</span>
<span id="cb286-11"><a href="#cb286-11" tabindex="-1"></a>  </span>
<span id="cb286-12"><a href="#cb286-12" tabindex="-1"></a>  </span>
<span id="cb286-13"><a href="#cb286-13" tabindex="-1"></a>  <span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))  <span class="co"># Arrange plots in a 2x2 grid</span></span>
<span id="cb286-14"><a href="#cb286-14" tabindex="-1"></a>  <span class="fu">plot</span>(model, <span class="at">which =</span> <span class="dv">1</span>)  <span class="co"># Residuals vs. Fitted</span></span>
<span id="cb286-15"><a href="#cb286-15" tabindex="-1"></a>  <span class="fu">plot</span>(model, <span class="at">which =</span> <span class="dv">2</span>)  <span class="co"># Normal Q-Q plot</span></span>
<span id="cb286-16"><a href="#cb286-16" tabindex="-1"></a>  <span class="fu">plot</span>(model, <span class="at">which =</span> <span class="dv">3</span>)  <span class="co"># Scale-Location plot</span></span>
<span id="cb286-17"><a href="#cb286-17" tabindex="-1"></a>  <span class="fu">plot</span>(model, <span class="at">which =</span> <span class="dv">4</span>)  <span class="co"># Residuals vs. Leverage</span></span>
<span id="cb286-18"><a href="#cb286-18" tabindex="-1"></a>  </span>
<span id="cb286-19"><a href="#cb286-19" tabindex="-1"></a>  <span class="co"># Return the fitted model</span></span>
<span id="cb286-20"><a href="#cb286-20" tabindex="-1"></a>  <span class="fu">return</span>(model)</span>
<span id="cb286-21"><a href="#cb286-21" tabindex="-1"></a>}</span></code></pre></div>
<button id="displayTextunnamed-chunk-35" onclick="javascript:toggle(&#39;unnamed-chunk-35&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-35" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="#cb287-1" tabindex="-1"></a><span class="co"># Function: my_lm</span></span>
<span id="cb287-2"><a href="#cb287-2" tabindex="-1"></a><span class="co"># Description: Fit a linear regression model and provide summary statistics and diagnostic plots.</span></span>
<span id="cb287-3"><a href="#cb287-3" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb287-4"><a href="#cb287-4" tabindex="-1"></a><span class="co"># Input:</span></span>
<span id="cb287-5"><a href="#cb287-5" tabindex="-1"></a><span class="co">#   formula: A formula specifying the regression model.</span></span>
<span id="cb287-6"><a href="#cb287-6" tabindex="-1"></a><span class="co">#   data: The data frame containing the variables used in the model.</span></span>
<span id="cb287-7"><a href="#cb287-7" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb287-8"><a href="#cb287-8" tabindex="-1"></a><span class="co"># Output:</span></span>
<span id="cb287-9"><a href="#cb287-9" tabindex="-1"></a><span class="co">#   A linear regression model object fitted to the data.</span></span>
<span id="cb287-10"><a href="#cb287-10" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb287-11"><a href="#cb287-11" tabindex="-1"></a><span class="co"># Example Usage:</span></span>
<span id="cb287-12"><a href="#cb287-12" tabindex="-1"></a><span class="co">#   To fit a linear regression model to the &#39;body_mass_g&#39; variable as a function of &#39;flipper_length_mm in the &#39;penguins&#39; dataset,</span></span>
<span id="cb287-13"><a href="#cb287-13" tabindex="-1"></a><span class="co">#   you can call:</span></span>
<span id="cb287-14"><a href="#cb287-14" tabindex="-1"></a><span class="co">#   my_lm(body_mass_g ~ flipper_length_mm, data = penguins_raw)</span></span>
<span id="cb287-15"><a href="#cb287-15" tabindex="-1"></a></span>
<span id="cb287-16"><a href="#cb287-16" tabindex="-1"></a>my_lm <span class="ot">&lt;-</span> <span class="cf">function</span>(formula, data) {</span>
<span id="cb287-17"><a href="#cb287-17" tabindex="-1"></a>  <span class="co"># Fit a linear regression model</span></span>
<span id="cb287-18"><a href="#cb287-18" tabindex="-1"></a>  model <span class="ot">&lt;-</span> <span class="fu">lm</span>(formula, <span class="at">data =</span> data)</span>
<span id="cb287-19"><a href="#cb287-19" tabindex="-1"></a></span>
<span id="cb287-20"><a href="#cb287-20" tabindex="-1"></a>  <span class="co"># Get summary statistics of the model</span></span>
<span id="cb287-21"><a href="#cb287-21" tabindex="-1"></a>  summary_model <span class="ot">&lt;-</span> <span class="fu">summary</span>(model)</span>
<span id="cb287-22"><a href="#cb287-22" tabindex="-1"></a></span>
<span id="cb287-23"><a href="#cb287-23" tabindex="-1"></a>  <span class="co"># Print model coefficients</span></span>
<span id="cb287-24"><a href="#cb287-24" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Coefficients:</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb287-25"><a href="#cb287-25" tabindex="-1"></a>  <span class="fu">print</span>(summary_model<span class="sc">$</span>coefficients)</span>
<span id="cb287-26"><a href="#cb287-26" tabindex="-1"></a></span>
<span id="cb287-27"><a href="#cb287-27" tabindex="-1"></a>  <span class="co"># Arrange plots in a 2x2 grid</span></span>
<span id="cb287-28"><a href="#cb287-28" tabindex="-1"></a>  <span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb287-29"><a href="#cb287-29" tabindex="-1"></a></span>
<span id="cb287-30"><a href="#cb287-30" tabindex="-1"></a>  <span class="co"># Plot diagnostics:</span></span>
<span id="cb287-31"><a href="#cb287-31" tabindex="-1"></a>  <span class="co"># 1. Residuals vs. Fitted</span></span>
<span id="cb287-32"><a href="#cb287-32" tabindex="-1"></a>  <span class="fu">plot</span>(model, <span class="at">which =</span> <span class="dv">1</span>)</span>
<span id="cb287-33"><a href="#cb287-33" tabindex="-1"></a></span>
<span id="cb287-34"><a href="#cb287-34" tabindex="-1"></a>  <span class="co"># 2. Normal Q-Q plot</span></span>
<span id="cb287-35"><a href="#cb287-35" tabindex="-1"></a>  <span class="fu">plot</span>(model, <span class="at">which =</span> <span class="dv">2</span>)</span>
<span id="cb287-36"><a href="#cb287-36" tabindex="-1"></a></span>
<span id="cb287-37"><a href="#cb287-37" tabindex="-1"></a>  <span class="co"># 3. Scale-Location plot</span></span>
<span id="cb287-38"><a href="#cb287-38" tabindex="-1"></a>  <span class="fu">plot</span>(model, <span class="at">which =</span> <span class="dv">3</span>)</span>
<span id="cb287-39"><a href="#cb287-39" tabindex="-1"></a></span>
<span id="cb287-40"><a href="#cb287-40" tabindex="-1"></a>  <span class="co"># 4. Residuals vs. Leverage</span></span>
<span id="cb287-41"><a href="#cb287-41" tabindex="-1"></a>  <span class="fu">plot</span>(model, <span class="at">which =</span> <span class="dv">4</span>)</span>
<span id="cb287-42"><a href="#cb287-42" tabindex="-1"></a></span>
<span id="cb287-43"><a href="#cb287-43" tabindex="-1"></a>  <span class="co"># Return the fitted model</span></span>
<span id="cb287-44"><a href="#cb287-44" tabindex="-1"></a>  <span class="fu">return</span>(model)</span>
<span id="cb287-45"><a href="#cb287-45" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
<div id="checking-functions" class="section level2" number="13.5">
<h2><span class="header-section-number">13.5</span> Checking functions</h2>
<div id="print" class="section level3" number="13.5.1">
<h3><span class="header-section-number">13.5.1</span> print</h3>
<p>One simple and easy way to keep on top of your functions, and understand what they are doing is to use lots of print statements.</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="#cb288-1" tabindex="-1"></a><span class="co"># This edited function will now remind the user what the input value was</span></span>
<span id="cb288-2"><a href="#cb288-2" tabindex="-1"></a></span>
<span id="cb288-3"><a href="#cb288-3" tabindex="-1"></a>fahr_to_kelvin_celsius <span class="ot">&lt;-</span> <span class="cf">function</span>(fahr) {</span>
<span id="cb288-4"><a href="#cb288-4" tabindex="-1"></a>    <span class="co"># Calculate the temperature in degrees Celsius</span></span>
<span id="cb288-5"><a href="#cb288-5" tabindex="-1"></a>    celsius <span class="ot">&lt;-</span> (fahr <span class="sc">-</span> <span class="dv">32</span>) <span class="sc">*</span> (<span class="dv">5</span> <span class="sc">/</span> <span class="dv">9</span>)</span>
<span id="cb288-6"><a href="#cb288-6" tabindex="-1"></a>    </span>
<span id="cb288-7"><a href="#cb288-7" tabindex="-1"></a>    <span class="co"># Calculate the temperature in Kelvin</span></span>
<span id="cb288-8"><a href="#cb288-8" tabindex="-1"></a>    kelvin <span class="ot">&lt;-</span> celsius <span class="sc">+</span> <span class="fl">273.15</span></span>
<span id="cb288-9"><a href="#cb288-9" tabindex="-1"></a>    </span>
<span id="cb288-10"><a href="#cb288-10" tabindex="-1"></a>    <span class="co"># Create a list to store the results</span></span>
<span id="cb288-11"><a href="#cb288-11" tabindex="-1"></a>    temps <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">celsius =</span> celsius, <span class="at">kelvin =</span> kelvin)</span>
<span id="cb288-12"><a href="#cb288-12" tabindex="-1"></a>    </span>
<span id="cb288-13"><a href="#cb288-13" tabindex="-1"></a>    <span class="co"># Return the list of temperatures along with a message</span></span>
<span id="cb288-14"><a href="#cb288-14" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;The temperature in Fahrenheit was&quot;</span>, fahr))</span>
<span id="cb288-15"><a href="#cb288-15" tabindex="-1"></a>    <span class="fu">return</span>(temps)</span>
<span id="cb288-16"><a href="#cb288-16" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="testthat" class="section level3" number="13.5.2">
<h3><span class="header-section-number">13.5.2</span> testthat</h3>
<p>Pure Functions:
A pure function is a concept in programming that describes a function with the following characteristics:</p>
<p>It always produces the same output for the same input.
It has no side effects, meaning it doesn't modify external state or variables.
It relies only on its input parameters to generate output.
In R, pure functions are essential for creating clean and predictable code. They are often used in functional programming to perform operations on data without causing unexpected side effects.</p>
<p>When our function is pure, we can run expectation tests using the <code>testthat</code> package:</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="#cb289-1" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;it works as expected&quot;</span>, {</span>
<span id="cb289-2"><a href="#cb289-2" tabindex="-1"></a>    <span class="fu">expect_equal</span>(<span class="fu">fahr_to_kelvin</span>(<span class="dv">92</span>), <span class="fl">306.483</span>, <span class="at">tolerance=</span><span class="fl">1e-2</span>)  </span>
<span id="cb289-3"><a href="#cb289-3" tabindex="-1"></a>   </span>
<span id="cb289-4"><a href="#cb289-4" tabindex="-1"></a>})</span></code></pre></div>
</div>
<div id="debugging" class="section level3" number="13.5.3">
<h3><span class="header-section-number">13.5.3</span> debugging</h3>
<p>For more complex functions, we may need to go digging! Here there are three basic commands:</p>
<ul>
<li><p><code>debug()</code></p></li>
<li><p><code>browser()</code></p></li>
<li><p><code>undebug()</code></p></li>
</ul>
<p>With <code>debug(function_name)</code> the next time you run <code>function_name()</code> an interactive session will open in Rstudio.
While you are in debug mode you can call the individual objects in your function, and run the commands line by line:</p>
<p><img src="images/debug_flow_1_zoom.gif" width="100%" style="display: block; margin: auto;" /></p>
<p>Once we are done with debugging it is important to turn the debug mode off - close the interactive page and run <code>undebug(function_name)</code> so that the debugging panel doesn't reopen the next time you launch your function.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="#cb290-1" tabindex="-1"></a>make_sum <span class="ot">&lt;-</span> <span class="cf">function</span>(a,b){</span>
<span id="cb290-2"><a href="#cb290-2" tabindex="-1"></a>  c <span class="ot">&lt;-</span> a<span class="sc">+</span>b</span>
<span id="cb290-3"><a href="#cb290-3" tabindex="-1"></a>  <span class="fu">return</span>(c)</span>
<span id="cb290-4"><a href="#cb290-4" tabindex="-1"></a>}</span>
<span id="cb290-5"><a href="#cb290-5" tabindex="-1"></a></span>
<span id="cb290-6"><a href="#cb290-6" tabindex="-1"></a><span class="fu">debug</span>(make_sum)</span>
<span id="cb290-7"><a href="#cb290-7" tabindex="-1"></a></span>
<span id="cb290-8"><a href="#cb290-8" tabindex="-1"></a><span class="fu">make_sum</span>(<span class="at">a =</span> <span class="dv">5</span>, <span class="at">b =</span><span class="dv">2</span>)</span>
<span id="cb290-9"><a href="#cb290-9" tabindex="-1"></a></span>
<span id="cb290-10"><a href="#cb290-10" tabindex="-1"></a><span class="fu">undebug</span>(make_sum)</span></code></pre></div>
<p>While in debugging mode, you can use various commands to inspect and control the debugging process. Here are some common debugging commands:</p>
<ul>
<li><p>n or next: Step to the next line of the function.</p></li>
<li><p>c or continue: Continue execution until the function returns.</p></li>
<li><p>Q or quit: Quit debugging and return to the R console.</p></li>
<li><p>where: Show the call stack to see where you are in the function.</p></li>
<li><p>print(var_name): Print the value of a variable.</p></li>
</ul>
<div id="flow" class="section level4" number="13.5.3.1">
<h4><span class="header-section-number">13.5.3.1</span> flow</h4>
<p><code>flow</code> is a great package for helping to understand code structures - it visualizes a chart diagram of the functional architecture.</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="#cb291-1" tabindex="-1"></a><span class="fu">library</span>(flow)</span>
<span id="cb291-2"><a href="#cb291-2" tabindex="-1"></a></span>
<span id="cb291-3"><a href="#cb291-3" tabindex="-1"></a><span class="fu">flow_run</span>(<span class="fu">fahr_to_kelvin_celsius</span>(<span class="dv">92</span>))</span></code></pre></div>
<p><img src="images/flow.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div id="exercises" class="section level2" number="13.6">
<h2><span class="header-section-number">13.6</span> Exercises</h2>
<p>This function is designed to calculate the <a href="https://en.wikipedia.org/wiki/Triangular_number">triangular numbers</a></p>
<p><img src="images/First_six_triangular_numbers.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Let's build it and check that it works:</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="#cb292-1" tabindex="-1"></a><span class="fu">library</span>(testthat)</span>
<span id="cb292-2"><a href="#cb292-2" tabindex="-1"></a></span>
<span id="cb292-3"><a href="#cb292-3" tabindex="-1"></a>triangle_number <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb292-4"><a href="#cb292-4" tabindex="-1"></a>    <span class="fl">0.5</span> <span class="sc">*</span> x <span class="sc">*</span> (x <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb292-5"><a href="#cb292-5" tabindex="-1"></a>}</span></code></pre></div>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Run <code>testthat()</code> to make sure this function works for multiple inputs
</div>
</div>
<button id="displayTextunnamed-chunk-46" onclick="javascript:toggle(&#39;unnamed-chunk-46&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-46" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="#cb293-1" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;it works as expected&quot;</span>, {</span>
<span id="cb293-2"><a href="#cb293-2" tabindex="-1"></a>    <span class="fu">expect_equal</span>(<span class="fu">triangle_number</span>(<span class="dv">1</span>),  <span class="dv">1</span>)  </span>
<span id="cb293-3"><a href="#cb293-3" tabindex="-1"></a>    <span class="fu">expect_equal</span>(<span class="fu">triangle_number</span>(<span class="dv">2</span>),  <span class="dv">3</span>)  </span>
<span id="cb293-4"><a href="#cb293-4" tabindex="-1"></a>    <span class="fu">expect_equal</span>(<span class="fu">triangle_number</span>(<span class="dv">3</span>),  <span class="dv">6</span>)  </span>
<span id="cb293-5"><a href="#cb293-5" tabindex="-1"></a>    <span class="fu">expect_equal</span>(<span class="fu">triangle_number</span>(<span class="dv">4</span>), <span class="dv">10</span>)  </span>
<span id="cb293-6"><a href="#cb293-6" tabindex="-1"></a>    <span class="fu">expect_equal</span>(<span class="fu">triangle_number</span>(<span class="dv">5</span>), <span class="dv">15</span>)  </span>
<span id="cb293-7"><a href="#cb293-7" tabindex="-1"></a>})</span></code></pre></div>
<p>Test passed 😸</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
This test fails, can you work out why?
</div>
</div>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="#cb294-1" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;it works as expected&quot;</span>, {</span>
<span id="cb294-2"><a href="#cb294-2" tabindex="-1"></a>    <span class="fu">expect_equal</span>(<span class="fu">fahr_to_kelvin_celsius</span>(<span class="dv">92</span>), <span class="fu">list</span>(<span class="dv">33</span>, <span class="dv">306</span>), <span class="at">tolerance =</span> <span class="dv">1</span>)  </span>
<span id="cb294-3"><a href="#cb294-3" tabindex="-1"></a>    </span>
<span id="cb294-4"><a href="#cb294-4" tabindex="-1"></a>})</span></code></pre></div>
<button id="displayTextunnamed-chunk-49" onclick="javascript:toggle(&#39;unnamed-chunk-49&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-49" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="#cb295-1" tabindex="-1"></a><span class="co"># the output is a named list, so these must be supplied with the test</span></span>
<span id="cb295-2"><a href="#cb295-2" tabindex="-1"></a>named_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">celsius =</span> <span class="fl">33.3</span>, <span class="at">kelvin =</span> <span class="fl">306.4</span>)</span>
<span id="cb295-3"><a href="#cb295-3" tabindex="-1"></a></span>
<span id="cb295-4"><a href="#cb295-4" tabindex="-1"></a></span>
<span id="cb295-5"><a href="#cb295-5" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;it works as expected&quot;</span>, {</span>
<span id="cb295-6"><a href="#cb295-6" tabindex="-1"></a>    <span class="fu">expect_equal</span>(<span class="fu">fahr_to_kelvin_celsius</span>(<span class="dv">92</span>), <span class="fu">list</span>(<span class="dv">33</span>, <span class="dv">306</span>), <span class="at">tolerance =</span> <span class="fl">1e-2</span>)  </span>
<span id="cb295-7"><a href="#cb295-7" tabindex="-1"></a>    </span>
<span id="cb295-8"><a href="#cb295-8" tabindex="-1"></a>})</span></code></pre></div>
<p>Test passed 😀</p>
</div>
</div>
</div>
</div>
</div>
<div id="flow-control" class="section level1" number="14">
<h1><span class="header-section-number">14</span> Flow control</h1>
<p>Imagine you want a variable to be equal to a certain value if a condition is met. This is a typical problem that requires the <code>if</code> and <code>else</code> construct. For instance:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="#cb296-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb296-2"><a href="#cb296-2" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">5</span></span></code></pre></div>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="#cb297-1" tabindex="-1"></a><span class="cf">if</span> (a <span class="sc">&gt;</span> b) {</span>
<span id="cb297-2"><a href="#cb297-2" tabindex="-1"></a>  f <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb297-3"><a href="#cb297-3" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb297-4"><a href="#cb297-4" tabindex="-1"></a>  f <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb297-5"><a href="#cb297-5" tabindex="-1"></a>}</span>
<span id="cb297-6"><a href="#cb297-6" tabindex="-1"></a></span>
<span id="cb297-7"><a href="#cb297-7" tabindex="-1"></a>f</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<p>Another way to achieve this is by using the <code>ifelse()</code> function:</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="#cb299-1" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(a <span class="sc">&gt;</span> b, <span class="dv">20</span>, <span class="dv">10</span>)</span>
<span id="cb299-2"><a href="#cb299-2" tabindex="-1"></a>f</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<p><code>if</code> and <code>else</code> might seem interchangeable with <code>ifelse()</code>, but they’re not. <code>ifelse()</code> is vectorized. Let’s try the following:</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="#cb301-1" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>) <span class="sc">&gt;</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">0</span>), <span class="st">&quot;yes&quot;</span>, <span class="st">&quot;no&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;no&quot;  &quot;yes&quot; &quot;yes&quot;</code></pre>
<p>Trying to attempt the same with <code>if</code> and <code>else</code> will result in an error as only the first element can be evaluated</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="#cb303-1" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>) <span class="sc">&gt;</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="fu">print</span>(<span class="st">&quot;yes&quot;</span>) <span class="cf">else</span> <span class="fu">print</span>(<span class="st">&quot;no&quot;</span>)</span></code></pre></div>
<pre><code>Error in if (c(1, 2, 4) &gt; c(3, 1, 0)) print(&quot;yes&quot;) else print(&quot;no&quot;) : 
  the condition has length &gt; 1
</code></pre>
<p>The work around for this would to be use a loop, so that each element along the vector can be evaluated in turn. We will revisit loops shortly.</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="#cb305-1" tabindex="-1"></a>vector1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>)</span>
<span id="cb305-2"><a href="#cb305-2" tabindex="-1"></a>vector2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb305-3"><a href="#cb305-3" tabindex="-1"></a></span>
<span id="cb305-4"><a href="#cb305-4" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">character</span>(<span class="fu">length</span>(vector1))  <span class="co"># Create an empty character vector to store the results</span></span>
<span id="cb305-5"><a href="#cb305-5" tabindex="-1"></a></span>
<span id="cb305-6"><a href="#cb305-6" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(vector1)) {</span>
<span id="cb305-7"><a href="#cb305-7" tabindex="-1"></a>  <span class="cf">if</span> (vector1[i] <span class="sc">&gt;</span> vector2[i]) {</span>
<span id="cb305-8"><a href="#cb305-8" tabindex="-1"></a>    result[i] <span class="ot">&lt;-</span> <span class="st">&quot;yes&quot;</span></span>
<span id="cb305-9"><a href="#cb305-9" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb305-10"><a href="#cb305-10" tabindex="-1"></a>    result[i] <span class="ot">&lt;-</span> <span class="st">&quot;no&quot;</span></span>
<span id="cb305-11"><a href="#cb305-11" tabindex="-1"></a>  }</span>
<span id="cb305-12"><a href="#cb305-12" tabindex="-1"></a>}</span>
<span id="cb305-13"><a href="#cb305-13" tabindex="-1"></a></span>
<span id="cb305-14"><a href="#cb305-14" tabindex="-1"></a><span class="fu">print</span>(result)</span></code></pre></div>
<pre><code>## [1] &quot;no&quot;  &quot;yes&quot; &quot;yes&quot;</code></pre>
<div id="case_when" class="section level3" number="14.0.1">
<h3><span class="header-section-number">14.0.1</span> <code>case_when</code></h3>
<p><code>case_when</code> is a powerful <code>tidyverse</code> function in R that serves as an extension of <code>if_else</code>, providing a flexible way to create conditional transformations on multiple values within a dataset. While <code>if_else</code> is primarily used for a single condition, <code>case_when</code> is designed to handle multiple conditions and allows you to assign specific values or perform operations based on these conditions.</p>
<p>Here's a simple introduction to case_when as an extension of <code>if_else</code>:</p>
<p>Imagine you have a dataset with a column called "temperature," and you want to create a new column called "weather" based on different temperature ranges. With if_else, you might write something like this:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="#cb307-1" tabindex="-1"></a>temperature <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">25</span>, <span class="dv">5</span>, <span class="dv">30</span>, <span class="dv">15</span>)</span>
<span id="cb307-2"><a href="#cb307-2" tabindex="-1"></a></span>
<span id="cb307-3"><a href="#cb307-3" tabindex="-1"></a><span class="fu">ifelse</span>(temperature <span class="sc">&lt;</span> <span class="dv">10</span>, <span class="st">&quot;Cold&quot;</span>,</span>
<span id="cb307-4"><a href="#cb307-4" tabindex="-1"></a>        <span class="fu">ifelse</span>(temperature <span class="sc">&gt;=</span> <span class="dv">10</span> <span class="sc">&amp;</span> temperature <span class="sc">&lt;</span> <span class="dv">25</span>, <span class="st">&quot;Moderate&quot;</span>, <span class="st">&quot;Hot&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;Moderate&quot; &quot;Hot&quot;      &quot;Cold&quot;     &quot;Hot&quot;      &quot;Moderate&quot;</code></pre>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="#cb309-1" tabindex="-1"></a><span class="fu">case_when</span>(</span>
<span id="cb309-2"><a href="#cb309-2" tabindex="-1"></a>    temperature <span class="sc">&lt;</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">&quot;Cold&quot;</span>,</span>
<span id="cb309-3"><a href="#cb309-3" tabindex="-1"></a>    temperature <span class="sc">&gt;=</span> <span class="dv">10</span> <span class="sc">&amp;</span> temperature <span class="sc">&lt;</span> <span class="dv">25</span> <span class="sc">~</span> <span class="st">&quot;Moderate&quot;</span>,</span>
<span id="cb309-4"><a href="#cb309-4" tabindex="-1"></a>    temperature <span class="sc">&gt;=</span> <span class="dv">25</span> <span class="sc">~</span> <span class="st">&quot;Hot&quot;</span></span>
<span id="cb309-5"><a href="#cb309-5" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## [1] &quot;Moderate&quot; &quot;Hot&quot;      &quot;Cold&quot;     &quot;Hot&quot;      &quot;Moderate&quot;</code></pre>
</div>
<div id="conditional-functions" class="section level2" number="14.1">
<h2><span class="header-section-number">14.1</span> Conditional functions</h2>
<p>Let's make a function that reports p-values in APA format (with "p = [rounded value]" when p &gt;= .001 and "p &lt; .001" when p &lt; .001).</p>
<p>You can add a default value to any argument. If that argument is skipped, then the function uses the default argument.</p>
<p>First we could make a function that rounds any value to three digits.</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="#cb311-1" tabindex="-1"></a>report_p <span class="ot">&lt;-</span> <span class="cf">function</span>(p, <span class="at">digits =</span> <span class="dv">3</span>) {</span>
<span id="cb311-2"><a href="#cb311-2" tabindex="-1"></a>      roundp <span class="ot">&lt;-</span> <span class="fu">round</span>(p, digits)</span>
<span id="cb311-3"><a href="#cb311-3" tabindex="-1"></a>    reported <span class="ot">&lt;-</span>  <span class="fu">paste</span>(<span class="st">&quot;p =&quot;</span>, roundp)</span>
<span id="cb311-4"><a href="#cb311-4" tabindex="-1"></a>    </span>
<span id="cb311-5"><a href="#cb311-5" tabindex="-1"></a>    <span class="fu">return</span>(reported)</span>
<span id="cb311-6"><a href="#cb311-6" tabindex="-1"></a>}</span></code></pre></div>
<p>But we would like this to have a conditional response as well: so we need an <code>if</code> <code>else</code> statement.</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="#cb312-1" tabindex="-1"></a> report_p <span class="ot">&lt;-</span> <span class="cf">function</span>(p, <span class="at">digits =</span> <span class="dv">3</span>) {</span>
<span id="cb312-2"><a href="#cb312-2" tabindex="-1"></a>     reported <span class="ot">&lt;-</span> <span class="cf">if</span>(p <span class="sc">&lt;</span> <span class="fl">0.001</span>){</span>
<span id="cb312-3"><a href="#cb312-3" tabindex="-1"></a>             <span class="st">&quot;p &lt; 0.001&quot;</span>} <span class="cf">else</span>{</span>
<span id="cb312-4"><a href="#cb312-4" tabindex="-1"></a>             <span class="fu">paste</span>(<span class="st">&quot;p =&quot;</span>, <span class="fu">round</span>(p, digits))}</span>
<span id="cb312-5"><a href="#cb312-5" tabindex="-1"></a>             </span>
<span id="cb312-6"><a href="#cb312-6" tabindex="-1"></a>     </span>
<span id="cb312-7"><a href="#cb312-7" tabindex="-1"></a>     <span class="fu">return</span>(reported)</span>
<span id="cb312-8"><a href="#cb312-8" tabindex="-1"></a> }</span></code></pre></div>
<p>However we soon hit our first problem, this function works well when provided a single numeric value, but when applied to a vector or a dataframe we encounter an error:</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="#cb313-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.05</span>,<span class="fl">0.3</span>,<span class="fl">0.4</span>)</span>
<span id="cb313-2"><a href="#cb313-2" tabindex="-1"></a></span>
<span id="cb313-3"><a href="#cb313-3" tabindex="-1"></a><span class="fu">report_p</span>(x)</span></code></pre></div>
<pre><code>Error in if (p &lt; 0.001) { : the condition has length &gt; 1</code></pre>
<p>In R, conditional statements are not vector operations. They deal only with a single value. If you pass in, for example, a vector, the <code>if</code> statement will only check the very first element and issue a warning. The solution to this is the <code>ifelse()</code> or the tidyverse equivalent <code>if_else()</code> function</p>
<div class="tab">
<button class="tablinks= T active" onclick="javascript:openCode(event, &#39;option1= T&#39;, &#39;= T&#39;);">
Base R
</button>
<button class="tablinks= T" onclick="javascript:openCode(event, &#39;option2= T&#39;, &#39;= T&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1= T" class="tabcontent= T">
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="#cb315-1" tabindex="-1"></a> report_p <span class="ot">&lt;-</span> <span class="cf">function</span>(p, <span class="at">digits =</span> <span class="dv">3</span>) {</span>
<span id="cb315-2"><a href="#cb315-2" tabindex="-1"></a>     reported <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(p <span class="sc">&lt;</span> <span class="fl">0.001</span>,</span>
<span id="cb315-3"><a href="#cb315-3" tabindex="-1"></a>             <span class="st">&quot;p &lt; 0.001&quot;</span>,</span>
<span id="cb315-4"><a href="#cb315-4" tabindex="-1"></a>             <span class="fu">paste</span>(<span class="st">&quot;p =&quot;</span>, <span class="fu">round</span>(p, digits)))</span>
<span id="cb315-5"><a href="#cb315-5" tabindex="-1"></a>     </span>
<span id="cb315-6"><a href="#cb315-6" tabindex="-1"></a>     <span class="fu">return</span>(reported)</span>
<span id="cb315-7"><a href="#cb315-7" tabindex="-1"></a> }</span></code></pre></div>
</div>
<div id="option2= T" class="tabcontent= T">
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="#cb316-1" tabindex="-1"></a> report_p <span class="ot">&lt;-</span> <span class="cf">function</span>(p, <span class="at">digits =</span> <span class="dv">3</span>) {</span>
<span id="cb316-2"><a href="#cb316-2" tabindex="-1"></a>     reported <span class="ot">&lt;-</span> <span class="fu">if_else</span>(p <span class="sc">&lt;</span> <span class="fl">0.001</span>,</span>
<span id="cb316-3"><a href="#cb316-3" tabindex="-1"></a>             <span class="st">&quot;p &lt; 0.001&quot;</span>,</span>
<span id="cb316-4"><a href="#cb316-4" tabindex="-1"></a>             <span class="fu">paste</span>(<span class="st">&quot;p =&quot;</span>, <span class="fu">round</span>(p, digits)))</span>
<span id="cb316-5"><a href="#cb316-5" tabindex="-1"></a>     </span>
<span id="cb316-6"><a href="#cb316-6" tabindex="-1"></a>     <span class="fu">return</span>(reported)</span>
<span id="cb316-7"><a href="#cb316-7" tabindex="-1"></a> }</span></code></pre></div>
</div>
<script> javascript:hide('option2= T') </script>
<p><a href="https://stackoverflow.com/questions/50646133/dplyr-if-else-vs-base-r-ifelse" class="uri">https://stackoverflow.com/questions/50646133/dplyr-if-else-vs-base-r-ifelse</a></p>
</div>
<div id="warnings-and-errors" class="section level2" number="14.2">
<h2><span class="header-section-number">14.2</span> Warnings and errors</h2>
<div class="try">
<p>
What happens when omit an argument for p, set the value to 1.5 or a
character “a”?
</p>
</div>
<p>Sometimes the function will not run, in the first example because we did not provide an argument default.</p>
<p>For <code>p = 1.5</code> it probably <em>shouldn't</em> run (p = 1.5 makes no sense), but it does!</p>
<p>For <code>p = "a"</code> there is a warning but perhaps not a very intuitive one.</p>
<p>We can make our own custom/specific warnings, try this and run it with the arguments above again!</p>
<button id="displayTextunnamed-chunk-62" onclick="javascript:toggle(&#39;unnamed-chunk-62&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-62" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="tab">
<button class="tablinksunnamed-chunk-62 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-62&#39;, &#39;unnamed-chunk-62&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-62" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-62&#39;, &#39;unnamed-chunk-62&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-62" class="tabcontentunnamed-chunk-62">
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="#cb317-1" tabindex="-1"></a> report_p <span class="ot">&lt;-</span> <span class="cf">function</span>(p, <span class="at">digits =</span> <span class="dv">3</span>) {</span>
<span id="cb317-2"><a href="#cb317-2" tabindex="-1"></a>   </span>
<span id="cb317-3"><a href="#cb317-3" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(p)) <span class="fu">stop</span>(<span class="st">&quot;p must be a number&quot;</span>)</span>
<span id="cb317-4"><a href="#cb317-4" tabindex="-1"></a>  <span class="cf">if</span> (p <span class="sc">&lt;=</span> <span class="dv">0</span>) <span class="fu">warning</span>(<span class="st">&quot;p-values cannot less 0&quot;</span>)</span>
<span id="cb317-5"><a href="#cb317-5" tabindex="-1"></a>  <span class="cf">if</span> (p <span class="sc">&gt;=</span> <span class="dv">1</span>) <span class="fu">warning</span>(<span class="st">&quot;p-values cannot be greater than 1&quot;</span>)</span>
<span id="cb317-6"><a href="#cb317-6" tabindex="-1"></a>   </span>
<span id="cb317-7"><a href="#cb317-7" tabindex="-1"></a>     reported <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(p <span class="sc">&lt;</span> <span class="fl">0.001</span>,</span>
<span id="cb317-8"><a href="#cb317-8" tabindex="-1"></a>             <span class="st">&quot;p &lt; 0.001&quot;</span>,</span>
<span id="cb317-9"><a href="#cb317-9" tabindex="-1"></a>             <span class="fu">paste</span>(<span class="st">&quot;p =&quot;</span>, <span class="fu">round</span>(p, digits)))</span>
<span id="cb317-10"><a href="#cb317-10" tabindex="-1"></a>     <span class="fu">return</span>(reported)</span>
<span id="cb317-11"><a href="#cb317-11" tabindex="-1"></a> }</span></code></pre></div>
</div>
<div id="option2unnamed-chunk-62" class="tabcontentunnamed-chunk-62">
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="#cb318-1" tabindex="-1"></a>report_p <span class="ot">&lt;-</span> <span class="cf">function</span>(p, <span class="at">digits =</span> <span class="dv">3</span>) {</span>
<span id="cb318-2"><a href="#cb318-2" tabindex="-1"></a> </span>
<span id="cb318-3"><a href="#cb318-3" tabindex="-1"></a> <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(p)) <span class="fu">stop</span>(<span class="st">&quot;p must be a number&quot;</span>)</span>
<span id="cb318-4"><a href="#cb318-4" tabindex="-1"></a> </span>
<span id="cb318-5"><a href="#cb318-5" tabindex="-1"></a>   result <span class="ot">&lt;-</span> <span class="fu">case_when</span>(</span>
<span id="cb318-6"><a href="#cb318-6" tabindex="-1"></a>       p <span class="sc">&lt;=</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;p-values cannot be less than or equal to 0&quot;</span>,</span>
<span id="cb318-7"><a href="#cb318-7" tabindex="-1"></a>       p <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;p-values cannot be greater than or equal to 1&quot;</span>,</span>
<span id="cb318-8"><a href="#cb318-8" tabindex="-1"></a>       p <span class="sc">&lt;</span> <span class="fl">0.001</span> <span class="sc">~</span> <span class="st">&quot;p &lt; 0.001&quot;</span>,</span>
<span id="cb318-9"><a href="#cb318-9" tabindex="-1"></a>       <span class="at">.default =</span> <span class="fu">paste</span>(<span class="st">&quot;p =&quot;</span>, <span class="fu">round</span>(p, digits))</span>
<span id="cb318-10"><a href="#cb318-10" tabindex="-1"></a>   )</span>
<span id="cb318-11"><a href="#cb318-11" tabindex="-1"></a>   </span>
<span id="cb318-12"><a href="#cb318-12" tabindex="-1"></a>   <span class="fu">return</span>(result)</span>
<span id="cb318-13"><a href="#cb318-13" tabindex="-1"></a>}</span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-62') </script>
</div>
</div>
</div>
</div>
<div id="activities" class="section level2" number="14.3">
<h2><span class="header-section-number">14.3</span> Activities</h2>
<p>Exercise 1: Write a Simple Function
We'll create a function that calculates the GC content of a DNA sequence, and the result melting temperature of the sequence and returns both in a list.</p>
<p>GC content is the percentage of the DNA molecule's nitrogenous bases that are either guanine (G) or cytosine (C).</p>
<p>This is a common metric used in molecular biology and genetics to analyze DNA sequences. Each GC base addes 4 degrees to melting temp while each AT base adds 2 degrees.</p>
<blockquote>
<p>Hint <code>stringr</code> and associated functions will be very helpful here</p>
</blockquote>
<div class="webex-solution">
<button>
stringr functions
</button>
<p><code>str_count</code> can let you selectively add letters in a vector</p>
<p><code>str_length</code> can let you count the characters in a vector</p>
</div>
<button id="displayTextunnamed-chunk-63" onclick="javascript:toggle(&#39;unnamed-chunk-63&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-63" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="tab">
<button class="tablinksunnamed-chunk-63 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-63&#39;, &#39;unnamed-chunk-63&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-63" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-63&#39;, &#39;unnamed-chunk-63&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-63" class="tabcontentunnamed-chunk-63">
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="#cb319-1" tabindex="-1"></a>gc_content <span class="ot">&lt;-</span> <span class="cf">function</span>(dna_sequence) {</span>
<span id="cb319-2"><a href="#cb319-2" tabindex="-1"></a>  <span class="co"># Convert the input sequence to uppercase to handle mixed-case input</span></span>
<span id="cb319-3"><a href="#cb319-3" tabindex="-1"></a>  dna_sequence <span class="ot">&lt;-</span> <span class="fu">toupper</span>(dna_sequence)</span>
<span id="cb319-4"><a href="#cb319-4" tabindex="-1"></a>  </span>
<span id="cb319-5"><a href="#cb319-5" tabindex="-1"></a> </span>
<span id="cb319-6"><a href="#cb319-6" tabindex="-1"></a>  <span class="co"># Calculate the number of GC bases (C and G) in the sequence</span></span>
<span id="cb319-7"><a href="#cb319-7" tabindex="-1"></a> gc_positions <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">gregexpr</span>(<span class="st">&quot;[GC]&quot;</span>, dna_sequence))</span>
<span id="cb319-8"><a href="#cb319-8" tabindex="-1"></a> gc_count <span class="ot">&lt;-</span> <span class="fu">length</span>(gc_positions)</span>
<span id="cb319-9"><a href="#cb319-9" tabindex="-1"></a></span>
<span id="cb319-10"><a href="#cb319-10" tabindex="-1"></a>  <span class="co"># Calculate the total number of bases in the sequence</span></span>
<span id="cb319-11"><a href="#cb319-11" tabindex="-1"></a>  total_bases <span class="ot">&lt;-</span> <span class="fu">nchar</span>(dna_sequence)</span>
<span id="cb319-12"><a href="#cb319-12" tabindex="-1"></a>  </span>
<span id="cb319-13"><a href="#cb319-13" tabindex="-1"></a>  <span class="co"># Calculate the GC content as a percentage</span></span>
<span id="cb319-14"><a href="#cb319-14" tabindex="-1"></a>  gc_percentage <span class="ot">&lt;-</span> (gc_count <span class="sc">/</span> total_bases) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb319-15"><a href="#cb319-15" tabindex="-1"></a>  </span>
<span id="cb319-16"><a href="#cb319-16" tabindex="-1"></a>  gc_percentage <span class="ot">&lt;-</span> <span class="fu">round</span>(gc_percentage, <span class="dv">2</span>)</span>
<span id="cb319-17"><a href="#cb319-17" tabindex="-1"></a>  </span>
<span id="cb319-18"><a href="#cb319-18" tabindex="-1"></a>  <span class="co"># Calculate AT numbers</span></span>
<span id="cb319-19"><a href="#cb319-19" tabindex="-1"></a>  at_count <span class="ot">&lt;-</span> total_bases <span class="sc">-</span> gc_count</span>
<span id="cb319-20"><a href="#cb319-20" tabindex="-1"></a>  </span>
<span id="cb319-21"><a href="#cb319-21" tabindex="-1"></a>  <span class="co"># Calculate melting temp of sequence</span></span>
<span id="cb319-22"><a href="#cb319-22" tabindex="-1"></a>  melt_temp <span class="ot">&lt;-</span> (gc_count<span class="sc">*</span><span class="dv">4</span>) <span class="sc">+</span> (at_count<span class="sc">*</span><span class="dv">2</span>)</span>
<span id="cb319-23"><a href="#cb319-23" tabindex="-1"></a>  </span>
<span id="cb319-24"><a href="#cb319-24" tabindex="-1"></a>  </span>
<span id="cb319-25"><a href="#cb319-25" tabindex="-1"></a>  dna_content <span class="ot">&lt;-</span> <span class="fu">list</span>(gc_percentage, melt_temp)</span>
<span id="cb319-26"><a href="#cb319-26" tabindex="-1"></a>  <span class="fu">names</span>(dna_content) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;GC Percentage&quot;</span>, <span class="st">&quot;Melting temp (celsius)&quot;</span>)</span>
<span id="cb319-27"><a href="#cb319-27" tabindex="-1"></a>  </span>
<span id="cb319-28"><a href="#cb319-28" tabindex="-1"></a>  </span>
<span id="cb319-29"><a href="#cb319-29" tabindex="-1"></a>  <span class="fu">return</span>(dna_content)</span>
<span id="cb319-30"><a href="#cb319-30" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="option2unnamed-chunk-63" class="tabcontentunnamed-chunk-63">
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="#cb320-1" tabindex="-1"></a>gc_content <span class="ot">&lt;-</span> <span class="cf">function</span>(dna_sequence) {</span>
<span id="cb320-2"><a href="#cb320-2" tabindex="-1"></a>  <span class="co"># Convert the input sequence to uppercase to handle mixed-case input</span></span>
<span id="cb320-3"><a href="#cb320-3" tabindex="-1"></a>  dna_sequence <span class="ot">&lt;-</span> <span class="fu">str_to_upper</span>(dna_sequence)</span>
<span id="cb320-4"><a href="#cb320-4" tabindex="-1"></a>  </span>
<span id="cb320-5"><a href="#cb320-5" tabindex="-1"></a></span>
<span id="cb320-6"><a href="#cb320-6" tabindex="-1"></a>  </span>
<span id="cb320-7"><a href="#cb320-7" tabindex="-1"></a>  <span class="co"># Calculate the number of GC bases (C and G) in the sequence</span></span>
<span id="cb320-8"><a href="#cb320-8" tabindex="-1"></a>  gc_count <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">str_count</span>(dna_sequence <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;G&quot;</span>, <span class="st">&quot;C&quot;</span>)))</span>
<span id="cb320-9"><a href="#cb320-9" tabindex="-1"></a>  </span>
<span id="cb320-10"><a href="#cb320-10" tabindex="-1"></a>  <span class="co"># Calculate the total number of bases in the sequence</span></span>
<span id="cb320-11"><a href="#cb320-11" tabindex="-1"></a>  total_bases <span class="ot">&lt;-</span> <span class="fu">str_length</span>(dna_sequence)</span>
<span id="cb320-12"><a href="#cb320-12" tabindex="-1"></a>  </span>
<span id="cb320-13"><a href="#cb320-13" tabindex="-1"></a>  <span class="co"># Calculate the GC content as a percentage</span></span>
<span id="cb320-14"><a href="#cb320-14" tabindex="-1"></a>  gc_percentage <span class="ot">&lt;-</span> (gc_count <span class="sc">/</span> total_bases) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb320-15"><a href="#cb320-15" tabindex="-1"></a>  </span>
<span id="cb320-16"><a href="#cb320-16" tabindex="-1"></a>  gc_percentage <span class="ot">&lt;-</span> <span class="fu">round</span>(gc_percentage, <span class="dv">2</span>)</span>
<span id="cb320-17"><a href="#cb320-17" tabindex="-1"></a>  </span>
<span id="cb320-18"><a href="#cb320-18" tabindex="-1"></a>   <span class="co"># Calculate AT numbers</span></span>
<span id="cb320-19"><a href="#cb320-19" tabindex="-1"></a>  at_count <span class="ot">&lt;-</span> total_bases <span class="sc">-</span> gc_count</span>
<span id="cb320-20"><a href="#cb320-20" tabindex="-1"></a>  </span>
<span id="cb320-21"><a href="#cb320-21" tabindex="-1"></a>  <span class="co"># Calculate melting temp of sequence</span></span>
<span id="cb320-22"><a href="#cb320-22" tabindex="-1"></a>  melt_temp <span class="ot">&lt;-</span> (gc_count<span class="sc">*</span><span class="dv">4</span>) <span class="sc">+</span> (at_count<span class="sc">*</span><span class="dv">2</span>)</span>
<span id="cb320-23"><a href="#cb320-23" tabindex="-1"></a>  </span>
<span id="cb320-24"><a href="#cb320-24" tabindex="-1"></a>  </span>
<span id="cb320-25"><a href="#cb320-25" tabindex="-1"></a>  dna_content <span class="ot">&lt;-</span> <span class="fu">list</span>(gc_percentage, melt_temp)</span>
<span id="cb320-26"><a href="#cb320-26" tabindex="-1"></a>  <span class="fu">names</span>(dna_content) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;GC Percentage&quot;</span>, <span class="st">&quot;Melting temp (celsius)&quot;</span>)</span>
<span id="cb320-27"><a href="#cb320-27" tabindex="-1"></a>  </span>
<span id="cb320-28"><a href="#cb320-28" tabindex="-1"></a>  </span>
<span id="cb320-29"><a href="#cb320-29" tabindex="-1"></a>  <span class="fu">return</span>(dna_content)</span>
<span id="cb320-30"><a href="#cb320-30" tabindex="-1"></a>}</span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-63') </script>
</div>
</div>
</div>
<p>Exercise 2: Document the Function</p>
<p>Add documentation to the factorial function with comments. Include a description, inputs, outputs and examples.</p>
<button id="displayTextunnamed-chunk-64" onclick="javascript:toggle(&#39;unnamed-chunk-64&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-64" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="#cb321-1" tabindex="-1"></a><span class="co"># Function: gc_content</span></span>
<span id="cb321-2"><a href="#cb321-2" tabindex="-1"></a><span class="co"># Description: calculates the GC (Guanine-Cytosine) content and the melting temperature of a given DNA sequence. </span></span>
<span id="cb321-3"><a href="#cb321-3" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb321-4"><a href="#cb321-4" tabindex="-1"></a><span class="co"># Input:</span></span>
<span id="cb321-5"><a href="#cb321-5" tabindex="-1"></a><span class="co">#   dna_sequence: A character string representing the DNA sequence for which you want to calculate GC content and melting temperature.   </span></span>
<span id="cb321-6"><a href="#cb321-6" tabindex="-1"></a><span class="co">#   The function is case-insensitive, meaning it can handle mixed-case input. The sequence should consist of valid DNA bases (A, T, C, G).</span></span>
<span id="cb321-7"><a href="#cb321-7" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb321-8"><a href="#cb321-8" tabindex="-1"></a><span class="co"># Output:</span></span>
<span id="cb321-9"><a href="#cb321-9" tabindex="-1"></a><span class="co">#   A named list containing two elements:</span></span>
<span id="cb321-10"><a href="#cb321-10" tabindex="-1"></a><span class="co">#   - &quot;GC Percentage&quot; (numeric): The calculated GC content as a percentage, rounded to two decimal places.</span></span>
<span id="cb321-11"><a href="#cb321-11" tabindex="-1"></a><span class="co">#   - &quot;Melting temp (celsius)&quot; (numeric): The estimated melting temperature of the input DNA sequence in degrees Celsi</span></span>
<span id="cb321-12"><a href="#cb321-12" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb321-13"><a href="#cb321-13" tabindex="-1"></a><span class="co"># Example Output:</span></span>
<span id="cb321-14"><a href="#cb321-14" tabindex="-1"></a><span class="co">#   If you call gc_content(&quot;ATGCGTAGCT&quot;)</span></span>
<span id="cb321-15"><a href="#cb321-15" tabindex="-1"></a><span class="co">#   $`GC Percentage`</span></span>
<span id="cb321-16"><a href="#cb321-16" tabindex="-1"></a><span class="co">#   [1] 50</span></span>
<span id="cb321-17"><a href="#cb321-17" tabindex="-1"></a><span class="co">#  $`Melting temp (celsius)`</span></span>
<span id="cb321-18"><a href="#cb321-18" tabindex="-1"></a><span class="co">#  [1] 30</span></span>
<span id="cb321-19"><a href="#cb321-19" tabindex="-1"></a></span>
<span id="cb321-20"><a href="#cb321-20" tabindex="-1"></a>gc_content <span class="ot">&lt;-</span> <span class="cf">function</span>(dna_sequence) {</span>
<span id="cb321-21"><a href="#cb321-21" tabindex="-1"></a>  <span class="co"># Convert the input sequence to uppercase to handle mixed-case input</span></span>
<span id="cb321-22"><a href="#cb321-22" tabindex="-1"></a>  dna_sequence <span class="ot">&lt;-</span> <span class="fu">str_to_upper</span>(dna_sequence)</span>
<span id="cb321-23"><a href="#cb321-23" tabindex="-1"></a>  </span>
<span id="cb321-24"><a href="#cb321-24" tabindex="-1"></a></span>
<span id="cb321-25"><a href="#cb321-25" tabindex="-1"></a>  </span>
<span id="cb321-26"><a href="#cb321-26" tabindex="-1"></a>  <span class="co"># Calculate the number of GC bases (C and G) in the sequence</span></span>
<span id="cb321-27"><a href="#cb321-27" tabindex="-1"></a>  gc_count <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">str_count</span>(dna_sequence <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;G&quot;</span>, <span class="st">&quot;C&quot;</span>)))</span>
<span id="cb321-28"><a href="#cb321-28" tabindex="-1"></a>  </span>
<span id="cb321-29"><a href="#cb321-29" tabindex="-1"></a>  <span class="co"># Calculate the total number of bases in the sequence</span></span>
<span id="cb321-30"><a href="#cb321-30" tabindex="-1"></a>  total_bases <span class="ot">&lt;-</span> <span class="fu">str_length</span>(dna_sequence)</span>
<span id="cb321-31"><a href="#cb321-31" tabindex="-1"></a>  </span>
<span id="cb321-32"><a href="#cb321-32" tabindex="-1"></a>  <span class="co"># Calculate the GC content as a percentage</span></span>
<span id="cb321-33"><a href="#cb321-33" tabindex="-1"></a>  gc_percentage <span class="ot">&lt;-</span> (gc_count <span class="sc">/</span> total_bases) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb321-34"><a href="#cb321-34" tabindex="-1"></a>  </span>
<span id="cb321-35"><a href="#cb321-35" tabindex="-1"></a>  gc_percentage <span class="ot">&lt;-</span> <span class="fu">round</span>(gc_percentage, <span class="dv">2</span>)</span>
<span id="cb321-36"><a href="#cb321-36" tabindex="-1"></a>  </span>
<span id="cb321-37"><a href="#cb321-37" tabindex="-1"></a>   <span class="co"># Calculate AT numbers</span></span>
<span id="cb321-38"><a href="#cb321-38" tabindex="-1"></a>  at_count <span class="ot">&lt;-</span> total_bases <span class="sc">-</span> gc_count</span>
<span id="cb321-39"><a href="#cb321-39" tabindex="-1"></a>  </span>
<span id="cb321-40"><a href="#cb321-40" tabindex="-1"></a>  <span class="co"># Calculate melting temp of sequence</span></span>
<span id="cb321-41"><a href="#cb321-41" tabindex="-1"></a>  melt_temp <span class="ot">&lt;-</span> (gc_count<span class="sc">*</span><span class="dv">4</span>) <span class="sc">+</span> (at_count<span class="sc">*</span><span class="dv">2</span>)</span>
<span id="cb321-42"><a href="#cb321-42" tabindex="-1"></a>  </span>
<span id="cb321-43"><a href="#cb321-43" tabindex="-1"></a>  </span>
<span id="cb321-44"><a href="#cb321-44" tabindex="-1"></a>  dna_content <span class="ot">&lt;-</span> <span class="fu">list</span>(gc_percentage, melt_temp)</span>
<span id="cb321-45"><a href="#cb321-45" tabindex="-1"></a>  <span class="fu">names</span>(dna_content) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;GC Percentage&quot;</span>, <span class="st">&quot;Melting temp (celsius)&quot;</span>)</span>
<span id="cb321-46"><a href="#cb321-46" tabindex="-1"></a>  </span>
<span id="cb321-47"><a href="#cb321-47" tabindex="-1"></a>  </span>
<span id="cb321-48"><a href="#cb321-48" tabindex="-1"></a>  <span class="fu">return</span>(dna_content)</span>
<span id="cb321-49"><a href="#cb321-49" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
</div>
<p>Exercise 3: Test the Function</p>
<p>Create a test script that uses test_that to check if the function returns the correct GC percentage and melting temps</p>
<button id="displayTextunnamed-chunk-65" onclick="javascript:toggle(&#39;unnamed-chunk-65&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-65" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="#cb322-1" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;gc_content function tests&quot;</span>, {</span>
<span id="cb322-2"><a href="#cb322-2" tabindex="-1"></a>    <span class="co"># Test valid input and GC content calculation</span></span>
<span id="cb322-3"><a href="#cb322-3" tabindex="-1"></a>    dna_seq1 <span class="ot">&lt;-</span> <span class="st">&quot;ATGCGTAGCT&quot;</span></span>
<span id="cb322-4"><a href="#cb322-4" tabindex="-1"></a>    result1 <span class="ot">&lt;-</span> <span class="fu">gc_content</span>(dna_seq1)</span>
<span id="cb322-5"><a href="#cb322-5" tabindex="-1"></a>    <span class="fu">expect_equal</span>(result1<span class="sc">$</span><span class="st">`</span><span class="at">GC Percentage</span><span class="st">`</span>, <span class="dv">50</span>)</span>
<span id="cb322-6"><a href="#cb322-6" tabindex="-1"></a>    <span class="fu">expect_equal</span>(result1<span class="sc">$</span><span class="st">`</span><span class="at">Melting temp (celsius)</span><span class="st">`</span>, <span class="dv">30</span>)})</span></code></pre></div>
<pre><code>## Test passed 🎊</code></pre>
</div>
</div>
</div>
<p>Exercise 4: Handle Errors</p>
<p>You can optionally modify the gc_content function to handle errors such as when the input contains non-DNA characters, or warnings if the the length exceeds 30nt?</p>
<div class="webex-solution">
<button>
regex help
</button>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="#cb324-1" tabindex="-1"></a><span class="co"># this is the regular expression to detect ATCG</span></span>
<span id="cb324-2"><a href="#cb324-2" tabindex="-1"></a></span>
<span id="cb324-3"><a href="#cb324-3" tabindex="-1"></a><span class="fu">str_detect</span>(dna_sequence, <span class="st">&quot;^[ATCG]+$&quot;</span>)<span class="er">)</span> </span></code></pre></div>
</div>
<button id="displayTextunnamed-chunk-67" onclick="javascript:toggle(&#39;unnamed-chunk-67&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-67" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="tab">
<button class="tablinksunnamed-chunk-67 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-67&#39;, &#39;unnamed-chunk-67&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-67" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-67&#39;, &#39;unnamed-chunk-67&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-67" class="tabcontentunnamed-chunk-67">
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="#cb325-1" tabindex="-1"></a>gc_content <span class="ot">&lt;-</span> <span class="cf">function</span>(dna_sequence) {</span>
<span id="cb325-2"><a href="#cb325-2" tabindex="-1"></a>  <span class="co"># Convert the input sequence to uppercase to handle mixed-case input</span></span>
<span id="cb325-3"><a href="#cb325-3" tabindex="-1"></a>  dna_sequence <span class="ot">&lt;-</span> <span class="fu">toupper</span>(dna_sequence)</span>
<span id="cb325-4"><a href="#cb325-4" tabindex="-1"></a>  </span>
<span id="cb325-5"><a href="#cb325-5" tabindex="-1"></a>  <span class="co"># Check if the input sequence contains only valid DNA characters (A, T, C, G)</span></span>
<span id="cb325-6"><a href="#cb325-6" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;^[ATCG]+$&quot;</span>, dna_sequence)) <span class="fu">stop</span>(<span class="st">&quot;Invalid DNA sequence. Only A, T, C, and G are allowed.&quot;</span>)</span>
<span id="cb325-7"><a href="#cb325-7" tabindex="-1"></a>  </span>
<span id="cb325-8"><a href="#cb325-8" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nchar</span>(dna_sequence) <span class="sc">&gt;</span> <span class="dv">30</span> ) <span class="fu">warning</span>(<span class="st">&quot;Sequence is &gt; 30 nt temperature predictions may be inaccurate&quot;</span>)</span>
<span id="cb325-9"><a href="#cb325-9" tabindex="-1"></a>  </span>
<span id="cb325-10"><a href="#cb325-10" tabindex="-1"></a>  </span>
<span id="cb325-11"><a href="#cb325-11" tabindex="-1"></a>  <span class="co"># Calculate the number of GC bases (C and G) in the sequence</span></span>
<span id="cb325-12"><a href="#cb325-12" tabindex="-1"></a> gc_positions <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">gregexpr</span>(<span class="st">&quot;[GC]&quot;</span>, dna_sequence))</span>
<span id="cb325-13"><a href="#cb325-13" tabindex="-1"></a> gc_count <span class="ot">&lt;-</span> <span class="fu">length</span>(gc_positions)</span>
<span id="cb325-14"><a href="#cb325-14" tabindex="-1"></a></span>
<span id="cb325-15"><a href="#cb325-15" tabindex="-1"></a>  <span class="co"># Calculate the total number of bases in the sequence</span></span>
<span id="cb325-16"><a href="#cb325-16" tabindex="-1"></a>  total_bases <span class="ot">&lt;-</span> <span class="fu">nchar</span>(dna_sequence)</span>
<span id="cb325-17"><a href="#cb325-17" tabindex="-1"></a>  </span>
<span id="cb325-18"><a href="#cb325-18" tabindex="-1"></a>  <span class="co"># Calculate the GC content as a percentage</span></span>
<span id="cb325-19"><a href="#cb325-19" tabindex="-1"></a>  gc_percentage <span class="ot">&lt;-</span> (gc_count <span class="sc">/</span> total_bases) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb325-20"><a href="#cb325-20" tabindex="-1"></a>  </span>
<span id="cb325-21"><a href="#cb325-21" tabindex="-1"></a>  gc_percentage <span class="ot">&lt;-</span> <span class="fu">round</span>(gc_percentage, <span class="dv">2</span>)</span>
<span id="cb325-22"><a href="#cb325-22" tabindex="-1"></a>  </span>
<span id="cb325-23"><a href="#cb325-23" tabindex="-1"></a>  <span class="co"># Calculate AT numbers</span></span>
<span id="cb325-24"><a href="#cb325-24" tabindex="-1"></a>  at_count <span class="ot">&lt;-</span> total_bases <span class="sc">-</span> gc_count</span>
<span id="cb325-25"><a href="#cb325-25" tabindex="-1"></a>  </span>
<span id="cb325-26"><a href="#cb325-26" tabindex="-1"></a>  <span class="co"># Calculate melting temp of sequence</span></span>
<span id="cb325-27"><a href="#cb325-27" tabindex="-1"></a>  melt_temp <span class="ot">&lt;-</span> (gc_count<span class="sc">*</span><span class="dv">4</span>) <span class="sc">+</span> (at_count<span class="sc">*</span><span class="dv">2</span>)</span>
<span id="cb325-28"><a href="#cb325-28" tabindex="-1"></a>  </span>
<span id="cb325-29"><a href="#cb325-29" tabindex="-1"></a>  </span>
<span id="cb325-30"><a href="#cb325-30" tabindex="-1"></a>  dna_content <span class="ot">&lt;-</span> <span class="fu">list</span>(gc_percentage, melt_temp)</span>
<span id="cb325-31"><a href="#cb325-31" tabindex="-1"></a>  <span class="fu">names</span>(dna_content) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;GC Percentage&quot;</span>, <span class="st">&quot;Melting temp (celsius)&quot;</span>)</span>
<span id="cb325-32"><a href="#cb325-32" tabindex="-1"></a>  </span>
<span id="cb325-33"><a href="#cb325-33" tabindex="-1"></a>  </span>
<span id="cb325-34"><a href="#cb325-34" tabindex="-1"></a>  <span class="fu">return</span>(dna_content)</span>
<span id="cb325-35"><a href="#cb325-35" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="option2unnamed-chunk-67" class="tabcontentunnamed-chunk-67">
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="#cb326-1" tabindex="-1"></a>gc_content <span class="ot">&lt;-</span> <span class="cf">function</span>(dna_sequence) {</span>
<span id="cb326-2"><a href="#cb326-2" tabindex="-1"></a>  <span class="co"># Convert the input sequence to uppercase to handle mixed-case input</span></span>
<span id="cb326-3"><a href="#cb326-3" tabindex="-1"></a>  dna_sequence <span class="ot">&lt;-</span> <span class="fu">str_to_upper</span>(dna_sequence)</span>
<span id="cb326-4"><a href="#cb326-4" tabindex="-1"></a>  </span>
<span id="cb326-5"><a href="#cb326-5" tabindex="-1"></a>  <span class="co"># Check if the input sequence contains only valid DNA characters (A, T, C, G)</span></span>
<span id="cb326-6"><a href="#cb326-6" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">str_detect</span>(dna_sequence, <span class="st">&quot;^[ATCG]+$&quot;</span>)) <span class="fu">stop</span>(<span class="st">&quot;Invalid DNA sequence. Only A, T, C, and G are allowed.&quot;</span>)</span>
<span id="cb326-7"><a href="#cb326-7" tabindex="-1"></a></span>
<span id="cb326-8"><a href="#cb326-8" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">str_length</span>(dna_sequence) <span class="sc">&gt;</span> <span class="dv">30</span> ) <span class="fu">warning</span>(<span class="st">&quot;Sequence is &gt; 30 nt temperature predictions may be inaccurate&quot;</span>)</span>
<span id="cb326-9"><a href="#cb326-9" tabindex="-1"></a></span>
<span id="cb326-10"><a href="#cb326-10" tabindex="-1"></a>  </span>
<span id="cb326-11"><a href="#cb326-11" tabindex="-1"></a>  <span class="co"># Calculate the number of GC bases (C and G) in the sequence</span></span>
<span id="cb326-12"><a href="#cb326-12" tabindex="-1"></a>  gc_count <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">str_count</span>(dna_sequence <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;G&quot;</span>, <span class="st">&quot;C&quot;</span>)))</span>
<span id="cb326-13"><a href="#cb326-13" tabindex="-1"></a>  </span>
<span id="cb326-14"><a href="#cb326-14" tabindex="-1"></a>  <span class="co"># Calculate the total number of bases in the sequence</span></span>
<span id="cb326-15"><a href="#cb326-15" tabindex="-1"></a>  total_bases <span class="ot">&lt;-</span> <span class="fu">str_length</span>(dna_sequence)</span>
<span id="cb326-16"><a href="#cb326-16" tabindex="-1"></a>  </span>
<span id="cb326-17"><a href="#cb326-17" tabindex="-1"></a>  <span class="co"># Calculate the GC content as a percentage</span></span>
<span id="cb326-18"><a href="#cb326-18" tabindex="-1"></a>  gc_percentage <span class="ot">&lt;-</span> (gc_count <span class="sc">/</span> total_bases) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb326-19"><a href="#cb326-19" tabindex="-1"></a>  </span>
<span id="cb326-20"><a href="#cb326-20" tabindex="-1"></a>  gc_percentage <span class="ot">&lt;-</span> <span class="fu">round</span>(gc_percentage, <span class="dv">2</span>)</span>
<span id="cb326-21"><a href="#cb326-21" tabindex="-1"></a>  </span>
<span id="cb326-22"><a href="#cb326-22" tabindex="-1"></a>   <span class="co"># Calculate AT numbers</span></span>
<span id="cb326-23"><a href="#cb326-23" tabindex="-1"></a>  at_count <span class="ot">&lt;-</span> total_bases <span class="sc">-</span> gc_count</span>
<span id="cb326-24"><a href="#cb326-24" tabindex="-1"></a>  </span>
<span id="cb326-25"><a href="#cb326-25" tabindex="-1"></a>  <span class="co"># Calculate melting temp of sequence</span></span>
<span id="cb326-26"><a href="#cb326-26" tabindex="-1"></a>  melt_temp <span class="ot">&lt;-</span> (gc_count<span class="sc">*</span><span class="dv">4</span>) <span class="sc">+</span> (at_count<span class="sc">*</span><span class="dv">2</span>)</span>
<span id="cb326-27"><a href="#cb326-27" tabindex="-1"></a>  </span>
<span id="cb326-28"><a href="#cb326-28" tabindex="-1"></a>  </span>
<span id="cb326-29"><a href="#cb326-29" tabindex="-1"></a>  dna_content <span class="ot">&lt;-</span> <span class="fu">list</span>(gc_percentage, melt_temp)</span>
<span id="cb326-30"><a href="#cb326-30" tabindex="-1"></a>  <span class="fu">names</span>(dna_content) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;GC Percentage&quot;</span>, <span class="st">&quot;Melting temp (celsius)&quot;</span>)</span>
<span id="cb326-31"><a href="#cb326-31" tabindex="-1"></a>  </span>
<span id="cb326-32"><a href="#cb326-32" tabindex="-1"></a>  </span>
<span id="cb326-33"><a href="#cb326-33" tabindex="-1"></a>  <span class="fu">return</span>(dna_content)</span>
<span id="cb326-34"><a href="#cb326-34" tabindex="-1"></a>}</span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-67') </script>
</div>
</div>
</div>
</div>
</div>
<div id="simple-iteration" class="section level1" number="15">
<h1><span class="header-section-number">15</span> Simple iteration</h1>
<p>We’ve seen how to write a function and how they can be used to create concise re-usable operations that can be applied multiple times in a script without having to copy and paste, but where functions really come into their own is when combined with iteration. Iteration is the process of running the same operation on a group of objects, further minimising code replication.</p>
<p>Functional programming in R requires a good understanding of the types of data structure available in R. So make sure you remember the distinctions between vectors, lists, matrices and dataframes.</p>
<p>In the section below we will start with simple functions that allow you to replicate arguments</p>
<div id="rep" class="section level2" number="15.1">
<h2><span class="header-section-number">15.1</span> <code>rep()</code></h2>
<p>The function <code>rep()</code> lets you repeat the first argument a set number of times.</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="#cb327-1" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">5</span>)</span>
<span id="cb327-2"><a href="#cb327-2" tabindex="-1"></a></span>
<span id="cb327-3"><a href="#cb327-3" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span>), <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1] 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5
## [1] &quot;Adelie&quot;    &quot;Gentoo&quot;    &quot;Chinstrap&quot; &quot;Adelie&quot;    &quot;Gentoo&quot;    &quot;Chinstrap&quot;</code></pre>
<p>The default for the amount of repetition is <code>times =</code> it will print the entire vector start to finish THEN repeat.</p>
<p>If the second argument is a vector with the same number of elements as the <em>first</em> vector, then it will repeat to the specified values for each</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="#cb329-1" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span>), <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>))</span></code></pre></div>
<pre><code>## [1] &quot;Adelie&quot;    &quot;Adelie&quot;    &quot;Gentoo&quot;    &quot;Chinstrap&quot; &quot;Chinstrap&quot; &quot;Chinstrap&quot;</code></pre>
<p>Or if you use the argument <code>each</code> then it will rep all of the first element <em>first</em> followed by the second etc.</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="#cb331-1" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span>), <span class="at">each =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Adelie&quot;    &quot;Adelie&quot;    &quot;Adelie&quot;    &quot;Gentoo&quot;    &quot;Gentoo&quot;    &quot;Gentoo&quot;   
## [7] &quot;Chinstrap&quot; &quot;Chinstrap&quot; &quot;Chinstrap&quot;</code></pre>
<p>What do you think will happen if you set both times to 3 and each to 2?</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="#cb333-1" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span>), <span class="at">times =</span> <span class="dv">2</span>, <span class="at">each =</span> <span class="dv">3</span>)</span></code></pre></div>
<button id="displayTextunnamed-chunk-72" onclick="javascript:toggle(&#39;unnamed-chunk-72&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-72" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<pre><code>##  [1] &quot;Adelie&quot;    &quot;Adelie&quot;    &quot;Adelie&quot;    &quot;Gentoo&quot;    &quot;Gentoo&quot;    &quot;Gentoo&quot;   
##  [7] &quot;Chinstrap&quot; &quot;Chinstrap&quot; &quot;Chinstrap&quot; &quot;Adelie&quot;    &quot;Adelie&quot;    &quot;Adelie&quot;   
## [13] &quot;Gentoo&quot;    &quot;Gentoo&quot;    &quot;Gentoo&quot;    &quot;Chinstrap&quot; &quot;Chinstrap&quot; &quot;Chinstrap&quot;</code></pre>
</div>
</div>
</div>
</div>
<div id="seq" class="section level2" number="15.2">
<h2><span class="header-section-number">15.2</span> <code>seq()</code></h2>
<p>The function <code>seq()</code> is useful for generating a sequence of numbers with some pattern.</p>
<p>Use <code>seq()</code> to create a vector of the integers 0 to 10.</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="#cb335-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<p>This is initially very similar to just making a vector with</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="#cb337-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<p>But with <code>seq</code> we have extra functions. You can set the by argument to count by numbers other than 1 (the default). Use <code>seq()</code> to create a vector of the numbers 0 to 100 by 10s.</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="#cb339-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="at">by =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1]   0  10  20  30  40  50  60  70  80  90 100</code></pre>
<p>We also have the argument <code>length.out</code>, which is useful when you want to know how to many steps to divide something into</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="#cb341-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="at">length.out =</span> <span class="dv">12</span>)</span></code></pre></div>
<pre><code>##  [1]   0.000000   9.090909  18.181818  27.272727  36.363636  45.454545
##  [7]  54.545455  63.636364  72.727273  81.818182  90.909091 100.000000</code></pre>
</div>
<div id="replicate" class="section level2" number="15.3">
<h2><span class="header-section-number">15.3</span> <code>replicate()</code></h2>
<p>Replicate is our first example of a function whose purpose is to iterate <em>other</em> functions</p>
<p>For example the <code>rnorm</code> function generates numbers from a normal distribution.</p>
<p>Nesting this inside the <code>replicate()</code> function will repeat this command a specified number of times</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="#cb343-1" tabindex="-1"></a><span class="fu">replicate</span>(<span class="dv">3</span>, <span class="co"># times to replicate function</span></span>
<span id="cb343-2"><a href="#cb343-2" tabindex="-1"></a>          <span class="at">expr =</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">5</span>, </span>
<span id="cb343-3"><a href="#cb343-3" tabindex="-1"></a>                       <span class="at">mean =</span> <span class="dv">1</span>,</span>
<span id="cb343-4"><a href="#cb343-4" tabindex="-1"></a>                       <span class="at">sd =</span> <span class="dv">1</span>))</span></code></pre></div>
<pre><code>##             [,1]       [,2]      [,3]
## [1,]  0.15777458  1.4633883 0.3409807
## [2,]  1.32342825 -0.4650372 2.3607988
## [3,]  1.66379826  0.9914023 0.1729935
## [4,]  1.77568409 -0.7147539 1.3281941
## [5,] -0.03470096  1.6855677 1.1956467</code></pre>
<p><a href="https://www.r-bloggers.com/2023/07/the-replicate-function-in-r/" class="uri">https://www.r-bloggers.com/2023/07/the-replicate-function-in-r/</a></p>
<blockquote>
<p>Note the default behaviour for replicate is simplify = TRUE, where it will return the most compact data structure it can. When you set simplfy = FALSE it will return a list.</p>
</blockquote>
</div>
</div>
<div id="loops" class="section level1" number="16">
<h1><span class="header-section-number">16</span> Loops</h1>
<p>Loops are one of the staples of all programming languages, not just R, and can be a powerful tool; though we will see later there are a suite of alternative to loops in R.</p>
<p>For loops make it possible to repeat a set of instructions i times. For example, try the following:</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="#cb345-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){</span>
<span id="cb345-2"><a href="#cb345-2" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;hello&quot;</span>)</span>
<span id="cb345-3"><a href="#cb345-3" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;hello&quot;
## [1] &quot;hello&quot;
## [1] &quot;hello&quot;
## [1] &quot;hello&quot;
## [1] &quot;hello&quot;</code></pre>
<p>Or</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="#cb347-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) {</span>
<span id="cb347-2"><a href="#cb347-2" tabindex="-1"></a>  <span class="fu">print</span>(i<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb347-3"><a href="#cb347-3" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 2
## [1] 3
## [1] 4</code></pre>
<p>This is a dynamic piece of code where an index 'i' is iteratively replaced by each value in the vector 1:5.</p>
<p>Let's break it down. Since the first value in our sequence (1:3) is 1, the loop begins by substituting 'i' with 1 and executing everything within the curly braces {1+1}. Loops conventionally use 'i' as the counter, which is short for iteration. However, you are free to use any variable name you prefer:</p>
<p>so the first loop is essentially:</p>
<pre><code>i &lt;- 1 + 1
print(i)
</code></pre>
<p>Once this first iteration is complete, it loops back to the beginning and replaces i with the next value in our 1:3 sequence (2 in this case):</p>
<pre><code>i &lt;- 2 + 1
print(i)
</code></pre>
<p>This process is then repeated until the loop reaches the final value in the sequence</p>
<pre><code>for (i in 1:3) { # the SEQUENCE is defined (numbers 1 to 5) and loop is opened with &quot;{&quot;
  print(i + 1)    # The OPERATIONS (add 1 to each sequence number and print)
}                            # The loop is closed with &quot;}&quot;
</code></pre>
<div id="functions-in-for-loops" class="section level2" number="16.1">
<h2><span class="header-section-number">16.1</span> Functions in for loops</h2>
<p>Whilst above we have been using simple addition in the body of the loop, you can also combine loops with functions.</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="#cb352-1" tabindex="-1"></a><span class="co"># Define a function to calculate the square of a number</span></span>
<span id="cb352-2"><a href="#cb352-2" tabindex="-1"></a>square <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb352-3"><a href="#cb352-3" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">*</span> x)</span>
<span id="cb352-4"><a href="#cb352-4" tabindex="-1"></a>}</span>
<span id="cb352-5"><a href="#cb352-5" tabindex="-1"></a></span>
<span id="cb352-6"><a href="#cb352-6" tabindex="-1"></a><span class="co"># Use a for loop to calculate and print the squares of numbers from 1 to 5</span></span>
<span id="cb352-7"><a href="#cb352-7" tabindex="-1"></a><span class="cf">for</span> (num <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) { <span class="co"># Here I have replace i with num</span></span>
<span id="cb352-8"><a href="#cb352-8" tabindex="-1"></a>  result <span class="ot">&lt;-</span> <span class="fu">square</span>(num)</span>
<span id="cb352-9"><a href="#cb352-9" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;The square of&quot;</span>, num, <span class="st">&quot;is&quot;</span>, result, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb352-10"><a href="#cb352-10" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## The square of 1 is 1 
## The square of 2 is 4 
## The square of 3 is 9 
## The square of 4 is 16 
## The square of 5 is 25</code></pre>
</div>
<div id="for-loops-in-dataframes" class="section level2" number="16.2">
<h2><span class="header-section-number">16.2</span> For loops in dataframes</h2>
<p>Let's create a somewhat more intricate function. Initially, we generate a new tibble by creating four vectors, each consisting of 10 randomly generated numbers. These numbers are designed to be approximately centered around a mean of 0 with a standard deviation of 1. Afterward, we combine these vectors to form the final tibble.</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="#cb354-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb354-2"><a href="#cb354-2" tabindex="-1"></a></span>
<span id="cb354-3"><a href="#cb354-3" tabindex="-1"></a><span class="co"># a simple tibble</span></span>
<span id="cb354-4"><a href="#cb354-4" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb354-5"><a href="#cb354-5" tabindex="-1"></a>  <span class="at">a =</span>  <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb354-6"><a href="#cb354-6" tabindex="-1"></a>  <span class="at">b =</span>  <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb354-7"><a href="#cb354-7" tabindex="-1"></a>  <span class="at">c =</span>  <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb354-8"><a href="#cb354-8" tabindex="-1"></a>  <span class="at">d =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb354-9"><a href="#cb354-9" tabindex="-1"></a>  <span class="at">e =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb354-10"><a href="#cb354-10" tabindex="-1"></a>  <span class="at">f =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb354-11"><a href="#cb354-11" tabindex="-1"></a>  <span class="at">g =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb354-12"><a href="#cb354-12" tabindex="-1"></a>  <span class="at">h =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb354-13"><a href="#cb354-13" tabindex="-1"></a>)</span>
<span id="cb354-14"><a href="#cb354-14" tabindex="-1"></a></span>
<span id="cb354-15"><a href="#cb354-15" tabindex="-1"></a>df</span></code></pre></div>
<div class="kable-table">
<table>
<colgroup>
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">a</th>
<th align="right">b</th>
<th align="right">c</th>
<th align="right">d</th>
<th align="right">e</th>
<th align="right">f</th>
<th align="right">g</th>
<th align="right">h</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">-1.2070657</td>
<td align="right">-0.4771927</td>
<td align="right">0.1340882</td>
<td align="right">1.1022975</td>
<td align="right">1.4494963</td>
<td align="right">-1.8060313</td>
<td align="right">0.6565885</td>
<td align="right">0.0068928</td>
</tr>
<tr class="even">
<td align="right">0.2774292</td>
<td align="right">-0.9983864</td>
<td align="right">-0.4906859</td>
<td align="right">-0.4755931</td>
<td align="right">-1.0686427</td>
<td align="right">-0.5820759</td>
<td align="right">2.5489911</td>
<td align="right">-0.4554687</td>
</tr>
<tr class="odd">
<td align="right">1.0844412</td>
<td align="right">-0.7762539</td>
<td align="right">-0.4405479</td>
<td align="right">-0.7094400</td>
<td align="right">-0.8553646</td>
<td align="right">-1.1088896</td>
<td align="right">-0.0347604</td>
<td align="right">-0.3665239</td>
</tr>
<tr class="even">
<td align="right">-2.3456977</td>
<td align="right">0.0644588</td>
<td align="right">0.4595894</td>
<td align="right">-0.5012581</td>
<td align="right">-0.2806230</td>
<td align="right">-1.0149620</td>
<td align="right">-0.6696336</td>
<td align="right">0.6482866</td>
</tr>
<tr class="odd">
<td align="right">0.4291247</td>
<td align="right">0.9594941</td>
<td align="right">-0.6937202</td>
<td align="right">-1.6290935</td>
<td align="right">-0.9943401</td>
<td align="right">-0.1623095</td>
<td align="right">-0.0076048</td>
<td align="right">2.0702709</td>
</tr>
<tr class="even">
<td align="right">0.5060559</td>
<td align="right">-0.1102855</td>
<td align="right">-1.4482049</td>
<td align="right">-1.1676193</td>
<td align="right">-0.9685143</td>
<td align="right">0.5630558</td>
<td align="right">1.7770844</td>
<td align="right">-0.1533984</td>
</tr>
<tr class="odd">
<td align="right">-0.5747400</td>
<td align="right">-0.5110095</td>
<td align="right">0.5747557</td>
<td align="right">-2.1800396</td>
<td align="right">-1.1073182</td>
<td align="right">1.6478175</td>
<td align="right">-1.1386077</td>
<td align="right">-1.3907009</td>
</tr>
<tr class="even">
<td align="right">-0.5466319</td>
<td align="right">-0.9111954</td>
<td align="right">-1.0236557</td>
<td align="right">-1.3409932</td>
<td align="right">-1.2519859</td>
<td align="right">-0.7733534</td>
<td align="right">1.3678272</td>
<td align="right">-0.7235818</td>
</tr>
<tr class="odd">
<td align="right">-0.5644520</td>
<td align="right">-0.8371717</td>
<td align="right">-0.0151383</td>
<td align="right">-0.2942939</td>
<td align="right">-0.5238281</td>
<td align="right">1.6059096</td>
<td align="right">1.3295648</td>
<td align="right">0.2582618</td>
</tr>
<tr class="even">
<td align="right">-0.8900378</td>
<td align="right">2.4158352</td>
<td align="right">-0.9359486</td>
<td align="right">-0.4658975</td>
<td align="right">-0.4968500</td>
<td align="right">-1.1578085</td>
<td align="right">0.3364728</td>
<td align="right">-0.3170591</td>
</tr>
</tbody>
</table>
</div>
<p>Each vector is randomly generated so the actual averages will be slightly different, we can test that here:</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="#cb355-1" tabindex="-1"></a><span class="fu">mean</span>(df<span class="sc">$</span>a)</span>
<span id="cb355-2"><a href="#cb355-2" tabindex="-1"></a></span>
<span id="cb355-3"><a href="#cb355-3" tabindex="-1"></a><span class="fu">mean</span>(df<span class="sc">$</span>b)</span>
<span id="cb355-4"><a href="#cb355-4" tabindex="-1"></a></span>
<span id="cb355-5"><a href="#cb355-5" tabindex="-1"></a><span class="fu">mean</span>(df<span class="sc">$</span>c)</span>
<span id="cb355-6"><a href="#cb355-6" tabindex="-1"></a></span>
<span id="cb355-7"><a href="#cb355-7" tabindex="-1"></a><span class="fu">mean</span>(df<span class="sc">$</span>d)</span></code></pre></div>
<pre><code>## [1] -0.3831574
## [1] -0.1181707
## [1] -0.3879468
## [1] -0.7661931</code></pre>
<p>So the above code works, but it is repetitive, applying the same function again and again.</p>
<p>Below we have a simple for loop:</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="#cb357-1" tabindex="-1"></a><span class="co">#1. Having a predefined empty vector to receive the values is good practice, we will see why a bit later</span></span>
<span id="cb357-2"><a href="#cb357-2" tabindex="-1"></a></span>
<span id="cb357-3"><a href="#cb357-3" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="fu">ncol</span>(df)) <span class="co"># this will have four empty elements the same as the number of columns for the dataframe. The vector is set to receive numeric data</span></span></code></pre></div>
<p>Now we run our loop:</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="#cb358-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(df)) {            <span class="co"># 2. sequence - determines what to loop over </span></span>
<span id="cb358-2"><a href="#cb358-2" tabindex="-1"></a>  </span>
<span id="cb358-3"><a href="#cb358-3" tabindex="-1"></a>  output[[i]] <span class="ot">&lt;-</span> <span class="fu">mean</span>(df[[i]])      <span class="co"># 3. body - each time the loop runs it allocates a value to output, </span></span>
<span id="cb358-4"><a href="#cb358-4" tabindex="-1"></a>}</span>
<span id="cb358-5"><a href="#cb358-5" tabindex="-1"></a>output</span></code></pre></div>
<pre><code>## [1] -0.38315741 -0.11817071 -0.38794682 -0.76619306 -0.60979706 -0.27886474
## [7]  0.61659223 -0.04230209</code></pre>
<p>Each time the mean is calculate for one column in df this is then stored as an element in the previously empty output vector.</p>
<p><code>for()</code> loops are very useful for quickly iterating over a list, but because R prefers to store everything as a new object with each loop iteration, loops can become quite slow if they are complex, or running many processes and many iterations.</p>
</div>
<div id="speed" class="section level2" number="16.3">
<h2><span class="header-section-number">16.3</span> Speed</h2>
<p>We can wrap our function calls and iterations inside a few different functions to capture runspeed.</p>
<ol style="list-style-type: decimal">
<li>Use <code>system.time</code></li>
</ol>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="#cb360-1" tabindex="-1"></a><span class="fu">system.time</span>(<span class="cf">function</span>)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Use <code>microbenchmark</code> - this add on package runs a default of 100 evaluations, and comes with a handy ggplot1 integration for autoplotting.</li>
</ol>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="#cb361-1" tabindex="-1"></a>mm <span class="ot">&lt;-</span> <span class="fu">microbenchmark</span>(<span class="cf">function</span>)</span>
<span id="cb361-2"><a href="#cb361-2" tabindex="-1"></a></span>
<span id="cb361-3"><a href="#cb361-3" tabindex="-1"></a><span class="fu">autplot</span>(mm)</span></code></pre></div>
<div id="initialise-objects" class="section level3" number="16.3.1">
<h3><span class="header-section-number">16.3.1</span> Initialise objects</h3>
<p>Pre-allocating the output with the appropriate length before the loop avoids reallocation of memory inside the loop, which can be inefficient for large data. For example:</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="#cb362-1" tabindex="-1"></a>output2 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb362-2"><a href="#cb362-2" tabindex="-1"></a></span>
<span id="cb362-3"><a href="#cb362-3" tabindex="-1"></a>microbenchmark<span class="sc">::</span><span class="fu">microbenchmark</span>(</span>
<span id="cb362-4"><a href="#cb362-4" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(df)){             </span>
<span id="cb362-5"><a href="#cb362-5" tabindex="-1"></a>  </span>
<span id="cb362-6"><a href="#cb362-6" tabindex="-1"></a>  output2 <span class="ot">&lt;-</span> <span class="fu">c</span>(output2, <span class="fu">mean</span>(df[[i]])) <span class="co"># each new calculation is concatenated onto the end of the growing vector</span></span>
<span id="cb362-7"><a href="#cb362-7" tabindex="-1"></a>}</span>
<span id="cb362-8"><a href="#cb362-8" tabindex="-1"></a>)</span>
<span id="cb362-9"><a href="#cb362-9" tabindex="-1"></a>output2 <span class="co"># note because we did not predefine our vector length it continues to grow! </span></span></code></pre></div>
<p>Depending on your own computer processing power you may get different results - but here</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>Built inside loop</th>
<th>pre-initialised vector</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>min</td>
<td>2.38ms</td>
<td>2.29ms</td>
</tr>
<tr class="even">
<td>max</td>
<td>19.19ms</td>
<td>12.64ms</td>
</tr>
<tr class="odd">
<td>mean</td>
<td>3.4ms</td>
<td>2.55 ms</td>
</tr>
<tr class="even">
<td>median</td>
<td>2.71ms</td>
<td>2.42ms</td>
</tr>
</tbody>
</table>
</div>
<div id="simple-datatypes" class="section level3" number="16.3.2">
<h3><span class="header-section-number">16.3.2</span> simple datatypes</h3>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="#cb363-1" tabindex="-1"></a>df_list <span class="ot">&lt;-</span> <span class="fu">as.list</span>(df)</span>
<span id="cb363-2"><a href="#cb363-2" tabindex="-1"></a></span>
<span id="cb363-3"><a href="#cb363-3" tabindex="-1"></a></span>
<span id="cb363-4"><a href="#cb363-4" tabindex="-1"></a>microbenchmark<span class="sc">::</span><span class="fu">microbenchmark</span>( <span class="co"># check average processing time</span></span>
<span id="cb363-5"><a href="#cb363-5" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">length</span>(df_list)) {           </span>
<span id="cb363-6"><a href="#cb363-6" tabindex="-1"></a>  </span>
<span id="cb363-7"><a href="#cb363-7" tabindex="-1"></a>  output[[i]] <span class="ot">&lt;-</span> <span class="fu">mean</span>(df_list[[i]])      </span>
<span id="cb363-8"><a href="#cb363-8" tabindex="-1"></a>}</span>
<span id="cb363-9"><a href="#cb363-9" tabindex="-1"></a>)</span></code></pre></div>
<p>Depending on your own computer processing power you may get different results - but here</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>List</th>
<th>Tibble</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>min</td>
<td>1.92ms</td>
<td>2.38ms</td>
</tr>
<tr class="even">
<td>max</td>
<td>12.6ms</td>
<td>19.19ms</td>
</tr>
<tr class="odd">
<td>mean</td>
<td>2.53ms</td>
<td>2.55 ms</td>
</tr>
<tr class="even">
<td>median</td>
<td>2.41ms</td>
<td>2.42ms</td>
</tr>
</tbody>
</table>
</div>
<div id="visualise-speed" class="section level3" number="16.3.3">
<h3><span class="header-section-number">16.3.3</span> Visualise speed</h3>
<p>The <code>microbenchmark</code> package has some other useful features including the ability to run multiple functions for comparison simultaneously and with integration with ggplot2 we can plot these results</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="#cb364-1" tabindex="-1"></a>output_vector <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="fu">ncol</span>(df))</span>
<span id="cb364-2"><a href="#cb364-2" tabindex="-1"></a>output_list <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="fu">ncol</span>(df))</span>
<span id="cb364-3"><a href="#cb364-3" tabindex="-1"></a>new_output_vector <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb364-4"><a href="#cb364-4" tabindex="-1"></a>new_output_vector2 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb364-5"><a href="#cb364-5" tabindex="-1"></a></span>
<span id="cb364-6"><a href="#cb364-6" tabindex="-1"></a></span>
<span id="cb364-7"><a href="#cb364-7" tabindex="-1"></a>mbm <span class="ot">&lt;-</span> microbenchmark<span class="sc">::</span><span class="fu">microbenchmark</span>(</span>
<span id="cb364-8"><a href="#cb364-8" tabindex="-1"></a><span class="at">df_input_vector_output =</span> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(df)) {</span>
<span id="cb364-9"><a href="#cb364-9" tabindex="-1"></a>  output_vector[[i]] <span class="ot">&lt;-</span> <span class="fu">mean</span>(df[[i]]) </span>
<span id="cb364-10"><a href="#cb364-10" tabindex="-1"></a>}, </span>
<span id="cb364-11"><a href="#cb364-11" tabindex="-1"></a><span class="at">list_input_vector_output =</span> <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">length</span>(df_list)) {           </span>
<span id="cb364-12"><a href="#cb364-12" tabindex="-1"></a>    output_vector[[i]] <span class="ot">&lt;-</span> <span class="fu">mean</span>(df_list[[i]])      </span>
<span id="cb364-13"><a href="#cb364-13" tabindex="-1"></a>}, </span>
<span id="cb364-14"><a href="#cb364-14" tabindex="-1"></a><span class="at">df_input_build_vector =</span>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(df)){             </span>
<span id="cb364-15"><a href="#cb364-15" tabindex="-1"></a>    </span>
<span id="cb364-16"><a href="#cb364-16" tabindex="-1"></a>    new_output_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(new_output_vector, <span class="fu">mean</span>(df[[i]])) <span class="co"># each new calculation is concatenated onto the end of the growing vector</span></span>
<span id="cb364-17"><a href="#cb364-17" tabindex="-1"></a>}, </span>
<span id="cb364-18"><a href="#cb364-18" tabindex="-1"></a><span class="at">list_input_build_vector =</span> <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(df_list)){             </span>
<span id="cb364-19"><a href="#cb364-19" tabindex="-1"></a>    </span>
<span id="cb364-20"><a href="#cb364-20" tabindex="-1"></a>   new_output_vector2 <span class="ot">&lt;-</span> <span class="fu">c</span>(new_output_vector2, <span class="fu">mean</span>(df[[i]])) <span class="co"># each new calculation is concatenated onto the end of the growing vector</span></span>
<span id="cb364-21"><a href="#cb364-21" tabindex="-1"></a>}</span>
<span id="cb364-22"><a href="#cb364-22" tabindex="-1"></a>)</span>
<span id="cb364-23"><a href="#cb364-23" tabindex="-1"></a></span>
<span id="cb364-24"><a href="#cb364-24" tabindex="-1"></a>mbm</span></code></pre></div>
<pre><code>Unit: milliseconds
                     expr      min       lq     mean   median       uq      max neval
   df_input_vector_output 2.295303 2.401428 2.617219 2.447673 2.556309 12.36447   100
 list_input_vector_output 1.877293 1.946628 2.135324 1.997003 2.071233 12.31188   100
    df_input_build_vector 2.351764 2.411968 2.604022 2.455673 2.531924 13.46052   100
  list_input_build_vector 2.204953 2.297524 2.691931 2.351203 2.419803 12.77457   100
</code></pre>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="#cb366-1" tabindex="-1"></a><span class="fu">autoplot</span>(mbm)</span></code></pre></div>
<p><img src="04-functional-programming_files/figure-html/unnamed-chunk-93-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="do-as-little-as-possible-inside-a-loop" class="section level3" number="16.3.4">
<h3><span class="header-section-number">16.3.4</span> Do as little as possible inside a loop</h3>
<p>R is an interpreted language every thing you write inside a loop runs multiple times. The best thing you can do is to be parsimonious while writing code inside a loop. There are a number of steps that you can do to speed up a loop a bit more.</p>
<ul>
<li><p>Calculate results before the loop</p></li>
<li><p>Initialize objects before the loop</p></li>
<li><p>Iterate on as few numbers as possible</p></li>
<li><p>Write as few functions inside a loop as possible</p></li>
</ul>
<p>The main tip is to <em>Get out of loop</em> as quickly as possible.</p>
<p>See also <a href="https://bookdown.org/csgillespie/efficientR/programming.html#top-5-tips-for-efficient-programming" class="uri">https://bookdown.org/csgillespie/efficientR/programming.html#top-5-tips-for-efficient-programming</a></p>
</div>
</div>
<div id="exercise-1" class="section level2" number="16.4">
<h2><span class="header-section-number">16.4</span> Exercise</h2>
<p>This section for the workshop provides a real world example using iterations to create graphs of population trends from the <a href="https://www.livingplanetindex.org/">Living Planet Index</a> for a number of vertebrate species from 1970 to 2014.</p>
<p>The data can be collected here:</p>
<a href="https://raw.githubusercontent.com/UEABIO/data-sci-v1/main/book/files/LPI_data_loops.csv">
<button class="btn btn-success"><i class="fa fa-save"></i> Download LPI data as csv</button>
</a>
<ol style="list-style-type: decimal">
<li>Can you make four plots using lists and for loops? For this exercise can you make a list of four
species based on the column <code>Common.Name</code>, House sparrow, Great tit, Corn bunting and Meadow pipit then loop down this to make four plots?</li>
</ol>
<button id="displayTextunnamed-chunk-95" onclick="javascript:toggle(&#39;unnamed-chunk-95&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-95" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="#cb367-1" tabindex="-1"></a><span class="co"># Method 1</span></span>
<span id="cb367-2"><a href="#cb367-2" tabindex="-1"></a>species_to_filter <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;House sparrow&quot;</span>, <span class="st">&quot;Great tit&quot;</span>, <span class="st">&quot;Corn bunting&quot;</span>, <span class="st">&quot;Meadow pipit&quot;</span>)</span>
<span id="cb367-3"><a href="#cb367-3" tabindex="-1"></a></span>
<span id="cb367-4"><a href="#cb367-4" tabindex="-1"></a>filtered_data <span class="ot">&lt;-</span> <span class="fu">filter</span>(LPI_UK, Common.Name <span class="sc">%in%</span> species_to_filter)</span>
<span id="cb367-5"><a href="#cb367-5" tabindex="-1"></a></span>
<span id="cb367-6"><a href="#cb367-6" tabindex="-1"></a>sp_list <span class="ot">&lt;-</span> <span class="fu">split</span>(filtered_data, filtered_data<span class="sc">$</span>Common.Name)</span>
<span id="cb367-7"><a href="#cb367-7" tabindex="-1"></a></span>
<span id="cb367-8"><a href="#cb367-8" tabindex="-1"></a><span class="co"># Method 2</span></span>
<span id="cb367-9"><a href="#cb367-9" tabindex="-1"></a></span>
<span id="cb367-10"><a href="#cb367-10" tabindex="-1"></a></span>
<span id="cb367-11"><a href="#cb367-11" tabindex="-1"></a></span>
<span id="cb367-12"><a href="#cb367-12" tabindex="-1"></a>house_sparrow <span class="ot">&lt;-</span> <span class="fu">filter</span>(LPI_UK, Common.Name <span class="sc">==</span> <span class="st">&quot;House sparrow&quot;</span>)</span>
<span id="cb367-13"><a href="#cb367-13" tabindex="-1"></a>great_tit <span class="ot">&lt;-</span> <span class="fu">filter</span>(LPI_UK, Common.Name <span class="sc">==</span> <span class="st">&quot;Great tit&quot;</span>)</span>
<span id="cb367-14"><a href="#cb367-14" tabindex="-1"></a>corn_bunting <span class="ot">&lt;-</span> <span class="fu">filter</span>(LPI_UK, Common.Name <span class="sc">==</span> <span class="st">&quot;Corn bunting&quot;</span>)</span>
<span id="cb367-15"><a href="#cb367-15" tabindex="-1"></a>meadow_pipit <span class="ot">&lt;-</span> <span class="fu">filter</span>(LPI_UK, Common.Name <span class="sc">==</span> <span class="st">&quot;Meadow pipit&quot;</span>)</span>
<span id="cb367-16"><a href="#cb367-16" tabindex="-1"></a></span>
<span id="cb367-17"><a href="#cb367-17" tabindex="-1"></a>sp_list <span class="ot">&lt;-</span> <span class="fu">list</span>(house_sparrow, great_tit, corn_bunting, meadow_pipit)</span>
<span id="cb367-18"><a href="#cb367-18" tabindex="-1"></a></span>
<span id="cb367-19"><a href="#cb367-19" tabindex="-1"></a>my_list <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="dv">4</span>)</span>
<span id="cb367-20"><a href="#cb367-20" tabindex="-1"></a></span>
<span id="cb367-21"><a href="#cb367-21" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(sp_list)) {                                    </span>
<span id="cb367-22"><a href="#cb367-22" tabindex="-1"></a>  <span class="co"># For every item along the length of Sp_list we want R to perform the following functions</span></span>
<span id="cb367-23"><a href="#cb367-23" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(sp_list[[i]])                               </span>
<span id="cb367-24"><a href="#cb367-24" tabindex="-1"></a>  <span class="co"># Create a dataframe for each species</span></span>
<span id="cb367-25"><a href="#cb367-25" tabindex="-1"></a>  sp.name <span class="ot">&lt;-</span> <span class="fu">unique</span>(data<span class="sc">$</span>Common.Name)                             </span>
<span id="cb367-26"><a href="#cb367-26" tabindex="-1"></a>  <span class="co"># Create an object that holds the species name, so that we can title each graph</span></span>
<span id="cb367-27"><a href="#cb367-27" tabindex="-1"></a>  plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span> (<span class="at">x =</span> year, <span class="at">y =</span> abundance)) <span class="sc">+</span>               </span>
<span id="cb367-28"><a href="#cb367-28" tabindex="-1"></a>    <span class="co"># Make the plots and add our customised theme</span></span>
<span id="cb367-29"><a href="#cb367-29" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">colour =</span> <span class="st">&quot;#00868B&quot;</span>) <span class="sc">+</span>                              </span>
<span id="cb367-30"><a href="#cb367-30" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">colour =</span> <span class="st">&quot;#00868B&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;#00868B&quot;</span>) <span class="sc">+</span>        </span>
<span id="cb367-31"><a href="#cb367-31" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb367-32"><a href="#cb367-32" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Abundance</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">title =</span> sp.name)</span>
<span id="cb367-33"><a href="#cb367-33" tabindex="-1"></a> </span>
<span id="cb367-34"><a href="#cb367-34" tabindex="-1"></a>   <span class="co"># makes a list of all the plots generates</span></span>
<span id="cb367-35"><a href="#cb367-35" tabindex="-1"></a>  my_plots[[i]] <span class="ot">&lt;-</span> plot </span>
<span id="cb367-36"><a href="#cb367-36" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
<div id="apply" class="section level1" number="17">
<h1><span class="header-section-number">17</span> Apply</h1>
<p>We can recreate the output from our loops in the previous chapter with the <code>apply</code> function in R.</p>
<p>The apply functions can be an alternative to writing for loops. The general idea is to apply (or map) a function to each element of an object. For example, you can apply a function to each row or column of a matrix.</p>
<p>Each function takes at least two arguments: an object and another function. The function is passed as an argument.</p>
<p>Every apply function has the dots, ..., argument that is used to pass on arguments to the function that is given as an argument.</p>
<p>Using apply functions when possible, can lead to shorter, more succinct R code. In this section, we will cover the three main functions, <code>apply()</code>, <code>lapply()</code>, and <code>sapply()</code>.</p>
<ul>
<li><p><code>lapply()</code>: Loop over a list and evaluate a function on each element</p></li>
<li><p><code>sapply()</code>: Same as lapply but try to simplify the result</p></li>
<li><p><code>apply()</code>: Apply a function over the margins of an array</p></li>
</ul>
<p>It is (I think) important to not that the apply family is still looping - but the actual looping is done internally in C code for efficiency reasons. Apply functions are loops under the hood and they are meant for convenience not for speed.</p>
<div id="lapply" class="section level2" number="17.1">
<h2><span class="header-section-number">17.1</span> lapply</h2>
<p>The <code>lapply()</code> function does the following simple series of operations:</p>
<p>it loops over a list, vector or dataframe, iterating over each element in turn</p>
<p>it applies a function to each element of the list (a function that you specify)</p>
<p>it always returns a list (the l is for “list”).</p>
<pre><code>&gt; lapply
function (X, FUN, ...) 
{
    FUN &lt;- match.fun(FUN)
    if (!is.vector(X) || is.object(X)) 
        X &lt;- as.list(X)
    .Internal(lapply(X, FUN))
}
&lt;bytecode: 0x7f79498e5528&gt;
&lt;environment: namespace:base&gt;
</code></pre>
<p>We can see the operation of an <code>lapply()</code> function here:</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="#cb369-1" tabindex="-1"></a><span class="fu">lapply</span>(df_list, mean)</span></code></pre></div>
<p>Notice that here we are passing the <code>mean()</code> function as an argument to the <code>lapply()</code> function. Functions in R can be used this way and can be passed back and forth as arguments just like any other object. When you pass a function to another function, you do not need to include the open and closed parentheses.</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="#cb370-1" tabindex="-1"></a>empty_list <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(df_list))</span>
<span id="cb370-2"><a href="#cb370-2" tabindex="-1"></a></span>
<span id="cb370-3"><a href="#cb370-3" tabindex="-1"></a></span>
<span id="cb370-4"><a href="#cb370-4" tabindex="-1"></a>microbenchmark<span class="sc">::</span><span class="fu">microbenchmark</span>(</span>
<span id="cb370-5"><a href="#cb370-5" tabindex="-1"></a> </span>
<span id="cb370-6"><a href="#cb370-6" tabindex="-1"></a>  <span class="at">forloop =</span> <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">length</span>(df_list)) {           </span>
<span id="cb370-7"><a href="#cb370-7" tabindex="-1"></a>  </span>
<span id="cb370-8"><a href="#cb370-8" tabindex="-1"></a>  empty_list[[i]] <span class="ot">&lt;-</span> <span class="fu">mean</span>(df_list[[i]])      </span>
<span id="cb370-9"><a href="#cb370-9" tabindex="-1"></a>  },</span>
<span id="cb370-10"><a href="#cb370-10" tabindex="-1"></a> <span class="at">apply =</span> <span class="fu">lapply</span>(df_list, mean)</span>
<span id="cb370-11"><a href="#cb370-11" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>Unit: microseconds
    expr      min        lq       mean    median       uq      max neval
 forloop 1908.053 1981.7625 2341.55928 2038.9475 2119.488 11949.11   100
   apply   23.531   24.8655   29.73571   27.9205   30.050   119.41   100
</code></pre>
<p>As well as being slightly faster than the <code>for()</code> loop, arguably, <code>lapply</code> is also easier to read.</p>
<div id="run-lapply-with-additional-arguments" class="section level3" number="17.1.1">
<h3><span class="header-section-number">17.1.1</span> Run lapply with additional arguments</h3>
<p>The first argument of <code>lapply()</code> gives the list object to be iterated over.
The second argument defines an anonymous function.</p>
<div id="functions-with-lapply" class="section level4" number="17.1.1.1">
<h4><span class="header-section-number">17.1.1.1</span> Functions with <code>lapply</code></h4>
<p>In this example we define the list to run a function over <code>numbers</code>, then write our function as normal. Defined like this it is what we call an <strong>anonymous function</strong>, it has no name and cannot be used outside of this <code>lapply</code> function.</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="#cb372-1" tabindex="-1"></a><span class="co"># Create a list of numbers</span></span>
<span id="cb372-2"><a href="#cb372-2" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb372-3"><a href="#cb372-3" tabindex="-1"></a></span>
<span id="cb372-4"><a href="#cb372-4" tabindex="-1"></a></span>
<span id="cb372-5"><a href="#cb372-5" tabindex="-1"></a><span class="co"># Use lapply to add 10 to each number in the list</span></span>
<span id="cb372-6"><a href="#cb372-6" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">lapply</span>(numbers, <span class="cf">function</span>(x){</span>
<span id="cb372-7"><a href="#cb372-7" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">+</span> <span class="dv">10</span>)</span>
<span id="cb372-8"><a href="#cb372-8" tabindex="-1"></a>})</span>
<span id="cb372-9"><a href="#cb372-9" tabindex="-1"></a></span>
<span id="cb372-10"><a href="#cb372-10" tabindex="-1"></a><span class="co"># Print the result</span></span>
<span id="cb372-11"><a href="#cb372-11" tabindex="-1"></a><span class="fu">print</span>(result)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 11
## 
## [[2]]
## [1] 12
## 
## [[3]]
## [1] 13
## 
## [[4]]
## [1] 14
## 
## [[5]]
## [1] 15</code></pre>
</div>
<div id="using-existing-functions-in-lapply" class="section level4" number="17.1.1.2">
<h4><span class="header-section-number">17.1.1.2</span> Using existing functions in <code>lapply</code></h4>
<p>In this example we write a named function. Notice how we don't have to use curly brackets or an anonymous function, instead, we just passed <code>mean</code>add_value<code>as the second argument of</code>lapply()`. I also supply any necessary arguments required by the function by specifying it afterwards.</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="#cb374-1" tabindex="-1"></a><span class="co"># Create a list of numbers</span></span>
<span id="cb374-2"><a href="#cb374-2" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb374-3"><a href="#cb374-3" tabindex="-1"></a></span>
<span id="cb374-4"><a href="#cb374-4" tabindex="-1"></a><span class="co"># Define a custom function that adds a given value to each number</span></span>
<span id="cb374-5"><a href="#cb374-5" tabindex="-1"></a>add_value <span class="ot">&lt;-</span> <span class="cf">function</span>(x, value) {</span>
<span id="cb374-6"><a href="#cb374-6" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">+</span> value)</span>
<span id="cb374-7"><a href="#cb374-7" tabindex="-1"></a>}</span>
<span id="cb374-8"><a href="#cb374-8" tabindex="-1"></a></span>
<span id="cb374-9"><a href="#cb374-9" tabindex="-1"></a><span class="co"># Use lapply to add 10 to each number in the list</span></span>
<span id="cb374-10"><a href="#cb374-10" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">lapply</span>(numbers, add_value, <span class="at">value =</span> <span class="dv">10</span>)</span>
<span id="cb374-11"><a href="#cb374-11" tabindex="-1"></a></span>
<span id="cb374-12"><a href="#cb374-12" tabindex="-1"></a><span class="co"># Print the result</span></span>
<span id="cb374-13"><a href="#cb374-13" tabindex="-1"></a><span class="fu">print</span>(result)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 11
## 
## [[2]]
## [1] 12
## 
## [[3]]
## [1] 13
## 
## [[4]]
## [1] 14
## 
## [[5]]
## [1] 15</code></pre>
</div>
</div>
</div>
<div id="sapply" class="section level2" number="17.2">
<h2><span class="header-section-number">17.2</span> sapply</h2>
<p>The <code>sapply()</code> function behaves similarly to <code>lapply()</code>; the only real difference is in the return value. <code>sapply()</code> will try to simplify the result of <code>lapply()</code> if possible. Essentially, <code>sapply()</code> calls <code>lapply()</code> on its input and then applies the following algorithm:</p>
<ul>
<li><p>If the result is a list where every element is length 1, then a vector is returned</p></li>
<li><p>If the result is a list where every element is a vector of the same length (&gt; 1), a matrix is returned.</p></li>
<li><p>If it can’t figure things out, a list is returned.</p></li>
</ul>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="#cb376-1" tabindex="-1"></a><span class="fu">sapply</span>(df_list, mean)</span></code></pre></div>
<pre><code>##           a           b           c           d           e           f 
## -0.38315741 -0.11817071 -0.38794682 -0.76619306 -0.60979706 -0.27886474 
##           g           h 
##  0.61659223 -0.04230209</code></pre>
<p>Notice that here <code>sapply()</code> returns a vector as each element had length of 1.</p>
</div>
<div id="apply-1" class="section level2" number="17.3">
<h2><span class="header-section-number">17.3</span> apply</h2>
<p>The <code>apply()</code> function is used to a evaluate a function (often an anonymous one) over an array. It is most often used to apply a function to the rows or columns of a matrix or dataframe, in fact this function <em>cannot</em> be used on a list. Using <code>apply()</code> is often not really faster than writing a loop, but it works in one line and is highly compact.</p>
<p>MARGIN = 1 means apply function over rows</p>
<p>MARGIN = 2 means apply function over columns</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="#cb378-1" tabindex="-1"></a><span class="fu">apply</span>(df, <span class="at">MARGIN =</span> <span class="dv">1</span>, mean)</span></code></pre></div>
<pre><code>##  [1] -0.017615796 -0.155554062 -0.400917401 -0.454979941 -0.003522308
##  [6] -0.125228280 -0.584980350 -0.650446262  0.119856528 -0.188911702</code></pre>
<ul>
<li><p>If the result is a list where every element is length 1, then a vector is returned</p></li>
<li><p>If the result is a list where every element is a vector of the same length (&gt; 1), a matrix is returned.</p></li>
</ul>
<div id="summary-of-apply-functions" class="section level3" number="17.3.1">
<h3><span class="header-section-number">17.3.1</span> summary of apply functions</h3>
<table>
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Arguments</th>
<th>Objective</th>
<th>Input</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>apply</td>
<td>apply(X, MARGIN, FUN)</td>
<td>Apply a function to the rows, columns or both</td>
<td>Dataframe or matrix</td>
<td>vector, list or matrix</td>
</tr>
<tr class="even">
<td>lapply</td>
<td>lapply(X,FUN)</td>
<td>Apply a function to all the elements of the input</td>
<td>List, vector or dataframe</td>
<td>list</td>
</tr>
<tr class="odd">
<td>sapply</td>
<td>sapply(X,FUN)</td>
<td>Apply a function to all the elements of the input</td>
<td>List, vector or dataframe</td>
<td>vector or matrix</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="exercise-2" class="section level2" number="17.4">
<h2><span class="header-section-number">17.4</span> Exercise</h2>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Make a function that converts values with a normal distribution into their z scores
</div>
</div>
<p><a href="https://en.wikipedia.org/wiki/Standard_score">Z-scores</a></p>
<p><img src="images/z-score.png" width="50%" style="display: block; margin: auto;" /></p>
<button id="displayTextunnamed-chunk-105" onclick="javascript:toggle(&#39;unnamed-chunk-105&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-105" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="#cb380-1" tabindex="-1"></a>z_score <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb380-2"><a href="#cb380-2" tabindex="-1"></a>    (x <span class="sc">-</span> <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">/</span>  </span>
<span id="cb380-3"><a href="#cb380-3" tabindex="-1"></a>        <span class="fu">sd</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb380-4"><a href="#cb380-4" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Choose the appropriate apply function to calculate a matrix of z-scores for the dataframe <code>df</code>
</div>
</div>
<button id="displayTextunnamed-chunk-107" onclick="javascript:toggle(&#39;unnamed-chunk-107&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-107" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<p>apply(df, MARGIN = 2, z_score)</p>
</div>
</div>
</div>
</div>
</div>
<div id="purrr" class="section level1" number="18">
<h1><span class="header-section-number">18</span> Purrr</h1>
<p>The <code>purrr::map()</code> family of functions are the tidyverse equivalent of <code>apply</code></p>
<p>The base equivalent to <code>map()</code> is <code>lapply()</code>. The only difference is that <code>lapply()</code> does not support the helpers that you’ll learn about below, so if you’re only using <code>map()</code> from purrr, you can skip the additional dependency and use <code>lapply()</code> directly.</p>
<p>The basic syntax is map(<code>.x</code> = SEQUENCE, <code>.f</code> = FUNCTION, OTHER ARGUMENTS). In a bit more detail:</p>
<ul>
<li><p><code>.x</code> = are the inputs upon which the .f function will be iteratively applied - e.g. a vector of jurisdiction names, columns in a data frame, or a list of data frames</p></li>
<li><p><code>.f</code> = is the function to apply to each element of the .x input - it could be a function like print() that already exists, or a custom function that you define. The function is often written after a tilde ~ (details below).
A few more notes on syntax:</p></li>
<li><p>If the function needs no further arguments specified, it can be written with no parentheses and no tilde (e.g. <code>.f = mean</code>).</p></li>
<li><p>You can use <code>.x</code> (or simply <code>.</code>) within the <code>.f = function</code> as a placeholder for the <code>.x</code> value of that iteration</p></li>
</ul>
<p><img src="images/map-step-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p><strong>The output of using<code>map()</code> is a list</strong> - a list is an object class like a vector but whose elements can be of different classes. So, a list produced by <code>map()</code> could contain many data frames, or many vectors, many single values, or even many lists! There are alternative versions of <code>map()</code> explained below that produce other types of outputs (e.g. <code>map_dfr()</code> to produce a data frame, <code>map_chr()</code> to produce character vectors, and <code>map_dbl()</code> to produce numeric vectors).</p>
<p>Basic <code>map()</code> will <em>always</em> return a <code>list</code>, other variants return different data types.Unlike <code>apply</code>, <code>map</code> will ONLY return one type of data, removing the potential for changing data types that occasionally happens when using <code>apply</code>.</p>
<div id="example" class="section level2" number="18.1">
<h2><span class="header-section-number">18.1</span> Example</h2>
<div class="tab">
<button class="tablinksunnamed-chunk-109 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-109&#39;, &#39;unnamed-chunk-109&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-109" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-109&#39;, &#39;unnamed-chunk-109&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-109" class="tabcontentunnamed-chunk-109">
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="#cb381-1" tabindex="-1"></a><span class="fu">lapply</span>(df_list, mean)</span></code></pre></div>
</div>
<div id="option2unnamed-chunk-109" class="tabcontentunnamed-chunk-109">
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="#cb382-1" tabindex="-1"></a><span class="fu">map</span>(<span class="at">.x =</span> df_list, <span class="at">.f =</span> mean)</span>
<span id="cb382-2"><a href="#cb382-2" tabindex="-1"></a></span>
<span id="cb382-3"><a href="#cb382-3" tabindex="-1"></a><span class="fu">map</span>(df_list, mean)</span></code></pre></div>
</div>
<script> javascript:hide('option2unnamed-chunk-109') </script>
</div>
<div id="more-maps" class="section level2" number="18.2">
<h2><span class="header-section-number">18.2</span> more maps</h2>
<p><code>map()</code> always returns a list, which makes it the most general of the map family because you can put anything in a list. But it is inconvenient to return a list when a simpler data structure would do, so there are four more specific variants: <code>map_lgl()</code>, <code>map_int()</code>, <code>map_dbl()</code>, and <code>map_chr()</code>. Each returns an atomic vector of the specified type:</p>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>Data type returned</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>map_lgl()</code></td>
<td>returns a logical</td>
</tr>
<tr class="even">
<td><code>map_int()</code></td>
<td>returns an integer vector</td>
</tr>
<tr class="odd">
<td><code>map_dbl()</code></td>
<td>returns a double vector</td>
</tr>
<tr class="even">
<td><code>map_chr()</code></td>
<td>returns a character vector</td>
</tr>
<tr class="odd">
<td><code>map_df()</code></td>
<td>returns a data frame/tibble</td>
</tr>
</tbody>
</table>
<p><img src="images/map_df.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="info">
<p>
These specialized map functions are “type-safe” and will fail with
incorrect return type.
</p>
<p>
This is safer than using functions like sapply() which tries to
simplify results and could return a list, vector or matrix depending on
input.
</p>
</div>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="#cb383-1" tabindex="-1"></a><span class="co"># map lgl always returns a logical vector</span></span>
<span id="cb383-2"><a href="#cb383-2" tabindex="-1"></a><span class="fu">map_lgl</span>(df_list, is.double)</span>
<span id="cb383-3"><a href="#cb383-3" tabindex="-1"></a><span class="co">#   a    b    c    d    e    f    g    h </span></span>
<span id="cb383-4"><a href="#cb383-4" tabindex="-1"></a><span class="co"># TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</span></span>
<span id="cb383-5"><a href="#cb383-5" tabindex="-1"></a></span>
<span id="cb383-6"><a href="#cb383-6" tabindex="-1"></a></span>
<span id="cb383-7"><a href="#cb383-7" tabindex="-1"></a><span class="co"># map_dbl always returns a double vector</span></span>
<span id="cb383-8"><a href="#cb383-8" tabindex="-1"></a><span class="fu">map_dbl</span>(df_list, mean)</span>
<span id="cb383-9"><a href="#cb383-9" tabindex="-1"></a><span class="co">#          a           b           c           d           e           f           g           h </span></span>
<span id="cb383-10"><a href="#cb383-10" tabindex="-1"></a><span class="co"># -0.38315741 -0.11817071 -0.38794682 -0.76619306 -0.60979706 -0.27886474  0.61659223 -0.04230209 </span></span>
<span id="cb383-11"><a href="#cb383-11" tabindex="-1"></a></span>
<span id="cb383-12"><a href="#cb383-12" tabindex="-1"></a><span class="co"># map_int always returns an integer vector</span></span>
<span id="cb383-13"><a href="#cb383-13" tabindex="-1"></a><span class="fu">map_int</span>(df_list, <span class="sc">~</span>.x <span class="sc">|&gt;</span>  <span class="fu">mean</span>() <span class="sc">|&gt;</span> <span class="fu">round</span>())</span>
<span id="cb383-14"><a href="#cb383-14" tabindex="-1"></a><span class="co"># a  b  c  d  e  f  g  h </span></span>
<span id="cb383-15"><a href="#cb383-15" tabindex="-1"></a><span class="co"># 0  0  0 -1 -1  0  1  0 </span></span>
<span id="cb383-16"><a href="#cb383-16" tabindex="-1"></a></span>
<span id="cb383-17"><a href="#cb383-17" tabindex="-1"></a><span class="co"># map_int always returns an integer vector - note this comes with a deprecated coercion warning - use as.character()</span></span>
<span id="cb383-18"><a href="#cb383-18" tabindex="-1"></a> <span class="fu">map_chr</span>(df_list, mean)</span>
<span id="cb383-19"><a href="#cb383-19" tabindex="-1"></a><span class="co">#          a           b           c           d           e           f           g           h </span></span>
<span id="cb383-20"><a href="#cb383-20" tabindex="-1"></a><span class="co">#&quot;-0.383157&quot; &quot;-0.118171&quot; &quot;-0.387947&quot; &quot;-0.766193&quot; &quot;-0.609797&quot; &quot;-0.278865&quot;  &quot;0.616592&quot; &quot;-0.042302&quot; </span></span>
<span id="cb383-21"><a href="#cb383-21" tabindex="-1"></a> </span>
<span id="cb383-22"><a href="#cb383-22" tabindex="-1"></a><span class="co"># map_df always returns a dataframe </span></span>
<span id="cb383-23"><a href="#cb383-23" tabindex="-1"></a> <span class="fu">map_df</span>(df_list, mean)</span>
<span id="cb383-24"><a href="#cb383-24" tabindex="-1"></a><span class="co">#       a      b      c      d      e      f     g       h</span></span>
<span id="cb383-25"><a href="#cb383-25" tabindex="-1"></a><span class="co">#   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb383-26"><a href="#cb383-26" tabindex="-1"></a><span class="co">#   1 -0.383 -0.118 -0.388 -0.766 -0.610 -0.279 0.617 -0.0423</span></span></code></pre></div>
<p>purrr uses the convention that suffixes, like <code>_dbl()</code>, refer to the output. All <code>map_*()</code> functions can take any type of vector as input.</p>
</div>
<div id="anonymous-functions" class="section level2" number="18.3">
<h2><span class="header-section-number">18.3</span> Anonymous functions</h2>
<p>There are multiple ways of structuring a <code>map()</code> call</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="#cb384-1" tabindex="-1"></a><span class="fu">map</span>(df_list, mean)</span>
<span id="cb384-2"><a href="#cb384-2" tabindex="-1"></a></span>
<span id="cb384-3"><a href="#cb384-3" tabindex="-1"></a>df_list <span class="sc">|&gt;</span>  </span>
<span id="cb384-4"><a href="#cb384-4" tabindex="-1"></a>  <span class="fu">map</span>(mean)</span>
<span id="cb384-5"><a href="#cb384-5" tabindex="-1"></a></span>
<span id="cb384-6"><a href="#cb384-6" tabindex="-1"></a>df_list <span class="sc">|&gt;</span> </span>
<span id="cb384-7"><a href="#cb384-7" tabindex="-1"></a>    <span class="fu">map</span>(<span class="sc">~</span><span class="fu">mean</span>(.))</span></code></pre></div>
<div id="whats-up-with" class="section level3" number="18.3.1">
<h3><span class="header-section-number">18.3.1</span> What's up with <code>~</code>?</h3>
<p>Instead of using <code>map()</code> with an exisiting function, we can use inline anonymous functions as demonstrated with <code>apply()</code></p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="#cb385-1" tabindex="-1"></a><span class="fu">map_dbl</span>(df_list, <span class="cf">function</span>(x) <span class="fu">sum</span>(x)<span class="sc">/</span><span class="fu">length</span>(x))</span></code></pre></div>
<pre><code>##           a           b           c           d           e           f 
## -0.38315741 -0.11817071 -0.38794682 -0.76619306 -0.60979706 -0.27886474 
##           g           h 
##  0.61659223 -0.04230209</code></pre>
<p>But this is quite <em>verbose</em> we can use <code>~</code> to support a shortcut</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="#cb387-1" tabindex="-1"></a><span class="fu">map_dbl</span>(df_list, <span class="sc">~</span> <span class="fu">sum</span>(.x)<span class="sc">/</span><span class="fu">length</span>(.x))</span></code></pre></div>
<pre><code>##           a           b           c           d           e           f 
## -0.38315741 -0.11817071 -0.38794682 -0.76619306 -0.60979706 -0.27886474 
##           g           h 
##  0.61659223 -0.04230209</code></pre>
<p>It look a little quirky but you to refer to <code>.</code> for argument functions.</p>
<div class="info">
<p>
Reserve this syntax for short and simple functions. A good rule of
thumb is that if your function spans lines or uses {}, it’s time to give
it a name.
</p>
</div>
</div>
<div id="passing-arguments" class="section level3" number="18.3.2">
<h3><span class="header-section-number">18.3.2</span> Passing arguments</h3>
<p><code>map</code> functions all pass <code>...</code> along, so there are two ways we can pass additional arguments to functions</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="#cb389-1" tabindex="-1"></a><span class="fu">map_dbl</span>(df_list, <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> T))</span>
<span id="cb389-2"><a href="#cb389-2" tabindex="-1"></a></span>
<span id="cb389-3"><a href="#cb389-3" tabindex="-1"></a></span>
<span id="cb389-4"><a href="#cb389-4" tabindex="-1"></a><span class="fu">map_dbl</span>(df_list, mean, <span class="at">na.rm =</span> T)</span></code></pre></div>
</div>
</div>
<div id="map-with-nested-dataframes" class="section level2" number="18.4">
<h2><span class="header-section-number">18.4</span> map with nested dataframes</h2>
<p>Nested data frames in tibbles, a data structure in R, allow you to store complex and structured data within a single column of a tibble. This feature is particularly useful when dealing with hierarchical or nested data, such as lists, data frames, or even other tibbles.</p>
<div class="warning">
<p>
To use the penguins data you need to load it. Either run your
cleaning script or run readRDS on the file you made
</p>
</div>
<p>Nested data frames in <code>tibbles</code> can be particularly useful when working with map functions, like <code>purrr::map()</code>to apply a function to elements within each nested structure.</p>
<p>First we use the <code>nest()</code> function and select how we want to nest our data</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="#cb390-1" tabindex="-1"></a>nested_penguins <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb390-2"><a href="#cb390-2" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="sc">-</span>species)</span>
<span id="cb390-3"><a href="#cb390-3" tabindex="-1"></a></span>
<span id="cb390-4"><a href="#cb390-4" tabindex="-1"></a>nested_penguins</span></code></pre></div>
<div class="kable-table">
<table>
<colgroup>
<col width="0%" />
<col width="99%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">species</th>
<th align="left">data</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Adelie</td>
<td align="left">3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, 42.0, 37.8, 37.8, 41.1, 38.6, 34.6, 36.6, 38.7, 42.5, 34.4, 46.0, 37.8, 37.7, 35.9, 38.2, 38.8, 35.3, 40.6, 40.5, 37.9, 40.5, 39.5, 37.2, 39.5, 40.9, 36.4, 39.2, 38.8, 42.2, 37.6, 39.8, 36.5, 40.8, 36.0, 44.1, 37.0, 39.6, 41.1, 37.5, 36.0, 42.3, 39.6, 40.1, 35.0, 42.0, 34.5, 41.4, 39.0, 40.6, 36.5, 37.6, 35.7, 41.3, 37.6, 41.1, 36.4, 41.6, 35.5, 41.1, 35.9, 41.8, 33.5, 39.7, 39.6, 45.8, 35.5, 42.8, 40.9, 37.2, 36.2, 42.1, 34.6, 42.9, 36.7, 35.1, 37.3, 41.3, 36.3, 36.9, 38.3, 38.9, 35.7, 41.1, 34.0, 39.6, 36.2, 40.8, 38.1, 40.3, 33.1, 43.2, 35.0, 41.0, 37.7, 37.8, 37.9, 39.7, 38.6, 38.2, 38.1, 43.2, 38.1, 45.6, 39.7, 42.2, 39.6, 42.7, 38.6, 37.3, 35.7, 41.1, 36.2, 37.7, 40.2, 41.4, 35.2, 40.6, 38.8, 41.5, 39.0, 44.1, 38.5, 43.1, 36.8, 37.5, 38.1, 41.1, 35.6, 40.2, 37.0, 39.7, 40.2, 40.6, 32.1, 40.7, 37.3, 39.0, 39.2, 36.6, 36.0, 37.8, 36.0, 41.5, 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, 20.2, 17.1, 17.3, 17.6, 21.2, 21.1, 17.8, 19.0, 20.7, 18.4, 21.5, 18.3, 18.7, 19.2, 18.1, 17.2, 18.9, 18.6, 17.9, 18.6, 18.9, 16.7, 18.1, 17.8, 18.9, 17.0, 21.1, 20.0, 18.5, 19.3, 19.1, 18.0, 18.4, 18.5, 19.7, 16.9, 18.8, 19.0, 18.9, 17.9, 21.2, 17.7, 18.9, 17.9, 19.5, 18.1, 18.6, 17.5, 18.8, 16.6, 19.1, 16.9, 21.1, 17.0, 18.2, 17.1, 18.0, 16.2, 19.1, 16.6, 19.4, 19.0, 18.4, 17.2, 18.9, 17.5, 18.5, 16.8, 19.4, 16.1, 19.1, 17.2, 17.6, 18.8, 19.4, 17.8, 20.3, 19.5, 18.6, 19.2, 18.8, 18.0, 18.1, 17.1, 18.1, 17.3, 18.9, 18.6, 18.5, 16.1, 18.5, 17.9, 20.0, 16.0, 20.0, 18.6, 18.9, 17.2, 20.0, 17.0, 19.0, 16.5, 20.3, 17.7, 19.5, 20.7, 18.3, 17.0, 20.5, 17.0, 18.6, 17.2, 19.8, 17.0, 18.5, 15.9, 19.0, 17.6, 18.3, 17.1, 18.0, 17.9, 19.2, 18.5, 18.5, 17.6, 17.5, 17.5, 20.1, 16.5, 17.9, 17.1, 17.2, 15.5, 17.0, 16.8, 18.7, 18.6, 18.4, 17.8, 18.1, 17.1, 18.5, 181.0, 186.0, 195.0, NA, 193.0, 190.0, 181.0, 195.0, 193.0, 190.0, 186.0, 180.0, 182.0, 191.0, 198.0, 185.0, 195.0, 197.0, 184.0, 194.0, 174.0, 180.0, 189.0, 185.0, 180.0, 187.0, 183.0, 187.0, 172.0, 180.0, 178.0, 178.0, 188.0, 184.0, 195.0, 196.0, 190.0, 180.0, 181.0, 184.0, 182.0, 195.0, 186.0, 196.0, 185.0, 190.0, 182.0, 179.0, 190.0, 191.0, 186.0, 188.0, 190.0, 200.0, 187.0, 191.0, 186.0, 193.0, 181.0, 194.0, 185.0, 195.0, 185.0, 192.0, 184.0, 192.0, 195.0, 188.0, 190.0, 198.0, 190.0, 190.0, 196.0, 197.0, 190.0, 195.0, 191.0, 184.0, 187.0, 195.0, 189.0, 196.0, 187.0, 193.0, 191.0, 194.0, 190.0, 189.0, 189.0, 190.0, 202.0, 205.0, 185.0, 186.0, 187.0, 208.0, 190.0, 196.0, 178.0, 192.0, 192.0, 203.0, 183.0, 190.0, 193.0, 184.0, 199.0, 190.0, 181.0, 197.0, 198.0, 191.0, 193.0, 197.0, 191.0, 196.0, 188.0, 199.0, 189.0, 189.0, 187.0, 198.0, 176.0, 202.0, 186.0, 199.0, 191.0, 195.0, 191.0, 210.0, 190.0, 197.0, 193.0, 199.0, 187.0, 190.0, 191.0, 200.0, 185.0, 193.0, 193.0, 187.0, 188.0, 190.0, 192.0, 185.0, 190.0, 184.0, 195.0, 193.0, 187.0, 201.0, 3750.0, 3800.0, 3250.0, NA, 3450.0, 3650.0, 3625.0, 4675.0, 3475.0, 4250.0, 3300.0, 3700.0, 3200.0, 3800.0, 4400.0, 3700.0, 3450.0, 4500.0, 3325.0, 4200.0, 3400.0, 3600.0, 3800.0, 3950.0, 3800.0, 3800.0, 3550.0, 3200.0, 3150.0, 3950.0, 3250.0, 3900.0, 3300.0, 3900.0, 3325.0, 4150.0, 3950.0, 3550.0, 3300.0, 4650.0, 3150.0, 3900.0, 3100.0, 4400.0, 3000.0, 4600.0, 3425.0, 2975.0, 3450.0, 4150.0, 3500.0, 4300.0, 3450.0, 4050.0, 2900.0, 3700.0, 3550.0, 3800.0, 2850.0, 3750.0, 3150.0, 4400.0, 3600.0, 4050.0, 2850.0, 3950.0, 3350.0, 4100.0, 3050.0, 4450.0, 3600.0, 3900.0, 3550.0, 4150.0, 3700.0, 4250.0, 3700.0, 3900.0, 3550.0, 4000.0, 3200.0, 4700.0, 3800.0, 4200.0, 3350.0, 3550.0, 3800.0, 3500.0, 3950.0, 3600.0, 3550.0, 4300.0, 3400.0, 4450.0, 3300.0, 4300.0, 3700.0, 4350.0, 2900.0, 4100.0, 3725.0, 4725.0, 3075.0, 4250.0, 2925.0, 3550.0, 3750.0, 3900.0, 3175.0, 4775.0, 3825.0, 4600.0, 3200.0, 4275.0, 3900.0, 4075.0, 2900.0, 3775.0, 3350.0, 3325.0, 3150.0, 3500.0, 3450.0, 3875.0, 3050.0, 4000.0, 3275.0, 4300.0, 3050.0, 4000.0, 3325.0, 3500.0, 3500.0, 4475.0, 3425.0, 3900.0, 3175.0, 3975.0, 3400.0, 4250.0, 3400.0, 3475.0, 3050.0, 3725.0, 3000.0, 3650.0, 4250.0, 3475.0, 3450.0, 3750.0, 3700.0, 4000.0, 2.0, 1.0, 1.0, NA, 1.0, 2.0, 1.0, 2.0, NA, NA, NA, NA, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, NA, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="left">1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 46.1, 50.0, 48.7, 50.0, 47.6, 46.5, 45.4, 46.7, 43.3, 46.8, 40.9, 49.0, 45.5, 48.4, 45.8, 49.3, 42.0, 49.2, 46.2, 48.7, 50.2, 45.1, 46.5, 46.3, 42.9, 46.1, 44.5, 47.8, 48.2, 50.0, 47.3, 42.8, 45.1, 59.6, 49.1, 48.4, 42.6, 44.4, 44.0, 48.7, 42.7, 49.6, 45.3, 49.6, 50.5, 43.6, 45.5, 50.5, 44.9, 45.2, 46.6, 48.5, 45.1, 50.1, 46.5, 45.0, 43.8, 45.5, 43.2, 50.4, 45.3, 46.2, 45.7, 54.3, 45.8, 49.8, 46.2, 49.5, 43.5, 50.7, 47.7, 46.4, 48.2, 46.5, 46.4, 48.6, 47.5, 51.1, 45.2, 45.2, 49.1, 52.5, 47.4, 50.0, 44.9, 50.8, 43.4, 51.3, 47.5, 52.1, 47.5, 52.2, 45.5, 49.5, 44.5, 50.8, 49.4, 46.9, 48.4, 51.1, 48.5, 55.9, 47.2, 49.1, 47.3, 46.8, 41.7, 53.4, 43.3, 48.1, 50.5, 49.8, 43.5, 51.5, 46.2, 55.1, 44.5, 48.8, 47.2, NA, 46.8, 50.4, 45.2, 49.9, 13.2, 16.3, 14.1, 15.2, 14.5, 13.5, 14.6, 15.3, 13.4, 15.4, 13.7, 16.1, 13.7, 14.6, 14.6, 15.7, 13.5, 15.2, 14.5, 15.1, 14.3, 14.5, 14.5, 15.8, 13.1, 15.1, 14.3, 15.0, 14.3, 15.3, 15.3, 14.2, 14.5, 17.0, 14.8, 16.3, 13.7, 17.3, 13.6, 15.7, 13.7, 16.0, 13.7, 15.0, 15.9, 13.9, 13.9, 15.9, 13.3, 15.8, 14.2, 14.1, 14.4, 15.0, 14.4, 15.4, 13.9, 15.0, 14.5, 15.3, 13.8, 14.9, 13.9, 15.7, 14.2, 16.8, 14.4, 16.2, 14.2, 15.0, 15.0, 15.6, 15.6, 14.8, 15.0, 16.0, 14.2, 16.3, 13.8, 16.4, 14.5, 15.6, 14.6, 15.9, 13.8, 17.3, 14.4, 14.2, 14.0, 17.0, 15.0, 17.1, 14.5, 16.1, 14.7, 15.7, 15.8, 14.6, 14.4, 16.5, 15.0, 17.0, 15.5, 15.0, 13.8, 16.1, 14.7, 15.8, 14.0, 15.1, 15.2, 15.9, 15.2, 16.3, 14.1, 16.0, 15.7, 16.2, 13.7, NA, 14.3, 15.7, 14.8, 16.1, 211.0, 230.0, 210.0, 218.0, 215.0, 210.0, 211.0, 219.0, 209.0, 215.0, 214.0, 216.0, 214.0, 213.0, 210.0, 217.0, 210.0, 221.0, 209.0, 222.0, 218.0, 215.0, 213.0, 215.0, 215.0, 215.0, 216.0, 215.0, 210.0, 220.0, 222.0, 209.0, 207.0, 230.0, 220.0, 220.0, 213.0, 219.0, 208.0, 208.0, 208.0, 225.0, 210.0, 216.0, 222.0, 217.0, 210.0, 225.0, 213.0, 215.0, 210.0, 220.0, 210.0, 225.0, 217.0, 220.0, 208.0, 220.0, 208.0, 224.0, 208.0, 221.0, 214.0, 231.0, 219.0, 230.0, 214.0, 229.0, 220.0, 223.0, 216.0, 221.0, 221.0, 217.0, 216.0, 230.0, 209.0, 220.0, 215.0, 223.0, 212.0, 221.0, 212.0, 224.0, 212.0, 228.0, 218.0, 218.0, 212.0, 230.0, 218.0, 228.0, 212.0, 224.0, 214.0, 226.0, 216.0, 222.0, 203.0, 225.0, 219.0, 228.0, 215.0, 228.0, 216.0, 215.0, 210.0, 219.0, 208.0, 209.0, 216.0, 229.0, 213.0, 230.0, 217.0, 230.0, 217.0, 222.0, 214.0, NA, 215.0, 222.0, 212.0, 213.0, 4500.0, 5700.0, 4450.0, 5700.0, 5400.0, 4550.0, 4800.0, 5200.0, 4400.0, 5150.0, 4650.0, 5550.0, 4650.0, 5850.0, 4200.0, 5850.0, 4150.0, 6300.0, 4800.0, 5350.0, 5700.0, 5000.0, 4400.0, 5050.0, 5000.0, 5100.0, 4100.0, 5650.0, 4600.0, 5550.0, 5250.0, 4700.0, 5050.0, 6050.0, 5150.0, 5400.0, 4950.0, 5250.0, 4350.0, 5350.0, 3950.0, 5700.0, 4300.0, 4750.0, 5550.0, 4900.0, 4200.0, 5400.0, 5100.0, 5300.0, 4850.0, 5300.0, 4400.0, 5000.0, 4900.0, 5050.0, 4300.0, 5000.0, 4450.0, 5550.0, 4200.0, 5300.0, 4400.0, 5650.0, 4700.0, 5700.0, 4650.0, 5800.0, 4700.0, 5550.0, 4750.0, 5000.0, 5100.0, 5200.0, 4700.0, 5800.0, 4600.0, 6000.0, 4750.0, 5950.0, 4625.0, 5450.0, 4725.0, 5350.0, 4750.0, 5600.0, 4600.0, 5300.0, 4875.0, 5550.0, 4950.0, 5400.0, 4750.0, 5650.0, 4850.0, 5200.0, 4925.0, 4875.0, 4625.0, 5250.0, 4850.0, 5600.0, 4975.0, 5500.0, 4725.0, 5500.0, 4700.0, 5500.0, 4575.0, 5500.0, 5000.0, 5950.0, 4650.0, 5500.0, 4375.0, 5850.0, 4875.0, 6000.0, 4925.0, NA, 4850.0, 5750.0, 5200.0, 5400.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, NA, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, NA, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, NA, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, NA, 2.0, 1.0, NA, 1.0, 2.0, 1.0, 2.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0</td>
</tr>
<tr class="odd">
<td align="left">Chinstrap</td>
<td align="left">2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 46.5, 50.0, 51.3, 45.4, 52.7, 45.2, 46.1, 51.3, 46.0, 51.3, 46.6, 51.7, 47.0, 52.0, 45.9, 50.5, 50.3, 58.0, 46.4, 49.2, 42.4, 48.5, 43.2, 50.6, 46.7, 52.0, 50.5, 49.5, 46.4, 52.8, 40.9, 54.2, 42.5, 51.0, 49.7, 47.5, 47.6, 52.0, 46.9, 53.5, 49.0, 46.2, 50.9, 45.5, 50.9, 50.8, 50.1, 49.0, 51.5, 49.8, 48.1, 51.4, 45.7, 50.7, 42.5, 52.2, 45.2, 49.3, 50.2, 45.6, 51.9, 46.8, 45.7, 55.8, 43.5, 49.6, 50.8, 50.2, 17.9, 19.5, 19.2, 18.7, 19.8, 17.8, 18.2, 18.2, 18.9, 19.9, 17.8, 20.3, 17.3, 18.1, 17.1, 19.6, 20.0, 17.8, 18.6, 18.2, 17.3, 17.5, 16.6, 19.4, 17.9, 19.0, 18.4, 19.0, 17.8, 20.0, 16.6, 20.8, 16.7, 18.8, 18.6, 16.8, 18.3, 20.7, 16.6, 19.9, 19.5, 17.5, 19.1, 17.0, 17.9, 18.5, 17.9, 19.6, 18.7, 17.3, 16.4, 19.0, 17.3, 19.7, 17.3, 18.8, 16.6, 19.9, 18.8, 19.4, 19.5, 16.5, 17.0, 19.8, 18.1, 18.2, 19.0, 18.7, 192.0, 196.0, 193.0, 188.0, 197.0, 198.0, 178.0, 197.0, 195.0, 198.0, 193.0, 194.0, 185.0, 201.0, 190.0, 201.0, 197.0, 181.0, 190.0, 195.0, 181.0, 191.0, 187.0, 193.0, 195.0, 197.0, 200.0, 200.0, 191.0, 205.0, 187.0, 201.0, 187.0, 203.0, 195.0, 199.0, 195.0, 210.0, 192.0, 205.0, 210.0, 187.0, 196.0, 196.0, 196.0, 201.0, 190.0, 212.0, 187.0, 198.0, 199.0, 201.0, 193.0, 203.0, 187.0, 197.0, 191.0, 203.0, 202.0, 194.0, 206.0, 189.0, 195.0, 207.0, 202.0, 193.0, 210.0, 198.0, 3500.0, 3900.0, 3650.0, 3525.0, 3725.0, 3950.0, 3250.0, 3750.0, 4150.0, 3700.0, 3800.0, 3775.0, 3700.0, 4050.0, 3575.0, 4050.0, 3300.0, 3700.0, 3450.0, 4400.0, 3600.0, 3400.0, 2900.0, 3800.0, 3300.0, 4150.0, 3400.0, 3800.0, 3700.0, 4550.0, 3200.0, 4300.0, 3350.0, 4100.0, 3600.0, 3900.0, 3850.0, 4800.0, 2700.0, 4500.0, 3950.0, 3650.0, 3550.0, 3500.0, 3675.0, 4450.0, 3400.0, 4300.0, 3250.0, 3675.0, 3325.0, 3950.0, 3600.0, 4050.0, 3350.0, 3450.0, 3250.0, 4050.0, 3800.0, 3525.0, 3950.0, 3650.0, 3650.0, 4000.0, 3400.0, 3775.0, 4100.0, 3775.0, 1.0, 2.0, 2.0, 1.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0</td>
</tr>
</tbody>
</table>
</div>
<p>We can run iterative functions on these lists - such as generating new dataframes and adding them to new columns. Here we wish to keep only those penguins who are larger than the average for their species body weight.</p>
<blockquote>
<p>Note at this stage we are replicating iteration that can be achieved by using <code>group_by()</code> actions.</p>
</blockquote>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="#cb391-1" tabindex="-1"></a>nested_heavy_penguins <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb391-2"><a href="#cb391-2" tabindex="-1"></a>    <span class="fu">nest</span>(<span class="at">data =</span> <span class="sc">-</span>species) <span class="sc">|&gt;</span> </span>
<span id="cb391-3"><a href="#cb391-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">new_data =</span> <span class="fu">map</span>(data, <span class="sc">~</span> .x </span>
<span id="cb391-4"><a href="#cb391-4" tabindex="-1"></a>                        <span class="sc">|&gt;</span> <span class="fu">filter</span>(body_mass_g <span class="sc">&gt;</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> T)))</span>
<span id="cb391-5"><a href="#cb391-5" tabindex="-1"></a>         )</span>
<span id="cb391-6"><a href="#cb391-6" tabindex="-1"></a></span>
<span id="cb391-7"><a href="#cb391-7" tabindex="-1"></a>nested_heavy_penguins</span></code></pre></div>
<div class="kable-table">
<table>
<colgroup>
<col width="0%" />
<col width="68%" />
<col width="31%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">species</th>
<th align="left">data</th>
<th align="left">new_data</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Adelie</td>
<td align="left">3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, 42.0, 37.8, 37.8, 41.1, 38.6, 34.6, 36.6, 38.7, 42.5, 34.4, 46.0, 37.8, 37.7, 35.9, 38.2, 38.8, 35.3, 40.6, 40.5, 37.9, 40.5, 39.5, 37.2, 39.5, 40.9, 36.4, 39.2, 38.8, 42.2, 37.6, 39.8, 36.5, 40.8, 36.0, 44.1, 37.0, 39.6, 41.1, 37.5, 36.0, 42.3, 39.6, 40.1, 35.0, 42.0, 34.5, 41.4, 39.0, 40.6, 36.5, 37.6, 35.7, 41.3, 37.6, 41.1, 36.4, 41.6, 35.5, 41.1, 35.9, 41.8, 33.5, 39.7, 39.6, 45.8, 35.5, 42.8, 40.9, 37.2, 36.2, 42.1, 34.6, 42.9, 36.7, 35.1, 37.3, 41.3, 36.3, 36.9, 38.3, 38.9, 35.7, 41.1, 34.0, 39.6, 36.2, 40.8, 38.1, 40.3, 33.1, 43.2, 35.0, 41.0, 37.7, 37.8, 37.9, 39.7, 38.6, 38.2, 38.1, 43.2, 38.1, 45.6, 39.7, 42.2, 39.6, 42.7, 38.6, 37.3, 35.7, 41.1, 36.2, 37.7, 40.2, 41.4, 35.2, 40.6, 38.8, 41.5, 39.0, 44.1, 38.5, 43.1, 36.8, 37.5, 38.1, 41.1, 35.6, 40.2, 37.0, 39.7, 40.2, 40.6, 32.1, 40.7, 37.3, 39.0, 39.2, 36.6, 36.0, 37.8, 36.0, 41.5, 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, 20.2, 17.1, 17.3, 17.6, 21.2, 21.1, 17.8, 19.0, 20.7, 18.4, 21.5, 18.3, 18.7, 19.2, 18.1, 17.2, 18.9, 18.6, 17.9, 18.6, 18.9, 16.7, 18.1, 17.8, 18.9, 17.0, 21.1, 20.0, 18.5, 19.3, 19.1, 18.0, 18.4, 18.5, 19.7, 16.9, 18.8, 19.0, 18.9, 17.9, 21.2, 17.7, 18.9, 17.9, 19.5, 18.1, 18.6, 17.5, 18.8, 16.6, 19.1, 16.9, 21.1, 17.0, 18.2, 17.1, 18.0, 16.2, 19.1, 16.6, 19.4, 19.0, 18.4, 17.2, 18.9, 17.5, 18.5, 16.8, 19.4, 16.1, 19.1, 17.2, 17.6, 18.8, 19.4, 17.8, 20.3, 19.5, 18.6, 19.2, 18.8, 18.0, 18.1, 17.1, 18.1, 17.3, 18.9, 18.6, 18.5, 16.1, 18.5, 17.9, 20.0, 16.0, 20.0, 18.6, 18.9, 17.2, 20.0, 17.0, 19.0, 16.5, 20.3, 17.7, 19.5, 20.7, 18.3, 17.0, 20.5, 17.0, 18.6, 17.2, 19.8, 17.0, 18.5, 15.9, 19.0, 17.6, 18.3, 17.1, 18.0, 17.9, 19.2, 18.5, 18.5, 17.6, 17.5, 17.5, 20.1, 16.5, 17.9, 17.1, 17.2, 15.5, 17.0, 16.8, 18.7, 18.6, 18.4, 17.8, 18.1, 17.1, 18.5, 181.0, 186.0, 195.0, NA, 193.0, 190.0, 181.0, 195.0, 193.0, 190.0, 186.0, 180.0, 182.0, 191.0, 198.0, 185.0, 195.0, 197.0, 184.0, 194.0, 174.0, 180.0, 189.0, 185.0, 180.0, 187.0, 183.0, 187.0, 172.0, 180.0, 178.0, 178.0, 188.0, 184.0, 195.0, 196.0, 190.0, 180.0, 181.0, 184.0, 182.0, 195.0, 186.0, 196.0, 185.0, 190.0, 182.0, 179.0, 190.0, 191.0, 186.0, 188.0, 190.0, 200.0, 187.0, 191.0, 186.0, 193.0, 181.0, 194.0, 185.0, 195.0, 185.0, 192.0, 184.0, 192.0, 195.0, 188.0, 190.0, 198.0, 190.0, 190.0, 196.0, 197.0, 190.0, 195.0, 191.0, 184.0, 187.0, 195.0, 189.0, 196.0, 187.0, 193.0, 191.0, 194.0, 190.0, 189.0, 189.0, 190.0, 202.0, 205.0, 185.0, 186.0, 187.0, 208.0, 190.0, 196.0, 178.0, 192.0, 192.0, 203.0, 183.0, 190.0, 193.0, 184.0, 199.0, 190.0, 181.0, 197.0, 198.0, 191.0, 193.0, 197.0, 191.0, 196.0, 188.0, 199.0, 189.0, 189.0, 187.0, 198.0, 176.0, 202.0, 186.0, 199.0, 191.0, 195.0, 191.0, 210.0, 190.0, 197.0, 193.0, 199.0, 187.0, 190.0, 191.0, 200.0, 185.0, 193.0, 193.0, 187.0, 188.0, 190.0, 192.0, 185.0, 190.0, 184.0, 195.0, 193.0, 187.0, 201.0, 3750.0, 3800.0, 3250.0, NA, 3450.0, 3650.0, 3625.0, 4675.0, 3475.0, 4250.0, 3300.0, 3700.0, 3200.0, 3800.0, 4400.0, 3700.0, 3450.0, 4500.0, 3325.0, 4200.0, 3400.0, 3600.0, 3800.0, 3950.0, 3800.0, 3800.0, 3550.0, 3200.0, 3150.0, 3950.0, 3250.0, 3900.0, 3300.0, 3900.0, 3325.0, 4150.0, 3950.0, 3550.0, 3300.0, 4650.0, 3150.0, 3900.0, 3100.0, 4400.0, 3000.0, 4600.0, 3425.0, 2975.0, 3450.0, 4150.0, 3500.0, 4300.0, 3450.0, 4050.0, 2900.0, 3700.0, 3550.0, 3800.0, 2850.0, 3750.0, 3150.0, 4400.0, 3600.0, 4050.0, 2850.0, 3950.0, 3350.0, 4100.0, 3050.0, 4450.0, 3600.0, 3900.0, 3550.0, 4150.0, 3700.0, 4250.0, 3700.0, 3900.0, 3550.0, 4000.0, 3200.0, 4700.0, 3800.0, 4200.0, 3350.0, 3550.0, 3800.0, 3500.0, 3950.0, 3600.0, 3550.0, 4300.0, 3400.0, 4450.0, 3300.0, 4300.0, 3700.0, 4350.0, 2900.0, 4100.0, 3725.0, 4725.0, 3075.0, 4250.0, 2925.0, 3550.0, 3750.0, 3900.0, 3175.0, 4775.0, 3825.0, 4600.0, 3200.0, 4275.0, 3900.0, 4075.0, 2900.0, 3775.0, 3350.0, 3325.0, 3150.0, 3500.0, 3450.0, 3875.0, 3050.0, 4000.0, 3275.0, 4300.0, 3050.0, 4000.0, 3325.0, 3500.0, 3500.0, 4475.0, 3425.0, 3900.0, 3175.0, 3975.0, 3400.0, 4250.0, 3400.0, 3475.0, 3050.0, 3725.0, 3000.0, 3650.0, 4250.0, 3475.0, 3450.0, 3750.0, 3700.0, 4000.0, 2.0, 1.0, 1.0, NA, 1.0, 2.0, 1.0, 2.0, NA, NA, NA, NA, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, NA, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0</td>
<td align="left">3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 1.0, 1.0, 1.0, 1.0, 1.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 3.0, 3.0, 3.0, 3.0, 3.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 39.1, 39.5, 39.2, 42.0, 38.6, 34.6, 42.5, 46.0, 35.9, 38.2, 38.8, 35.3, 40.5, 37.2, 40.9, 39.2, 38.8, 39.8, 40.8, 44.1, 39.6, 42.3, 40.1, 42.0, 40.6, 37.6, 41.3, 41.1, 41.6, 41.1, 41.8, 39.7, 45.8, 42.8, 37.2, 42.1, 42.9, 36.7, 35.1, 36.3, 38.3, 41.1, 39.6, 40.8, 40.3, 43.2, 35.0, 41.0, 37.8, 38.6, 38.2, 43.2, 38.1, 45.6, 42.2, 39.6, 42.7, 37.3, 41.4, 40.6, 41.5, 44.1, 37.5, 41.1, 40.2, 39.7, 40.7, 39.2, 37.8, 41.5, 18.7, 17.4, 19.6, 20.2, 21.2, 21.1, 20.7, 21.5, 19.2, 18.1, 17.2, 18.9, 18.9, 18.1, 18.9, 21.1, 20.0, 19.1, 18.4, 19.7, 18.8, 21.2, 18.9, 19.5, 18.8, 19.1, 21.1, 18.2, 18.0, 19.1, 19.4, 18.4, 18.9, 18.5, 19.4, 19.1, 17.6, 18.8, 19.4, 19.5, 19.2, 18.1, 18.1, 18.9, 18.5, 18.5, 17.9, 20.0, 20.0, 17.2, 20.0, 19.0, 16.5, 20.3, 19.5, 20.7, 18.3, 20.5, 18.5, 19.0, 18.3, 18.0, 18.5, 17.5, 20.1, 17.9, 17.0, 18.6, 18.1, 18.5, 181.0, 186.0, 195.0, 190.0, 191.0, 198.0, 197.0, 194.0, 189.0, 185.0, 180.0, 187.0, 180.0, 178.0, 184.0, 196.0, 190.0, 184.0, 195.0, 196.0, 190.0, 191.0, 188.0, 200.0, 193.0, 194.0, 195.0, 192.0, 192.0, 188.0, 198.0, 190.0, 197.0, 195.0, 184.0, 195.0, 196.0, 187.0, 193.0, 190.0, 189.0, 205.0, 186.0, 208.0, 196.0, 192.0, 192.0, 203.0, 190.0, 199.0, 190.0, 197.0, 198.0, 191.0, 197.0, 191.0, 196.0, 199.0, 202.0, 199.0, 195.0, 210.0, 199.0, 190.0, 200.0, 193.0, 190.0, 190.0, 193.0, 201.0, 3750.0, 3800.0, 4675.0, 4250.0, 3800.0, 4400.0, 4500.0, 4200.0, 3800.0, 3950.0, 3800.0, 3800.0, 3950.0, 3900.0, 3900.0, 4150.0, 3950.0, 4650.0, 3900.0, 4400.0, 4600.0, 4150.0, 4300.0, 4050.0, 3800.0, 3750.0, 4400.0, 4050.0, 3950.0, 4100.0, 4450.0, 3900.0, 4150.0, 4250.0, 3900.0, 4000.0, 4700.0, 3800.0, 4200.0, 3800.0, 3950.0, 4300.0, 4450.0, 4300.0, 4350.0, 4100.0, 3725.0, 4725.0, 4250.0, 3750.0, 3900.0, 4775.0, 3825.0, 4600.0, 4275.0, 3900.0, 4075.0, 3775.0, 3875.0, 4000.0, 4300.0, 4000.0, 4475.0, 3900.0, 3975.0, 4250.0, 3725.0, 4250.0, 3750.0, 4000.0, 2.0, 1.0, 2.0, NA, 2.0, 2.0, 2.0, 2.0, 1.0, 2.0, 2.0, 1.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 1.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 1.0, 2.0, 2.0, 1.0, 2.0, 2.0, 1.0, 2.0, 2.0, 1.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="left">1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 46.1, 50.0, 48.7, 50.0, 47.6, 46.5, 45.4, 46.7, 43.3, 46.8, 40.9, 49.0, 45.5, 48.4, 45.8, 49.3, 42.0, 49.2, 46.2, 48.7, 50.2, 45.1, 46.5, 46.3, 42.9, 46.1, 44.5, 47.8, 48.2, 50.0, 47.3, 42.8, 45.1, 59.6, 49.1, 48.4, 42.6, 44.4, 44.0, 48.7, 42.7, 49.6, 45.3, 49.6, 50.5, 43.6, 45.5, 50.5, 44.9, 45.2, 46.6, 48.5, 45.1, 50.1, 46.5, 45.0, 43.8, 45.5, 43.2, 50.4, 45.3, 46.2, 45.7, 54.3, 45.8, 49.8, 46.2, 49.5, 43.5, 50.7, 47.7, 46.4, 48.2, 46.5, 46.4, 48.6, 47.5, 51.1, 45.2, 45.2, 49.1, 52.5, 47.4, 50.0, 44.9, 50.8, 43.4, 51.3, 47.5, 52.1, 47.5, 52.2, 45.5, 49.5, 44.5, 50.8, 49.4, 46.9, 48.4, 51.1, 48.5, 55.9, 47.2, 49.1, 47.3, 46.8, 41.7, 53.4, 43.3, 48.1, 50.5, 49.8, 43.5, 51.5, 46.2, 55.1, 44.5, 48.8, 47.2, NA, 46.8, 50.4, 45.2, 49.9, 13.2, 16.3, 14.1, 15.2, 14.5, 13.5, 14.6, 15.3, 13.4, 15.4, 13.7, 16.1, 13.7, 14.6, 14.6, 15.7, 13.5, 15.2, 14.5, 15.1, 14.3, 14.5, 14.5, 15.8, 13.1, 15.1, 14.3, 15.0, 14.3, 15.3, 15.3, 14.2, 14.5, 17.0, 14.8, 16.3, 13.7, 17.3, 13.6, 15.7, 13.7, 16.0, 13.7, 15.0, 15.9, 13.9, 13.9, 15.9, 13.3, 15.8, 14.2, 14.1, 14.4, 15.0, 14.4, 15.4, 13.9, 15.0, 14.5, 15.3, 13.8, 14.9, 13.9, 15.7, 14.2, 16.8, 14.4, 16.2, 14.2, 15.0, 15.0, 15.6, 15.6, 14.8, 15.0, 16.0, 14.2, 16.3, 13.8, 16.4, 14.5, 15.6, 14.6, 15.9, 13.8, 17.3, 14.4, 14.2, 14.0, 17.0, 15.0, 17.1, 14.5, 16.1, 14.7, 15.7, 15.8, 14.6, 14.4, 16.5, 15.0, 17.0, 15.5, 15.0, 13.8, 16.1, 14.7, 15.8, 14.0, 15.1, 15.2, 15.9, 15.2, 16.3, 14.1, 16.0, 15.7, 16.2, 13.7, NA, 14.3, 15.7, 14.8, 16.1, 211.0, 230.0, 210.0, 218.0, 215.0, 210.0, 211.0, 219.0, 209.0, 215.0, 214.0, 216.0, 214.0, 213.0, 210.0, 217.0, 210.0, 221.0, 209.0, 222.0, 218.0, 215.0, 213.0, 215.0, 215.0, 215.0, 216.0, 215.0, 210.0, 220.0, 222.0, 209.0, 207.0, 230.0, 220.0, 220.0, 213.0, 219.0, 208.0, 208.0, 208.0, 225.0, 210.0, 216.0, 222.0, 217.0, 210.0, 225.0, 213.0, 215.0, 210.0, 220.0, 210.0, 225.0, 217.0, 220.0, 208.0, 220.0, 208.0, 224.0, 208.0, 221.0, 214.0, 231.0, 219.0, 230.0, 214.0, 229.0, 220.0, 223.0, 216.0, 221.0, 221.0, 217.0, 216.0, 230.0, 209.0, 220.0, 215.0, 223.0, 212.0, 221.0, 212.0, 224.0, 212.0, 228.0, 218.0, 218.0, 212.0, 230.0, 218.0, 228.0, 212.0, 224.0, 214.0, 226.0, 216.0, 222.0, 203.0, 225.0, 219.0, 228.0, 215.0, 228.0, 216.0, 215.0, 210.0, 219.0, 208.0, 209.0, 216.0, 229.0, 213.0, 230.0, 217.0, 230.0, 217.0, 222.0, 214.0, NA, 215.0, 222.0, 212.0, 213.0, 4500.0, 5700.0, 4450.0, 5700.0, 5400.0, 4550.0, 4800.0, 5200.0, 4400.0, 5150.0, 4650.0, 5550.0, 4650.0, 5850.0, 4200.0, 5850.0, 4150.0, 6300.0, 4800.0, 5350.0, 5700.0, 5000.0, 4400.0, 5050.0, 5000.0, 5100.0, 4100.0, 5650.0, 4600.0, 5550.0, 5250.0, 4700.0, 5050.0, 6050.0, 5150.0, 5400.0, 4950.0, 5250.0, 4350.0, 5350.0, 3950.0, 5700.0, 4300.0, 4750.0, 5550.0, 4900.0, 4200.0, 5400.0, 5100.0, 5300.0, 4850.0, 5300.0, 4400.0, 5000.0, 4900.0, 5050.0, 4300.0, 5000.0, 4450.0, 5550.0, 4200.0, 5300.0, 4400.0, 5650.0, 4700.0, 5700.0, 4650.0, 5800.0, 4700.0, 5550.0, 4750.0, 5000.0, 5100.0, 5200.0, 4700.0, 5800.0, 4600.0, 6000.0, 4750.0, 5950.0, 4625.0, 5450.0, 4725.0, 5350.0, 4750.0, 5600.0, 4600.0, 5300.0, 4875.0, 5550.0, 4950.0, 5400.0, 4750.0, 5650.0, 4850.0, 5200.0, 4925.0, 4875.0, 4625.0, 5250.0, 4850.0, 5600.0, 4975.0, 5500.0, 4725.0, 5500.0, 4700.0, 5500.0, 4575.0, 5500.0, 5000.0, 5950.0, 4650.0, 5500.0, 4375.0, 5850.0, 4875.0, 6000.0, 4925.0, NA, 4850.0, 5750.0, 5200.0, 5400.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, NA, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, NA, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, NA, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, NA, 2.0, 1.0, NA, 1.0, 2.0, 1.0, 2.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0</td>
<td align="left">1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 50.0, 50.0, 47.6, 46.7, 46.8, 49.0, 48.4, 49.3, 49.2, 48.7, 50.2, 46.1, 47.8, 50.0, 47.3, 59.6, 49.1, 48.4, 44.4, 48.7, 49.6, 50.5, 50.5, 44.9, 45.2, 48.5, 50.4, 46.2, 54.3, 49.8, 49.5, 50.7, 48.2, 46.5, 48.6, 51.1, 45.2, 52.5, 50.0, 50.8, 51.3, 52.1, 52.2, 49.5, 50.8, 51.1, 55.9, 49.1, 46.8, 53.4, 48.1, 49.8, 51.5, 55.1, 48.8, 50.4, 45.2, 49.9, 16.3, 15.2, 14.5, 15.3, 15.4, 16.1, 14.6, 15.7, 15.2, 15.1, 14.3, 15.1, 15.0, 15.3, 15.3, 17.0, 14.8, 16.3, 17.3, 15.7, 16.0, 15.9, 15.9, 13.3, 15.8, 14.1, 15.3, 14.9, 15.7, 16.8, 16.2, 15.0, 15.6, 14.8, 16.0, 16.3, 16.4, 15.6, 15.9, 17.3, 14.2, 17.0, 17.1, 16.1, 15.7, 16.5, 17.0, 15.0, 16.1, 15.8, 15.1, 15.9, 16.3, 16.0, 16.2, 15.7, 14.8, 16.1, 230.0, 218.0, 215.0, 219.0, 215.0, 216.0, 213.0, 217.0, 221.0, 222.0, 218.0, 215.0, 215.0, 220.0, 222.0, 230.0, 220.0, 220.0, 219.0, 208.0, 225.0, 222.0, 225.0, 213.0, 215.0, 220.0, 224.0, 221.0, 231.0, 230.0, 229.0, 223.0, 221.0, 217.0, 230.0, 220.0, 223.0, 221.0, 224.0, 228.0, 218.0, 230.0, 228.0, 224.0, 226.0, 225.0, 228.0, 228.0, 215.0, 219.0, 209.0, 229.0, 230.0, 230.0, 222.0, 222.0, 212.0, 213.0, 5700.0, 5700.0, 5400.0, 5200.0, 5150.0, 5550.0, 5850.0, 5850.0, 6300.0, 5350.0, 5700.0, 5100.0, 5650.0, 5550.0, 5250.0, 6050.0, 5150.0, 5400.0, 5250.0, 5350.0, 5700.0, 5550.0, 5400.0, 5100.0, 5300.0, 5300.0, 5550.0, 5300.0, 5650.0, 5700.0, 5800.0, 5550.0, 5100.0, 5200.0, 5800.0, 6000.0, 5950.0, 5450.0, 5350.0, 5600.0, 5300.0, 5550.0, 5400.0, 5650.0, 5200.0, 5250.0, 5600.0, 5500.0, 5500.0, 5500.0, 5500.0, 5950.0, 5500.0, 5850.0, 6000.0, 5750.0, 5200.0, 5400.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 1.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 1.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 1.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 1.0, 2.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0</td>
</tr>
<tr class="odd">
<td align="left">Chinstrap</td>
<td align="left">2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 46.5, 50.0, 51.3, 45.4, 52.7, 45.2, 46.1, 51.3, 46.0, 51.3, 46.6, 51.7, 47.0, 52.0, 45.9, 50.5, 50.3, 58.0, 46.4, 49.2, 42.4, 48.5, 43.2, 50.6, 46.7, 52.0, 50.5, 49.5, 46.4, 52.8, 40.9, 54.2, 42.5, 51.0, 49.7, 47.5, 47.6, 52.0, 46.9, 53.5, 49.0, 46.2, 50.9, 45.5, 50.9, 50.8, 50.1, 49.0, 51.5, 49.8, 48.1, 51.4, 45.7, 50.7, 42.5, 52.2, 45.2, 49.3, 50.2, 45.6, 51.9, 46.8, 45.7, 55.8, 43.5, 49.6, 50.8, 50.2, 17.9, 19.5, 19.2, 18.7, 19.8, 17.8, 18.2, 18.2, 18.9, 19.9, 17.8, 20.3, 17.3, 18.1, 17.1, 19.6, 20.0, 17.8, 18.6, 18.2, 17.3, 17.5, 16.6, 19.4, 17.9, 19.0, 18.4, 19.0, 17.8, 20.0, 16.6, 20.8, 16.7, 18.8, 18.6, 16.8, 18.3, 20.7, 16.6, 19.9, 19.5, 17.5, 19.1, 17.0, 17.9, 18.5, 17.9, 19.6, 18.7, 17.3, 16.4, 19.0, 17.3, 19.7, 17.3, 18.8, 16.6, 19.9, 18.8, 19.4, 19.5, 16.5, 17.0, 19.8, 18.1, 18.2, 19.0, 18.7, 192.0, 196.0, 193.0, 188.0, 197.0, 198.0, 178.0, 197.0, 195.0, 198.0, 193.0, 194.0, 185.0, 201.0, 190.0, 201.0, 197.0, 181.0, 190.0, 195.0, 181.0, 191.0, 187.0, 193.0, 195.0, 197.0, 200.0, 200.0, 191.0, 205.0, 187.0, 201.0, 187.0, 203.0, 195.0, 199.0, 195.0, 210.0, 192.0, 205.0, 210.0, 187.0, 196.0, 196.0, 196.0, 201.0, 190.0, 212.0, 187.0, 198.0, 199.0, 201.0, 193.0, 203.0, 187.0, 197.0, 191.0, 203.0, 202.0, 194.0, 206.0, 189.0, 195.0, 207.0, 202.0, 193.0, 210.0, 198.0, 3500.0, 3900.0, 3650.0, 3525.0, 3725.0, 3950.0, 3250.0, 3750.0, 4150.0, 3700.0, 3800.0, 3775.0, 3700.0, 4050.0, 3575.0, 4050.0, 3300.0, 3700.0, 3450.0, 4400.0, 3600.0, 3400.0, 2900.0, 3800.0, 3300.0, 4150.0, 3400.0, 3800.0, 3700.0, 4550.0, 3200.0, 4300.0, 3350.0, 4100.0, 3600.0, 3900.0, 3850.0, 4800.0, 2700.0, 4500.0, 3950.0, 3650.0, 3550.0, 3500.0, 3675.0, 4450.0, 3400.0, 4300.0, 3250.0, 3675.0, 3325.0, 3950.0, 3600.0, 4050.0, 3350.0, 3450.0, 3250.0, 4050.0, 3800.0, 3525.0, 3950.0, 3650.0, 3650.0, 4000.0, 3400.0, 3775.0, 4100.0, 3775.0, 1.0, 2.0, 2.0, 1.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 2.0, 1.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0</td>
<td align="left">2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 50.0, 45.2, 51.3, 46.0, 46.6, 51.7, 52.0, 50.5, 49.2, 50.6, 52.0, 49.5, 52.8, 54.2, 51.0, 47.5, 47.6, 52.0, 53.5, 49.0, 50.8, 49.0, 51.4, 50.7, 49.3, 50.2, 51.9, 55.8, 49.6, 50.8, 50.2, 19.5, 17.8, 18.2, 18.9, 17.8, 20.3, 18.1, 19.6, 18.2, 19.4, 19.0, 19.0, 20.0, 20.8, 18.8, 16.8, 18.3, 20.7, 19.9, 19.5, 18.5, 19.6, 19.0, 19.7, 19.9, 18.8, 19.5, 19.8, 18.2, 19.0, 18.7, 196.0, 198.0, 197.0, 195.0, 193.0, 194.0, 201.0, 201.0, 195.0, 193.0, 197.0, 200.0, 205.0, 201.0, 203.0, 199.0, 195.0, 210.0, 205.0, 210.0, 201.0, 212.0, 201.0, 203.0, 203.0, 202.0, 206.0, 207.0, 193.0, 210.0, 198.0, 3900.0, 3950.0, 3750.0, 4150.0, 3800.0, 3775.0, 4050.0, 4050.0, 4400.0, 3800.0, 4150.0, 3800.0, 4550.0, 4300.0, 4100.0, 3900.0, 3850.0, 4800.0, 4500.0, 3950.0, 4450.0, 4300.0, 3950.0, 4050.0, 4050.0, 3800.0, 3950.0, 4000.0, 3775.0, 4100.0, 3775.0, 2.0, 1.0, 2.0, 1.0, 1.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 1.0, 1.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 1.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2007.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2008.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0, 2009.0</td>
</tr>
</tbody>
</table>
</div>
<p>We can now produce individual plots for each nested dataframe:</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="#cb392-1" tabindex="-1"></a>plots_df <span class="ot">&lt;-</span> nested_heavy_penguins <span class="sc">|&gt;</span> </span>
<span id="cb392-2"><a href="#cb392-2" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">scatterplots =</span> <span class="fu">map</span>(new_data, <span class="sc">~</span> </span>
<span id="cb392-3"><a href="#cb392-3" tabindex="-1"></a>            <span class="fu">ggplot</span>(<span class="at">data =</span> .x, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> flipper_length_mm)) <span class="sc">+</span></span>
<span id="cb392-4"><a href="#cb392-4" tabindex="-1"></a>                <span class="fu">geom_point</span>()</span>
<span id="cb392-5"><a href="#cb392-5" tabindex="-1"></a>        ))</span></code></pre></div>
<p>Plots can now be called in a number of ways:</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="#cb393-1" tabindex="-1"></a>plots_df[[<span class="dv">1</span>,<span class="dv">4</span>]]</span>
<span id="cb393-2"><a href="#cb393-2" tabindex="-1"></a></span>
<span id="cb393-3"><a href="#cb393-3" tabindex="-1"></a>plots_df<span class="sc">$</span>scatterplots[[<span class="dv">1</span>]]</span></code></pre></div>
<p><img src="04-functional-programming_files/figure-html/unnamed-chunk-123-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>If we wish to see all of the plots at once we can use <code>purrr::walk</code> - this is another iteration function, where the primary output is "silent" - we do not wish to see outputs printed in the console. This is useful for functions like plot making or writing outputs to file.</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="#cb394-1" tabindex="-1"></a><span class="fu">walk</span>(plots_df<span class="sc">$</span>scatterplots, <span class="sc">~</span><span class="fu">print</span>(.x))</span></code></pre></div>
<div class="info">
<p>
gg objects are not the only type of objects that can be created using
map() and mutate(). Another application of these two functions is
fitting models to our data and storing the results in a new column. For
example, we could use map() and mutate() to fit a linear regression
model to the x and y columns and store the model output in a new
column
</p>
</div>
<p>To view all the plots together, we can use the <code>patchwork::wrap_plots()</code> function</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="#cb395-1" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb395-2"><a href="#cb395-2" tabindex="-1"></a>plots_df<span class="sc">$</span>scatterplots <span class="sc">|&gt;</span> <span class="fu">wrap_plots</span>()</span></code></pre></div>
<p><img src="04-functional-programming_files/figure-html/unnamed-chunk-126-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="map2" class="section level2" number="18.5">
<h2><span class="header-section-number">18.5</span> map2</h2>
<p><code>map2</code> is a versatile function in the <code>purrr</code> package for R that allows you to iterate over <strong>two</strong> input vectors or lists in parallel, applying a specified function to pairs of corresponding elements. It's particularly useful when you need to perform operations that depend on elements from two separate input sources simultaneously, offering a powerful way to combine and process data in a pairwise manner.</p>
<p><img src="images/map2.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Here is a quick example building on our plot making function - where we are able to alter the colour of the plots according to a</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="#cb396-1" tabindex="-1"></a>pal <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb396-2"><a href="#cb396-2" tabindex="-1"></a>  <span class="st">&quot;Adelie&quot;</span> <span class="ot">=</span> <span class="st">&quot;#FF8C00&quot;</span>, </span>
<span id="cb396-3"><a href="#cb396-3" tabindex="-1"></a>  <span class="st">&quot;Chinstrap&quot;</span> <span class="ot">=</span> <span class="st">&quot;#A034F0&quot;</span>, </span>
<span id="cb396-4"><a href="#cb396-4" tabindex="-1"></a>  <span class="st">&quot;Gentoo&quot;</span> <span class="ot">=</span> <span class="st">&quot;#159090&quot;</span>)</span>
<span id="cb396-5"><a href="#cb396-5" tabindex="-1"></a></span>
<span id="cb396-6"><a href="#cb396-6" tabindex="-1"></a></span>
<span id="cb396-7"><a href="#cb396-7" tabindex="-1"></a>plots_df <span class="ot">&lt;-</span> nested_heavy_penguins <span class="sc">|&gt;</span> </span>
<span id="cb396-8"><a href="#cb396-8" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">scatterplots =</span> <span class="fu">map2</span>(<span class="at">.x =</span> new_data, <span class="at">.y =</span> pal, <span class="sc">~</span> </span>
<span id="cb396-9"><a href="#cb396-9" tabindex="-1"></a>            <span class="fu">ggplot</span>(<span class="at">data =</span> .x, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> flipper_length_mm, <span class="at">colour =</span> .y)) <span class="sc">+</span></span>
<span id="cb396-10"><a href="#cb396-10" tabindex="-1"></a>            <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb396-11"><a href="#cb396-11" tabindex="-1"></a>            <span class="fu">scale_colour_identity</span>()</span>
<span id="cb396-12"><a href="#cb396-12" tabindex="-1"></a>        ))</span>
<span id="cb396-13"><a href="#cb396-13" tabindex="-1"></a></span>
<span id="cb396-14"><a href="#cb396-14" tabindex="-1"></a></span>
<span id="cb396-15"><a href="#cb396-15" tabindex="-1"></a>plots_df<span class="sc">$</span>scatterplots <span class="sc">|&gt;</span> </span>
<span id="cb396-16"><a href="#cb396-16" tabindex="-1"></a>    <span class="fu">wrap_plots</span>(<span class="at">... =</span> _, <span class="at">guides =</span> <span class="st">&quot;collect&quot;</span>)</span></code></pre></div>
<p><img src="04-functional-programming_files/figure-html/unnamed-chunk-128-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div id="running-different-summary-functions-on-each-nested-dataframe" class="section level3" number="18.5.1">
<h3><span class="header-section-number">18.5.1</span> Running different summary functions on each nested dataframe</h3>
<p>When working with nested data frames, <code>map2</code> provides the capability to apply distinct functions to each nested data frame, making it a versatile tool for performing customized and specialized operations on grouped data. This flexibility is distinct from simple operations with <code>group_by()</code>, as it allows you to tailor your computations to the unique characteristics of each subgroup within your nested data structure.</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="#cb397-1" tabindex="-1"></a>summary_functions <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb397-2"><a href="#cb397-2" tabindex="-1"></a>    Adelie <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb397-3"><a href="#cb397-3" tabindex="-1"></a>        <span class="fu">summarise</span>(data, </span>
<span id="cb397-4"><a href="#cb397-4" tabindex="-1"></a>                  <span class="at">mean_bill_length =</span> <span class="fu">mean</span>(bill_length_mm, <span class="at">na.rm =</span> T),</span>
<span id="cb397-5"><a href="#cb397-5" tabindex="-1"></a>                  <span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm =</span> T))</span>
<span id="cb397-6"><a href="#cb397-6" tabindex="-1"></a>    },</span>
<span id="cb397-7"><a href="#cb397-7" tabindex="-1"></a>    Chinstrap <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb397-8"><a href="#cb397-8" tabindex="-1"></a>        <span class="fu">summarise</span>(data,</span>
<span id="cb397-9"><a href="#cb397-9" tabindex="-1"></a>                  <span class="at">max_bill_length =</span> <span class="fu">max</span>(bill_length_mm, <span class="at">na.rm =</span> T),</span>
<span id="cb397-10"><a href="#cb397-10" tabindex="-1"></a>                  <span class="at">max_flipper_length =</span> <span class="fu">max</span>(flipper_length_mm, <span class="at">na.rm =</span> T))</span>
<span id="cb397-11"><a href="#cb397-11" tabindex="-1"></a>    },</span>
<span id="cb397-12"><a href="#cb397-12" tabindex="-1"></a>    Gentoo <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb397-13"><a href="#cb397-13" tabindex="-1"></a>        <span class="fu">summarise</span>(data,</span>
<span id="cb397-14"><a href="#cb397-14" tabindex="-1"></a>                  <span class="at">min_bill_length =</span> <span class="fu">min</span>(bill_length_mm, <span class="at">na.rm =</span> T),</span>
<span id="cb397-15"><a href="#cb397-15" tabindex="-1"></a>                  <span class="at">min_flipper_length =</span> <span class="fu">min</span>(flipper_length_mm, <span class="at">na.rm =</span> T))</span>
<span id="cb397-16"><a href="#cb397-16" tabindex="-1"></a>    }</span>
<span id="cb397-17"><a href="#cb397-17" tabindex="-1"></a>)</span>
<span id="cb397-18"><a href="#cb397-18" tabindex="-1"></a></span>
<span id="cb397-19"><a href="#cb397-19" tabindex="-1"></a><span class="co"># Apply the summary functions to each species using map2</span></span>
<span id="cb397-20"><a href="#cb397-20" tabindex="-1"></a>result <span class="ot">&lt;-</span> nested_penguins <span class="sc">%&gt;%</span></span>
<span id="cb397-21"><a href="#cb397-21" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">summaries =</span> <span class="fu">map2</span>(data, summary_functions, <span class="sc">~</span> <span class="fu">.y</span>(.x)))</span>
<span id="cb397-22"><a href="#cb397-22" tabindex="-1"></a></span>
<span id="cb397-23"><a href="#cb397-23" tabindex="-1"></a>result<span class="sc">$</span>summaries</span></code></pre></div>
<pre><code>## [[1]]
## # A tibble: 1 × 2
##   mean_bill_length mean_flipper_length
##              &lt;dbl&gt;               &lt;dbl&gt;
## 1             38.8                190.
## 
## [[2]]
## # A tibble: 1 × 2
##   max_bill_length max_flipper_length
##             &lt;dbl&gt;              &lt;int&gt;
## 1            59.6                231
## 
## [[3]]
## # A tibble: 1 × 2
##   min_bill_length min_flipper_length
##             &lt;dbl&gt;              &lt;int&gt;
## 1            40.9                178</code></pre>
</div>
</div>
<div id="exercises-1" class="section level2" number="18.6">
<h2><span class="header-section-number">18.6</span> Exercises</h2>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
In the previous chapter with apply we wrote the <code>z_score()</code> function, can you apply this using map to our <code>df</code> tibble?
</div>
</div>
<button id="displayTextunnamed-chunk-131" onclick="javascript:toggle(&#39;unnamed-chunk-131&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-131" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="#cb399-1" tabindex="-1"></a><span class="fu">map_df</span>(<span class="at">.x =</span> df, </span>
<span id="cb399-2"><a href="#cb399-2" tabindex="-1"></a>       <span class="at">.f =</span> z_score)</span>
<span id="cb399-3"><a href="#cb399-3" tabindex="-1"></a></span>
<span id="cb399-4"><a href="#cb399-4" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb399-5"><a href="#cb399-5" tabindex="-1"></a>  <span class="fu">map_df</span>(z_score)</span>
<span id="cb399-6"><a href="#cb399-6" tabindex="-1"></a></span>
<span id="cb399-7"><a href="#cb399-7" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb399-8"><a href="#cb399-8" tabindex="-1"></a>    <span class="fu">map_df</span>(<span class="sc">~</span><span class="fu">z_score</span>(.))</span></code></pre></div>
</div>
</div>
</div>
</div>
<div id="reading-1" class="section level2" number="18.7">
<h2><span class="header-section-number">18.7</span> Reading</h2>
<p>If you would like to practice more <code>map()</code> then check out <a href="https://www.rebeccabarter.com/blog/2019-08-19_purrr/#simplest-usage-repeated-looping-with-map">this blogpost</a></p>
<p>Below are some links you may find useful</p>
<ul>
<li><p><a href="https://www.rstudio.com/resources/cheatsheets/">RStudio education cheat sheet for purr</a></p></li>
<li><p><a href="https://r4ds.had.co.nz/program-intro.html">R4DS - intro to programming</a></p></li>
</ul>
</div>
</div>
<div id="bonus-simulation" class="section level1" number="19">
<h1><span class="header-section-number">19</span> Bonus: Simulation</h1>
<p>A computer simulation (or “sim”) is an attempt to model a real-life or hypothetical situation on a computer so that it can be studied to see how the system works. By changing variables in the simulation, predictions may be made about the behavior of the system. It is a tool to virtually investigate the behavior of the system under study - <em>Wikipedia</em></p>
<p>You can use computer simulations to:</p>
<ul>
<li><strong>Test your statistical intuition or demonstrate mathematical properties you cannot easily anticipate</strong>
<ul>
<li><em>e.g. test whether when supposedly random data are generated, there is no more than 5% of significant effects for a variable in a model</em></li>
</ul></li>
<li><strong>Understand sampling theory, probability distributions or test whether you understand the underlying processes of your system</strong>
<ul>
<li><em>e.g. see whether simulated data drawn from specific distribution are comparable to real data</em></li>
</ul></li>
<li><strong>Perform power analyses</strong>
<ul>
<li><em>e.g. assess whether the sample size (within a replicate) is high enough to detect an effect simulated, in more than 80% of the cases</em></li>
</ul></li>
<li><strong>Perform bootstrapping to get a confidence interval around a parameter estimate</strong>
<ul>
<li><em>i.e. bootstrapping means to sample with replacement (i.e. all the original options to draw from are available at each draw) in an observed dataset. Doing this generates new 'simulated' datasets. With each of them, one can run the statistical analysis made on the observed dataset, saving each time the parameter estimate of interest. After doing this multiple time, you will obtain a confidence interval for the parameter of interest</em></li>
</ul></li>
</ul>
<div id="random-number-generators" class="section level2" number="19.1">
<h2><span class="header-section-number">19.1</span> Random number generators</h2>
<p>R contains several functions to generate random numbers.<br />
Type <em><code>?function</code></em> in your console to get information on the function's arguments (i.e. the values that must be provided to obtain the function's result).</p>
<p>The function</p>
<p><code>sample(x, n, replace=FALSE)</code> draws <code>n</code> values from a given vector <code>x</code> without replacement (by default).</p>
<p>Sampling without replacement means that when you repeatedly draw e.g. 1 item from a pool of items, any item selected during the first draw is not available for selection during the second draw, and the first and second selected items are not in the pool to select from during the third draw, etc. Sampling with replacement means that all the original options are available at each draw.</p>
<p><strong>YOUR TURN:</strong><br />
Sample 100 values between 3 and 103 with replacement.</p>
<button id="displayTextunnamed-chunk-132" onclick="javascript:toggle(&#39;unnamed-chunk-132&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-132" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="#cb400-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">103</span></span>
<span id="cb400-2"><a href="#cb400-2" tabindex="-1"></a><span class="fu">sample</span>(x, <span class="dv">100</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
</div>
</div>
<p>The following functions draw <code>n</code> values from distributions with the specified parameters:</p>
<ul>
<li><code>runif(n, min, max)</code> draws <code>n</code> values from a <em>uniform</em> distribution with the specified <code>min</code> and <code>max</code><br />
</li>
<li><code>rpois(n, lambda)</code> draws <code>n</code> values from a <em>poisson</em> distribution with the specified <code>lambda</code><br />
</li>
<li><code>rnorm(n, mean, sd)</code> draws <code>n</code> values from a <em>normal</em> distribution with the specified <code>mean</code> and <code>standard deviation</code><br />
</li>
<li><code>rbinom(n, prob)</code> draws <code>n</code> values from a <em>binomial</em> distribution with the specified <code>probability</code></li>
</ul>
<p><strong>YOUR TURN:</strong></p>
<p>Draw 100 values from a normal distribution with a mean of 0 and a sd of 1.<br />
Draw 50 values from a normal distribution with a mean of 10 and sd of 5.<br />
Draw 1000 values from a poisson distribution with a lambda of 50.<br />
Draw 30 values from a uniform distribution between 0 and 10.</p>
<button id="displayTextunnamed-chunk-133" onclick="javascript:toggle(&#39;unnamed-chunk-133&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-133" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="#cb401-1" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">100</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb401-2"><a href="#cb401-2" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">100</span>) <span class="co"># if you sample from a normal distribution with a mean of 0 and a sd of 1, you do not need to provide them, they are the defaults</span></span>
<span id="cb401-3"><a href="#cb401-3" tabindex="-1"></a></span>
<span id="cb401-4"><a href="#cb401-4" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="at">sd =</span> <span class="dv">5</span>, <span class="at">mean =</span> <span class="dv">10</span>, <span class="at">n =</span> <span class="dv">50</span>)</span>
<span id="cb401-5"><a href="#cb401-5" tabindex="-1"></a></span>
<span id="cb401-6"><a href="#cb401-6" tabindex="-1"></a><span class="fu">rpois</span>(<span class="at">n =</span> <span class="dv">1000</span>, <span class="at">lambda =</span> <span class="dv">50</span>)</span>
<span id="cb401-7"><a href="#cb401-7" tabindex="-1"></a></span>
<span id="cb401-8"><a href="#cb401-8" tabindex="-1"></a><span class="fu">runif</span>(<span class="at">n =</span> <span class="dv">30</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">10</span>)</span></code></pre></div>
</div>
</div>
</div>
</div>
<div id="replication" class="section level2" number="19.2">
<h2><span class="header-section-number">19.2</span> Replication</h2>
<p><code>replicate(10, mean(rnorm(100)))</code></p>
<p>reads: 'draw 100 values from a normal distribution with a mean 0 and sd 1 (the default values), caclulate the mean of these 100 values, and do all that 10 times.</p>
<p><strong>YOUR TURN:</strong></p>
<p>Replicate 1000 times the mean of 10 values drawn from a unifrom distribution between 0 and 10.</p>
<p>Make a histogram of your results.</p>
<button id="displayTextunnamed-chunk-134" onclick="javascript:toggle(&#39;unnamed-chunk-134&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-134" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="tab">
<button class="tablinksunnamed-chunk-134 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-134&#39;, &#39;unnamed-chunk-134&#39;);">
Base R
</button>
<button class="tablinksunnamed-chunk-134" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-134&#39;, &#39;unnamed-chunk-134&#39;);">
<tt>tidyverse</tt>
</button>
</div>
<div id="option1unnamed-chunk-134" class="tabcontentunnamed-chunk-134">
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="#cb402-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>) </span>
<span id="cb402-2"><a href="#cb402-2" tabindex="-1"></a></span>
<span id="cb402-3"><a href="#cb402-3" tabindex="-1"></a><span class="co"># replicate(1000, mean(runif(10, max = 10)))</span></span>
<span id="cb402-4"><a href="#cb402-4" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">replicate</span>(<span class="dv">1000</span>, <span class="fu">mean</span>(<span class="fu">runif</span>(<span class="dv">10</span>, <span class="at">max =</span> <span class="dv">10</span>))))</span></code></pre></div>
<p><img src="04-functional-programming_files/figure-html/unnamed-chunk-148-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="option2unnamed-chunk-134" class="tabcontentunnamed-chunk-134">
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="#cb403-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>) </span>
<span id="cb403-2"><a href="#cb403-2" tabindex="-1"></a></span>
<span id="cb403-3"><a href="#cb403-3" tabindex="-1"></a>means <span class="ot">&lt;-</span> <span class="fu">replicate</span>(<span class="dv">1000</span>, <span class="fu">mean</span>(<span class="fu">runif</span>(<span class="dv">10</span>, <span class="at">max =</span> <span class="dv">10</span>)))</span>
<span id="cb403-4"><a href="#cb403-4" tabindex="-1"></a></span>
<span id="cb403-5"><a href="#cb403-5" tabindex="-1"></a>means <span class="sc">|&gt;</span> </span>
<span id="cb403-6"><a href="#cb403-6" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb403-7"><a href="#cb403-7" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> means)) <span class="sc">+</span></span>
<span id="cb403-8"><a href="#cb403-8" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.2</span>, <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb403-9"><a href="#cb403-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Histogram of Means&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Mean Value&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Frequency&quot;</span>)</span></code></pre></div>
<p><img src="04-functional-programming_files/figure-html/unnamed-chunk-149-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<script> javascript:hide('option2unnamed-chunk-134') </script>
</div>
</div>
</div>
</div>
<div id="set-seed" class="section level2" number="19.3">
<h2><span class="header-section-number">19.3</span> Set seed</h2>
<p><code>set.seed()</code></p>
<p>Computers in general, and R specifically, can, in fact, only provide pseudo random number generators.
A pseudorandom number generator's number sequence is completely determined by its seed, i.e. a number used to initialize that sequence.</p>
<p>Thus, if a pseudorandom number generator is reinitialized with the same seed, it will produce the same sequence of numbers. You can set the seed (with any arbitrary number) at the beginning of a script, and, if commands drawing random numbers are ran in the exact same order, they will provide the same output in subsequent runs.</p>
<p>This is useful for sharing code and reproduce simulations, as well as for debugging code.</p>
</div>
<div id="sample-size" class="section level2" number="19.4">
<h2><span class="header-section-number">19.4</span> Sample size</h2>
<p>In this example we are going to simulate some data for two groups - group 1 has a mean of 0 and an sd of 1, group 2 has a mean of whatever value we supply to <code>effect_size</code> and a sd of 1.</p>
<p>By default this simulation is set to repeat an experiment where 30 samples are taken from each population and compared for a true difference. The experiment is repeated 100 times.</p>
<p>The purpose of this simulation is to understand how the estimated difference in means varies across different random samples of data when the true effect size is known. It helps to assess the sampling variability and provides insights into the precision of the estimated difference. Additionally, it can be used to create a confidence interval to assess the uncertainty around the estimated effect. And determine the power of our experiments.</p>
<p>With this example we <strong>know</strong> the true difference, see what happens to our confidence intervals as we change the sample size, effect size and iterations:</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="#cb404-1" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb404-2"><a href="#cb404-2" tabindex="-1"></a></span>
<span id="cb404-3"><a href="#cb404-3" tabindex="-1"></a><span class="co"># Define a function to run the simulation for a given sample size and effect size</span></span>
<span id="cb404-4"><a href="#cb404-4" tabindex="-1"></a>simulate_difference <span class="ot">&lt;-</span> <span class="cf">function</span>(sample_size, effect_size) {</span>
<span id="cb404-5"><a href="#cb404-5" tabindex="-1"></a>    <span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb404-6"><a href="#cb404-6" tabindex="-1"></a>    </span>
<span id="cb404-7"><a href="#cb404-7" tabindex="-1"></a>    <span class="co"># Initialize a data frame to store the estimated differences</span></span>
<span id="cb404-8"><a href="#cb404-8" tabindex="-1"></a>    results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Simulated_Difference =</span> <span class="fu">numeric</span>(<span class="dv">100</span>))</span>
<span id="cb404-9"><a href="#cb404-9" tabindex="-1"></a>    </span>
<span id="cb404-10"><a href="#cb404-10" tabindex="-1"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>) {  <span class="co"># Perform 100 simulations for the fixed sample size</span></span>
<span id="cb404-11"><a href="#cb404-11" tabindex="-1"></a>        <span class="co"># Generate data for two groups with a specified effect size</span></span>
<span id="cb404-12"><a href="#cb404-12" tabindex="-1"></a>        group1 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(sample_size, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb404-13"><a href="#cb404-13" tabindex="-1"></a>        group2 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(sample_size, <span class="at">mean =</span> effect_size, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb404-14"><a href="#cb404-14" tabindex="-1"></a>        </span>
<span id="cb404-15"><a href="#cb404-15" tabindex="-1"></a>        <span class="co"># Create a data frame for the two groups</span></span>
<span id="cb404-16"><a href="#cb404-16" tabindex="-1"></a>        data_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Group =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Group1&quot;</span>, <span class="st">&quot;Group2&quot;</span>), <span class="at">each =</span> sample_size),</span>
<span id="cb404-17"><a href="#cb404-17" tabindex="-1"></a>                              <span class="at">Value =</span> <span class="fu">c</span>(group1, group2))</span>
<span id="cb404-18"><a href="#cb404-18" tabindex="-1"></a>        </span>
<span id="cb404-19"><a href="#cb404-19" tabindex="-1"></a>        <span class="co"># Fit a linear model to estimate the difference in means</span></span>
<span id="cb404-20"><a href="#cb404-20" tabindex="-1"></a>        lm_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Value <span class="sc">~</span> Group, <span class="at">data =</span> data_df)</span>
<span id="cb404-21"><a href="#cb404-21" tabindex="-1"></a>        </span>
<span id="cb404-22"><a href="#cb404-22" tabindex="-1"></a>        <span class="co"># Extract the estimated difference from the model</span></span>
<span id="cb404-23"><a href="#cb404-23" tabindex="-1"></a>        estimated_difference <span class="ot">&lt;-</span> <span class="fu">coef</span>(lm_model)[<span class="dv">2</span>]</span>
<span id="cb404-24"><a href="#cb404-24" tabindex="-1"></a>        </span>
<span id="cb404-25"><a href="#cb404-25" tabindex="-1"></a>        results<span class="sc">$</span>Simulated_Difference[i] <span class="ot">&lt;-</span> estimated_difference</span>
<span id="cb404-26"><a href="#cb404-26" tabindex="-1"></a>    }</span>
<span id="cb404-27"><a href="#cb404-27" tabindex="-1"></a>    </span>
<span id="cb404-28"><a href="#cb404-28" tabindex="-1"></a>    <span class="co"># Return the data frame of estimated differences</span></span>
<span id="cb404-29"><a href="#cb404-29" tabindex="-1"></a>    <span class="fu">return</span>(results)</span>
<span id="cb404-30"><a href="#cb404-30" tabindex="-1"></a>}</span>
<span id="cb404-31"><a href="#cb404-31" tabindex="-1"></a></span>
<span id="cb404-32"><a href="#cb404-32" tabindex="-1"></a><span class="co"># Fixed sample size of 20</span></span>
<span id="cb404-33"><a href="#cb404-33" tabindex="-1"></a>sample_size <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb404-34"><a href="#cb404-34" tabindex="-1"></a></span>
<span id="cb404-35"><a href="#cb404-35" tabindex="-1"></a><span class="co"># Set the effect size</span></span>
<span id="cb404-36"><a href="#cb404-36" tabindex="-1"></a>effect_size <span class="ot">&lt;-</span> .<span class="dv">8</span>  <span class="co"># Adjust as needed</span></span>
<span id="cb404-37"><a href="#cb404-37" tabindex="-1"></a></span>
<span id="cb404-38"><a href="#cb404-38" tabindex="-1"></a><span class="co"># Run the simulation for the fixed sample size</span></span>
<span id="cb404-39"><a href="#cb404-39" tabindex="-1"></a>simulation_results <span class="ot">&lt;-</span> <span class="fu">simulate_difference</span>(sample_size, effect_size)</span>
<span id="cb404-40"><a href="#cb404-40" tabindex="-1"></a></span>
<span id="cb404-41"><a href="#cb404-41" tabindex="-1"></a><span class="co"># Calculate the mean and 2.5th and 97.5th percentiles for the confidence interval</span></span>
<span id="cb404-42"><a href="#cb404-42" tabindex="-1"></a>mean_difference <span class="ot">&lt;-</span> <span class="fu">mean</span>(simulation_results<span class="sc">$</span>Simulated_Difference)</span>
<span id="cb404-43"><a href="#cb404-43" tabindex="-1"></a>lower_percentile <span class="ot">&lt;-</span> <span class="fu">quantile</span>(simulation_results<span class="sc">$</span>Simulated_Difference, <span class="fl">0.025</span>)</span>
<span id="cb404-44"><a href="#cb404-44" tabindex="-1"></a>upper_percentile <span class="ot">&lt;-</span> <span class="fu">quantile</span>(simulation_results<span class="sc">$</span>Simulated_Difference, <span class="fl">0.975</span>)</span>
<span id="cb404-45"><a href="#cb404-45" tabindex="-1"></a></span>
<span id="cb404-46"><a href="#cb404-46" tabindex="-1"></a><span class="co"># Create a density histogram of the estimated differences with lines for percentiles</span></span>
<span id="cb404-47"><a href="#cb404-47" tabindex="-1"></a><span class="fu">ggplot</span>(simulation_results, <span class="fu">aes</span>(<span class="at">x =</span> Simulated_Difference)) <span class="sc">+</span></span>
<span id="cb404-48"><a href="#cb404-48" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.05</span>, <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb404-49"><a href="#cb404-49" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> mean_difference), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb404-50"><a href="#cb404-50" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> lower_percentile), <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb404-51"><a href="#cb404-51" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> upper_percentile), <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb404-52"><a href="#cb404-52" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Estimated Difference&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Density&quot;</span>) <span class="sc">+</span></span>
<span id="cb404-53"><a href="#cb404-53" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="fu">paste</span>(<span class="st">&quot;Density Histogram of Estimated Differences (Sample Size = 20)&quot;</span>)) <span class="sc">+</span></span>
<span id="cb404-54"><a href="#cb404-54" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.5</span>,<span class="dv">1</span>,<span class="fl">1.5</span>,<span class="dv">2</span>))<span class="sc">+</span></span>
<span id="cb404-55"><a href="#cb404-55" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="04-functional-programming_files/figure-html/unnamed-chunk-135-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="exercise-3" class="section level2" number="19.5">
<h2><span class="header-section-number">19.5</span> Exercise</h2>
<p>Testing your R might, can you simplify or speed up the simulation above?</p>
<div class="webex-solution">
<button>
Solutions
</button>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="#cb405-1" tabindex="-1"></a> <span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb405-2"><a href="#cb405-2" tabindex="-1"></a>two_group_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">sample_size =</span> <span class="dv">30</span>, <span class="at">effect_size =</span> .<span class="dv">8</span>){</span>
<span id="cb405-3"><a href="#cb405-3" tabindex="-1"></a>        group1 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(sample_size, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb405-4"><a href="#cb405-4" tabindex="-1"></a>        group2 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(sample_size, <span class="at">mean =</span> effect_size, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb405-5"><a href="#cb405-5" tabindex="-1"></a>        </span>
<span id="cb405-6"><a href="#cb405-6" tabindex="-1"></a>        <span class="co"># Create a data frame for the two groups</span></span>
<span id="cb405-7"><a href="#cb405-7" tabindex="-1"></a>        data_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Group =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Group1&quot;</span>, <span class="st">&quot;Group2&quot;</span>), <span class="at">each =</span> sample_size),</span>
<span id="cb405-8"><a href="#cb405-8" tabindex="-1"></a>                              <span class="at">Value =</span> <span class="fu">c</span>(group1, group2))</span>
<span id="cb405-9"><a href="#cb405-9" tabindex="-1"></a>        </span>
<span id="cb405-10"><a href="#cb405-10" tabindex="-1"></a>        <span class="co"># Fit a linear model to estimate the difference in means</span></span>
<span id="cb405-11"><a href="#cb405-11" tabindex="-1"></a>        lm_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Value <span class="sc">~</span> Group, <span class="at">data =</span> data_df) </span>
<span id="cb405-12"><a href="#cb405-12" tabindex="-1"></a>        estimated_difference <span class="ot">&lt;-</span> <span class="fu">coef</span>(lm_model)[<span class="dv">2</span>]</span>
<span id="cb405-13"><a href="#cb405-13" tabindex="-1"></a>}</span>
<span id="cb405-14"><a href="#cb405-14" tabindex="-1"></a></span>
<span id="cb405-15"><a href="#cb405-15" tabindex="-1"></a>sim <span class="ot">&lt;-</span> <span class="fu">replicate</span>(<span class="dv">100</span>, <span class="fu">two_group_fun</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb405-16"><a href="#cb405-16" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb405-17"><a href="#cb405-17" tabindex="-1"></a></span>
<span id="cb405-18"><a href="#cb405-18" tabindex="-1"></a><span class="fu">ggplot</span>(sim, <span class="fu">aes</span>(<span class="at">x =</span> value)) <span class="sc">+</span></span>
<span id="cb405-19"><a href="#cb405-19" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.05</span>, <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb405-20"><a href="#cb405-20" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> mean_difference), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb405-21"><a href="#cb405-21" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> lower_percentile), <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb405-22"><a href="#cb405-22" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> upper_percentile), <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb405-23"><a href="#cb405-23" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Estimated Difference&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Density&quot;</span>) <span class="sc">+</span></span>
<span id="cb405-24"><a href="#cb405-24" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="fu">paste</span>(<span class="st">&quot;Density Histogram of Estimated Differences (Sample Size = 20)&quot;</span>)) <span class="sc">+</span></span>
<span id="cb405-25"><a href="#cb405-25" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.5</span>,<span class="dv">1</span>,<span class="fl">1.5</span>,<span class="dv">2</span>))<span class="sc">+</span></span>
<span id="cb405-26"><a href="#cb405-26" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span></code></pre></div>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="#cb406-1" tabindex="-1"></a> <span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb406-2"><a href="#cb406-2" tabindex="-1"></a></span>
<span id="cb406-3"><a href="#cb406-3" tabindex="-1"></a>two_group_fun_opt <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">sample_size =</span> <span class="dv">30</span>, <span class="at">effect_size =</span> .<span class="dv">8</span>){</span>
<span id="cb406-4"><a href="#cb406-4" tabindex="-1"></a>   group1 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(sample_size, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb406-5"><a href="#cb406-5" tabindex="-1"></a>    group2 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(sample_size, <span class="at">mean =</span> effect_size, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb406-6"><a href="#cb406-6" tabindex="-1"></a></span>
<span id="cb406-7"><a href="#cb406-7" tabindex="-1"></a>    <span class="co"># Fit a linear model to estimate the difference in means avoid making a dataframe</span></span>
<span id="cb406-8"><a href="#cb406-8" tabindex="-1"></a>    lm_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">c</span>(group1, group2) <span class="sc">~</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Group1&quot;</span>, <span class="st">&quot;Group2&quot;</span>), <span class="at">each =</span> sample_size))</span>
<span id="cb406-9"><a href="#cb406-9" tabindex="-1"></a>    estimated_difference <span class="ot">&lt;-</span> <span class="fu">coef</span>(lm_model)[<span class="dv">2</span>]</span>
<span id="cb406-10"><a href="#cb406-10" tabindex="-1"></a>}</span>
<span id="cb406-11"><a href="#cb406-11" tabindex="-1"></a></span>
<span id="cb406-12"><a href="#cb406-12" tabindex="-1"></a>sim <span class="ot">&lt;-</span> <span class="fu">replicate</span>(<span class="dv">100</span>, <span class="fu">two_group_fun_opt</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb406-13"><a href="#cb406-13" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span></code></pre></div>
<p><img src="images/benchmark_sim.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="power" class="section level2" number="19.6">
<h2><span class="header-section-number">19.6</span> Power</h2>
<p>A useful application of simulations is to work out the power of a statistical test. Here we can flip the simulation to more specifically focus on calculating our statistical power of detection on a simulated dataset with a known effect-size:</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="#cb407-1" tabindex="-1"></a><span class="co"># Define a function to run the simulation for a given sample size and effect size</span></span>
<span id="cb407-2"><a href="#cb407-2" tabindex="-1"></a>simulate_power <span class="ot">&lt;-</span> <span class="cf">function</span>(sample_size, effect_size) {</span>
<span id="cb407-3"><a href="#cb407-3" tabindex="-1"></a>  <span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb407-4"><a href="#cb407-4" tabindex="-1"></a>  </span>
<span id="cb407-5"><a href="#cb407-5" tabindex="-1"></a>  <span class="co"># Initialize a counter for the number of significant t-tests</span></span>
<span id="cb407-6"><a href="#cb407-6" tabindex="-1"></a>  num_significant <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb407-7"><a href="#cb407-7" tabindex="-1"></a>  </span>
<span id="cb407-8"><a href="#cb407-8" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>) {  <span class="co"># Perform 100 simulations for each sample size</span></span>
<span id="cb407-9"><a href="#cb407-9" tabindex="-1"></a></span>
<span id="cb407-10"><a href="#cb407-10" tabindex="-1"></a>          <span class="co"># Generate data for two groups with a specified effect size</span></span>
<span id="cb407-11"><a href="#cb407-11" tabindex="-1"></a>    group1 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(sample_size, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb407-12"><a href="#cb407-12" tabindex="-1"></a>    group2 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(sample_size, <span class="at">mean =</span> effect_size, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb407-13"><a href="#cb407-13" tabindex="-1"></a></span>
<span id="cb407-14"><a href="#cb407-14" tabindex="-1"></a>     <span class="co"># Create a data frame for the two groups</span></span>
<span id="cb407-15"><a href="#cb407-15" tabindex="-1"></a>        data_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Group =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Group1&quot;</span>, <span class="st">&quot;Group2&quot;</span>), <span class="at">each =</span> sample_size),</span>
<span id="cb407-16"><a href="#cb407-16" tabindex="-1"></a>                              <span class="at">Value =</span> <span class="fu">c</span>(group1, group2))</span>
<span id="cb407-17"><a href="#cb407-17" tabindex="-1"></a>        </span>
<span id="cb407-18"><a href="#cb407-18" tabindex="-1"></a>        <span class="co"># Fit a linear model to estimate the difference in means</span></span>
<span id="cb407-19"><a href="#cb407-19" tabindex="-1"></a>        lm_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Value <span class="sc">~</span> Group, <span class="at">data =</span> data_df)</span>
<span id="cb407-20"><a href="#cb407-20" tabindex="-1"></a>        </span>
<span id="cb407-21"><a href="#cb407-21" tabindex="-1"></a>        <span class="co"># Extract the p value from the model</span></span>
<span id="cb407-22"><a href="#cb407-22" tabindex="-1"></a>       </span>
<span id="cb407-23"><a href="#cb407-23" tabindex="-1"></a>      </span>
<span id="cb407-24"><a href="#cb407-24" tabindex="-1"></a>        </span>
<span id="cb407-25"><a href="#cb407-25" tabindex="-1"></a>    <span class="co"># Check if the null hypothesis is rejected (p-value &lt; 0.05)</span></span>
<span id="cb407-26"><a href="#cb407-26" tabindex="-1"></a>    <span class="cf">if</span> ( broom<span class="sc">::</span><span class="fu">tidy</span>(lm_model)[[<span class="dv">2</span>,<span class="dv">5</span>]] <span class="sc">&lt;</span> <span class="fl">0.05</span>) {</span>
<span id="cb407-27"><a href="#cb407-27" tabindex="-1"></a>      num_significant <span class="ot">&lt;-</span> num_significant <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb407-28"><a href="#cb407-28" tabindex="-1"></a>    }</span>
<span id="cb407-29"><a href="#cb407-29" tabindex="-1"></a>  }</span>
<span id="cb407-30"><a href="#cb407-30" tabindex="-1"></a>  </span>
<span id="cb407-31"><a href="#cb407-31" tabindex="-1"></a>  <span class="co"># Return the proportion of significant t-tests (power)</span></span>
<span id="cb407-32"><a href="#cb407-32" tabindex="-1"></a>  <span class="fu">return</span>(num_significant <span class="sc">/</span> <span class="dv">100</span>)</span>
<span id="cb407-33"><a href="#cb407-33" tabindex="-1"></a>}</span>
<span id="cb407-34"><a href="#cb407-34" tabindex="-1"></a></span>
<span id="cb407-35"><a href="#cb407-35" tabindex="-1"></a><span class="co"># Specify a range of sample sizes to test</span></span>
<span id="cb407-36"><a href="#cb407-36" tabindex="-1"></a>sample_sizes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">80</span>, <span class="dv">90</span>, <span class="dv">100</span>)</span>
<span id="cb407-37"><a href="#cb407-37" tabindex="-1"></a></span>
<span id="cb407-38"><a href="#cb407-38" tabindex="-1"></a><span class="co"># Set the effect size</span></span>
<span id="cb407-39"><a href="#cb407-39" tabindex="-1"></a>effect_size <span class="ot">&lt;-</span> <span class="dv">1</span>  <span class="co"># Adjust as needed</span></span>
<span id="cb407-40"><a href="#cb407-40" tabindex="-1"></a></span>
<span id="cb407-41"><a href="#cb407-41" tabindex="-1"></a><span class="co"># Run the simulation for each sample size</span></span>
<span id="cb407-42"><a href="#cb407-42" tabindex="-1"></a>simulation_results <span class="ot">&lt;-</span> <span class="fu">map_dbl</span>(sample_sizes, simulate_power, effect_size)</span>
<span id="cb407-43"><a href="#cb407-43" tabindex="-1"></a></span>
<span id="cb407-44"><a href="#cb407-44" tabindex="-1"></a><span class="co"># Plot the power as a function of sample size</span></span>
<span id="cb407-45"><a href="#cb407-45" tabindex="-1"></a><span class="fu">plot</span>(sample_sizes, simulation_results, <span class="at">type =</span> <span class="st">&quot;b&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;Sample Size&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Power&quot;</span>, <span class="at">main =</span> <span class="st">&quot;Power vs. Sample Size&quot;</span>)</span></code></pre></div>
<p><img src="04-functional-programming_files/figure-html/unnamed-chunk-139-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="exercise-4" class="section level2" number="19.7">
<h2><span class="header-section-number">19.7</span> Exercise</h2>
<p>Can you optimise the iterations to get stable predictions of power?</p>
<p>Alter the parameters of effect, size sample size and iterations.</p>
</div>
<div id="further-reading" class="section level2" number="19.8">
<h2><span class="header-section-number">19.8</span> Further Reading:</h2>
<p><a href="https://bookdown.org/ndphillips/YaRrr/generating-random-data.html" class="uri">https://bookdown.org/ndphillips/YaRrr/generating-random-data.html</a></p>
<p>Simulations: <a href="https://rstudio-education.github.io/hopr/" class="uri">https://rstudio-education.github.io/hopr/</a></p>
<p><a href="https://aosmith.rbind.io/2018/01/09/simulate-simulate-part1/#simulate-simulate-dance-to-the-music" class="uri">https://aosmith.rbind.io/2018/01/09/simulate-simulate-part1/#simulate-simulate-dance-to-the-music</a></p>
<p><a href="https://aosmith.rbind.io/2019/07/22/automate-model-fitting-with-loops/" class="uri">https://aosmith.rbind.io/2019/07/22/automate-model-fitting-with-loops/</a></p>
<p><a href="https://aosmith.rbind.io/2017/12/31/many-datasets/#list-all-files-to-read-in" class="uri">https://aosmith.rbind.io/2017/12/31/many-datasets/#list-all-files-to-read-in</a></p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="#cb408-1" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code></pre></div>
<pre><code>## R version 4.3.1 (2023-06-16)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 20.04.6 LTS
## 
## Matrix products: default
## BLAS:   /usr/lib/x86_64-linux-gnu/atlas/libblas.so.3.10.3 
## LAPACK: /usr/lib/x86_64-linux-gnu/atlas/liblapack.so.3.10.3;  LAPACK version 3.9.0
## 
## locale:
##  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       
##  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   
##  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          
## [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   
## 
## time zone: UTC
## tzcode source: system (glibc)
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] patchwork_1.1.2       testthat_3.1.10       palmerpenguins_0.1.1 
##  [4] microbenchmark_1.4.10 knitr_1.43            webexercises_1.1.0   
##  [7] glossary_1.0.0        lubridate_1.9.2       forcats_1.0.0        
## [10] stringr_1.5.0         dplyr_1.1.2           purrr_1.0.1          
## [13] readr_2.1.4           tidyr_1.3.0           tibble_3.2.1         
## [16] ggplot2_3.4.2         tidyverse_2.0.0      
## 
## loaded via a namespace (and not attached):
##  [1] sass_0.4.6        utf8_1.2.3        generics_0.1.3    xml2_1.3.5       
##  [5] stringi_1.7.12    hms_1.1.3         digest_0.6.33     magrittr_2.0.3   
##  [9] evaluate_0.21     grid_4.3.1        timechange_0.2.0  bookdown_0.34    
## [13] fastmap_1.1.1     jsonlite_1.8.7    backports_1.4.1   brio_1.1.3       
## [17] fansi_1.0.4       scales_1.2.1      codetools_0.2-19  jquerylib_0.1.4  
## [21] cli_3.6.1         rlang_1.1.1       munsell_0.5.0     withr_2.5.0      
## [25] cachem_1.0.8      yaml_2.3.7        tools_4.3.1       tzdb_0.4.0       
## [29] memoise_2.0.1     colorspace_2.1-0  broom_1.0.5       vctrs_0.6.3      
## [33] R6_2.5.1          lifecycle_1.0.3   fs_1.6.2          pkgconfig_2.0.3  
## [37] pillar_1.9.0      bslib_0.5.0       gtable_0.3.3      glue_1.6.2       
## [41] highr_0.10        xfun_0.39         tidyselect_1.2.0  rstudioapi_0.15.0
## [45] farver_2.1.1      htmltools_0.5.5   labeling_0.4.2    rmarkdown_2.23   
## [49] compiler_4.3.1    downlit_0.4.3</code></pre>
<!--chapter:end:04-functional-programming.Rmd-->
</div>
</div>
<div id="part-getting-the-most-out-of-tidyverse" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) Getting the most out of tidyverse</h1>
</div>
<div id="reading-files-with-readr" class="section level1" number="20">
<h1><span class="header-section-number">20</span> Reading files with <code>readr</code></h1>
<p>Make sure for these exercises you are starting with a <strong>clean session</strong></p>
<div id="cleaning-column-names" class="section level2" number="20.1">
<h2><span class="header-section-number">20.1</span> Cleaning column names</h2>
<p>Reading a CSV file often requires some data cleaning. For example, let's say I want to import data and convert all column names to <code>snake_case</code>.</p>
<p>Most of us would probably read the .CSV file first, then start data cleaning - for example with the <code>janitor::clean_names()</code> function.</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="#cb410-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb410-2"><a href="#cb410-2" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb410-3"><a href="#cb410-3" tabindex="-1"></a><span class="co">#load data</span></span>
<span id="cb410-4"><a href="#cb410-4" tabindex="-1"></a>penguins_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span> (<span class="st">&quot;data/penguins_raw.csv&quot;</span>)</span>
<span id="cb410-5"><a href="#cb410-5" tabindex="-1"></a></span>
<span id="cb410-6"><a href="#cb410-6" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb410-7"><a href="#cb410-7" tabindex="-1"></a>janitor<span class="sc">::</span><span class="fu">clean_names</span>() </span></code></pre></div>
<p>In my previous example, I used the <code>clean_names()</code> function from the "janitor" package to convert the column names to lowercase. You can achieve the same result by using the <code>make_clean_names()</code> function within the <code>read_csv</code> function, specifying it in the <code>name_repair</code> argument.</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="#cb411-1" tabindex="-1"></a>penguins_clean <span class="ot">&lt;-</span> <span class="fu">read_csv</span> (<span class="st">&quot;data/penguins_raw.csv&quot;</span>,</span>
<span id="cb411-2"><a href="#cb411-2" tabindex="-1"></a>                      <span class="at">name_repair =</span> janitor<span class="sc">::</span>make_clean_names)</span></code></pre></div>
<p>By default the <code>janitor::make_clean_names</code> function has a default argument of <code>snake_case</code> but within the function there is also a <code>case</code> argument where other common naming conventions can be used.</p>
</div>
<div id="selecting-columns" class="section level2" number="20.2">
<h2><span class="header-section-number">20.2</span> Selecting columns</h2>
<p>In addition to cleaning your column names, you can also directly select columns while using the "read_csv" function by utilizing the "col_select" argument. This can be extremely useful when working with large files, selecting only the columns you need can be memory-efficient.</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="#cb412-1" tabindex="-1"></a>penguins_clean <span class="ot">&lt;-</span> <span class="fu">read_csv</span> (<span class="st">&quot;data/penguins_raw.csv&quot;</span>,</span>
<span id="cb412-2"><a href="#cb412-2" tabindex="-1"></a>                      <span class="at">name_repair =</span> janitor<span class="sc">::</span>make_clean_names,</span>
<span id="cb412-3"><a href="#cb412-3" tabindex="-1"></a>                      <span class="at">col_select =</span> <span class="fu">c</span>(species, body_mass_g, flipper_length_mm)) <span class="sc">|&gt;</span> </span>
<span id="cb412-4"><a href="#cb412-4" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
</div>
<div id="reading-multiple-files" class="section level2" number="20.3">
<h2><span class="header-section-number">20.3</span> Reading multiple files</h2>
<p>Here we actually start with a complete dataframe - and first iterate to split into 25 equally sized dataframes.
<code>walk2</code> operates in the same way as <code>map2</code> - but is the preferred option here as it is "silent"</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="#cb413-1" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="fu">c</span>(<span class="st">&quot;data/many_files&quot;</span>))</span>
<span id="cb413-2"><a href="#cb413-2" tabindex="-1"></a>peng_samples <span class="ot">&lt;-</span> <span class="fu">map</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">25</span>, <span class="sc">~</span> <span class="fu">slice_sample</span>(penguins_clean, <span class="at">n =</span> <span class="dv">20</span>))</span>
<span id="cb413-3"><a href="#cb413-3" tabindex="-1"></a></span>
<span id="cb413-4"><a href="#cb413-4" tabindex="-1"></a><span class="fu">walk2</span>(peng_samples, <span class="dv">1</span><span class="sc">:</span><span class="dv">25</span>, <span class="sc">~</span> <span class="fu">write_csv</span>(.x, <span class="fu">paste0</span>(<span class="st">&quot;data/many_files/&quot;</span>, .y, <span class="st">&quot;.csv&quot;</span>)))</span></code></pre></div>
<div id="create-a-vector-of-file-paths" class="section level3" number="20.3.1">
<h3><span class="header-section-number">20.3.1</span> Create a vector of file paths</h3>
<p>Now, to create a vector of file paths, we'll use the list.files function in R. This function allows us to identify and list all the files with a specific extension in a directory. In this example, we're looking for CSV files in the "data/many_files" directory.</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="#cb414-1" tabindex="-1"></a>csv_files_list_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">path =</span> <span class="st">&quot;data/many_files&quot;</span>,</span>
<span id="cb414-2"><a href="#cb414-2" tabindex="-1"></a>                                    <span class="at">pattern =</span> <span class="st">&quot;csv&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code> [1] &quot;data/many_files/1.csv&quot;  &quot;data/many_files/10.csv&quot; &quot;data/many_files/11.csv&quot; &quot;data/many_files/12.csv&quot;
 [5] &quot;data/many_files/13.csv&quot; &quot;data/many_files/14.csv&quot; &quot;data/many_files/15.csv&quot; &quot;data/many_files/16.csv&quot;
 [9] &quot;data/many_files/17.csv&quot; &quot;data/many_files/18.csv&quot; &quot;data/many_files/19.csv&quot; &quot;data/many_files/2.csv&quot; 
[13] &quot;data/many_files/20.csv&quot; &quot;data/many_files/21.csv&quot; &quot;data/many_files/22.csv&quot; &quot;data/many_files/23.csv&quot;
[17] &quot;data/many_files/24.csv&quot; &quot;data/many_files/25.csv&quot; &quot;data/many_files/3.csv&quot;  &quot;data/many_files/4.csv&quot; 
[21] &quot;data/many_files/5.csv&quot;  &quot;data/many_files/6.csv&quot;  &quot;data/many_files/7.csv&quot;  &quot;data/many_files/8.csv&quot; 
[25] &quot;data/many_files/9.csv&quot;</code></pre>
<p>The function "list.files" has several arguments. Here's an explanation of some key arguments:</p>
<ul>
<li><p>"path": This argument allows you to specify the directory where your files are located. It's essential to ensure the path is set correctly. You should be working within an R-Studio project or have defined your working directory to avoid issues.</p></li>
<li><p>"pattern": You provide a regular expression in this argument to filter the files you want to list. In your example, you mentioned that you are looking for files containing the string "csv." This helps narrow down the selection to specific file types or patterns.</p></li>
<li><p>"full.names": Setting this argument to <code>TRUE</code> indicates that you want to store the full paths of the files, not just their names. This is important for ensuring you can correctly access and read these files later. If "full.names" is not set to <code>TRUE</code>, you may encounter difficulties when attempting to read the files because the file paths would be incomplete.</p></li>
</ul>
<p>This vector, <code>csv_files_list_files</code>, will now hold the file paths to all the CSV files in our specified directory, making it easy to access and manipulate these files in our R environment</p>
</div>
<div id="read-multiple-files" class="section level3" number="20.3.2">
<h3><span class="header-section-number">20.3.2</span> Read multiple files</h3>
<p>Now that we have obtained the file paths, we can proceed to load the files into R. The preferred method in the tidyverse is to use the <code>map_dfr</code> function from the <code>purrr</code> package. This function iterates through all the file paths and combines the data frames into a single, unified data frame. In the following code, <code>.x</code> represents the file name or path. To read and output the actual content of the CSV files (not just the filenames), you should include <code>.x</code> (the path) within a <code>readr</code> function. While this example deals with CSV files, this approach works similarly for other rectangular file formats.</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="#cb416-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(csv_files_list_files,</span>
<span id="cb416-2"><a href="#cb416-2" tabindex="-1"></a>              <span class="sc">~</span> <span class="fu">read_csv</span>(.x))</span>
<span id="cb416-3"><a href="#cb416-3" tabindex="-1"></a></span>
<span id="cb416-4"><a href="#cb416-4" tabindex="-1"></a><span class="fu">glimpse</span>(df)</span></code></pre></div>
</div>
<div id="selecting-files" class="section level3" number="20.3.3">
<h3><span class="header-section-number">20.3.3</span> Selecting files</h3>
<p>Now, to filter and choose specific files for reading, we'll use the <code>str_detect()</code> function from the <code>stringr</code> package in R. This function allows us to search for specific patterns within our vector of file paths and select files that match our criteria. he pattern argument specifies the pattern we want to detect, which, in this case, is "[2-4]". The <code>negate = FALSE</code> argument ensures that we only select files that match the pattern. This work is made easier when we have good naming conventions.</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="#cb417-1" tabindex="-1"></a>csv_files_list_files[<span class="fu">str_detect</span>(csv_files_list_files, <span class="at">pattern =</span> <span class="st">&quot;[2-4]&quot;</span>,</span>
<span id="cb417-2"><a href="#cb417-2" tabindex="-1"></a><span class="at">negate =</span> <span class="cn">FALSE</span>)]</span></code></pre></div>
<pre><code> [1] &quot;data/many_files/12.csv&quot; &quot;data/many_files/13.csv&quot; &quot;data/many_files/14.csv&quot;
 [4] &quot;data/many_files/2.csv&quot;  &quot;data/many_files/20.csv&quot; &quot;data/many_files/21.csv&quot;
 [7] &quot;data/many_files/22.csv&quot; &quot;data/many_files/23.csv&quot; &quot;data/many_files/24.csv&quot;
[10] &quot;data/many_files/25.csv&quot; &quot;data/many_files/3.csv&quot;  &quot;data/many_files/4.csv&quot;</code></pre>
<p>If we want to narrow our criteria further to include only the files that meet the specific pattern of file names ending with "2.csv" or "4.csv." We can work with a subset of files that specifically fit our analysis needs.</p>
<p><code>str_detect(csv_files_list_files, pattern = "[24]\\.csv$</code> is the core of this code. Here, we are applying the <code>str_detect()</code> function to search for a particular pattern within the csv_files_list_files. The pattern we are looking for is "[24].csv$," which essentially means we're seeking files with a file name that ends with "2.csv" or "4.csv."</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="#cb419-1" tabindex="-1"></a>csv_files_list_files[<span class="fu">str_detect</span>(csv_files_list_files, <span class="at">pattern =</span> <span class="st">&quot;[24]</span><span class="sc">\\</span><span class="st">.csv$&quot;</span>)]</span></code></pre></div>
<pre><code>[1] &quot;data/many_files/12.csv&quot; &quot;data/many_files/14.csv&quot; &quot;data/many_files/2.csv&quot; 
[4] &quot;data/many_files/22.csv&quot; &quot;data/many_files/24.csv&quot; &quot;data/many_files/4.csv&quot;
</code></pre>
</div>
</div>
<div id="exercise-5" class="section level2" number="20.4">
<h2><span class="header-section-number">20.4</span> Exercise</h2>
<p>This final section for the workshop provides a real world example using iterations to create graphs of population trends from the <a href="https://www.livingplanetindex.org/">Living Planet Index</a> for a number of vertebrate species from 1970 to 2014.</p>
<p>The data can be collected here:</p>
<a href="https://raw.githubusercontent.com/UEABIO/data-sci-v1/main/book/files/LPI_data_loops.csv">
<button class="btn btn-success"><i class="fa fa-save"></i> Download LPI data as csv</button>
</a>
<p><strong>1. Can you make four plots using data nesting and map functions?</strong></p>
<p>For this exercise we would like to filter the dataframe to House sparrow, Great tit, Corn bunting and Meadow pipit then nest this data and apply a map function to produce a scatter plot of year against abundance. Customise the plot as you see fit.</p>
<button id="displayTextunnamed-chunk-12" onclick="javascript:toggle(&#39;unnamed-chunk-12&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-12" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="#cb421-1" tabindex="-1"></a>nested_LPI <span class="ot">&lt;-</span> LPI <span class="sc">|&gt;</span> </span>
<span id="cb421-2"><a href="#cb421-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Common.Name) <span class="sc">|&gt;</span> </span>
<span id="cb421-3"><a href="#cb421-3" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">|&gt;</span> </span>
<span id="cb421-4"><a href="#cb421-4" tabindex="-1"></a>  <span class="fu">filter</span>(Common.Name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;House sparrow&quot;</span>, <span class="st">&quot;Great tit&quot;</span>, <span class="st">&quot;Corn bunting&quot;</span>, <span class="st">&quot;Meadow pipit&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb421-5"><a href="#cb421-5" tabindex="-1"></a>     <span class="fu">mutate</span>(<span class="at">plots =</span> <span class="fu">map</span>(data, <span class="sc">~</span> <span class="fu">ggplot</span>(., <span class="fu">aes</span> (<span class="at">x =</span> year, <span class="at">y =</span> abundance)) <span class="sc">+</span>              </span>
<span id="cb421-6"><a href="#cb421-6" tabindex="-1"></a>                            <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">colour =</span> <span class="st">&quot;#00868B&quot;</span>) <span class="sc">+</span>                                                </span>
<span id="cb421-7"><a href="#cb421-7" tabindex="-1"></a>                            <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">colour =</span> <span class="st">&quot;#00868B&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;#00868B&quot;</span>) <span class="sc">+</span></span>
<span id="cb421-8"><a href="#cb421-8" tabindex="-1"></a>                            <span class="fu">ggtitle</span>(Common.Name)<span class="sc">+</span></span>
<span id="cb421-9"><a href="#cb421-9" tabindex="-1"></a>                            <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Abundance</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="at">x =</span> <span class="st">&quot;&quot;</span>)))</span>
<span id="cb421-10"><a href="#cb421-10" tabindex="-1"></a></span>
<span id="cb421-11"><a href="#cb421-11" tabindex="-1"></a></span>
<span id="cb421-12"><a href="#cb421-12" tabindex="-1"></a>  <span class="fu">wrap_plots</span>(nested_LPI<span class="sc">$</span>plots)</span></code></pre></div>
</div>
</div>
</div>
<p><strong>2. Can you write this object to multiple dataframes based on "Common.Name".</strong></p>
<p>For this exercise we would like to read the entire dataframe, then produce four new .csv files one for each of House sparrow, Great tit, Corn bunting and Meadow pipit.</p>
<button id="displayTextunnamed-chunk-13" onclick="javascript:toggle(&#39;unnamed-chunk-13&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-13" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="#cb422-1" tabindex="-1"></a>LPI <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/UEABIO/data-sci-v1/main/book/files/LPI_data_loops.csv&quot;</span>)</span>
<span id="cb422-2"><a href="#cb422-2" tabindex="-1"></a></span>
<span id="cb422-3"><a href="#cb422-3" tabindex="-1"></a>LPI <span class="sc">|&gt;</span> </span>
<span id="cb422-4"><a href="#cb422-4" tabindex="-1"></a>  <span class="fu">group_by</span>(Common.Name) <span class="sc">|&gt;</span> </span>
<span id="cb422-5"><a href="#cb422-5" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">|&gt;</span> </span>
<span id="cb422-6"><a href="#cb422-6" tabindex="-1"></a>  <span class="fu">filter</span>(Common.Name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;House sparrow&quot;</span>, <span class="st">&quot;Great tit&quot;</span>, <span class="st">&quot;Corn bunting&quot;</span>, <span class="st">&quot;Meadow pipit&quot;</span>)) </span>
<span id="cb422-7"><a href="#cb422-7" tabindex="-1"></a></span>
<span id="cb422-8"><a href="#cb422-8" tabindex="-1"></a><span class="fu">walk2</span>(nested<span class="sc">$</span>data, nested<span class="sc">$</span>Common.Name, <span class="sc">~</span> <span class="fu">write_csv</span>(.x, <span class="fu">paste0</span>(<span class="fu">paste0</span>(<span class="st">&quot;split_files/&quot;</span>, .y , <span class="st">&quot;.csv&quot;</span>))))</span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
<div id="working-across-columns" class="section level1" number="21">
<h1><span class="header-section-number">21</span> Working across columns</h1>
<p>In this section we will go through the following functions:</p>
<ul>
<li><p><code>last_col()</code></p></li>
<li><p><code>starts_with()</code></p></li>
<li><p><code>ends_with()</code></p></li>
<li><p><code>contains()</code></p></li>
<li><p><code>matches()</code></p></li>
<li><p><code>num_range()</code></p></li>
<li><p><code>where()</code></p></li>
</ul>
<p>This set of handy functions helps streamline column selection and manipulation in data frames. These functions serve various purposes, from selecting specific columns based on their names to targeting numeric ranges or custom patterns, ultimately making data wrangling more efficient and precise.</p>
<div id="select-the-last-column" class="section level2" number="21.1">
<h2><span class="header-section-number">21.1</span> Select the last column</h2>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="#cb423-1" tabindex="-1"></a>penguins_clean <span class="sc">|&gt;</span> </span>
<span id="cb423-2"><a href="#cb423-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">last_col</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb423-3"><a href="#cb423-3" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 344
## Columns: 1
## $ comments &lt;chr&gt; &quot;Not enough blood for isotopes.&quot;, NA, NA, &quot;Adult not sampled.…</code></pre>
<p>You can also select <code>n-to-the-last</code> with <code>last_col()</code></p>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="#cb425-1" tabindex="-1"></a>penguins_clean <span class="sc">|&gt;</span> </span>
<span id="cb425-2"><a href="#cb425-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">last_col</span>(<span class="dv">3</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb425-3"><a href="#cb425-3" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 344
## Columns: 1
## $ sex &lt;chr&gt; &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;FEMALE&quot;, NA, &quot;FEMALE&quot;, &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;MALE&quot;…</code></pre>
<div class="info">
<p>
Indexing starts at 0, so 1 indicates n-1.
</p>
</div>
</div>
<div id="selecting-columns-based-on-string" class="section level2" number="21.2">
<h2><span class="header-section-number">21.2</span> Selecting columns based on string</h2>
<p>This code selects all columns that "start with s"</p>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="#cb427-1" tabindex="-1"></a>penguins_clean <span class="sc">|&gt;</span> </span>
<span id="cb427-2"><a href="#cb427-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;s&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb427-3"><a href="#cb427-3" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>Rows: 344
Columns: 5
$ study_name    &lt;chr&gt; &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;…
$ sample_number &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,…
$ species       &lt;chr&gt; &quot;Adelie Penguin (Pygoscelis adeliae)&quot;, &quot;Adelie Penguin (Pygoscelis adeliae)&quot;, &quot;Adelie …
$ stage         &lt;chr&gt; &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg Stage&quot;…
$ sex           &lt;chr&gt; &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;FEMALE&quot;, NA, &quot;FEMALE&quot;, &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;MALE&quot;, NA, NA, NA, NA, &quot;F…
</code></pre>
<p><code>starts_with</code> and <code>ends_with</code> works with any character, but also with a vector of characters, here it allows us to select all columns that begin with either "s or c".</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="#cb429-1" tabindex="-1"></a>penguins_clean <span class="sc">|&gt;</span> </span>
<span id="cb429-2"><a href="#cb429-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="fu">c</span>(<span class="st">&quot;s&quot;</span>, <span class="st">&quot;c&quot;</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb429-3"><a href="#cb429-3" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>Rows: 344
Columns: 9
$ study_name        &lt;chr&gt; &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0…
$ sample_number     &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23,…
$ species           &lt;chr&gt; &quot;Adelie Penguin (Pygoscelis adeliae)&quot;, &quot;Adelie Penguin (Pygoscelis adeliae)&quot;, &quot;Ade…
$ stage             &lt;chr&gt; &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg St…
$ sex               &lt;chr&gt; &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;FEMALE&quot;, NA, &quot;FEMALE&quot;, &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;MALE&quot;, NA, NA, NA, NA…
$ clutch_completion &lt;chr&gt; &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, …
$ culmen_length_mm  &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, 42.0, 37.8, 37.8, 41.1, 38.6, …
$ culmen_depth_mm   &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, 20.2, 17.1, 17.3, 17.6, 21.2, …
$ comments          &lt;chr&gt; &quot;Not enough blood for isotopes.&quot;, NA, NA, &quot;Adult not sampled.&quot;, NA, NA, &quot;Nest neve…</code></pre>
<div id="contains" class="section level3" number="21.2.1">
<h3><span class="header-section-number">21.2.1</span> Contains</h3>
<p>We can also use the <code>contains()</code> function to search for columns that contain a specific string, it searches for an exact match to your string (no regular expressions) but is case-insensitive</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="#cb431-1" tabindex="-1"></a>penguins_clean <span class="sc">|&gt;</span> </span>
<span id="cb431-2"><a href="#cb431-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&quot;length&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb431-3"><a href="#cb431-3" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>Rows: 344
Columns: 2
$ culmen_length_mm  &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, 42.0, 37.8, 37.8, 41.1, 38.6, …
$ flipper_length_mm &lt;dbl&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186, 180, 182, 191, 198, 185, 195…</code></pre>
</div>
<div id="regular-expressions" class="section level3" number="21.2.2">
<h3><span class="header-section-number">21.2.2</span> Regular expressions</h3>
<p>Regular expressions, often abbreviated as regex, are powerful tools for pattern matching and text manipulation. They provide a concise and flexible way to search, extract, and manipulate text based on specific patterns, allowing data analysts and programmers to efficiently handle complex text-processing tasks.</p>
<p>We have been working with regex each time we use <code>stringr</code> but we have been looking for literal characters
But we can use regex types to look for specific patterns</p>
<table>
<colgroup>
<col width="29%" />
<col width="70%" />
</colgroup>
<thead>
<tr class="header">
<th>Regex Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Literal Characters</td>
<td>Matches the exact sequence of characters you specify.</td>
</tr>
<tr class="even">
<td>Character Classes (square brackets <code>[]</code>)</td>
<td>Matches any character within the specified set.</td>
</tr>
<tr class="odd">
<td>Wildcards (dot <code>.</code>)</td>
<td>Matches any single character (except for a newline).</td>
</tr>
<tr class="even">
<td>Quantifiers (e.g., <code>*</code>, <code>+</code>, <code>?</code>)</td>
<td>Specify the number of times a character or group can occur.</td>
</tr>
<tr class="odd">
<td>Anchors (e.g., <code>^</code>, <code>$</code>)</td>
<td>Specify the start (<code>^</code>) or end (<code>$</code>) of a line or string.</td>
</tr>
<tr class="even">
<td>Character Escapes (e.g., <code>\d</code>, <code>\s</code>, <code>\w</code>)</td>
<td>Shorthand for common character classes.</td>
</tr>
<tr class="odd">
<td>Groups (parentheses <code>()</code>)</td>
<td>Create subpatterns for more complex matches.</td>
</tr>
<tr class="even">
<td>Alternation (pipe <code>|</code>)</td>
<td>Allows multiple alternative matches.</td>
</tr>
<tr class="odd">
<td>Ranges (dash <code>-</code>)</td>
<td>Matches any character within a specified range.</td>
</tr>
<tr class="even">
<td>Quantifiers (e.g., <code>{m}</code>, <code>{m,}</code>, <code>{m,n}</code>)</td>
<td>Specify exact, minimum, or minimum to maximum occurrences of a character or group.</td>
</tr>
<tr class="odd">
<td>Word Boundaries (<code>\b</code>)</td>
<td>Matches the position between a word character and a non-word character.</td>
</tr>
<tr class="even">
<td>Capture Groups (parentheses <code>()</code>)</td>
<td>Create groups for capturing matched content for later use.</td>
</tr>
<tr class="odd">
<td>Lookahead and Lookbehind</td>
<td>Perform assertions without including them in the match.</td>
</tr>
<tr class="even">
<td>Modifiers (e.g., <code>i</code>, <code>g</code>, <code>m</code>)</td>
<td>Modify the behavior of the regex, such as making it case-insensitive (<code>i</code>) or matching across multiple lines (<code>m</code>).</td>
</tr>
</tbody>
</table>
<p>This example will look for any columns that match contains numbers.</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="#cb433-1" tabindex="-1"></a>penguins_clean <span class="sc">|&gt;</span> </span>
<span id="cb433-2"><a href="#cb433-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">&quot;[0-9]&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb433-3"><a href="#cb433-3" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>Rows: 344
Columns: 2
$ delta_15_n_o_oo &lt;dbl&gt; NA, 8.94956, 8.36821, NA, 8.76651, 8.66496, 9.18718, 9.46060, NA, 9.13362, 8.63243, …
$ delta_13_c_o_oo &lt;dbl&gt; NA, -24.69454, -25.33302, NA, -25.32426, -25.29805, -25.21799, -24.89958, NA, -25.09…
</code></pre>
<p>This <em>modifier</em> means columns are only returned if they have at least two numbers in the column header</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="#cb435-1" tabindex="-1"></a>penguins_clean <span class="sc">|&gt;</span> </span>
<span id="cb435-2"><a href="#cb435-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">&quot;[0-9]{2}&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb435-3"><a href="#cb435-3" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<p>This pattern looks for an exact string match to "length_" but it must also be followed by any two letters...</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="#cb436-1" tabindex="-1"></a>penguins_clean <span class="sc">|&gt;</span> </span>
<span id="cb436-2"><a href="#cb436-2" tabindex="-1"></a>    <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">&quot;length_[a-z]{2}&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb436-3"><a href="#cb436-3" tabindex="-1"></a>    <span class="fu">glimpse</span>()</span></code></pre></div>
</div>
</div>
<div id="selecting-by-column-type" class="section level2" number="21.3">
<h2><span class="header-section-number">21.3</span> Selecting by column type</h2>
<p>The <code>where()</code> function is used when you want to select variables of a specific data type in a dataset. For example, you can use it to select character variables.</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="#cb437-1" tabindex="-1"></a>penguins_clean <span class="sc">|&gt;</span> </span>
<span id="cb437-2"><a href="#cb437-2" tabindex="-1"></a>    <span class="fu">select</span>(<span class="fu">where</span>(is.character)) <span class="sc">|&gt;</span> </span>
<span id="cb437-3"><a href="#cb437-3" tabindex="-1"></a>    <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>Rows: 344
Columns: 10
$ study_name        &lt;chr&gt; &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0…
$ species           &lt;chr&gt; &quot;Adelie Penguin (Pygoscelis adeliae)&quot;, &quot;Adelie Penguin (Pygoscelis adeliae)&quot;, &quot;Ade…
$ region            &lt;chr&gt; &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;A…
$ island            &lt;chr&gt; &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Tor…
$ stage             &lt;chr&gt; &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg St…
$ individual_id     &lt;chr&gt; &quot;N1A1&quot;, &quot;N1A2&quot;, &quot;N2A1&quot;, &quot;N2A2&quot;, &quot;N3A1&quot;, &quot;N3A2&quot;, &quot;N4A1&quot;, &quot;N4A2&quot;, &quot;N5A1&quot;, &quot;N5A2&quot;, &quot;N…
$ clutch_completion &lt;chr&gt; &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, …
$ date_egg          &lt;chr&gt; &quot;11/11/2007&quot;, &quot;11/11/2007&quot;, &quot;16/11/2007&quot;, &quot;16/11/2007&quot;, &quot;16/11/2007&quot;, &quot;16/11/2007&quot;…
$ sex               &lt;chr&gt; &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;FEMALE&quot;, NA, &quot;FEMALE&quot;, &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;MALE&quot;, NA, NA, NA, NA…
$ comments          &lt;chr&gt; &quot;Not enough blood for isotopes.&quot;, NA, NA, &quot;Adult not sampled.&quot;, NA, NA, &quot;Nest neve…</code></pre>
<p>Other "predicate functions" include</p>
<ul>
<li><p>is.double</p></li>
<li><p>is.numeric</p></li>
<li><p>is.logical</p></li>
<li><p>is.factor</p></li>
<li><p>is.integer</p></li>
</ul>
</div>
<div id="combos" class="section level2" number="21.4">
<h2><span class="header-section-number">21.4</span> Combos</h2>
<p>Using standard logical operators such as <code>|</code> and <code>&amp;</code> we can string together different combinations of selection criteria:</p>
<p>Here the column must be of type numeric <em>or</em> the title contains "species"</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="#cb439-1" tabindex="-1"></a>penguins_clean <span class="sc">|&gt;</span> </span>
<span id="cb439-2"><a href="#cb439-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric) <span class="sc">|</span> <span class="fu">contains</span>(<span class="st">&quot;species&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb439-3"><a href="#cb439-3" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>Rows: 344
Columns: 8
$ sample_number     &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23,…
$ culmen_length_mm  &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, 42.0, 37.8, 37.8, 41.1, 38.6, …
$ culmen_depth_mm   &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, 20.2, 17.1, 17.3, 17.6, 21.2, …
$ flipper_length_mm &lt;dbl&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186, 180, 182, 191, 198, 185, 195…
$ body_mass_g       &lt;dbl&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, 4250, 3300, 3700, 3200, 3800, …
$ delta_15_n_o_oo   &lt;dbl&gt; NA, 8.94956, 8.36821, NA, 8.76651, 8.66496, 9.18718, 9.46060, NA, 9.13362, 8.63243…
$ delta_13_c_o_oo   &lt;dbl&gt; NA, -24.69454, -25.33302, NA, -25.32426, -25.29805, -25.21799, -24.89958, NA, -25.…
$ species           &lt;chr&gt; &quot;Adelie Penguin (Pygoscelis adeliae)&quot;, &quot;Adelie Penguin (Pygoscelis adeliae)&quot;, &quot;Ade…
</code></pre>
</div>
</div>
<div id="modifying-variables" class="section level1" number="22">
<h1><span class="header-section-number">22</span> Modifying variables</h1>
<div id="count" class="section level2" number="22.1">
<h2><span class="header-section-number">22.1</span> count</h2>
<p>Counting is one of the most common tasks you do when working with data. Counting may
sound simple, but it can get complicated quickly. Consider these examples:</p>
<ul>
<li><p>Sometimes we want to count with continuous variables. Suppose you have a year variable
in your data frame that is of data type integer (e.g. 1982, 1945, 1990). You want to
know the number of people for each decade. To do this, you must first convert your year
variable to decades before you start counting.</p></li>
<li><p>Often you want to count things per group (for example, the number of players on a
particular sports team) and add the counts per group as a new variable to your data
frame. You could use joins to do this, but could you do it with less code and more
efficiently?</p></li>
</ul>
<p>In this example, we have created a new variable body_mass_intervals that is calculated from the variable body_mass_g. We also used the name argument to give the count column a more descriptive name.</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="#cb441-1" tabindex="-1"></a>penguins_clean <span class="sc">|&gt;</span> </span>
<span id="cb441-2"><a href="#cb441-2" tabindex="-1"></a>  <span class="fu">count</span>(<span class="at">body_mass_intervals =</span> <span class="fu">cut_width</span>(body_mass_g, <span class="dv">100</span>))</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">body_mass_intervals</th>
<th align="right">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">[2.65e+03,2.75e+03]</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">(2.75e+03,2.85e+03]</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">(2.85e+03,2.95e+03]</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">(2.95e+03,3.05e+03]</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">(3.05e+03,3.15e+03]</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">(3.15e+03,3.25e+03]</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">(3.25e+03,3.35e+03]</td>
<td align="right">17</td>
</tr>
<tr class="even">
<td align="left">(3.35e+03,3.45e+03]</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="left">(3.45e+03,3.55e+03]</td>
<td align="right">21</td>
</tr>
<tr class="even">
<td align="left">(3.55e+03,3.65e+03]</td>
<td align="right">15</td>
</tr>
<tr class="odd">
<td align="left">(3.65e+03,3.75e+03]</td>
<td align="right">21</td>
</tr>
<tr class="even">
<td align="left">(3.75e+03,3.85e+03]</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="left">(3.85e+03,3.95e+03]</td>
<td align="right">21</td>
</tr>
<tr class="even">
<td align="left">(3.95e+03,4.05e+03]</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">(4.05e+03,4.15e+03]</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">(4.15e+03,4.25e+03]</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="left">(4.25e+03,4.35e+03]</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">(4.35e+03,4.45e+03]</td>
<td align="right">14</td>
</tr>
<tr class="odd">
<td align="left">(4.45e+03,4.55e+03]</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">(4.55e+03,4.65e+03]</td>
<td align="right">13</td>
</tr>
<tr class="odd">
<td align="left">(4.65e+03,4.75e+03]</td>
<td align="right">15</td>
</tr>
<tr class="even">
<td align="left">(4.75e+03,4.85e+03]</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">(4.85e+03,4.95e+03]</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="left">(4.95e+03,5.05e+03]</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="left">(5.05e+03,5.15e+03]</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">(5.15e+03,5.25e+03]</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">(5.25e+03,5.35e+03]</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">(5.35e+03,5.45e+03]</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">(5.45e+03,5.55e+03]</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">(5.55e+03,5.65e+03]</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="left">(5.65e+03,5.75e+03]</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">(5.75e+03,5.85e+03]</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="left">(5.85e+03,5.95e+03]</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">(5.95e+03,6.05e+03]</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">(6.25e+03,6.35e+03]</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
</div>
<p>You can see that the bins each have a range of 10. Also, the bins are surrounded by square brackets and parentheses. A parenthesis means that the number is included in the bin, a square bracket means that a number is <strong>not</strong> included in the bin, In our second example, this would mean that 2.75e+03 is included, but not 2.85e+03.</p>
</div>
<div id="extract" class="section level2" number="22.2">
<h2><span class="header-section-number">22.2</span> extract</h2>
<p>This code is using the <code>separate</code> function from the <code>tidyr</code> package to split the "species" column in the penguins_clean data frame into two separate columns: "species" and "full_latin_name." The separation is based on a specific delimiter, which is an opening parenthesis <code>(</code>.</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="#cb442-1" tabindex="-1"></a>penguins_clean <span class="sc">|&gt;</span> </span>
<span id="cb442-2"><a href="#cb442-2" tabindex="-1"></a>  <span class="fu">separate</span>(species,</span>
<span id="cb442-3"><a href="#cb442-3" tabindex="-1"></a>          <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;full_latin_name&quot;</span>),</span>
<span id="cb442-4"><a href="#cb442-4" tabindex="-1"></a>          <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">(&quot;</span></span>
<span id="cb442-5"><a href="#cb442-5" tabindex="-1"></a>          )</span></code></pre></div>
<p>This approach reaches its limits quite quickly - note here it has left an ugly <code>)</code> on the end of the second column. There are also issues when we lack a clear separator to distinguish the columns we want to create. For these use cases we have extract.</p>
<p>Now suppose you want to separate the common names and latin names of the species variable by regex:</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="#cb443-1" tabindex="-1"></a>penguins_clean_split <span class="ot">&lt;-</span> penguins_clean <span class="sc">|&gt;</span> </span>
<span id="cb443-2"><a href="#cb443-2" tabindex="-1"></a>  <span class="fu">extract</span>(species,</span>
<span id="cb443-3"><a href="#cb443-3" tabindex="-1"></a>          <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;full_latin_name&quot;</span>),</span>
<span id="cb443-4"><a href="#cb443-4" tabindex="-1"></a>          <span class="at">regex =</span> <span class="st">&quot;(</span><span class="sc">\\</span><span class="st">w+) .* </span><span class="sc">\\</span><span class="st">(([^)]+)</span><span class="sc">\\</span><span class="st">)&quot;</span></span>
<span id="cb443-5"><a href="#cb443-5" tabindex="-1"></a>          )</span>
<span id="cb443-6"><a href="#cb443-6" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> <span class="fu">colnames</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;study_name&quot;        &quot;sample_number&quot;     &quot;species&quot;          
##  [4] &quot;full_latin_name&quot;   &quot;region&quot;            &quot;island&quot;           
##  [7] &quot;stage&quot;             &quot;individual_id&quot;     &quot;clutch_completion&quot;
## [10] &quot;date_egg&quot;          &quot;culmen_length_mm&quot;  &quot;culmen_depth_mm&quot;  
## [13] &quot;flipper_length_mm&quot; &quot;body_mass_g&quot;       &quot;sex&quot;              
## [16] &quot;delta_15_n_o_oo&quot;   &quot;delta_13_c_o_oo&quot;   &quot;comments&quot;</code></pre>
<ul>
<li><p>The first group captures one or more word characters (\w+).</p></li>
<li><p><code>.*</code> this captures any characters in the string but doesn't capture them</p></li>
<li><p>The last group contains anything found inside brackets <code>()</code></p>
<ul>
<li><code>\\(</code> finds an open bracket but does not capture it<br />
</li>
<li><code>([^)]+)</code> captures anything except a closing parenthesis</li>
</ul></li>
</ul>
</div>
</div>
<div id="factors-1" class="section level1" number="23">
<h1><span class="header-section-number">23</span> Factors</h1>
<div id="anonymising-factors" class="section level2" number="23.1">
<h2><span class="header-section-number">23.1</span> Anonymising factors</h2>
<p>Sometimes you want to make your data completely anonymous so that other people can’t see sensitive information. Or because you wish to blind you own analyses we can do this with <code>forcats::fct_anon</code></p>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="#cb445-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb445-2"><a href="#cb445-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">fct_anon</span>(species,</span>
<span id="cb445-3"><a href="#cb445-3" tabindex="-1"></a>         <span class="at">prefix =</span> <span class="st">&quot;species_&quot;</span>))</span></code></pre></div>
</div>
<div id="lump-factors" class="section level2" number="23.2">
<h2><span class="header-section-number">23.2</span> Lump factors</h2>
<p><code>fct_lump_min()</code> is a function from the <code>forcats</code> package in R, which is used to lump or group together levels of a categorical variable in a way that keeps the most common levels intact while grouping the less common levels into an "Other" or "Miscellaneous" category.</p>
<p>In this example, any species not represented by at least 150 observations, will be lumped into an "Other" category:</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="#cb446-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb446-2"><a href="#cb446-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">body_size =</span> <span class="fu">fct_lump_min</span>(<span class="fu">as_factor</span>(species), <span class="dv">150</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb446-3"><a href="#cb446-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> body_size,</span>
<span id="cb446-4"><a href="#cb446-4" tabindex="-1"></a>         <span class="at">y =</span> flipper_length_mm))<span class="sc">+</span></span>
<span id="cb446-5"><a href="#cb446-5" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
</div>
<div id="ordering-factors" class="section level2" number="23.3">
<h2><span class="header-section-number">23.3</span> Ordering factors</h2>
<p>With the <code>fct_relevel</code> function we can set factors and apply a specified level at the same time:</p>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="#cb447-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb447-2"><a href="#cb447-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">fct_relevel</span>(species, <span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb447-3"><a href="#cb447-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species))<span class="sc">+</span></span>
<span id="cb447-4"><a href="#cb447-4" tabindex="-1"></a>  <span class="fu">geom_bar</span>()<span class="sc">+</span></span>
<span id="cb447-5"><a href="#cb447-5" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="05-tidyverse_files/figure-html/unnamed-chunk-30-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>With the function <code>fct_infreq</code> we can change the order according to how frequently each level occurs</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="#cb448-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb448-2"><a href="#cb448-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">fct_infreq</span>(species)) <span class="sc">|&gt;</span> </span>
<span id="cb448-3"><a href="#cb448-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species))<span class="sc">+</span></span>
<span id="cb448-4"><a href="#cb448-4" tabindex="-1"></a>  <span class="fu">geom_bar</span>()<span class="sc">+</span></span>
<span id="cb448-5"><a href="#cb448-5" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="05-tidyverse_files/figure-html/unnamed-chunk-31-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>The <code>fct_rev()</code> function in R is used to reverse the order of levels in a factor variable. It is particularly useful for changing the order of factor levels when you want to display data in a reversed or descending order.</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="#cb449-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb449-2"><a href="#cb449-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">fct_rev</span>(<span class="fu">as_factor</span>(species))) <span class="sc">|&gt;</span> </span>
<span id="cb449-3"><a href="#cb449-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species))<span class="sc">+</span></span>
<span id="cb449-4"><a href="#cb449-4" tabindex="-1"></a>  <span class="fu">geom_bar</span>()<span class="sc">+</span></span>
<span id="cb449-5"><a href="#cb449-5" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="05-tidyverse_files/figure-html/unnamed-chunk-32-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>The <code>fct_reorder</code> function allows us to order the levels based on another continuous variable</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="#cb450-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb450-2"><a href="#cb450-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">as_factor</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb450-3"><a href="#cb450-3" tabindex="-1"></a>           <span class="fu">fct_reorder</span>(body_mass_g,</span>
<span id="cb450-4"><a href="#cb450-4" tabindex="-1"></a>                       <span class="at">.fun =</span> median)) <span class="sc">|&gt;</span> </span>
<span id="cb450-5"><a href="#cb450-5" tabindex="-1"></a>  <span class="co"># by default the levels are ordered by the median values of the continuous variable</span></span>
<span id="cb450-6"><a href="#cb450-6" tabindex="-1"></a>  <span class="co"># mean, min and max can all be included here</span></span>
<span id="cb450-7"><a href="#cb450-7" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species,</span>
<span id="cb450-8"><a href="#cb450-8" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g,</span>
<span id="cb450-9"><a href="#cb450-9" tabindex="-1"></a>             <span class="at">colour =</span> species))<span class="sc">+</span></span>
<span id="cb450-10"><a href="#cb450-10" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">2</span>,</span>
<span id="cb450-11"><a href="#cb450-11" tabindex="-1"></a>               <span class="at">outlier.shape =</span> <span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb450-12"><a href="#cb450-12" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> .<span class="dv">2</span>,</span>
<span id="cb450-13"><a href="#cb450-13" tabindex="-1"></a>              <span class="at">alpha =</span> .<span class="dv">4</span>)</span></code></pre></div>
<p><img src="05-tidyverse_files/figure-html/unnamed-chunk-33-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="applying-functions-across-columns" class="section level1" number="24">
<h1><span class="header-section-number">24</span> Applying functions across columns</h1>
<p>One of the credos of programming is “Don’t repeat yourself”. We have seen in previous tutorials that many of us fall victim to this principle quite often. Fortunately, the tidyverse team has developed a set of functions that make it easier not to repeat ourselves:</p>
<div id="calculate-summary-statistics-across-columns" class="section level2" number="24.1">
<h2><span class="header-section-number">24.1</span> calculate summary statistics across columns</h2>
<p>In this example I am generating summary statistics for two columns, but I can make this process more efficient:</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="#cb451-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb451-2"><a href="#cb451-2" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb451-3"><a href="#cb451-3" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb451-4"><a href="#cb451-4" tabindex="-1"></a>    <span class="at">mean_body_mass =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> T),</span>
<span id="cb451-5"><a href="#cb451-5" tabindex="-1"></a>    <span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm =</span> T)</span>
<span id="cb451-6"><a href="#cb451-6" tabindex="-1"></a>  )</span></code></pre></div>
<p>A couple of things are important here:</p>
<p>• The function across only works inside dplyr verbs (e.g. mutate)</p>
<p>• The function has three important arguments: .cols stands for the column to apply a
function to. You can use the tidyselect functions here; .fns stands for the function(s)
that will be applied to these columns; .names is used whenever you want to change the
names of the selected columns.</p>
<p>Each use case will work with this general structure:</p>
<pre><code>&lt;DFRAME&gt; |&gt; 
&lt;DPLYR VERB&gt;(
across(
.cols = &lt;SELECTION OF COLUMNS&gt;,
.fns = &lt;FUNCTION TO BE APPLIED TO EACH COLUMN&gt;,
.names = &lt;NAME OF THE GENERATED COLUMNS&gt;
)
)</code></pre>
<p>Instead you can use the across function to get the same result, here I could supply column names <code>.cols = c("body_mass_g", "flipper_length_mm")</code> or can I use <code>where</code> to get whole column types :</p>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="#cb453-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb453-2"><a href="#cb453-2" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb453-3"><a href="#cb453-3" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb453-4"><a href="#cb453-4" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb453-5"><a href="#cb453-5" tabindex="-1"></a>      <span class="at">.cols =</span> <span class="fu">where</span>(is.numeric),</span>
<span id="cb453-6"><a href="#cb453-6" tabindex="-1"></a>      <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">mean</span>(.x, <span class="at">na.rm =</span> T),</span>
<span id="cb453-7"><a href="#cb453-7" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;mean_{.col}&quot;</span>)</span>
<span id="cb453-8"><a href="#cb453-8" tabindex="-1"></a>    )</span></code></pre></div>
<div class="kable-table">
<table style="width:100%;">
<colgroup>
<col width="6%" />
<col width="12%" />
<col width="14%" />
<col width="13%" />
<col width="14%" />
<col width="11%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">species</th>
<th align="right">mean_sample_number</th>
<th align="right">mean_culmen_length_mm</th>
<th align="right">mean_culmen_depth_mm</th>
<th align="right">mean_flipper_length_mm</th>
<th align="right">mean_body_mass_g</th>
<th align="right">mean_delta_15_n_o_oo</th>
<th align="right">mean_delta_13_c_o_oo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Adelie</td>
<td align="right">76.5</td>
<td align="right">38.79139</td>
<td align="right">18.34636</td>
<td align="right">189.9536</td>
<td align="right">3700.662</td>
<td align="right">8.859733</td>
<td align="right">-25.80419</td>
</tr>
<tr class="even">
<td align="left">Chinstrap</td>
<td align="right">34.5</td>
<td align="right">48.83382</td>
<td align="right">18.42059</td>
<td align="right">195.8235</td>
<td align="right">3733.088</td>
<td align="right">9.356155</td>
<td align="right">-24.54654</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">62.5</td>
<td align="right">47.50488</td>
<td align="right">14.98211</td>
<td align="right">217.1870</td>
<td align="right">5076.016</td>
<td align="right">8.245338</td>
<td align="right">-26.18530</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="change-variable-types-across-columns" class="section level2" number="24.2">
<h2><span class="header-section-number">24.2</span> Change variable types across columns</h2>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="#cb454-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb454-2"><a href="#cb454-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb454-3"><a href="#cb454-3" tabindex="-1"></a>    <span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;island&quot;</span>, <span class="st">&quot;region&quot;</span>),</span>
<span id="cb454-4"><a href="#cb454-4" tabindex="-1"></a>           <span class="at">.fns =</span> as_factor)</span>
<span id="cb454-5"><a href="#cb454-5" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb454-6"><a href="#cb454-6" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.factor)) <span class="sc">|&gt;</span> </span>
<span id="cb454-7"><a href="#cb454-7" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 344
## Columns: 3
## $ species &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adelie…
## $ region  &lt;fct&gt; Anvers, Anvers, Anvers, Anvers, Anvers, Anvers, Anvers, Anvers…
## $ island  &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgersen, Torgers…</code></pre>
<pre><code>Rows: 344
Columns: 3
$ species &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ region  &lt;fct&gt; Anvers, Anvers, Anvers, Anvers, Anvers, Anvers, Anvers, Anvers, Anvers, Anve…
$ island  &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgersen, Torgersen, Torgersen,…</code></pre>
</div>
<div id="correct-typos" class="section level2" number="24.3">
<h2><span class="header-section-number">24.3</span> Correct typos</h2>
<p>We can use the <code>across</code> functions to quickly change typos across multiple columns at once, here is an example:</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="#cb457-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;adelie&quot;</span>, <span class="st">&quot;pinstrap&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span>)</span>
<span id="cb457-2"><a href="#cb457-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;adelie&quot;</span>, <span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span>,<span class="st">&quot;Chinstrap&quot;</span>)</span>
<span id="cb457-3"><a href="#cb457-3" tabindex="-1"></a></span>
<span id="cb457-4"><a href="#cb457-4" tabindex="-1"></a>typo_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(x,y)</span></code></pre></div>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="#cb458-1" tabindex="-1"></a>typo_df <span class="sc">|&gt;</span> </span>
<span id="cb458-2"><a href="#cb458-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(</span>
<span id="cb458-3"><a href="#cb458-3" tabindex="-1"></a>    <span class="at">.cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb458-4"><a href="#cb458-4" tabindex="-1"></a>    <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">case_when</span>(</span>
<span id="cb458-5"><a href="#cb458-5" tabindex="-1"></a>      <span class="fu">str_detect</span>(., <span class="st">&quot;adelie&quot;</span>) <span class="sc">~</span> <span class="fu">str_replace</span>(., <span class="st">&quot;adelie&quot;</span>, <span class="st">&quot;Adelie&quot;</span>),</span>
<span id="cb458-6"><a href="#cb458-6" tabindex="-1"></a>      <span class="fu">str_detect</span>(., <span class="st">&quot;pinstrap&quot;</span>) <span class="sc">~</span> <span class="fu">str_replace</span>(., <span class="st">&quot;pinstrap&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span>),</span>
<span id="cb458-7"><a href="#cb458-7" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> .</span>
<span id="cb458-8"><a href="#cb458-8" tabindex="-1"></a>    )</span>
<span id="cb458-9"><a href="#cb458-9" tabindex="-1"></a>  ))</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">x</th>
<th align="left">y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Adelie</td>
<td align="left">Adelie</td>
</tr>
<tr class="even">
<td align="left">Adelie</td>
<td align="left">Adelie</td>
</tr>
<tr class="odd">
<td align="left">Chinstrap</td>
<td align="left">Chinstrap</td>
</tr>
<tr class="even">
<td align="left">Chinstrap</td>
<td align="left">Chinstrap</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="working-with-rows" class="section level1" number="25">
<h1><span class="header-section-number">25</span> Working with rows</h1>
<div id="filtering-rows-based-on-conditions-across-multiple-columns" class="section level2" number="25.1">
<h2><span class="header-section-number">25.1</span> Filtering rows based on conditions across multiple columns</h2>
<p>Suppose you want to filter multiple rows from your data frame that fail to meet a criteria.</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="#cb459-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb459-2"><a href="#cb459-2" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb459-3"><a href="#cb459-3" tabindex="-1"></a>    <span class="fu">if_any</span>(<span class="at">.cols =</span> <span class="fu">contains</span>(<span class="st">&quot;culmen&quot;</span>),</span>
<span id="cb459-4"><a href="#cb459-4" tabindex="-1"></a>           <span class="at">.fns =</span> <span class="sc">~</span>. <span class="sc">&lt;</span> <span class="dv">40</span>)</span>
<span id="cb459-5"><a href="#cb459-5" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb459-6"><a href="#cb459-6" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
</div>
<div id="filter-rows-based-on-missing-values" class="section level2" number="25.2">
<h2><span class="header-section-number">25.2</span> filter rows based on missing values</h2>
<p>Another very useful use case is filtering rows based on missing values across multiple columns.</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="#cb460-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb460-2"><a href="#cb460-2" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb460-3"><a href="#cb460-3" tabindex="-1"></a>    <span class="fu">if_all</span>(<span class="at">.cols =</span> <span class="fu">where</span>(is.numeric),</span>
<span id="cb460-4"><a href="#cb460-4" tabindex="-1"></a>           <span class="at">.fns =</span> <span class="sc">~!</span><span class="fu">is.na</span>(.))</span>
<span id="cb460-5"><a href="#cb460-5" tabindex="-1"></a>  ) </span></code></pre></div>
<div class="try">
<p>
At first the outcome above can seem counter-intuitive, but can be
explained by the <code>!</code> operator. The if_all is evaluating
whether all columns meet the condition of NOT containing NA.
</p>
<p>
You can try different combinations of if_all, if_any and the NOT
operator
</p>
</div>
</div>
<div id="slicing" class="section level2" number="25.3">
<h2><span class="header-section-number">25.3</span> slicing</h2>
<p>Suppose we want to remove the 10 highest values of body mass from our dataframe - we could do this with <code>slice</code></p>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="#cb461-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb461-2"><a href="#cb461-2" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(body_mass_g)) <span class="sc">|&gt;</span> </span>
<span id="cb461-3"><a href="#cb461-3" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<div class="kable-table">
<table>
<colgroup>
<col width="4%" />
<col width="5%" />
<col width="3%" />
<col width="7%" />
<col width="2%" />
<col width="2%" />
<col width="8%" />
<col width="5%" />
<col width="7%" />
<col width="4%" />
<col width="7%" />
<col width="6%" />
<col width="7%" />
<col width="5%" />
<col width="2%" />
<col width="6%" />
<col width="6%" />
<col width="3%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">study_name</th>
<th align="right">sample_number</th>
<th align="left">species</th>
<th align="left">full_latin_name</th>
<th align="left">region</th>
<th align="left">island</th>
<th align="left">stage</th>
<th align="left">individual_id</th>
<th align="left">clutch_completion</th>
<th align="left">date_egg</th>
<th align="right">culmen_length_mm</th>
<th align="right">culmen_depth_mm</th>
<th align="right">flipper_length_mm</th>
<th align="right">body_mass_g</th>
<th align="left">sex</th>
<th align="right">delta_15_n_o_oo</th>
<th align="right">delta_13_c_o_oo</th>
<th align="left">comments</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">PAL0708</td>
<td align="right">18</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N39A2</td>
<td align="left">Yes</td>
<td align="left">2007-11-27</td>
<td align="right">49.2</td>
<td align="right">15.2</td>
<td align="right">221</td>
<td align="right">6300</td>
<td align="left">MALE</td>
<td align="right">8.27376</td>
<td align="right">-25.00169</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">PAL0708</td>
<td align="right">34</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N56A2</td>
<td align="left">Yes</td>
<td align="left">2007-12-03</td>
<td align="right">59.6</td>
<td align="right">17.0</td>
<td align="right">230</td>
<td align="right">6050</td>
<td align="left">MALE</td>
<td align="right">7.76843</td>
<td align="right">-25.68210</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">PAL0809</td>
<td align="right">78</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N58A2</td>
<td align="left">Yes</td>
<td align="left">2008-11-06</td>
<td align="right">51.1</td>
<td align="right">16.3</td>
<td align="right">220</td>
<td align="right">6000</td>
<td align="left">MALE</td>
<td align="right">8.40327</td>
<td align="right">-26.76821</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">PAL0910</td>
<td align="right">118</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N36A2</td>
<td align="left">Yes</td>
<td align="left">2009-12-01</td>
<td align="right">48.8</td>
<td align="right">16.2</td>
<td align="right">222</td>
<td align="right">6000</td>
<td align="left">MALE</td>
<td align="right">8.33825</td>
<td align="right">-25.88547</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">PAL0809</td>
<td align="right">80</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N60A2</td>
<td align="left">Yes</td>
<td align="left">2008-11-09</td>
<td align="right">45.2</td>
<td align="right">16.4</td>
<td align="right">223</td>
<td align="right">5950</td>
<td align="left">MALE</td>
<td align="right">8.19749</td>
<td align="right">-26.65931</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">PAL0910</td>
<td align="right">112</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N32A2</td>
<td align="left">Yes</td>
<td align="left">2009-11-20</td>
<td align="right">49.8</td>
<td align="right">15.9</td>
<td align="right">229</td>
<td align="right">5950</td>
<td align="left">MALE</td>
<td align="right">8.29226</td>
<td align="right">-26.21019</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">PAL0708</td>
<td align="right">14</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N37A2</td>
<td align="left">Yes</td>
<td align="left">2007-11-29</td>
<td align="right">48.4</td>
<td align="right">14.6</td>
<td align="right">213</td>
<td align="right">5850</td>
<td align="left">MALE</td>
<td align="right">7.82080</td>
<td align="right">-25.48025</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">PAL0708</td>
<td align="right">16</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N38A2</td>
<td align="left">Yes</td>
<td align="left">2007-12-03</td>
<td align="right">49.3</td>
<td align="right">15.7</td>
<td align="right">217</td>
<td align="right">5850</td>
<td align="left">MALE</td>
<td align="right">8.07137</td>
<td align="right">-25.52473</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">PAL0910</td>
<td align="right">116</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N35A2</td>
<td align="left">Yes</td>
<td align="left">2009-11-25</td>
<td align="right">55.1</td>
<td align="right">16.0</td>
<td align="right">230</td>
<td align="right">5850</td>
<td align="left">MALE</td>
<td align="right">8.08354</td>
<td align="right">-26.18161</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">PAL0809</td>
<td align="right">68</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N51A2</td>
<td align="left">Yes</td>
<td align="left">2008-11-09</td>
<td align="right">49.5</td>
<td align="right">16.2</td>
<td align="right">229</td>
<td align="right">5800</td>
<td align="left">MALE</td>
<td align="right">8.49854</td>
<td align="right">-26.74809</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<p><code>slice</code> keeps all rows for which you specify positive indices. Note that in R indexing starts with 1 and not with 0 as in most other programming languages. To make it more clear what rows slice keeps, let’s add row numbers to our data frame and slice some arbitrary rows:</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="#cb462-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb462-2"><a href="#cb462-2" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(body_mass_g)) <span class="sc">|&gt;</span> </span>
<span id="cb462-3"><a href="#cb462-3" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">&quot;row_number&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb462-4"><a href="#cb462-4" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">123</span>,<span class="dv">307</span>))</span></code></pre></div>
<div class="kable-table">
<table>
<colgroup>
<col width="3%" />
<col width="3%" />
<col width="4%" />
<col width="3%" />
<col width="7%" />
<col width="2%" />
<col width="2%" />
<col width="6%" />
<col width="4%" />
<col width="6%" />
<col width="3%" />
<col width="5%" />
<col width="5%" />
<col width="6%" />
<col width="4%" />
<col width="2%" />
<col width="5%" />
<col width="5%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">row_number</th>
<th align="left">study_name</th>
<th align="right">sample_number</th>
<th align="left">species</th>
<th align="left">full_latin_name</th>
<th align="left">region</th>
<th align="left">island</th>
<th align="left">stage</th>
<th align="left">individual_id</th>
<th align="left">clutch_completion</th>
<th align="left">date_egg</th>
<th align="right">culmen_length_mm</th>
<th align="right">culmen_depth_mm</th>
<th align="right">flipper_length_mm</th>
<th align="right">body_mass_g</th>
<th align="left">sex</th>
<th align="right">delta_15_n_o_oo</th>
<th align="right">delta_13_c_o_oo</th>
<th align="left">comments</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">PAL0708</td>
<td align="right">18</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N39A2</td>
<td align="left">Yes</td>
<td align="left">2007-11-27</td>
<td align="right">49.2</td>
<td align="right">15.2</td>
<td align="right">221</td>
<td align="right">6300</td>
<td align="left">MALE</td>
<td align="right">8.27376</td>
<td align="right">-25.00169</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">123</td>
<td align="left">PAL0809</td>
<td align="right">59</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N17A1</td>
<td align="left">Yes</td>
<td align="left">2008-11-06</td>
<td align="right">43.2</td>
<td align="right">14.5</td>
<td align="right">208</td>
<td align="right">4450</td>
<td align="left">FEMALE</td>
<td align="right">8.48367</td>
<td align="right">-26.86485</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">307</td>
<td align="left">PAL0708</td>
<td align="right">17</td>
<td align="left">Chinstrap</td>
<td align="left">Pygoscelis antarctica</td>
<td align="left">Anvers</td>
<td align="left">Dream</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N71A1</td>
<td align="left">No</td>
<td align="left">2007-11-30</td>
<td align="right">50.3</td>
<td align="right">20.0</td>
<td align="right">197</td>
<td align="right">3300</td>
<td align="left">MALE</td>
<td align="right">10.02019</td>
<td align="right">-24.54704</td>
<td align="left">Nest never observed with full clutch.</td>
</tr>
</tbody>
</table>
</div>
<p>To remove specific rows, we can use negative indices. Suppose, we want to remove the first 340 rows from our data frame.</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="#cb463-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb463-2"><a href="#cb463-2" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(body_mass_g)) <span class="sc">|&gt;</span> </span>
<span id="cb463-3"><a href="#cb463-3" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">&quot;row_number&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb463-4"><a href="#cb463-4" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span><span class="sc">:-</span><span class="dv">340</span>))</span></code></pre></div>
<div class="kable-table">
<table>
<colgroup>
<col width="3%" />
<col width="3%" />
<col width="4%" />
<col width="3%" />
<col width="7%" />
<col width="2%" />
<col width="3%" />
<col width="6%" />
<col width="4%" />
<col width="5%" />
<col width="3%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="3%" />
<col width="2%" />
<col width="5%" />
<col width="5%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">row_number</th>
<th align="left">study_name</th>
<th align="right">sample_number</th>
<th align="left">species</th>
<th align="left">full_latin_name</th>
<th align="left">region</th>
<th align="left">island</th>
<th align="left">stage</th>
<th align="left">individual_id</th>
<th align="left">clutch_completion</th>
<th align="left">date_egg</th>
<th align="right">culmen_length_mm</th>
<th align="right">culmen_depth_mm</th>
<th align="right">flipper_length_mm</th>
<th align="right">body_mass_g</th>
<th align="left">sex</th>
<th align="right">delta_15_n_o_oo</th>
<th align="right">delta_13_c_o_oo</th>
<th align="left">comments</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">341</td>
<td align="left">PAL0809</td>
<td align="right">65</td>
<td align="left">Adelie</td>
<td align="left">Pygoscelis adeliae</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N29A1</td>
<td align="left">Yes</td>
<td align="left">2008-11-13</td>
<td align="right">36.4</td>
<td align="right">17.1</td>
<td align="right">184</td>
<td align="right">2850</td>
<td align="left">FEMALE</td>
<td align="right">8.62623</td>
<td align="right">-26.11650</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">342</td>
<td align="left">PAL0809</td>
<td align="right">39</td>
<td align="left">Chinstrap</td>
<td align="left">Pygoscelis antarctica</td>
<td align="left">Anvers</td>
<td align="left">Dream</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N72A1</td>
<td align="left">No</td>
<td align="left">2008-11-24</td>
<td align="right">46.9</td>
<td align="right">16.6</td>
<td align="right">192</td>
<td align="right">2700</td>
<td align="left">FEMALE</td>
<td align="right">9.80589</td>
<td align="right">-24.73735</td>
<td align="left">Nest never observed with full clutch.</td>
</tr>
<tr class="odd">
<td align="left">343</td>
<td align="left">PAL0708</td>
<td align="right">4</td>
<td align="left">Adelie</td>
<td align="left">Pygoscelis adeliae</td>
<td align="left">Anvers</td>
<td align="left">Torgersen</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N2A2</td>
<td align="left">Yes</td>
<td align="left">2007-11-16</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">Adult not sampled.</td>
</tr>
<tr class="even">
<td align="left">344</td>
<td align="left">PAL0910</td>
<td align="right">120</td>
<td align="left">Gentoo</td>
<td align="left">Pygoscelis papua</td>
<td align="left">Anvers</td>
<td align="left">Biscoe</td>
<td align="left">Adult, 1 Egg Stage</td>
<td align="left">N38A2</td>
<td align="left">No</td>
<td align="left">2009-12-01</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">Adult not sampled. Nest never observed with full clutch.</td>
</tr>
</tbody>
</table>
</div>
<p>Helper functions include <code>slice_head()</code>, <code>slice_tail()</code>, <code>slice_max()</code>, <code>slice_min()</code> and <code>slice_sample()</code>
We can use these functions to more quickly and easily filter our data under some situations</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="#cb464-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb464-2"><a href="#cb464-2" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> body_mass_g,</span>
<span id="cb464-3"><a href="#cb464-3" tabindex="-1"></a>            <span class="at">n =</span> <span class="dv">20</span>) <span class="sc">|&gt;</span> <span class="co"># we can also use prop e.g. prop =.1 to slice the top 10%</span></span>
<span id="cb464-4"><a href="#cb464-4" tabindex="-1"></a>  <span class="fu">select</span>(species, body_mass_g)</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">species</th>
<th align="right">body_mass_g</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">6300</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">6050</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">6000</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">6000</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">5950</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">5950</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">5850</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">5850</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">5850</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">5800</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">5800</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">5750</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">5700</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">5700</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">5700</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">5700</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">5700</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">5650</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">5650</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">5650</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="groupwise-slicing" class="section level2" number="25.4">
<h2><span class="header-section-number">25.4</span> groupwise slicing</h2>
<p>To apply these functions within different sub-categories, we have to use <code>group_by()</code></p>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="#cb465-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb465-2"><a href="#cb465-2" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb465-3"><a href="#cb465-3" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> body_mass_g,</span>
<span id="cb465-4"><a href="#cb465-4" tabindex="-1"></a>            <span class="at">n =</span> <span class="dv">3</span>) <span class="sc">|&gt;</span> </span>
<span id="cb465-5"><a href="#cb465-5" tabindex="-1"></a>  <span class="fu">select</span>(species, body_mass_g) <span class="sc">|&gt;</span> </span>
<span id="cb465-6"><a href="#cb465-6" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">species</th>
<th align="right">body_mass_g</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Adelie</td>
<td align="right">4775</td>
</tr>
<tr class="even">
<td align="left">Adelie</td>
<td align="right">4725</td>
</tr>
<tr class="odd">
<td align="left">Adelie</td>
<td align="right">4700</td>
</tr>
<tr class="even">
<td align="left">Chinstrap</td>
<td align="right">4800</td>
</tr>
<tr class="odd">
<td align="left">Chinstrap</td>
<td align="right">4550</td>
</tr>
<tr class="even">
<td align="left">Chinstrap</td>
<td align="right">4500</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">6300</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">6050</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="right">6000</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="right">6000</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="bootstrapping-with-slice" class="section level2" number="25.5">
<h2><span class="header-section-number">25.5</span> bootstrapping with slice</h2>
<p>If we set the replace argument to TRUE in <code>slice()</code>, we will perform sampling with replacement. This means the same row of data can appear twice in our dataframe.</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="#cb466-1" tabindex="-1"></a><span class="fu">slice_sample</span>(penguins_clean_split, </span>
<span id="cb466-2"><a href="#cb466-2" tabindex="-1"></a>             <span class="at">prop =</span> .<span class="dv">5</span>, </span>
<span id="cb466-3"><a href="#cb466-3" tabindex="-1"></a>             <span class="at">replace =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb466-4"><a href="#cb466-4" tabindex="-1"></a>  <span class="fu">duplicated</span>() <span class="sc">|&gt;</span> </span>
<span id="cb466-5"><a href="#cb466-5" tabindex="-1"></a>  <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 35</code></pre>
<p>Why would we do this? This functionality allows us to create bootstraps from our data frame. Bootstrapping is a
technique where a set of samples of the same size are drawn from a single original sample.</p>
<p>Some values appear more than once because bootstrapping allows each value to be pulled multiple times from the original data set. Once you have your bootstraps, you can calculate metrics from them. For example, the mean value of each bootstrap. The underlying logic of this technique is that since the sample itself is from a population, the bootstraps act as proxies for other samples from that population. Now that we have created one bootstrap from our sample, we can create many. In the following code I have used map to create 100 bootstraps from my original sample:</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="#cb468-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">342</span>)</span>
<span id="cb468-2"><a href="#cb468-2" tabindex="-1"></a>bootstraps <span class="ot">&lt;-</span> <span class="fu">map</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>, </span>
<span id="cb468-3"><a href="#cb468-3" tabindex="-1"></a>                  <span class="sc">~</span><span class="fu">slice_sample</span>(penguins_clean_split, </span>
<span id="cb468-4"><a href="#cb468-4" tabindex="-1"></a>                                <span class="at">prop =</span> .<span class="dv">1</span>, <span class="co"># 10% of dataframe</span></span>
<span id="cb468-5"><a href="#cb468-5" tabindex="-1"></a>                                <span class="at">replace =</span> <span class="cn">TRUE</span>))</span>
<span id="cb468-6"><a href="#cb468-6" tabindex="-1"></a></span>
<span id="cb468-7"><a href="#cb468-7" tabindex="-1"></a>bootstraps <span class="sc">%&gt;%</span></span>
<span id="cb468-8"><a href="#cb468-8" tabindex="-1"></a>    <span class="fu">map_dbl</span>(<span class="sc">~</span> <span class="fu">mean</span>(.<span class="sc">$</span>body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb468-9"><a href="#cb468-9" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">x =</span> _ ) <span class="sc">|&gt;</span> </span>
<span id="cb468-10"><a href="#cb468-10" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> x)) <span class="sc">+</span></span>
<span id="cb468-11"><a href="#cb468-11" tabindex="-1"></a><span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">&quot;grey80&quot;</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>)<span class="sc">+</span></span>
<span id="cb468-12"><a href="#cb468-12" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">data =</span> penguins_clean_split,</span>
<span id="cb468-13"><a href="#cb468-13" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> T)),</span>
<span id="cb468-14"><a href="#cb468-14" tabindex="-1"></a>             <span class="at">linewidth =</span> <span class="dv">2</span>, <span class="at">colour =</span> <span class="st">&quot;red&quot;</span>, <span class="at">linetype  =</span><span class="st">&quot;dashed&quot;</span>)</span></code></pre></div>
<p><img src="05-tidyverse_files/figure-html/unnamed-chunk-48-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="group-work" class="section level1" number="26">
<h1><span class="header-section-number">26</span> Group work</h1>
<p>The <a href="https://r4ds.had.co.nz/many-models.html">R4DS</a> book demonstrates how functions can be used to run multiple models simultaneously. This technique is valuable for extracting meaningful insights from your data.</p>
<p>To find out how well culmen length can predict culmen depth we build a linear regression model.</p>
<p>Once we have created the model, we can retrieve the results parameters and test statistics
with the summary function:
<code>summary(model)</code></p>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="#cb469-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(culmen_depth_mm <span class="sc">~</span> culmen_length_mm, <span class="at">data =</span> penguins_clean_split)</span>
<span id="cb469-2"><a href="#cb469-2" tabindex="-1"></a></span>
<span id="cb469-3"><a href="#cb469-3" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = culmen_depth_mm ~ culmen_length_mm, data = penguins_clean_split)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -4.1381 -1.4263  0.0164  1.3841  4.5255 
## 
## Coefficients:
##                  Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)      20.88547    0.84388  24.749  &lt; 2e-16 ***
## culmen_length_mm -0.08502    0.01907  -4.459 1.12e-05 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1.922 on 340 degrees of freedom
##   (2 observations deleted due to missingness)
## Multiple R-squared:  0.05525,    Adjusted R-squared:  0.05247 
## F-statistic: 19.88 on 1 and 340 DF,  p-value: 1.12e-05</code></pre>
<p>Now we know that there are important covariates to consider - and the most appropriate method from an analysis perspective would be to include these as covariates within a single model</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="#cb471-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(culmen_depth_mm <span class="sc">~</span> culmen_length_mm <span class="sc">*</span> species, <span class="at">data =</span> penguins_clean_split)</span>
<span id="cb471-2"><a href="#cb471-2" tabindex="-1"></a></span>
<span id="cb471-3"><a href="#cb471-3" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code></pre></div>
<pre><code>Call:
lm(formula = culmen_depth_mm ~ culmen_length_mm * species, data = penguins_clean_split)

Residuals:
    Min      1Q  Median      3Q     Max 
-2.6574 -0.6675 -0.0524  0.5383  3.5032 

Coefficients:
                                  Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                       11.40912    1.13812  10.025  &lt; 2e-16 ***
culmen_length_mm                   0.17883    0.02927   6.110 2.76e-09 ***
speciesChinstrap                  -3.83998    2.05398  -1.870 0.062419 .  
speciesGentoo                     -6.15812    1.75451  -3.510 0.000509 ***
culmen_length_mm:speciesChinstrap  0.04338    0.04558   0.952 0.341895    
culmen_length_mm:speciesGentoo     0.02601    0.04054   0.642 0.521590    
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

Residual standard error: 0.9548 on 336 degrees of freedom
  (2 observations deleted due to missingness)
Multiple R-squared:  0.7697,    Adjusted R-squared:  0.7662 
F-statistic: 224.5 on 5 and 336 DF,  p-value: &lt; 2.2e-16
</code></pre>
<p>However, there may be occasions where we wish to apply simple models to each subpopulation in turn:</p>
<p>First we need to <code>nest()</code> our data - tibbles with nested dataframes can be manipulated using various functions and operations to perform tasks like filtering, summarizing, and visualization. Nested dataframes also facilitate operations on a per-group basis, which can be useful for group-wise analysis.</p>
<ol style="list-style-type: decimal">
<li>First we create a new nested dataframe 2. Then we run a model function (passing this through <code>broom::tidy()</code> to get a tibble friendly output) inside mutate. This will create a new column with nested tibbles in it. We then unnest the model to extract the terms for each Intercept and slope.</li>
</ol>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="#cb473-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb473-2"><a href="#cb473-2" tabindex="-1"></a>    <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb473-3"><a href="#cb473-3" tabindex="-1"></a>    <span class="fu">nest</span>() <span class="sc">|&gt;</span> </span>
<span id="cb473-4"><a href="#cb473-4" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">model =</span> <span class="fu">map</span>(data, <span class="sc">~</span> <span class="fu">lm</span>(culmen_depth_mm <span class="sc">~</span> culmen_length_mm, <span class="at">data =</span> .) <span class="sc">|&gt;</span> broom<span class="sc">::</span><span class="fu">tidy</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb473-5"><a href="#cb473-5" tabindex="-1"></a>    <span class="fu">unnest</span>(model)</span></code></pre></div>
<pre><code># A tibble: 6 × 7
# Groups:   species [3]
  species   data                term             estimate std.error statistic  p.value
  &lt;chr&gt;     &lt;list&gt;              &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 Adelie    &lt;tibble [152 × 16]&gt; (Intercept)        11.4      1.34        8.52 1.61e-14
2 Adelie    &lt;tibble [152 × 16]&gt; culmen_length_mm    0.179    0.0344      5.19 6.67e- 7
3 Gentoo    &lt;tibble [124 × 16]&gt; (Intercept)         5.25     1.05        4.98 2.15e- 6
4 Gentoo    &lt;tibble [124 × 16]&gt; culmen_length_mm    0.205    0.0222      9.24 1.02e-15
5 Chinstrap &lt;tibble [68 × 16]&gt;  (Intercept)         7.57     1.55        4.88 6.99e- 6
6 Chinstrap &lt;tibble [68 × 16]&gt;  culmen_length_mm    0.222    0.0317      7.01 1.53e- 9
</code></pre>
</div>
<div id="pivot" class="section level1" number="27">
<h1><span class="header-section-number">27</span> Pivot</h1>
<div id="pivot-wider" class="section level2" number="27.1">
<h2><span class="header-section-number">27.1</span> pivot wider</h2>
<div class="info">
<p>
Un-tidy data violates one of these three principles in one way or
another:
</p>
<p>
• Each variable forms a column • Each observation forms a row • Each
type of observation unit is a table
</p>
</div>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="#cb475-1" tabindex="-1"></a>wk1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">5</span>)</span>
<span id="cb475-2"><a href="#cb475-2" tabindex="-1"></a>wk2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb475-3"><a href="#cb475-3" tabindex="-1"></a>wk3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">0</span>)</span>
<span id="cb475-4"><a href="#cb475-4" tabindex="-1"></a>penguin_id <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;N15A1&quot;</span> , <span class="st">&quot;N15A2&quot;</span> , <span class="st">&quot;N18A1&quot;</span>, <span class="st">&quot;N71A2&quot;</span>)</span>
<span id="cb475-5"><a href="#cb475-5" tabindex="-1"></a></span>
<span id="cb475-6"><a href="#cb475-6" tabindex="-1"></a>peng_obs <span class="ot">&lt;-</span> <span class="fu">tibble</span>(penguin_id, wk1,wk2,wk3)</span></code></pre></div>
<p>This data is untidy because a value that measures the same underlying attribute (number of observations) is split across three columns. Here wk1,wk2 and wk3 represent the underlying variable of observations split across three weeks.</p>
<p>We can use pivot to create a tidy representation of the data</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="#cb476-1" tabindex="-1"></a>peng_obs <span class="sc">|&gt;</span> </span>
<span id="cb476-2"><a href="#cb476-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb476-3"><a href="#cb476-3" tabindex="-1"></a>    <span class="at">cols =</span> <span class="st">&quot;wk1&quot;</span><span class="sc">:</span><span class="st">&quot;wk3&quot;</span>,</span>
<span id="cb476-4"><a href="#cb476-4" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&quot;week&quot;</span>,</span>
<span id="cb476-5"><a href="#cb476-5" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;observations&quot;</span></span>
<span id="cb476-6"><a href="#cb476-6" tabindex="-1"></a>  )</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">penguin_id</th>
<th align="left">week</th>
<th align="right">observations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">N15A1</td>
<td align="left">wk1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">N15A1</td>
<td align="left">wk2</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">N15A1</td>
<td align="left">wk3</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">N15A2</td>
<td align="left">wk1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">N15A2</td>
<td align="left">wk2</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">N15A2</td>
<td align="left">wk3</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">N18A1</td>
<td align="left">wk1</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">N18A1</td>
<td align="left">wk2</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">N18A1</td>
<td align="left">wk3</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">N71A2</td>
<td align="left">wk1</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="left">N71A2</td>
<td align="left">wk2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">N71A2</td>
<td align="left">wk3</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
<p>We can tidy this dataframe further by removing the "wk" prefix:</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="#cb477-1" tabindex="-1"></a>peng_obs <span class="sc">|&gt;</span> </span>
<span id="cb477-2"><a href="#cb477-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb477-3"><a href="#cb477-3" tabindex="-1"></a>    <span class="at">cols =</span> <span class="st">&quot;wk1&quot;</span><span class="sc">:</span><span class="st">&quot;wk3&quot;</span>,</span>
<span id="cb477-4"><a href="#cb477-4" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&quot;week&quot;</span>,</span>
<span id="cb477-5"><a href="#cb477-5" tabindex="-1"></a>    <span class="at">names_prefix =</span> <span class="st">&quot;wk&quot;</span>,</span>
<span id="cb477-6"><a href="#cb477-6" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;observations&quot;</span></span>
<span id="cb477-7"><a href="#cb477-7" tabindex="-1"></a>  )</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">penguin_id</th>
<th align="left">week</th>
<th align="right">observations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">N15A1</td>
<td align="left">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">N15A1</td>
<td align="left">2</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">N15A1</td>
<td align="left">3</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">N15A2</td>
<td align="left">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">N15A2</td>
<td align="left">2</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">N15A2</td>
<td align="left">3</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">N18A1</td>
<td align="left">1</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">N18A1</td>
<td align="left">2</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">N18A1</td>
<td align="left">3</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">N71A2</td>
<td align="left">1</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="left">N71A2</td>
<td align="left">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">N71A2</td>
<td align="left">3</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
<div class="warning">
<p>
Note that the week column is still being treated as a character
string. using <code>names_transform</code> we can fix this
</p>
</div>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="#cb478-1" tabindex="-1"></a>peng_obs <span class="sc">|&gt;</span> </span>
<span id="cb478-2"><a href="#cb478-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb478-3"><a href="#cb478-3" tabindex="-1"></a>    <span class="at">cols =</span> <span class="st">&quot;wk1&quot;</span><span class="sc">:</span><span class="st">&quot;wk3&quot;</span>,</span>
<span id="cb478-4"><a href="#cb478-4" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&quot;week&quot;</span>,</span>
<span id="cb478-5"><a href="#cb478-5" tabindex="-1"></a>    <span class="at">names_prefix =</span> <span class="st">&quot;wk&quot;</span>,</span>
<span id="cb478-6"><a href="#cb478-6" tabindex="-1"></a>    <span class="at">names_transform =</span> as.integer,</span>
<span id="cb478-7"><a href="#cb478-7" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;observations&quot;</span></span>
<span id="cb478-8"><a href="#cb478-8" tabindex="-1"></a>  )</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">penguin_id</th>
<th align="right">week</th>
<th align="right">observations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">N15A1</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">N15A1</td>
<td align="right">2</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">N15A1</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">N15A2</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">N15A2</td>
<td align="right">2</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">N15A2</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">N18A1</td>
<td align="right">1</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">N18A1</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">N18A1</td>
<td align="right">3</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">N71A2</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="left">N71A2</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">N71A2</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="pivot-longer" class="section level2" number="27.2">
<h2><span class="header-section-number">27.2</span> pivot longer</h2>
<p>Suppose you would like to make a data frame wider because you would like to present the results in a human-readable table. To do this, you can use pivot_wider and provide arguments for its main parameters:</p>
<ul>
<li><p>id_cols: These columns are the identifiers for the observations. These column names
remain unchanged in the data frame. Their values form the rows of the transformed data
frame. By default, all columns except those specified in names_from and values_from
become id_cols.</p></li>
<li><p>names_from: These columns will be transformed into a wider format. Their values will
be converted to columns. If you specify more than one column for names_from, the
newly created column names will be a combination of the column values.</p></li>
<li><p>values_from: The values of these columns will be used for the columns created with
names_from.</p></li>
</ul>
</div>
<div id="pivot-wider-for-summary-tables" class="section level2" number="27.3">
<h2><span class="header-section-number">27.3</span> pivot wider for summary tables</h2>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="#cb479-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb479-2"><a href="#cb479-2" tabindex="-1"></a>  <span class="fu">group_by</span>(species, island) <span class="sc">|&gt;</span> </span>
<span id="cb479-3"><a href="#cb479-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> T))</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">species</th>
<th align="left">island</th>
<th align="right">mean</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Adelie</td>
<td align="left">Biscoe</td>
<td align="right">3709.659</td>
</tr>
<tr class="even">
<td align="left">Adelie</td>
<td align="left">Dream</td>
<td align="right">3688.393</td>
</tr>
<tr class="odd">
<td align="left">Adelie</td>
<td align="left">Torgersen</td>
<td align="right">3706.373</td>
</tr>
<tr class="even">
<td align="left">Chinstrap</td>
<td align="left">Dream</td>
<td align="right">3733.088</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="left">Biscoe</td>
<td align="right">5076.016</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="#cb480-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb480-2"><a href="#cb480-2" tabindex="-1"></a>  <span class="fu">group_by</span>(species, island) <span class="sc">|&gt;</span> </span>
<span id="cb480-3"><a href="#cb480-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb480-4"><a href="#cb480-4" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="fu">c</span>(species, island),</span>
<span id="cb480-5"><a href="#cb480-5" tabindex="-1"></a>              <span class="at">values_from =</span> mean,</span>
<span id="cb480-6"><a href="#cb480-6" tabindex="-1"></a>              <span class="at">names_prefix =</span> <span class="st">&quot;mean_&quot;</span>)</span></code></pre></div>
<div class="kable-table">
<table>
<colgroup>
<col width="19%" />
<col width="18%" />
<col width="22%" />
<col width="21%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">mean_Adelie_Biscoe</th>
<th align="right">mean_Adelie_Dream</th>
<th align="right">mean_Adelie_Torgersen</th>
<th align="right">mean_Chinstrap_Dream</th>
<th align="right">mean_Gentoo_Biscoe</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">3709.659</td>
<td align="right">3688.393</td>
<td align="right">3706.373</td>
<td align="right">3733.088</td>
<td align="right">5076.016</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="writing-functions-in-tidyverse" class="section level1" number="28">
<h1><span class="header-section-number">28</span> Writing Functions in Tidyverse</h1>
<p>The goal here is to understand how to use tidy evaluation to write functions that incorporate <code>{tidyverse}</code> functions e.g. (mutate, select, filter) etc.</p>
<p>Below is an example of some code to select a variable:</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="#cb481-1" tabindex="-1"></a>penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb481-2"><a href="#cb481-2" tabindex="-1"></a>  <span class="fu">select</span>(species)</span></code></pre></div>
<p>Put that exact working code into a function</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="#cb482-1" tabindex="-1"></a>test_function <span class="ot">&lt;-</span> <span class="cf">function</span>(select_var){</span>
<span id="cb482-2"><a href="#cb482-2" tabindex="-1"></a>  penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb482-3"><a href="#cb482-3" tabindex="-1"></a>  <span class="fu">select</span>(select_var)</span>
<span id="cb482-4"><a href="#cb482-4" tabindex="-1"></a>}</span>
<span id="cb482-5"><a href="#cb482-5" tabindex="-1"></a></span>
<span id="cb482-6"><a href="#cb482-6" tabindex="-1"></a><span class="fu">test_function</span>(<span class="at">select_var =</span> species)</span></code></pre></div>
<pre><code>Error: object &#39;species&#39; not found
</code></pre>
<p>This error occurs becaus of <em>tidy evaluation</em></p>
<div class="info">
<p>
Tidy evaluation: A framework for controlling how expressions and
variables in your code are evaluated by tidyverse functions.
</p>
<ul>
<li>
<p>
Allows programmers to select variables based on their position,
name, or type
</p>
</li>
<li>
<p>
Useful for passing variable names as inputs to functions that use
tidyverse packages like dplyr and ggplot2
</p>
</li>
<li>
<p>
{dplyr} verbs rely on tidy evaluation to resolve programming
commands
</p>
</li>
</ul>
</div>
<div id="data-masking" class="section level2" number="28.1">
<h2><span class="header-section-number">28.1</span> Data masking</h2>
<p>Data masking is a handy feature of tidyverse that makes it easier to program with dataframes. It allows you to reference columns wihout using <code>$</code>, whereas almost all base R functions use unmasked programming.</p>
<p>However, this makes it harder to create functions</p>
<p>Data masking is used by <code>arrange()</code>, <code>count()</code>, <code>filter()</code>, <code>group_by()</code>, <code>mutate()</code>, and <code>summarise()</code>. To check which type of tidy evaluation a function uses, check the help file.</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="#cb484-1" tabindex="-1"></a>test_filter_species <span class="ot">&lt;-</span> <span class="cf">function</span>(filter_var) {</span>
<span id="cb484-2"><a href="#cb484-2" tabindex="-1"></a>  penguins_clean_split <span class="sc">%&gt;%</span></span>
<span id="cb484-3"><a href="#cb484-3" tabindex="-1"></a>    <span class="fu">filter</span>(species <span class="sc">==</span> filter_var)</span>
<span id="cb484-4"><a href="#cb484-4" tabindex="-1"></a>}</span>
<span id="cb484-5"><a href="#cb484-5" tabindex="-1"></a></span>
<span id="cb484-6"><a href="#cb484-6" tabindex="-1"></a><span class="fu">test_filter_species</span>(<span class="st">&quot;Adelie&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb484-7"><a href="#cb484-7" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 152
## Columns: 18
## $ study_name        &lt;chr&gt; &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708…
## $ sample_number     &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 1…
## $ species           &lt;chr&gt; &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;A…
## $ full_latin_name   &lt;chr&gt; &quot;Pygoscelis adeliae&quot;, &quot;Pygoscelis adeliae&quot;, &quot;Pygosce…
## $ region            &lt;chr&gt; &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;A…
## $ island            &lt;chr&gt; &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, …
## $ stage             &lt;chr&gt; &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, …
## $ individual_id     &lt;chr&gt; &quot;N1A1&quot;, &quot;N1A2&quot;, &quot;N2A1&quot;, &quot;N2A2&quot;, &quot;N3A1&quot;, &quot;N3A2&quot;, &quot;N4A…
## $ clutch_completion &lt;chr&gt; &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;…
## $ date_egg          &lt;date&gt; 2007-11-11, 2007-11-11, 2007-11-16, 2007-11-16, 200…
## $ culmen_length_mm  &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
## $ culmen_depth_mm   &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
## $ flipper_length_mm &lt;dbl&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
## $ body_mass_g       &lt;dbl&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
## $ sex               &lt;chr&gt; &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;FEMALE&quot;, NA, &quot;FEMALE&quot;, &quot;MALE&quot;, &quot;F…
## $ delta_15_n_o_oo   &lt;dbl&gt; NA, 8.94956, 8.36821, NA, 8.76651, 8.66496, 9.18718,…
## $ delta_13_c_o_oo   &lt;dbl&gt; NA, -24.69454, -25.33302, NA, -25.32426, -25.29805, …
## $ comments          &lt;chr&gt; &quot;Not enough blood for isotopes.&quot;, NA, NA, &quot;Adult not…</code></pre>
<p>By passing quoted arguments to the function, you can use it directly in the expression, and the function will evaluate it as if it were part of the data frame.</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="#cb486-1" tabindex="-1"></a>test_filter_general <span class="ot">&lt;-</span> <span class="cf">function</span>(filter_condition) {</span>
<span id="cb486-2"><a href="#cb486-2" tabindex="-1"></a>  penguins_clean_split <span class="sc">%&gt;%</span></span>
<span id="cb486-3"><a href="#cb486-3" tabindex="-1"></a>    <span class="fu">filter</span>(filter_condition)</span>
<span id="cb486-4"><a href="#cb486-4" tabindex="-1"></a>}</span>
<span id="cb486-5"><a href="#cb486-5" tabindex="-1"></a></span>
<span id="cb486-6"><a href="#cb486-6" tabindex="-1"></a><span class="fu">test_filter_general</span>(<span class="st">&quot;flipper_length_mm &gt; 180&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb486-7"><a href="#cb486-7" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>Error in `filter()`:
ℹ In argument: `filter_condition`.
Caused by error:
! `..1` must be a logical vector, not the string &quot;fliper_length_mm &gt; 180&quot;.
Backtrace:
  1. test_filter_general(&quot;flipper_length_mm &gt; 180&quot;) %&gt;% glimpse()
 12. dplyr:::dplyr_internal_error(...)
</code></pre>
<p>However, we can avoid this by embracing the curly operators <code>{{.}}</code> this allows the data-masked argument to have its evaluation delayed until after the data frame columns are defined. With the <code>{{</code> operator you can tunnel data-variables (i.e. columns from the data frames) through arg-variables (function arguments).</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="#cb488-1" tabindex="-1"></a>test_filter_general <span class="ot">&lt;-</span> <span class="cf">function</span>(filter_condition) {</span>
<span id="cb488-2"><a href="#cb488-2" tabindex="-1"></a>  penguins_clean_split <span class="sc">%&gt;%</span></span>
<span id="cb488-3"><a href="#cb488-3" tabindex="-1"></a>    <span class="fu">filter</span>({{filter_condition}})</span>
<span id="cb488-4"><a href="#cb488-4" tabindex="-1"></a>}</span>
<span id="cb488-5"><a href="#cb488-5" tabindex="-1"></a></span>
<span id="cb488-6"><a href="#cb488-6" tabindex="-1"></a><span class="fu">test_filter_general</span>(flipper_length_mm <span class="sc">&gt;</span> <span class="dv">180</span>) <span class="sc">%&gt;%</span></span>
<span id="cb488-7"><a href="#cb488-7" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 329
## Columns: 18
## $ study_name        &lt;chr&gt; &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708…
## $ sample_number     &lt;dbl&gt; 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, …
## $ species           &lt;chr&gt; &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;A…
## $ full_latin_name   &lt;chr&gt; &quot;Pygoscelis adeliae&quot;, &quot;Pygoscelis adeliae&quot;, &quot;Pygosce…
## $ region            &lt;chr&gt; &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;A…
## $ island            &lt;chr&gt; &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, …
## $ stage             &lt;chr&gt; &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, …
## $ individual_id     &lt;chr&gt; &quot;N1A1&quot;, &quot;N1A2&quot;, &quot;N2A1&quot;, &quot;N3A1&quot;, &quot;N3A2&quot;, &quot;N4A1&quot;, &quot;N4A…
## $ clutch_completion &lt;chr&gt; &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;…
## $ date_egg          &lt;date&gt; 2007-11-11, 2007-11-11, 2007-11-16, 2007-11-16, 200…
## $ culmen_length_mm  &lt;dbl&gt; 39.1, 39.5, 40.3, 36.7, 39.3, 38.9, 39.2, 34.1, 42.0…
## $ culmen_depth_mm   &lt;dbl&gt; 18.7, 17.4, 18.0, 19.3, 20.6, 17.8, 19.6, 18.1, 20.2…
## $ flipper_length_mm &lt;dbl&gt; 181, 186, 195, 193, 190, 181, 195, 193, 190, 186, 18…
## $ body_mass_g       &lt;dbl&gt; 3750, 3800, 3250, 3450, 3650, 3625, 4675, 3475, 4250…
## $ sex               &lt;chr&gt; &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;FEMALE&quot;, &quot;FEMALE&quot;, &quot;MALE&quot;, &quot;FEMAL…
## $ delta_15_n_o_oo   &lt;dbl&gt; NA, 8.94956, 8.36821, 8.76651, 8.66496, 9.18718, 9.4…
## $ delta_13_c_o_oo   &lt;dbl&gt; NA, -24.69454, -25.33302, -25.32426, -25.29805, -25.…
## $ comments          &lt;chr&gt; &quot;Not enough blood for isotopes.&quot;, NA, NA, NA, NA, &quot;N…</code></pre>
<p>Let's try another data-masked function</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="#cb490-1" tabindex="-1"></a>summary_table <span class="ot">&lt;-</span> <span class="cf">function</span>(df, var){</span>
<span id="cb490-2"><a href="#cb490-2" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb490-3"><a href="#cb490-3" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>({{var}}, <span class="at">na.rm =</span> T),</span>
<span id="cb490-4"><a href="#cb490-4" tabindex="-1"></a>              <span class="at">sd =</span> <span class="fu">sd</span>({{var}}, <span class="at">na.rm =</span> T))</span>
<span id="cb490-5"><a href="#cb490-5" tabindex="-1"></a>}</span>
<span id="cb490-6"><a href="#cb490-6" tabindex="-1"></a></span>
<span id="cb490-7"><a href="#cb490-7" tabindex="-1"></a><span class="fu">summary_table</span>(penguins_clean_split, body_mass_g)</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="right">mean</th>
<th align="right">sd</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">4201.754</td>
<td align="right">801.9545</td>
</tr>
</tbody>
</table>
</div>
<div id="alternative-to" class="section level3" number="28.1.1">
<h3><span class="header-section-number">28.1.1</span> Alternative to <code>{{}}</code></h3>
<p>The <code>{{.}}</code> is a shortcut for <code>!!enquo(.)</code> Where <code>rlang::enquo()</code> captures and quote an argument or an expression. The result of <code>enquo()</code> is a <strong>quosure</strong>, which is a combination of the quoted expression and its associated environment.</p>
<p><code>!!</code> This is the unquote operator. It's used to unquote or unsplice the contents of a quosure. In other words, it takes the quoted expression out of the quosure and evaluates it. We can see how this would work for one of our previous examples:</p>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="#cb491-1" tabindex="-1"></a>test_filter_general <span class="ot">&lt;-</span> <span class="cf">function</span>(filter_condition) {</span>
<span id="cb491-2"><a href="#cb491-2" tabindex="-1"></a>  </span>
<span id="cb491-3"><a href="#cb491-3" tabindex="-1"></a>  filter_quo <span class="ot">&lt;-</span> <span class="fu">enquo</span>(filter_condition)</span>
<span id="cb491-4"><a href="#cb491-4" tabindex="-1"></a>  </span>
<span id="cb491-5"><a href="#cb491-5" tabindex="-1"></a>  penguins_clean_split <span class="sc">%&gt;%</span></span>
<span id="cb491-6"><a href="#cb491-6" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!!</span>filter_quo)</span>
<span id="cb491-7"><a href="#cb491-7" tabindex="-1"></a>}</span>
<span id="cb491-8"><a href="#cb491-8" tabindex="-1"></a></span>
<span id="cb491-9"><a href="#cb491-9" tabindex="-1"></a><span class="fu">test_filter_general</span>(flipper_length_mm <span class="sc">&gt;</span> <span class="dv">180</span>) <span class="sc">%&gt;%</span></span>
<span id="cb491-10"><a href="#cb491-10" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 329
## Columns: 18
## $ study_name        &lt;chr&gt; &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708…
## $ sample_number     &lt;dbl&gt; 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, …
## $ species           &lt;chr&gt; &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;A…
## $ full_latin_name   &lt;chr&gt; &quot;Pygoscelis adeliae&quot;, &quot;Pygoscelis adeliae&quot;, &quot;Pygosce…
## $ region            &lt;chr&gt; &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;A…
## $ island            &lt;chr&gt; &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, …
## $ stage             &lt;chr&gt; &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, …
## $ individual_id     &lt;chr&gt; &quot;N1A1&quot;, &quot;N1A2&quot;, &quot;N2A1&quot;, &quot;N3A1&quot;, &quot;N3A2&quot;, &quot;N4A1&quot;, &quot;N4A…
## $ clutch_completion &lt;chr&gt; &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;…
## $ date_egg          &lt;date&gt; 2007-11-11, 2007-11-11, 2007-11-16, 2007-11-16, 200…
## $ culmen_length_mm  &lt;dbl&gt; 39.1, 39.5, 40.3, 36.7, 39.3, 38.9, 39.2, 34.1, 42.0…
## $ culmen_depth_mm   &lt;dbl&gt; 18.7, 17.4, 18.0, 19.3, 20.6, 17.8, 19.6, 18.1, 20.2…
## $ flipper_length_mm &lt;dbl&gt; 181, 186, 195, 193, 190, 181, 195, 193, 190, 186, 18…
## $ body_mass_g       &lt;dbl&gt; 3750, 3800, 3250, 3450, 3650, 3625, 4675, 3475, 4250…
## $ sex               &lt;chr&gt; &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;FEMALE&quot;, &quot;FEMALE&quot;, &quot;MALE&quot;, &quot;FEMAL…
## $ delta_15_n_o_oo   &lt;dbl&gt; NA, 8.94956, 8.36821, 8.76651, 8.66496, 9.18718, 9.4…
## $ delta_13_c_o_oo   &lt;dbl&gt; NA, -24.69454, -25.33302, -25.32426, -25.29805, -25.…
## $ comments          &lt;chr&gt; &quot;Not enough blood for isotopes.&quot;, NA, NA, NA, NA, &quot;N…</code></pre>
</div>
</div>
<div id="tidy-select" class="section level2" number="28.2">
<h2><span class="header-section-number">28.2</span> tidy-select</h2>
<p>When using functions that use tidy-select, we put variable names in quotes and use th <code>all_of</code> and <code>any_of</code> functions.</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="#cb493-1" tabindex="-1"></a>my_select_function <span class="ot">&lt;-</span> <span class="cf">function</span>(select_variable){</span>
<span id="cb493-2"><a href="#cb493-2" tabindex="-1"></a>  penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb493-3"><a href="#cb493-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(select_variable)</span>
<span id="cb493-4"><a href="#cb493-4" tabindex="-1"></a>  }</span>
<span id="cb493-5"><a href="#cb493-5" tabindex="-1"></a></span>
<span id="cb493-6"><a href="#cb493-6" tabindex="-1"></a><span class="fu">my_select_function</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb493-7"><a href="#cb493-7" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>Error: object &#39;species&#39; not found
</code></pre>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="#cb495-1" tabindex="-1"></a>my_select_function <span class="ot">&lt;-</span> <span class="cf">function</span>(select_variable){</span>
<span id="cb495-2"><a href="#cb495-2" tabindex="-1"></a>  penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb495-3"><a href="#cb495-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(select_variable)</span>
<span id="cb495-4"><a href="#cb495-4" tabindex="-1"></a>  }</span>
<span id="cb495-5"><a href="#cb495-5" tabindex="-1"></a></span>
<span id="cb495-6"><a href="#cb495-6" tabindex="-1"></a><span class="fu">my_select_function</span>(<span class="st">&quot;species&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb495-7"><a href="#cb495-7" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>Warning: Using an external vector in selections was deprecated in tidyselect 1.1.0.
Please use `all_of()` or `any_of()` instead.
# Was:
data %&gt;% select(select_variable)

# Now:
data %&gt;% select(all_of(select_variable))
</code></pre>
<ul>
<li><p><code>any_of()</code>: selecting any of the listed variables</p></li>
<li><p><code>all_of()</code>: for strict selection. If any of the variables in the character vector is missing, an error is thrown</p></li>
<li><p>Can also use <code>!all_of()</code> to select all variables not found in the character vector supplied to all_of()</p></li>
</ul>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="#cb497-1" tabindex="-1"></a>my_select_function <span class="ot">&lt;-</span> <span class="cf">function</span>(select_variable){</span>
<span id="cb497-2"><a href="#cb497-2" tabindex="-1"></a>  penguins_clean_split <span class="sc">|&gt;</span> </span>
<span id="cb497-3"><a href="#cb497-3" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(dplyr<span class="sc">::</span><span class="fu">all_of</span>(select_variable))</span>
<span id="cb497-4"><a href="#cb497-4" tabindex="-1"></a>  }</span>
<span id="cb497-5"><a href="#cb497-5" tabindex="-1"></a></span>
<span id="cb497-6"><a href="#cb497-6" tabindex="-1"></a><span class="fu">my_select_function</span>(<span class="at">select_variable =</span> <span class="fu">c</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;sex&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb497-7"><a href="#cb497-7" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 344
## Columns: 2
## $ species &lt;chr&gt; &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;Adelie&quot;, &quot;A…
## $ sex     &lt;chr&gt; &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;FEMALE&quot;, NA, &quot;FEMALE&quot;, &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;M…</code></pre>
</div>
<div id="practice" class="section level2" number="28.3">
<h2><span class="header-section-number">28.3</span> Practice</h2>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
<p>Write a <code>function</code> that uses filter to take any two of the penguin species then selects one numeric variable e.g. body_mass_g and compares them with a violin plot geom_violin()</p>
</div>
</div>
<button id="displayTextunnamed-chunk-72" onclick="javascript:toggle(&#39;unnamed-chunk-72&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-72" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="#cb499-1" tabindex="-1"></a>compare_species_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(data, species_1, species_2, feature) {</span>
<span id="cb499-2"><a href="#cb499-2" tabindex="-1"></a>    </span>
<span id="cb499-3"><a href="#cb499-3" tabindex="-1"></a>  filtered_data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb499-4"><a href="#cb499-4" tabindex="-1"></a>        <span class="fu">filter</span>(species <span class="sc">%in%</span> <span class="fu">c</span>(species_1, species_2))</span>
<span id="cb499-5"><a href="#cb499-5" tabindex="-1"></a>    </span>
<span id="cb499-6"><a href="#cb499-6" tabindex="-1"></a>    <span class="co"># Create a conditional ggplot</span></span>
<span id="cb499-7"><a href="#cb499-7" tabindex="-1"></a>    <span class="fu">ggplot</span>(filtered_data, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> {{feature}}))<span class="sc">+</span> </span>
<span id="cb499-8"><a href="#cb499-8" tabindex="-1"></a>      <span class="fu">geom_violin</span>()</span>
<span id="cb499-9"><a href="#cb499-9" tabindex="-1"></a>        </span>
<span id="cb499-10"><a href="#cb499-10" tabindex="-1"></a></span>
<span id="cb499-11"><a href="#cb499-11" tabindex="-1"></a>}</span>
<span id="cb499-12"><a href="#cb499-12" tabindex="-1"></a></span>
<span id="cb499-13"><a href="#cb499-13" tabindex="-1"></a><span class="fu">compare_species_plot</span>(penguins_clean_split, <span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span>, culmen_length_mm)</span></code></pre></div>
<p><img src="05-tidyverse_files/figure-html/unnamed-chunk-77-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<p>Try substituting in <code>quo_name(enquo(filter_condition))</code>. To return a character string that represents your filter condition. In the example below I have used <code>quo_name(enquo())</code> to enable conversion to character strings, this means all of the function arguments can be provided without "quotes".</p>
<button id="displayTextunnamed-chunk-73" onclick="javascript:toggle(&#39;unnamed-chunk-73&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-73" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="#cb500-1" tabindex="-1"></a>compare_species_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(data, species_1, species_2, feature) {</span>
<span id="cb500-2"><a href="#cb500-2" tabindex="-1"></a>    </span>
<span id="cb500-3"><a href="#cb500-3" tabindex="-1"></a>   </span>
<span id="cb500-4"><a href="#cb500-4" tabindex="-1"></a>    </span>
<span id="cb500-5"><a href="#cb500-5" tabindex="-1"></a>    <span class="co"># Quote species_1 and species_2 using quosures</span></span>
<span id="cb500-6"><a href="#cb500-6" tabindex="-1"></a>    species_1_quo <span class="ot">&lt;-</span> <span class="fu">quo_name</span>(<span class="fu">enquo</span>(species_1))</span>
<span id="cb500-7"><a href="#cb500-7" tabindex="-1"></a>    species_2_quo <span class="ot">&lt;-</span> <span class="fu">quo_name</span>(<span class="fu">enquo</span>(species_2))</span>
<span id="cb500-8"><a href="#cb500-8" tabindex="-1"></a>    </span>
<span id="cb500-9"><a href="#cb500-9" tabindex="-1"></a></span>
<span id="cb500-10"><a href="#cb500-10" tabindex="-1"></a>    filtered_data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb500-11"><a href="#cb500-11" tabindex="-1"></a>        <span class="fu">filter</span>(species <span class="sc">%in%</span> <span class="fu">c</span>(species_1_quo, species_2_quo))</span>
<span id="cb500-12"><a href="#cb500-12" tabindex="-1"></a>    </span>
<span id="cb500-13"><a href="#cb500-13" tabindex="-1"></a>    <span class="co"># Create a conditional ggplot</span></span>
<span id="cb500-14"><a href="#cb500-14" tabindex="-1"></a>    <span class="fu">ggplot</span>(filtered_data, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> {{feature}})) <span class="sc">+</span></span>
<span id="cb500-15"><a href="#cb500-15" tabindex="-1"></a>        <span class="fu">geom_violin</span>()</span>
<span id="cb500-16"><a href="#cb500-16" tabindex="-1"></a>}</span>
<span id="cb500-17"><a href="#cb500-17" tabindex="-1"></a></span>
<span id="cb500-18"><a href="#cb500-18" tabindex="-1"></a><span class="co"># Example usage without quotes for species names</span></span>
<span id="cb500-19"><a href="#cb500-19" tabindex="-1"></a></span>
<span id="cb500-20"><a href="#cb500-20" tabindex="-1"></a><span class="fu">compare_species_plot</span>(penguins_clean_split, Adelie, Chinstrap, culmen_length_mm)</span></code></pre></div>
</div>
</div>
</div>
</div>
<div id="exercise-6" class="section level2" number="28.4">
<h2><span class="header-section-number">28.4</span> Exercise</h2>
<p><strong>1.Practice tidy evaluation</strong> I want to produce a function that allows unquoted arguments and produces a barplot of the number of penguins recorded by species. In this instance I am going to start with a function where I can filter the penguins according to one variable and fill the columns according to another variable e.g. filter by year and colour by island to get a year-by-year abundance chart</p>
<p>Try and write a specific example first:</p>
<button id="displayTextunnamed-chunk-74" onclick="javascript:toggle(&#39;unnamed-chunk-74&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-74" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="#cb501-1" tabindex="-1"></a>penguins<span class="sc">|&gt;</span> </span>
<span id="cb501-2"><a href="#cb501-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> </span>
<span id="cb501-3"><a href="#cb501-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>species, <span class="at">fill=</span>island))<span class="sc">+</span></span>
<span id="cb501-4"><a href="#cb501-4" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="fu">position_dodge2</span>(<span class="at">preserve=</span><span class="st">&quot;single&quot;</span>))<span class="sc">+</span></span>
<span id="cb501-5"><a href="#cb501-5" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="05-tidyverse_files/figure-html/unnamed-chunk-77-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<p>Then abstract this and use bare (unquoted) values in your arguments</p>
<button id="displayTextunnamed-chunk-75" onclick="javascript:toggle(&#39;unnamed-chunk-75&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-75" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="#cb502-1" tabindex="-1"></a>plot_count <span class="ot">&lt;-</span> <span class="cf">function</span>(filter_condition, colour_variable){</span>
<span id="cb502-2"><a href="#cb502-2" tabindex="-1"></a>penguins<span class="sc">|&gt;</span> </span>
<span id="cb502-3"><a href="#cb502-3" tabindex="-1"></a>  <span class="fu">filter</span>({{filter_condition}}) <span class="sc">|&gt;</span> </span>
<span id="cb502-4"><a href="#cb502-4" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>species, <span class="at">fill=</span>{{colour_variable}}))<span class="sc">+</span></span>
<span id="cb502-5"><a href="#cb502-5" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="fu">position_dodge2</span>(<span class="at">preserve=</span><span class="st">&quot;single&quot;</span>))<span class="sc">+</span></span>
<span id="cb502-6"><a href="#cb502-6" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span>
<span id="cb502-7"><a href="#cb502-7" tabindex="-1"></a>}</span>
<span id="cb502-8"><a href="#cb502-8" tabindex="-1"></a></span>
<span id="cb502-9"><a href="#cb502-9" tabindex="-1"></a><span class="fu">plot_count</span>(year <span class="sc">==</span> <span class="dv">2007</span> , <span class="at">colour_variable =</span> island)</span></code></pre></div>
<p><img src="05-tidyverse_files/figure-html/unnamed-chunk-78-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<p><strong>2. Write your own custom function</strong> Can you write your own custom function in tidyverse? If you have something from your own data or work - see if you can functionalise your flow?</p>
<!--chapter:end:05-tidyverse.Rmd-->
</div>
</div>
<div id="part-data-presentation" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) Data Presentation</h1>
</div>
<div id="customisation-with-ggplot2" class="section level1" number="29">
<h1><span class="header-section-number">29</span> Customisation with ggplot2</h1>
<p>Up until now, we've created basic plots with the default visual style. Before we dive into working with experimental data, let's explore some straightforward ways to personalize our visuals. There are numerous ways to tweak and tailor the look of your plots in R, but once you grasp the concept behind one customization, you'll find it easier to apply similar principles in other examples.</p>
<p>You can customize the appearance of elements within a specific plot element, through aesthetic mapping, or by adding extra layers using the plus sign (+). In this section, we'll focus on the most common and easy-to-implement customizations, like changing colors, including axis labels, and applying different themes to your plots.</p>
<div class="info">
<p>
You will need your cleaned penguins dataframe from Day One.
</p>
</div>
<div id="colours" class="section level2" number="29.1">
<h2><span class="header-section-number">29.1</span> Colours</h2>
<p>There are two main differences when it comes to colors in <code>ggplot2</code>. Both arguments, color and fill, can be specified as single color or
assigned to variables.</p>
<p>As you have already seen in this tutorial, variables that are inside the aesthetics are encoded by variables and those that are outside are properties that are unrelated to the variables.</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="#cb503-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb503-2"><a href="#cb503-2" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>culmen_length_mm))<span class="sc">+</span></span>
<span id="cb503-3"><a href="#cb503-3" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">50</span>, </span>
<span id="cb503-4"><a href="#cb503-4" tabindex="-1"></a>                   <span class="fu">aes</span>(<span class="at">y=</span>..density..,</span>
<span id="cb503-5"><a href="#cb503-5" tabindex="-1"></a>                       <span class="at">fill=</span>species), </span>
<span id="cb503-6"><a href="#cb503-6" tabindex="-1"></a>                   <span class="at">position =</span> <span class="st">&quot;identity&quot;</span>,</span>
<span id="cb503-7"><a href="#cb503-7" tabindex="-1"></a>                   <span class="at">colour=</span><span class="st">&quot;black&quot;</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-4-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div id="choosing-and-using-colour-palettes" class="section level3" number="29.1.1">
<h3><span class="header-section-number">29.1.1</span> Choosing and using colour palettes</h3>
<p>You can specify what colours you want to assign to variables in a number of different ways.</p>
<p>In ggplot2, colors that are assigned to variables are modified via the scale_color_* and the scale_fill_* functions. In order to use color with your data, most importantly you need to know if you are dealing with a categorical or continuous variable. The color palette should be chosen depending on type of the variable:</p>
<ul>
<li><p><strong>sequential or diverging</strong> color palettes being used for continuous variables</p></li>
<li><p><strong>qualitative</strong> color palettes for (unordered) categorical variables:</p></li>
</ul>
<p><img src="images/palette.png" width="80%" style="display: block; margin: auto;" /></p>
<p>You can pick your own sets of colours and assign them to a categorical variable. The number of specified colours <strong>has</strong> to match the number of categories. You can use a wide number of preset colour <a href="https://www.datanovia.com/en/blog/awesome-list-of-657-r-color-names/">names</a> or you can use <a href="https://www.datanovia.com/en/blog/awesome-list-of-hexadecimal-colors-you-should-have/">hexadecimals</a>.</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="#cb504-1" tabindex="-1"></a><span class="do">## Custom colours ----</span></span>
<span id="cb504-2"><a href="#cb504-2" tabindex="-1"></a></span>
<span id="cb504-3"><a href="#cb504-3" tabindex="-1"></a>pal <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb504-4"><a href="#cb504-4" tabindex="-1"></a>  <span class="st">&quot;Adelie&quot;</span> <span class="ot">=</span> <span class="st">&quot;#FF8C00&quot;</span>, </span>
<span id="cb504-5"><a href="#cb504-5" tabindex="-1"></a>  <span class="st">&quot;Chinstrap&quot;</span> <span class="ot">=</span> <span class="st">&quot;#A034F0&quot;</span>, </span>
<span id="cb504-6"><a href="#cb504-6" tabindex="-1"></a>  <span class="st">&quot;Gentoo&quot;</span> <span class="ot">=</span> <span class="st">&quot;#159090&quot;</span>)</span>
<span id="cb504-7"><a href="#cb504-7" tabindex="-1"></a></span>
<span id="cb504-8"><a href="#cb504-8" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb504-9"><a href="#cb504-9" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb504-10"><a href="#cb504-10" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g))<span class="sc">+</span></span>
<span id="cb504-11"><a href="#cb504-11" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour=</span>species))<span class="sc">+</span></span>
<span id="cb504-12"><a href="#cb504-12" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values=</span>pal)<span class="sc">+</span></span>
<span id="cb504-13"><a href="#cb504-13" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-6-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>You can also use a range of inbuilt colour palettes:</p>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb505-1"><a href="#cb505-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb505-2"><a href="#cb505-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb505-3"><a href="#cb505-3" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g))<span class="sc">+</span></span>
<span id="cb505-4"><a href="#cb505-4" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour=</span>species))<span class="sc">+</span></span>
<span id="cb505-5"><a href="#cb505-5" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Set1&quot;</span>)<span class="sc">+</span></span>
<span id="cb505-6"><a href="#cb505-6" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-7-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="info">
<p>
You can explore all schemes available with the command
<code>RColorBrewer::display.brewer.all()</code>
</p>
</div>
<p>There are also many, many extensions that provide additional colour palettes. Some of my favourite packages include <a href="https://cran.r-project.org/web/packages/ggsci/vignettes/ggsci.html">ggsci</a> and <a href="https://github.com/karthik/wesanderson">wesanderson</a></p>
<p><img src="images/wesanderson.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="redundant-aesthetics" class="section level3" number="29.1.2">
<h3><span class="header-section-number">29.1.2</span> Redundant aesthetics</h3>
<p>Specifications made using <code>aes()</code> are inherited from the top layer of a ggplot by default. This means that if you set an aesthetic mapping at the beginning of your ggplot, it will apply to all subsequent layers <em>unless you explicitly override it in a specific layer</em>. This inheritance simplifies the process of maintaining consistent aesthetics throughout your plot.</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="#cb506-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb506-2"><a href="#cb506-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb506-3"><a href="#cb506-3" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g))<span class="sc">+</span></span>
<span id="cb506-4"><a href="#cb506-4" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour=</span>species))<span class="sc">+</span></span>
<span id="cb506-5"><a href="#cb506-5" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">colour =</span> species), <span class="co"># both geoms use aes(colour = species)</span></span>
<span id="cb506-6"><a href="#cb506-6" tabindex="-1"></a>              <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb506-7"><a href="#cb506-7" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Set1&quot;</span>)<span class="sc">+</span></span>
<span id="cb506-8"><a href="#cb506-8" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-10-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb507-1"><a href="#cb507-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb507-2"><a href="#cb507-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb507-3"><a href="#cb507-3" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g,</span>
<span id="cb507-4"><a href="#cb507-4" tabindex="-1"></a>             <span class="at">colour =</span> species))<span class="sc">+</span> <span class="co"># this can be set at the ggplot layer</span></span>
<span id="cb507-5"><a href="#cb507-5" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb507-6"><a href="#cb507-6" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se  =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb507-7"><a href="#cb507-7" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Set1&quot;</span>)<span class="sc">+</span></span>
<span id="cb507-8"><a href="#cb507-8" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-11-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="accessible-colours" class="section level3" number="29.1.3">
<h3><span class="header-section-number">29.1.3</span> Accessible colours</h3>
<p>It's very easy to get carried away with colour palettes, but you should remember at all times that your figures must be accessible. One way to check how accessible your figures are is to use a colour blindness checker <a href="https://cran.r-project.org/web/packages/colorBlindness/vignettes/colorBlindness.html">colorBlindness</a></p>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="#cb508-1" tabindex="-1"></a><span class="do">## Check accessibility ----</span></span>
<span id="cb508-2"><a href="#cb508-2" tabindex="-1"></a></span>
<span id="cb508-3"><a href="#cb508-3" tabindex="-1"></a><span class="fu">library</span>(colorBlindness)</span>
<span id="cb508-4"><a href="#cb508-4" tabindex="-1"></a>colorBlindness<span class="sc">::</span><span class="fu">cvdPlot</span>() <span class="co"># will automatically run on the last plot you made</span></span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-12-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div id="guides-to-visual-accessibility" class="section level4" number="29.1.3.1">
<h4><span class="header-section-number">29.1.3.1</span> Guides to visual accessibility</h4>
<p>Using colours to tell categories apart can be useful, but as we can see in the example above, you should choose carefully. Other aesthetics which you can access in your geoms include <code>shape</code>, and <code>size</code> - you can combine these in complimentary ways to enhance the accessibility of your plots. Here is a hierarchy of "interpretability" for different types of data</p>
<p><img src="images/list.png" width="80%" style="display: block; margin: auto;" /></p>
<p><img src="images/shape_v_colour.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div id="axes" class="section level2" number="29.2">
<h2><span class="header-section-number">29.2</span> Axes</h2>
<p>ggplot will automatically pick the scale for each axis, and the type of coordinate space. Most plots are in Cartesian (linear X vs linear Y) coordinate space.</p>
<p>You might have observed that depending on how your data is distributed and the portion of the plot visible, the axis values can vary. Sometimes, we prefer to keep these values consistent. To achieve this, we've already used functions to control axis scaling in previous sections of this paper – specifically, the "scale_*" functions.</p>
<p>Now, we'll utilize "scale_x_continuous()" and "scale_y_continuous()" for setting our desired values on the axes. The key parameters in both functions are "limits" (defined as "limits = c(value, value)") and "breaks" (which represent the tick marks, specified as "breaks = value:value"). It's important to note that "limits" comprise only two values (the minimum and maximum), while "breaks" consists of a range of values (for instance, from 0 to 100).</p>
<p>For this plot, let’s say we want the x and y origin to be set at 0. To do this we can add in <code>xlim()</code> and <code>ylim()</code> functions, which define the limits of the axes:</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb509-1"><a href="#cb509-1" tabindex="-1"></a><span class="do">## Set axis limits ----</span></span>
<span id="cb509-2"><a href="#cb509-2" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb509-3"><a href="#cb509-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb509-4"><a href="#cb509-4" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g,</span>
<span id="cb509-5"><a href="#cb509-5" tabindex="-1"></a>             <span class="at">colour=</span>species))<span class="sc">+</span> </span>
<span id="cb509-6"><a href="#cb509-6" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb509-7"><a href="#cb509-7" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>,    </span>
<span id="cb509-8"><a href="#cb509-8" tabindex="-1"></a>              <span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb509-9"><a href="#cb509-9" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Set1&quot;</span>)<span class="sc">+</span></span>
<span id="cb509-10"><a href="#cb509-10" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">240</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">60</span>,<span class="dv">90</span>,<span class="dv">120</span>,<span class="dv">150</span>,<span class="dv">180</span>,<span class="dv">210</span>,<span class="dv">240</span>))<span class="sc">+</span></span>
<span id="cb509-11"><a href="#cb509-11" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">7000</span>), <span class="at">breaks =</span> (<span class="dv">0</span><span class="sc">:</span><span class="dv">7000</span>))</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-15-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="#cb510-1" tabindex="-1"></a><span class="do">## Set axis limits ----</span></span>
<span id="cb510-2"><a href="#cb510-2" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb510-3"><a href="#cb510-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb510-4"><a href="#cb510-4" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g,</span>
<span id="cb510-5"><a href="#cb510-5" tabindex="-1"></a>             <span class="at">colour=</span>species))<span class="sc">+</span> </span>
<span id="cb510-6"><a href="#cb510-6" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb510-7"><a href="#cb510-7" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>,    </span>
<span id="cb510-8"><a href="#cb510-8" tabindex="-1"></a>              <span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb510-9"><a href="#cb510-9" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Set1&quot;</span>)<span class="sc">+</span></span>
<span id="cb510-10"><a href="#cb510-10" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">240</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">240</span>,<span class="dv">30</span>))<span class="sc">+</span></span>
<span id="cb510-11"><a href="#cb510-11" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">7000</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">7000</span>, <span class="dv">1000</span>))</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-16-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Further, we can control the coordinate space using <code>coord()</code> functions. Say we want to flip the x and y axes, we add <code>coord_flip()</code>:</p>
<div class="sourceCode" id="cb511"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb511-1"><a href="#cb511-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb511-2"><a href="#cb511-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb511-3"><a href="#cb511-3" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g,</span>
<span id="cb511-4"><a href="#cb511-4" tabindex="-1"></a>             <span class="at">colour=</span>species))<span class="sc">+</span> </span>
<span id="cb511-5"><a href="#cb511-5" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb511-6"><a href="#cb511-6" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>,    </span>
<span id="cb511-7"><a href="#cb511-7" tabindex="-1"></a>              <span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb511-8"><a href="#cb511-8" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Set1&quot;</span>)<span class="sc">+</span></span>
<span id="cb511-9"><a href="#cb511-9" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">240</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">240</span>,<span class="dv">30</span>))<span class="sc">+</span></span>
<span id="cb511-10"><a href="#cb511-10" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">7000</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">7000</span>, <span class="dv">1000</span>))<span class="sc">+</span></span>
<span id="cb511-11"><a href="#cb511-11" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-17-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div id="discrete-scales" class="section level3" number="29.2.1">
<h3><span class="header-section-number">29.2.1</span> Discrete scales</h3>
<p>The same idea of limits within a scale_* function can also be used to change the order of categories on a discrete scale. For example if we look at our boxplots again</p>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="#cb512-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb512-2"><a href="#cb512-2" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb512-3"><a href="#cb512-3" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> culmen_length_mm)) <span class="sc">+</span></span>
<span id="cb512-4"><a href="#cb512-4" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">fill =</span> sex),</span>
<span id="cb512-5"><a href="#cb512-5" tabindex="-1"></a>              <span class="at">width =</span> <span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb512-6"><a href="#cb512-6" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-18-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>The figures always default to the alphabetical order. Sometimes that is what we want; sometimes that is not what we want. If we wanted to switch the order we would use the <code>scale_x_discrete()</code> function and set the limits within it (limits = c("category","category")) as follows:</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb513-1"><a href="#cb513-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb513-2"><a href="#cb513-2" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb513-3"><a href="#cb513-3" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> culmen_length_mm)) <span class="sc">+</span></span>
<span id="cb513-4"><a href="#cb513-4" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">fill =</span> sex),</span>
<span id="cb513-5"><a href="#cb513-5" tabindex="-1"></a>              <span class="at">width =</span> <span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb513-6"><a href="#cb513-6" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb513-7"><a href="#cb513-7" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;Gentoo&quot;</span>,<span class="st">&quot;Chinstrap&quot;</span>)) </span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-19-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>What you can see from this example is that the <code>scale_*_</code> arguments actually control what data is plotted - if we wish to zoom in and out on a subsection of a plot, without actually eliminating data we use a different function</p>
</div>
<div id="zooming-in-and-out" class="section level3" number="29.2.2">
<h3><span class="header-section-number">29.2.2</span> Zooming in and out</h3>
<p>We have seen how we can set the parameters for the axes for both continuous and discrete scales.</p>
<p>It can be very beneficial to be able to zoom in and out of figures, mainly to focus the frame on a given section. One function we can use to do this is the <code>coord_cartesian()</code>, in ggplot2. The main arguments are the limits on the x-axis <code>(xlim = c(value, value))</code>, the limits on the y-axis <code>(ylim = c(value, value))</code>, and whether to add a small expansion to those limits or not <code>(expand = TRUE/FALSE)</code>.</p>
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb514-1"><a href="#cb514-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb514-2"><a href="#cb514-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb514-3"><a href="#cb514-3" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g,</span>
<span id="cb514-4"><a href="#cb514-4" tabindex="-1"></a>             <span class="at">colour=</span>species))<span class="sc">+</span> </span>
<span id="cb514-5"><a href="#cb514-5" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb514-6"><a href="#cb514-6" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>,    </span>
<span id="cb514-7"><a href="#cb514-7" tabindex="-1"></a>              <span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb514-8"><a href="#cb514-8" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Set1&quot;</span>)<span class="sc">+</span></span>
<span id="cb514-9"><a href="#cb514-9" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">180</span>,<span class="dv">210</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">3000</span>,<span class="dv">4000</span>), <span class="at">expand =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-20-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="labels" class="section level2" number="29.3">
<h2><span class="header-section-number">29.3</span> Labels</h2>
<p>By default, the axis labels will be the column names we gave as aesthetics aes(). We can change the axis labels using the xlab() and ylab() functions. Given that column names are often short and can be cryptic, this functionality is particularly important for effectively communicating results.</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb515-1"><a href="#cb515-1" tabindex="-1"></a><span class="do">## Custom labels ----</span></span>
<span id="cb515-2"><a href="#cb515-2" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb515-3"><a href="#cb515-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb515-4"><a href="#cb515-4" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g,</span>
<span id="cb515-5"><a href="#cb515-5" tabindex="-1"></a>             <span class="at">colour=</span>species))<span class="sc">+</span> </span>
<span id="cb515-6"><a href="#cb515-6" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb515-7"><a href="#cb515-7" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>,    </span>
<span id="cb515-8"><a href="#cb515-8" tabindex="-1"></a>              <span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb515-9"><a href="#cb515-9" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Set1&quot;</span>)<span class="sc">+</span></span>
<span id="cb515-10"><a href="#cb515-10" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Flipper length (mm)&quot;</span>,</span>
<span id="cb515-11"><a href="#cb515-11" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Body mass (g)&quot;</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-21-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div id="titles-and-subtitles" class="section level3" number="29.3.1">
<h3><span class="header-section-number">29.3.1</span> Titles and subtitles</h3>
<div class="sourceCode" id="cb516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb516-1"><a href="#cb516-1" tabindex="-1"></a><span class="do">## Add titles ----</span></span>
<span id="cb516-2"><a href="#cb516-2" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb516-3"><a href="#cb516-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb516-4"><a href="#cb516-4" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g,</span>
<span id="cb516-5"><a href="#cb516-5" tabindex="-1"></a>             <span class="at">colour=</span>species))<span class="sc">+</span> </span>
<span id="cb516-6"><a href="#cb516-6" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb516-7"><a href="#cb516-7" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>,    </span>
<span id="cb516-8"><a href="#cb516-8" tabindex="-1"></a>              <span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb516-9"><a href="#cb516-9" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Set1&quot;</span>)<span class="sc">+</span></span>
<span id="cb516-10"><a href="#cb516-10" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Flipper length (mm)&quot;</span>,</span>
<span id="cb516-11"><a href="#cb516-11" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Body mass (g)&quot;</span>,</span>
<span id="cb516-12"><a href="#cb516-12" tabindex="-1"></a>       <span class="at">title=</span> <span class="st">&quot;Penguin Size, Palmer Station LTER&quot;</span>,</span>
<span id="cb516-13"><a href="#cb516-13" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">&quot;Flipper length and body mass for three penguin species&quot;</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-22-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="controlling-the-legend" class="section level3" number="29.3.2">
<h3><span class="header-section-number">29.3.2</span> Controlling the legend</h3>
<p>We have the ability to control legend placement, this can be done by setting <code>theme(legend.position = ...)</code> to either "top", "bottom", "left" or "right" as shown:</p>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb517-1"><a href="#cb517-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb517-2"><a href="#cb517-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb517-3"><a href="#cb517-3" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g,</span>
<span id="cb517-4"><a href="#cb517-4" tabindex="-1"></a>             <span class="at">colour=</span>species))<span class="sc">+</span> </span>
<span id="cb517-5"><a href="#cb517-5" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb517-6"><a href="#cb517-6" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>,    </span>
<span id="cb517-7"><a href="#cb517-7" tabindex="-1"></a>              <span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb517-8"><a href="#cb517-8" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Set1&quot;</span>)<span class="sc">+</span></span>
<span id="cb517-9"><a href="#cb517-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Flipper length (mm)&quot;</span>,</span>
<span id="cb517-10"><a href="#cb517-10" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Body mass (g)&quot;</span>,</span>
<span id="cb517-11"><a href="#cb517-11" tabindex="-1"></a>       <span class="at">title=</span> <span class="st">&quot;Penguin Size, Palmer Station LTER&quot;</span>,</span>
<span id="cb517-12"><a href="#cb517-12" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">&quot;Flipper length and body mass for three penguin species&quot;</span>)<span class="sc">+</span></span>
<span id="cb517-13"><a href="#cb517-13" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span><span class="st">&quot;top&quot;</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-23-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Or even as a coordinate within your figure expressed as a propotion of your figure - i.e. c(x = .8, y = .2) would be the bottom right of your figure</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="#cb518-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb518-2"><a href="#cb518-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb518-3"><a href="#cb518-3" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g,</span>
<span id="cb518-4"><a href="#cb518-4" tabindex="-1"></a>             <span class="at">colour=</span>species))<span class="sc">+</span> </span>
<span id="cb518-5"><a href="#cb518-5" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb518-6"><a href="#cb518-6" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>,    </span>
<span id="cb518-7"><a href="#cb518-7" tabindex="-1"></a>              <span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb518-8"><a href="#cb518-8" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Set1&quot;</span>)<span class="sc">+</span></span>
<span id="cb518-9"><a href="#cb518-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Flipper length (mm)&quot;</span>,</span>
<span id="cb518-10"><a href="#cb518-10" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Body mass (g)&quot;</span>,</span>
<span id="cb518-11"><a href="#cb518-11" tabindex="-1"></a>       <span class="at">title=</span> <span class="st">&quot;Penguin Size, Palmer Station LTER&quot;</span>,</span>
<span id="cb518-12"><a href="#cb518-12" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">&quot;Flipper length and body mass for three penguin species&quot;</span>)<span class="sc">+</span></span>
<span id="cb518-13"><a href="#cb518-13" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">8</span>,.<span class="dv">2</span>))</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-24-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="controlling-redundant-legends" class="section level3" number="29.3.3">
<h3><span class="header-section-number">29.3.3</span> Controlling redundant legends</h3>
<p>This plot shows quite an ugly legend as it plots a layer for the boxplot and the violin at the same time</p>
<div class="sourceCode" id="cb519"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb519-1"><a href="#cb519-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb519-2"><a href="#cb519-2" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb519-3"><a href="#cb519-3" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> culmen_length_mm, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb519-4"><a href="#cb519-4" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">width =</span> .<span class="dv">5</span>,</span>
<span id="cb519-5"><a href="#cb519-5" tabindex="-1"></a>              <span class="at">alpha =</span> .<span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb519-6"><a href="#cb519-6" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb519-7"><a href="#cb519-7" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) </span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-25-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>You can use the <code>show.legend</code> argument within the <code>geom_boxplot()</code> function and set it to <code>FALSE</code>. This will prevent the geom_boxplot from being included in the legend. Here's an example:</p>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="#cb520-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb520-2"><a href="#cb520-2" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb520-3"><a href="#cb520-3" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> culmen_length_mm, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb520-4"><a href="#cb520-4" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">width =</span> .<span class="dv">5</span>,</span>
<span id="cb520-5"><a href="#cb520-5" tabindex="-1"></a>              <span class="at">alpha =</span> .<span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb520-6"><a href="#cb520-6" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">2</span>,</span>
<span id="cb520-7"><a href="#cb520-7" tabindex="-1"></a>               <span class="at">show.legend =</span> <span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb520-8"><a href="#cb520-8" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) </span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-26-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>And of course - we can agree that the legend is actually redundant here, as the x-axis plots the species names. So we can remove it entirely with the <code>theme()</code> function.</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb521-1"><a href="#cb521-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb521-2"><a href="#cb521-2" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb521-3"><a href="#cb521-3" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> culmen_length_mm, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb521-4"><a href="#cb521-4" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">width =</span> .<span class="dv">5</span>,</span>
<span id="cb521-5"><a href="#cb521-5" tabindex="-1"></a>              <span class="at">alpha =</span> .<span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb521-6"><a href="#cb521-6" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb521-7"><a href="#cb521-7" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb521-8"><a href="#cb521-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-27-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>We can also choose to remove specific aesthetics from the legends using <code>guides()</code></p>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="#cb522-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb522-2"><a href="#cb522-2" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb522-3"><a href="#cb522-3" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> culmen_length_mm, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb522-4"><a href="#cb522-4" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">width =</span> .<span class="dv">5</span>,</span>
<span id="cb522-5"><a href="#cb522-5" tabindex="-1"></a>              <span class="at">alpha =</span> .<span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb522-6"><a href="#cb522-6" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb522-7"><a href="#cb522-7" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb522-8"><a href="#cb522-8" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-28-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="themes" class="section level2" number="29.4">
<h2><span class="header-section-number">29.4</span> Themes</h2>
<p>Finally, the overall appearance of the plot can be modified using theme() functions. The default theme has a grey background.
You may prefer <code>theme_classic()</code>, a <code>theme_minimal()</code> or even <code>theme_void()</code>. Try them out.</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb523-1"><a href="#cb523-1" tabindex="-1"></a><span class="do">## Custom themes ----</span></span>
<span id="cb523-2"><a href="#cb523-2" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb523-3"><a href="#cb523-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb523-4"><a href="#cb523-4" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g,</span>
<span id="cb523-5"><a href="#cb523-5" tabindex="-1"></a>             <span class="at">colour=</span>species))<span class="sc">+</span> </span>
<span id="cb523-6"><a href="#cb523-6" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb523-7"><a href="#cb523-7" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>,    </span>
<span id="cb523-8"><a href="#cb523-8" tabindex="-1"></a>              <span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb523-9"><a href="#cb523-9" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Set1&quot;</span>)<span class="sc">+</span></span>
<span id="cb523-10"><a href="#cb523-10" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Flipper length (mm)&quot;</span>,</span>
<span id="cb523-11"><a href="#cb523-11" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Body mass (g)&quot;</span>,</span>
<span id="cb523-12"><a href="#cb523-12" tabindex="-1"></a>       <span class="at">title=</span> <span class="st">&quot;Penguin Size, Palmer Station LTER&quot;</span>,</span>
<span id="cb523-13"><a href="#cb523-13" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">&quot;Flipper length and body mass for three penguin species&quot;</span>)<span class="sc">+</span></span>
<span id="cb523-14"><a href="#cb523-14" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-29-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="#cb524-1" tabindex="-1"></a><span class="do">## Custom themes ----</span></span>
<span id="cb524-2"><a href="#cb524-2" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb524-3"><a href="#cb524-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb524-4"><a href="#cb524-4" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g,</span>
<span id="cb524-5"><a href="#cb524-5" tabindex="-1"></a>             <span class="at">colour=</span>species))<span class="sc">+</span> </span>
<span id="cb524-6"><a href="#cb524-6" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb524-7"><a href="#cb524-7" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>,    </span>
<span id="cb524-8"><a href="#cb524-8" tabindex="-1"></a>              <span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb524-9"><a href="#cb524-9" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Set1&quot;</span>)<span class="sc">+</span></span>
<span id="cb524-10"><a href="#cb524-10" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Flipper length (mm)&quot;</span>,</span>
<span id="cb524-11"><a href="#cb524-11" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Body mass (g)&quot;</span>,</span>
<span id="cb524-12"><a href="#cb524-12" tabindex="-1"></a>       <span class="at">title=</span> <span class="st">&quot;Penguin Size, Palmer Station LTER&quot;</span>,</span>
<span id="cb524-13"><a href="#cb524-13" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">&quot;Flipper length and body mass for three penguin species&quot;</span>)<span class="sc">+</span></span>
<span id="cb524-14"><a href="#cb524-14" tabindex="-1"></a>  <span class="fu">theme_void</span>()<span class="sc">+</span></span>
<span id="cb524-15"><a href="#cb524-15" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">8</span>, .<span class="dv">2</span>)) <span class="co"># note theme customisations must come AFTER theme sets or they will be overridden</span></span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-30-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="info">
<p>
There is a lot more customisation available through the theme()
function. We will look at making our own custom themes in later
lessons
</p>
<p>
You can also try installing and running an even wider range of
pre-built themes if you install the R package <a
href="https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/">ggthemes</a>.
</p>
<p>
First you will need to run the
<code>install.packages("ggthemes")</code> command. Remember this is one
of the few times a command should NOT be written in your script but
typed directly into the console. That’s because it’s rude to send
someone a script that will install packages on their computer - think of
<code>library()</code> as a polite request instead!
</p>
<p>
To access the range of themes available type
<code>help(ggthemes)</code> then follow the documentation to find out
what you can do.
</p>
</div>
</div>
<div id="multiple-plots" class="section level2" number="29.5">
<h2><span class="header-section-number">29.5</span> Multiple plots</h2>
<div id="facets" class="section level3" number="29.5.1">
<h3><span class="header-section-number">29.5.1</span> Facets</h3>
<p>Adding combinations of different aesthetics allows you to layer more information onto a 2D plot, sometimes though things will just become <em>too</em> busy. At the point where it becomes difficult to see the trends or differences in your plot then we want to break up a single plot into sub-plots; this is called ‘faceting’. Facets are commonly used when there is too much data to display clearly in a single plot. We will revisit faceting below, however for now, let’s try to facet the plot according to sex.</p>
<p>To do this we use the tilde symbol ‘~’ to indicate the column name that will form each facet.</p>
<div class="sourceCode" id="cb525"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb525-1"><a href="#cb525-1" tabindex="-1"></a><span class="do">## Facetting ----</span></span>
<span id="cb525-2"><a href="#cb525-2" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb525-3"><a href="#cb525-3" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb525-4"><a href="#cb525-4" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb525-5"><a href="#cb525-5" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g,</span>
<span id="cb525-6"><a href="#cb525-6" tabindex="-1"></a>             <span class="at">colour=</span>species))<span class="sc">+</span> </span>
<span id="cb525-7"><a href="#cb525-7" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb525-8"><a href="#cb525-8" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>,    </span>
<span id="cb525-9"><a href="#cb525-9" tabindex="-1"></a>              <span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb525-10"><a href="#cb525-10" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette=</span><span class="st">&quot;Set1&quot;</span>)<span class="sc">+</span></span>
<span id="cb525-11"><a href="#cb525-11" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>sex)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-32-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="patchwork" class="section level3" number="29.5.2">
<h3><span class="header-section-number">29.5.2</span> Patchwork</h3>
<p>There are many times you might want to <em>combine</em> separate figures into multi-panel plots. Probably the easiest way to do this is with the <code>patchwork</code> package (<span class="citation">Pedersen (<a href="#ref-R-patchwork">2022</a>)</span>).</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="#cb526-1" tabindex="-1"></a><span class="do">## Patchwork ----</span></span>
<span id="cb526-2"><a href="#cb526-2" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb526-3"><a href="#cb526-3" tabindex="-1"></a></span>
<span id="cb526-4"><a href="#cb526-4" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb526-5"><a href="#cb526-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb526-6"><a href="#cb526-6" tabindex="-1"></a>             <span class="at">y =</span> culmen_length_mm))<span class="sc">+</span></span>
<span id="cb526-7"><a href="#cb526-7" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour=</span>species))<span class="sc">+</span></span>
<span id="cb526-8"><a href="#cb526-8" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values=</span>pal)<span class="sc">+</span></span>
<span id="cb526-9"><a href="#cb526-9" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb526-10"><a href="#cb526-10" tabindex="-1"></a></span>
<span id="cb526-11"><a href="#cb526-11" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb526-12"><a href="#cb526-12" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>culmen_depth_mm, </span>
<span id="cb526-13"><a href="#cb526-13" tabindex="-1"></a>             <span class="at">y =</span> culmen_length_mm))<span class="sc">+</span></span>
<span id="cb526-14"><a href="#cb526-14" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour=</span>species))<span class="sc">+</span></span>
<span id="cb526-15"><a href="#cb526-15" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values=</span>pal)<span class="sc">+</span></span>
<span id="cb526-16"><a href="#cb526-16" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb526-17"><a href="#cb526-17" tabindex="-1"></a></span>
<span id="cb526-18"><a href="#cb526-18" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span>     </span>
<span id="cb526-19"><a href="#cb526-19" tabindex="-1"></a>  <span class="fu">group_by</span>(sex,species) <span class="sc">|&gt;</span> </span>
<span id="cb526-20"><a href="#cb526-20" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb526-21"><a href="#cb526-21" tabindex="-1"></a>     <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb526-22"><a href="#cb526-22" tabindex="-1"></a>     <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>species, <span class="at">y=</span>n)) <span class="sc">+</span> </span>
<span id="cb526-23"><a href="#cb526-23" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill=</span>sex), </span>
<span id="cb526-24"><a href="#cb526-24" tabindex="-1"></a>               <span class="at">width=</span><span class="fl">0.8</span>,</span>
<span id="cb526-25"><a href="#cb526-25" tabindex="-1"></a>               <span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.9</span>), </span>
<span id="cb526-26"><a href="#cb526-26" tabindex="-1"></a>               <span class="at">alpha=</span><span class="fl">0.6</span>)<span class="sc">+</span></span>
<span id="cb526-27"><a href="#cb526-27" tabindex="-1"></a>     <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;darkorange1&quot;</span>, <span class="st">&quot;azure4&quot;</span>))<span class="sc">+</span></span>
<span id="cb526-28"><a href="#cb526-28" tabindex="-1"></a>     <span class="fu">theme_classic</span>()</span>
<span id="cb526-29"><a href="#cb526-29" tabindex="-1"></a></span>
<span id="cb526-30"><a href="#cb526-30" tabindex="-1"></a> (p1<span class="sc">+</span>p2)<span class="sc">/</span>p3<span class="sc">+</span></span>
<span id="cb526-31"><a href="#cb526-31" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">guides =</span> <span class="st">&quot;collect&quot;</span>) </span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-33-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="fonts" class="section level2" number="29.6">
<h2><span class="header-section-number">29.6</span> Fonts</h2>
<p>You can customise the fonts used in themes. All computers should be able to recognise the families "sans", "serif", and "mono", and some computers will be able to access other installed fonts by name.</p>
<p>The easiest way to add lots of custom fonts is with <code>showtext</code>.</p>
<p>The second argument, family, is optional. It gives the family name of the font that will be used in R. In other words, it means that the name used to refer to the font in R does not need to be the same than the original name of the font. In this case, the font Special Elite is going to be the special family.</p>
<p><code>showtext_auto()</code> must be called to indicate that showtext is going to be automatically invoked to draw text whenever a plot is created.</p>
<div class="sourceCode" id="cb527"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb527-1"><a href="#cb527-1" tabindex="-1"></a><span class="fu">library</span>(showtext)</span>
<span id="cb527-2"><a href="#cb527-2" tabindex="-1"></a><span class="fu">font_add_google</span>(<span class="st">&quot;Special Elite&quot;</span>, <span class="at">family =</span> <span class="st">&quot;special&quot;</span>)</span>
<span id="cb527-3"><a href="#cb527-3" tabindex="-1"></a><span class="fu">showtext_auto</span>()</span></code></pre></div>
</div>
<div id="activity-replicate-this-figure" class="section level2" number="29.7">
<h2><span class="header-section-number">29.7</span> Activity: Replicate this figure</h2>
<div class="try">
<p>
How close can you get to replicating the figure below?
</p>
<p>
Make a NEW script for this assignment - replicate_figure.R
</p>
<p>
Make sure to use the tips and links at the end of this chapter, when
you are done save the file
</p>
</div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-36-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="#cb528-1" tabindex="-1"></a>pal <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb528-2"><a href="#cb528-2" tabindex="-1"></a>  <span class="st">&quot;Adelie&quot;</span> <span class="ot">=</span> <span class="st">&quot;#FF8C00&quot;</span>, </span>
<span id="cb528-3"><a href="#cb528-3" tabindex="-1"></a>  <span class="st">&quot;Chinstrap&quot;</span> <span class="ot">=</span> <span class="st">&quot;#A034F0&quot;</span>, </span>
<span id="cb528-4"><a href="#cb528-4" tabindex="-1"></a>  <span class="st">&quot;Gentoo&quot;</span> <span class="ot">=</span> <span class="st">&quot;#159090&quot;</span>)</span>
<span id="cb528-5"><a href="#cb528-5" tabindex="-1"></a></span>
<span id="cb528-6"><a href="#cb528-6" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb528-7"><a href="#cb528-7" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> body_mass_g, <span class="at">color =</span> species, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb528-8"><a href="#cb528-8" tabindex="-1"></a>      <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> species),</span>
<span id="cb528-9"><a href="#cb528-9" tabindex="-1"></a>               <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb528-10"><a href="#cb528-10" tabindex="-1"></a>        <span class="at">width =</span> .<span class="dv">5</span>,</span>
<span id="cb528-11"><a href="#cb528-11" tabindex="-1"></a>        <span class="at">outlier.shape =</span> <span class="cn">NA</span>,</span>
<span id="cb528-12"><a href="#cb528-12" tabindex="-1"></a>        <span class="at">alpha =</span> .<span class="dv">7</span>)<span class="sc">+</span></span>
<span id="cb528-13"><a href="#cb528-13" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span>.<span class="dv">2</span>,</span>
<span id="cb528-14"><a href="#cb528-14" tabindex="-1"></a>              <span class="at">shape =</span> <span class="dv">21</span>,</span>
<span id="cb528-15"><a href="#cb528-15" tabindex="-1"></a>              <span class="at">colour =</span> <span class="st">&quot;white&quot;</span>)<span class="sc">+</span></span>
<span id="cb528-16"><a href="#cb528-16" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> pal)<span class="sc">+</span></span>
<span id="cb528-17"><a href="#cb528-17" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> pal)<span class="sc">+</span></span>
<span id="cb528-18"><a href="#cb528-18" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb528-19"><a href="#cb528-19" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)<span class="sc">+</span></span>
<span id="cb528-20"><a href="#cb528-20" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb528-21"><a href="#cb528-21" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb528-22"><a href="#cb528-22" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Body mass (g)&quot;</span>,</span>
<span id="cb528-23"><a href="#cb528-23" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Body mass of brush-tailed penguins&quot;</span>,</span>
<span id="cb528-24"><a href="#cb528-24" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;Box and jitter plot of body mass by species&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="saving" class="section level2" number="29.8">
<h2><span class="header-section-number">29.8</span> Saving</h2>
<p>One of the easiest ways to save a figure you have made is with the <code>ggsave()</code> function. By default it will save the last plot you made on the screen.</p>
<p>You should specify the output path to your <strong>figures</strong> folder, then provide a file name. Here I have decided to call my plot <em>plot</em> (imaginative!) and I want to save it as a .PNG image file. I can also specify the resolution (dpi 300 is good enough for most computer screens).</p>
<div class="sourceCode" id="cb529"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb529-1"><a href="#cb529-1" tabindex="-1"></a><span class="co"># OUTPUT FIGURE TO FILE</span></span>
<span id="cb529-2"><a href="#cb529-2" tabindex="-1"></a></span>
<span id="cb529-3"><a href="#cb529-3" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;outputs/YYYYMMDD_ggplot_workshop_final_plot.png&quot;</span>, <span class="at">dpi=</span><span class="dv">300</span>)</span></code></pre></div>
<div class="try">
<p>
If you got this far and still have time why not try one of the
following:
</p>
<ol style="list-style-type: decimal">
<li>
<p>
Making another type of figure using the penguins dataset, use the
further reading below to use for inspiration.
</p>
</li>
<li>
<p>
Use any of your own data
</p>
</li>
</ol>
</div>
<div id="what-we-learned" class="section level3" number="29.8.1">
<h3><span class="header-section-number">29.8.1</span> What we learned</h3>
<p>You have learned</p>
<ul>
<li><p>The anatomy of ggplots</p></li>
<li><p>How to add geoms on different layers</p></li>
<li><p>How to use colour, colour palettes, facets, labels and themes</p></li>
<li><p>Putting together multiple figures</p></li>
<li><p>How to save and export images</p></li>
</ul>
</div>
</div>
<div id="further-reading-guides-and-tips-on-data-visualisation" class="section level2" number="29.9">
<h2><span class="header-section-number">29.9</span> Further Reading, Guides and tips on data visualisation</h2>
<ul>
<li><p><a href="https://www.rstudio.com/resources/cheatsheets/">R Cheat Sheets</a></p></li>
<li><p><a href="https://clauswilke.com/dataviz/">Fundamentals of Data Visualization</a>: this book tells you everything you need to know about presenting your figures for accessbility and clarity</p></li>
<li><p><a href="https://www.cedricscherer.com/2019/08/05/a-ggplot2-tutorial-for-beautiful-plotting-in-r/">Beautiful Plotting in R</a>: an incredibly handy ggplot guide for how to build and improve your figures</p></li>
<li><p><a href="https://ggplot2-book.org/">The ggplot2 book</a>: the original Hadley Wickham book on ggplot2</p></li>
</ul>
</div>
</div>
<div id="extensions-for-ggplot2" class="section level1" number="30">
<h1><span class="header-section-number">30</span> Extensions for ggplot2</h1>
<p>This tutorial has but scratched the surface of the visualisation options available using R. Here I have provided some further advanced plots and customisation options for those who are feeling confident with the content covered in this tutorial. However, the below plots give an idea of what is possible.</p>
<p>Check out <a href="https://exts.ggplot2.tidyverse.org/" class="uri">https://exts.ggplot2.tidyverse.org/</a> for the full list of approved extensions for ggplot</p>
<div id="ggdist" class="section level2" number="30.1">
<h2><span class="header-section-number">30.1</span> ggdist</h2>
<div id="rainclouds" class="section level3" number="30.1.1">
<h3><span class="header-section-number">30.1.1</span> Rainclouds</h3>
<p>Raincloud plots combine a density plot, boxplot, raw data points, and any desired summary statistics for a complete visualisation of the data. They are so called because the density plot plus raw data is reminiscent of a rain cloud.</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="#cb530-1" tabindex="-1"></a><span class="fu">library</span>(ggdist)</span>
<span id="cb530-2"><a href="#cb530-2" tabindex="-1"></a></span>
<span id="cb530-3"><a href="#cb530-3" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb530-4"><a href="#cb530-4" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species,</span>
<span id="cb530-5"><a href="#cb530-5" tabindex="-1"></a>               <span class="at">y =</span> culmen_length_mm,</span>
<span id="cb530-6"><a href="#cb530-6" tabindex="-1"></a>              <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb530-7"><a href="#cb530-7" tabindex="-1"></a>  ggdist<span class="sc">::</span><span class="fu">stat_halfeye</span>(</span>
<span id="cb530-8"><a href="#cb530-8" tabindex="-1"></a>    <span class="at">point_colour =</span> <span class="cn">NA</span>,</span>
<span id="cb530-9"><a href="#cb530-9" tabindex="-1"></a>    <span class="at">.width =</span> <span class="dv">0</span>,</span>
<span id="cb530-10"><a href="#cb530-10" tabindex="-1"></a>    <span class="co"># shift raincloud up</span></span>
<span id="cb530-11"><a href="#cb530-11" tabindex="-1"></a>    <span class="at">justification =</span> <span class="sc">-</span>.<span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb530-12"><a href="#cb530-12" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="co"># remove outlier dots</span></span>
<span id="cb530-13"><a href="#cb530-13" tabindex="-1"></a>    <span class="at">outlier.shape =</span> <span class="cn">NA</span>,</span>
<span id="cb530-14"><a href="#cb530-14" tabindex="-1"></a>    <span class="co"># shrink width of box</span></span>
<span id="cb530-15"><a href="#cb530-15" tabindex="-1"></a>    <span class="at">alpha =</span> .<span class="dv">4</span>,</span>
<span id="cb530-16"><a href="#cb530-16" tabindex="-1"></a>    <span class="co"># fade box</span></span>
<span id="cb530-17"><a href="#cb530-17" tabindex="-1"></a>               <span class="at">width =</span> .<span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb530-18"><a href="#cb530-18" tabindex="-1"></a>  ggdist<span class="sc">::</span><span class="fu">stat_dots</span>(<span class="fu">aes</span>(<span class="at">colour =</span> species),</span>
<span id="cb530-19"><a href="#cb530-19" tabindex="-1"></a>                  <span class="co"># put dots underneath</span></span>
<span id="cb530-20"><a href="#cb530-20" tabindex="-1"></a>                    <span class="at">side =</span> <span class="st">&quot;left&quot;</span>,</span>
<span id="cb530-21"><a href="#cb530-21" tabindex="-1"></a>                  <span class="co"># move position down</span></span>
<span id="cb530-22"><a href="#cb530-22" tabindex="-1"></a>                    <span class="at">justification =</span> <span class="fl">1.1</span>,</span>
<span id="cb530-23"><a href="#cb530-23" tabindex="-1"></a>                  <span class="co"># size of dots </span></span>
<span id="cb530-24"><a href="#cb530-24" tabindex="-1"></a>                    <span class="at">dotsize =</span> .<span class="dv">2</span>,</span>
<span id="cb530-25"><a href="#cb530-25" tabindex="-1"></a>                    </span>
<span id="cb530-26"><a href="#cb530-26" tabindex="-1"></a>                  <span class="co"># adjust bins (grouping) of dots</span></span>
<span id="cb530-27"><a href="#cb530-27" tabindex="-1"></a>                    <span class="at">binwidth =</span> .<span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb530-28"><a href="#cb530-28" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> pal) <span class="sc">+</span></span>
<span id="cb530-29"><a href="#cb530-29" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> pal)<span class="sc">+</span></span>
<span id="cb530-30"><a href="#cb530-30" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">&quot;none&quot;</span>)<span class="sc">+</span></span>
<span id="cb530-31"><a href="#cb530-31" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="co"># rotate figure</span></span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-40-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="interval-plots" class="section level3" number="30.1.2">
<h3><span class="header-section-number">30.1.2</span> Interval plots</h3>
<p>An interval plot is a type of data visualization that is used to display intervals or ranges associated with data points. It is particularly useful for visualizing uncertainty or variability in the data. Interval plots can be used to represent various types of intervals, such as confidence intervals, prediction intervals, or any other kind of range or interval associated with the data.</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb531-1"><a href="#cb531-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb531-2"><a href="#cb531-2" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb531-3"><a href="#cb531-3" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species,</span>
<span id="cb531-4"><a href="#cb531-4" tabindex="-1"></a>               <span class="at">y =</span> culmen_length_mm))<span class="sc">+</span></span>
<span id="cb531-5"><a href="#cb531-5" tabindex="-1"></a>  ggdist<span class="sc">::</span><span class="fu">stat_interval</span>(<span class="at">.width =</span> <span class="fu">c</span>(.<span class="dv">5</span>, .<span class="dv">66</span>, .<span class="dv">95</span>))<span class="sc">+</span></span>
<span id="cb531-6"><a href="#cb531-6" tabindex="-1"></a>  ggdist<span class="sc">::</span><span class="fu">stat_halfeye</span>(<span class="fu">aes</span>(<span class="at">fill =</span> sex),</span>
<span id="cb531-7"><a href="#cb531-7" tabindex="-1"></a>                       <span class="at">.width =</span> <span class="dv">0</span>,</span>
<span id="cb531-8"><a href="#cb531-8" tabindex="-1"></a>                       <span class="at">shape =</span> <span class="dv">21</span>,</span>
<span id="cb531-9"><a href="#cb531-9" tabindex="-1"></a>                       <span class="at">colour =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb531-10"><a href="#cb531-10" tabindex="-1"></a>                       <span class="at">slab_alpha =</span> .<span class="dv">4</span>,</span>
<span id="cb531-11"><a href="#cb531-11" tabindex="-1"></a>                       <span class="at">size =</span> .<span class="dv">5</span>,</span>
<span id="cb531-12"><a href="#cb531-12" tabindex="-1"></a>                       <span class="at">position =</span> <span class="fu">position_nudge</span>(<span class="at">x =</span> .<span class="dv">05</span>))<span class="sc">+</span></span>
<span id="cb531-13"><a href="#cb531-13" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;mako&quot;</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">end =</span> .<span class="dv">9</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-41-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="density" class="section level2" number="30.2">
<h2><span class="header-section-number">30.2</span> Density</h2>
<p>A density plot is a data visualization technique used to represent the distribution of a continuous numeric variable. It provides a smoothed estimate of the probability density function (PDF) of the data, showing where values are concentrated and where they are sparse. Density plots are particularly useful for visualizing the shape, central tendency, and spread of data.</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="#cb532-1" tabindex="-1"></a><span class="fu">library</span>(ggdensity)</span>
<span id="cb532-2"><a href="#cb532-2" tabindex="-1"></a></span>
<span id="cb532-3"><a href="#cb532-3" tabindex="-1"></a>penguins <span class="sc">|&gt;</span>  </span>
<span id="cb532-4"><a href="#cb532-4" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> culmen_length_mm, </span>
<span id="cb532-5"><a href="#cb532-5" tabindex="-1"></a>               <span class="at">y =</span> culmen_depth_mm,</span>
<span id="cb532-6"><a href="#cb532-6" tabindex="-1"></a>               <span class="at">colour =</span> species)) <span class="sc">+</span></span>
<span id="cb532-7"><a href="#cb532-7" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb532-8"><a href="#cb532-8" tabindex="-1"></a>  ggdensity<span class="sc">::</span><span class="fu">geom_hdr_lines</span>()<span class="sc">+</span></span>
<span id="cb532-9"><a href="#cb532-9" tabindex="-1"></a>   <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> pal)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-42-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="ggridges-1" class="section level2" number="30.3">
<h2><span class="header-section-number">30.3</span> ggridges</h2>
<p>A ridge plot is a data visualization technique that is similar to a density plot but is designed for displaying multiple probability density distributions side by side, allowing for easier comparison between different groups or categories. Ridge plots are particularly useful when you want to visualize and compare the distribution of multiple continuous variables or data sets simultaneously.</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb533-1"><a href="#cb533-1" tabindex="-1"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb533-2"><a href="#cb533-2" tabindex="-1"></a></span>
<span id="cb533-3"><a href="#cb533-3" tabindex="-1"></a>penguins <span class="sc">|&gt;</span>  </span>
<span id="cb533-4"><a href="#cb533-4" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> culmen_length_mm, </span>
<span id="cb533-5"><a href="#cb533-5" tabindex="-1"></a>               <span class="at">y =</span> species,</span>
<span id="cb533-6"><a href="#cb533-6" tabindex="-1"></a>               <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb533-7"><a href="#cb533-7" tabindex="-1"></a>  <span class="fu">geom_density_ridges</span>() <span class="sc">+</span> <span class="co"># use hjust and vjust to position text</span></span>
<span id="cb533-8"><a href="#cb533-8" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> pal) <span class="sc">+</span></span>
<span id="cb533-9"><a href="#cb533-9" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> pal)<span class="sc">+</span></span>
<span id="cb533-10"><a href="#cb533-10" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-43-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="bump-charts" class="section level2" number="30.4">
<h2><span class="header-section-number">30.4</span> Bump charts</h2>
<p>A bump chart, also known as a line chart or path chart, is a data visualization technique used to show the ranking and changes in ranking of entities (such as teams, players, or products) over time or across different categories. Bump charts are especially useful for visualizing the rise and fall of ranked items, making it easy to identify trends and compare changes in relative position.</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="#cb534-1" tabindex="-1"></a><span class="fu">library</span>(ggbump)</span>
<span id="cb534-2"><a href="#cb534-2" tabindex="-1"></a></span>
<span id="cb534-3"><a href="#cb534-3" tabindex="-1"></a>penguin_summary <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb534-4"><a href="#cb534-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_egg =</span> <span class="fu">dmy</span>(date_egg)) <span class="sc">|&gt;</span> </span>
<span id="cb534-5"><a href="#cb534-5" tabindex="-1"></a>  <span class="fu">filter</span>(clutch_completion <span class="sc">==</span> <span class="st">&quot;Yes&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb534-6"><a href="#cb534-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(date_egg)) <span class="sc">|&gt;</span> </span>
<span id="cb534-7"><a href="#cb534-7" tabindex="-1"></a>  <span class="fu">group_by</span>(species, year) <span class="sc">|&gt;</span> </span>
<span id="cb534-8"><a href="#cb534-8" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span>
<span id="cb534-9"><a href="#cb534-9" tabindex="-1"></a></span>
<span id="cb534-10"><a href="#cb534-10" tabindex="-1"></a>penguin_summary <span class="sc">|&gt;</span></span>
<span id="cb534-11"><a href="#cb534-11" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, </span>
<span id="cb534-12"><a href="#cb534-12" tabindex="-1"></a>             <span class="at">y =</span> n,</span>
<span id="cb534-13"><a href="#cb534-13" tabindex="-1"></a>             <span class="at">colour =</span> species))<span class="sc">+</span></span>
<span id="cb534-14"><a href="#cb534-14" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">7</span>)<span class="sc">+</span></span>
<span id="cb534-15"><a href="#cb534-15" tabindex="-1"></a>  <span class="fu">geom_bump</span>()<span class="sc">+</span></span>
<span id="cb534-16"><a href="#cb534-16" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> penguin_summary <span class="sc">|&gt;</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="fu">max</span>(year)),</span>
<span id="cb534-17"><a href="#cb534-17" tabindex="-1"></a>                                             <span class="fu">aes</span>(<span class="at">x =</span> year <span class="sc">+</span> <span class="fl">0.1</span>,</span>
<span id="cb534-18"><a href="#cb534-18" tabindex="-1"></a>                                                 <span class="at">label =</span> species,</span>
<span id="cb534-19"><a href="#cb534-19" tabindex="-1"></a>                                                  <span class="at">hjust =</span> <span class="dv">0</span>),</span>
<span id="cb534-20"><a href="#cb534-20" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb534-21"><a href="#cb534-21" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">2007</span>, <span class="fl">2009.5</span>),</span>
<span id="cb534-22"><a href="#cb534-22" tabindex="-1"></a>                     <span class="at">breaks =</span> (<span class="dv">2007</span><span class="sc">:</span><span class="dv">2009</span>))<span class="sc">+</span></span>
<span id="cb534-23"><a href="#cb534-23" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Total number of complete clutches&quot;</span>)<span class="sc">+</span></span>
<span id="cb534-24"><a href="#cb534-24" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> pal) <span class="sc">+</span></span>
<span id="cb534-25"><a href="#cb534-25" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> pal)<span class="sc">+</span></span>
<span id="cb534-26"><a href="#cb534-26" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-44-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="dumbell-charts" class="section level2" number="30.5">
<h2><span class="header-section-number">30.5</span> Dumbell charts</h2>
<p>A dumbbell chart is a data visualization technique that is used to compare two data points for multiple categories or entities. It is called a "dumbbell" chart because it often resembles a pair of dumbbells, with circles or dots representing the data points at the ends of a line connecting them. Dumbbell charts are useful for comparing before-and-after values, two different groups, or any two related data points for different categories or entities.</p>
<div class="sourceCode" id="cb535"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb535-1"><a href="#cb535-1" tabindex="-1"></a><span class="fu">library</span>(ggalt)</span>
<span id="cb535-2"><a href="#cb535-2" tabindex="-1"></a></span>
<span id="cb535-3"><a href="#cb535-3" tabindex="-1"></a>summary_counts <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb535-4"><a href="#cb535-4" tabindex="-1"></a>  <span class="fu">group_by</span>(sex, species) <span class="sc">|&gt;</span> </span>
<span id="cb535-5"><a href="#cb535-5" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb535-6"><a href="#cb535-6" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> sex, <span class="at">values_from =</span> mean)</span>
<span id="cb535-7"><a href="#cb535-7" tabindex="-1"></a></span>
<span id="cb535-8"><a href="#cb535-8" tabindex="-1"></a><span class="fu">ggplot</span>(summary_counts, </span>
<span id="cb535-9"><a href="#cb535-9" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y=</span>species, <span class="at">x=</span>FEMALE, <span class="at">xend=</span>MALE)) <span class="sc">+</span></span>
<span id="cb535-10"><a href="#cb535-10" tabindex="-1"></a>  <span class="fu">geom_dumbbell</span>(<span class="at">size=</span><span class="dv">3</span>, <span class="at">color=</span><span class="st">&quot;#e3e2e1&quot;</span>,</span>
<span id="cb535-11"><a href="#cb535-11" tabindex="-1"></a>                <span class="at">colour_x =</span> <span class="st">&quot;#5b8124&quot;</span>, <span class="at">colour_xend =</span> <span class="st">&quot;#bad744&quot;</span>) <span class="sc">+</span></span>
<span id="cb535-12"><a href="#cb535-12" tabindex="-1"></a>  <span class="fu">geom_text</span>( <span class="at">x=</span>summary_counts[[<span class="dv">3</span>,<span class="dv">2</span>]], <span class="at">y=</span><span class="dv">3</span>, <span class="fu">aes</span>(<span class="at">label=</span><span class="st">&quot;Female&quot;</span>),</span>
<span id="cb535-13"><a href="#cb535-13" tabindex="-1"></a>             <span class="at">color=</span><span class="st">&quot;#9fb059&quot;</span>, <span class="at">size=</span><span class="dv">3</span>, <span class="at">vjust=</span><span class="sc">-</span><span class="dv">2</span>, <span class="at">fontface=</span><span class="st">&quot;bold&quot;</span>)<span class="sc">+</span></span>
<span id="cb535-14"><a href="#cb535-14" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">x=</span>summary_counts[[<span class="dv">3</span>,<span class="dv">3</span>]], <span class="at">y=</span><span class="dv">3</span>, <span class="fu">aes</span>(<span class="at">label=</span><span class="st">&quot;Male&quot;</span>),</span>
<span id="cb535-15"><a href="#cb535-15" tabindex="-1"></a>             <span class="at">color=</span><span class="st">&quot;#bad744&quot;</span>, <span class="at">size=</span><span class="dv">3</span>, <span class="at">vjust=</span><span class="sc">-</span><span class="dv">2</span>, <span class="at">fontface=</span><span class="st">&quot;bold&quot;</span>)<span class="sc">+</span></span>
<span id="cb535-16"><a href="#cb535-16" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Body mass (g)&quot;</span>,</span>
<span id="cb535-17"><a href="#cb535-17" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-45-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="facets-1" class="section level2" number="30.6">
<h2><span class="header-section-number">30.6</span> Facets</h2>
<p>The <code>facet_nested()</code> function in the <code>ggh4x</code> package is used for creating nested or hierarchical faceting in ggplot2 plots. Faceting is the process of breaking down a data visualization into multiple subplots or panels based on one or more categorical variables, allowing you to see how the data behaves within different categories. Nested faceting allows you to further subdivide these panels into smaller panels, creating a hierarchy of facets.</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="#cb536-1" tabindex="-1"></a><span class="fu">library</span>(ggh4x)</span>
<span id="cb536-2"><a href="#cb536-2" tabindex="-1"></a></span>
<span id="cb536-3"><a href="#cb536-3" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb536-4"><a href="#cb536-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Nester =</span> <span class="fu">ifelse</span>(species<span class="sc">==</span><span class="st">&quot;Gentoo&quot;</span>, <span class="st">&quot;Crustaceans&quot;</span>, <span class="st">&quot;Fish &amp; Krill&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb536-5"><a href="#cb536-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> culmen_length_mm,</span>
<span id="cb536-6"><a href="#cb536-6" tabindex="-1"></a>             <span class="at">y =</span> culmen_depth_mm,</span>
<span id="cb536-7"><a href="#cb536-7" tabindex="-1"></a>             <span class="at">colour =</span> species))<span class="sc">+</span></span>
<span id="cb536-8"><a href="#cb536-8" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb536-9"><a href="#cb536-9" tabindex="-1"></a>  <span class="fu">facet_nested</span>(<span class="sc">~</span> Nester <span class="sc">+</span> species)<span class="sc">+</span></span>
<span id="cb536-10"><a href="#cb536-10" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> pal)<span class="sc">+</span></span>
<span id="cb536-11"><a href="#cb536-11" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-46-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="highlighting" class="section level2" number="30.7">
<h2><span class="header-section-number">30.7</span> Highlighting</h2>
<p>Using plot highlighting, such as the gghighlight package in R, can be beneficial in data visualization for several reasons:</p>
<ul>
<li><p>Emphasizing Key Information: Plot highlighting allows you to draw attention to specific data points or groups of interest. This can be helpful when you want to highlight outliers, key observations, or certain categories that are important in your data.</p></li>
<li><p>Enhanced Interpretation: Highlighting specific elements in a plot can make it easier for viewers to interpret and understand the data. By reducing visual clutter and emphasizing relevant information, you can improve the effectiveness of your data visualization.</p></li>
<li><p>Storytelling: Plot highlighting is a useful tool for storytelling in data visualization. You can use it to guide the viewer's attention and convey the main message or story behind the data.</p></li>
<li><p>Comparative Analysis: Highlighting allows you to compare specific data points or groups more easily. For example, you can highlight one group against others to demonstrate differences or trends.</p></li>
</ul>
<div class="sourceCode" id="cb537"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb537-1"><a href="#cb537-1" tabindex="-1"></a><span class="fu">library</span>(gghighlight)</span>
<span id="cb537-2"><a href="#cb537-2" tabindex="-1"></a></span>
<span id="cb537-3"><a href="#cb537-3" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb537-4"><a href="#cb537-4" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(body_mass_g,</span>
<span id="cb537-5"><a href="#cb537-5" tabindex="-1"></a>             <span class="at">fill =</span> species),</span>
<span id="cb537-6"><a href="#cb537-6" tabindex="-1"></a>         <span class="at">position =</span> <span class="st">&quot;identity&quot;</span>)<span class="sc">+</span></span>
<span id="cb537-7"><a href="#cb537-7" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()<span class="sc">+</span></span>
<span id="cb537-8"><a href="#cb537-8" tabindex="-1"></a>  <span class="fu">gghighlight</span>()<span class="sc">+</span></span>
<span id="cb537-9"><a href="#cb537-9" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> pal)<span class="sc">+</span></span>
<span id="cb537-10"><a href="#cb537-10" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> species)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-47-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="#cb538-1" tabindex="-1"></a><span class="fu">library</span>(ggbeeswarm)</span>
<span id="cb538-2"><a href="#cb538-2" tabindex="-1"></a><span class="fu">library</span>(gghighlight)</span>
<span id="cb538-3"><a href="#cb538-3" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb538-4"><a href="#cb538-4" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species,</span>
<span id="cb538-5"><a href="#cb538-5" tabindex="-1"></a>               <span class="at">y =</span> body_mass_g,</span>
<span id="cb538-6"><a href="#cb538-6" tabindex="-1"></a>               <span class="at">fill =</span> species))<span class="sc">+</span></span>
<span id="cb538-7"><a href="#cb538-7" tabindex="-1"></a>    <span class="fu">geom_beeswarm</span>(<span class="at">shape =</span> <span class="dv">21</span>, </span>
<span id="cb538-8"><a href="#cb538-8" tabindex="-1"></a>                  <span class="at">colour =</span> <span class="st">&quot;white&quot;</span>)<span class="sc">+</span></span>
<span id="cb538-9"><a href="#cb538-9" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> pal)<span class="sc">+</span></span>
<span id="cb538-10"><a href="#cb538-10" tabindex="-1"></a>    <span class="fu">gghighlight</span>(body_mass_g <span class="sc">&gt;</span> <span class="dv">4000</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-48-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="text" class="section level2" number="30.8">
<h2><span class="header-section-number">30.8</span> Text</h2>
<p>Annotating a chart with text is a common and valuable practice in data visualization for several important reasons:</p>
<ul>
<li><p>Provide Context: Text annotations help to provide context and background information for the data. They explain what the chart represents, the variables involved, and the meaning of various data points or patterns. This context is crucial for viewers who may not be familiar with the data or the chart.</p></li>
<li><p>Highlight Key Points: Text annotations can be used to emphasize and draw attention to important findings or insights in the data. You can use annotations to highlight specific data points, trends, outliers, or other notable features in the chart.</p></li>
<li><p>Label Data: Annotating a chart with labels helps to identify individual data points, data series, or categories. This is especially useful in scatterplots, bar charts, and other types of visualizations where labeling individual elements is important.</p></li>
<li><p>Clarify Relationships: Annotations can be used to clarify relationships between data points or groups. For example, you can add arrows and labels to indicate which data points are related or what causes certain patterns.</p></li>
<li><p>Provide Sources and Citations: In cases where the data comes from external sources or studies, annotations can be used to provide proper attribution and citations to give credit to the data sources.</p></li>
<li><p>Explain Methodology: Annotations can also explain the methodology or statistical techniques used to generate the chart, which is important for transparency and trust in data analysis.</p></li>
</ul>
<p>Below I provide some packages that help with text annotation:</p>
<div id="ggforce" class="section level3" number="30.8.1">
<h3><span class="header-section-number">30.8.1</span> ggforce</h3>
<div class="sourceCode" id="cb539"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb539-1"><a href="#cb539-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb539-2"><a href="#cb539-2" tabindex="-1"></a>    <span class="fu">ggplot</span>(</span>
<span id="cb539-3"><a href="#cb539-3" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">x =</span> culmen_length_mm,</span>
<span id="cb539-4"><a href="#cb539-4" tabindex="-1"></a>            <span class="at">y=</span> body_mass_g,</span>
<span id="cb539-5"><a href="#cb539-5" tabindex="-1"></a>            <span class="at">colour =</span> species)) <span class="sc">+</span></span>
<span id="cb539-6"><a href="#cb539-6" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">fill =</span> species), <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">colour =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb539-7"><a href="#cb539-7" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>,<span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="at">alpha =</span> .<span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb539-8"><a href="#cb539-8" tabindex="-1"></a>ggforce<span class="sc">::</span><span class="fu">geom_mark_ellipse</span>(<span class="fu">aes</span>(</span>
<span id="cb539-9"><a href="#cb539-9" tabindex="-1"></a>    <span class="at">label =</span> species,</span>
<span id="cb539-10"><a href="#cb539-10" tabindex="-1"></a>    <span class="at">filter =</span> species <span class="sc">==</span> <span class="st">&#39;Adelie&#39;</span>),</span>
<span id="cb539-11"><a href="#cb539-11" tabindex="-1"></a>    <span class="at">con.colour  =</span> <span class="st">&quot;#526A83&quot;</span>,</span>
<span id="cb539-12"><a href="#cb539-12" tabindex="-1"></a>    <span class="at">con.cap =</span> <span class="dv">0</span>,</span>
<span id="cb539-13"><a href="#cb539-13" tabindex="-1"></a>    <span class="at">con.arrow =</span> <span class="fu">arrow</span>(<span class="at">ends =</span> <span class="st">&quot;last&quot;</span>,</span>
<span id="cb539-14"><a href="#cb539-14" tabindex="-1"></a>                      <span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">&quot;cm&quot;</span>)),</span>
<span id="cb539-15"><a href="#cb539-15" tabindex="-1"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb539-16"><a href="#cb539-16" tabindex="-1"></a>    <span class="fu">gghighlight</span>(species <span class="sc">==</span> <span class="st">&quot;Adelie&quot;</span>)<span class="sc">+</span></span>
<span id="cb539-17"><a href="#cb539-17" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> pal)<span class="sc">+</span></span>
<span id="cb539-18"><a href="#cb539-18" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> pal)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-49-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="textpaths" class="section level3" number="30.8.2">
<h3><span class="header-section-number">30.8.2</span> textpaths</h3>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb540-1"><a href="#cb540-1" tabindex="-1"></a><span class="fu">library</span>(geomtextpath)</span>
<span id="cb540-2"><a href="#cb540-2" tabindex="-1"></a></span>
<span id="cb540-3"><a href="#cb540-3" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb540-4"><a href="#cb540-4" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> culmen_length_mm, </span>
<span id="cb540-5"><a href="#cb540-5" tabindex="-1"></a>               <span class="at">colour =</span> species,</span>
<span id="cb540-6"><a href="#cb540-6" tabindex="-1"></a>               <span class="at">label =</span> species))<span class="sc">+</span></span>
<span id="cb540-7"><a href="#cb540-7" tabindex="-1"></a>  <span class="fu">geom_textdensity</span>( <span class="at">hjust =</span> <span class="fl">0.35</span>, <span class="at">vjust =</span> .<span class="dv">1</span>)<span class="sc">+</span> <span class="co"># use hjust and vjust to position text</span></span>
<span id="cb540-8"><a href="#cb540-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-50-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="ggtext" class="section level3" number="30.8.3">
<h3><span class="header-section-number">30.8.3</span> ggtext</h3>
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb541-1"><a href="#cb541-1" tabindex="-1"></a><span class="fu">library</span>(ggtext)</span>
<span id="cb541-2"><a href="#cb541-2" tabindex="-1"></a></span>
<span id="cb541-3"><a href="#cb541-3" tabindex="-1"></a></span>
<span id="cb541-4"><a href="#cb541-4" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb541-5"><a href="#cb541-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">fct_relevel</span>(species, <span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>, <span class="st">&quot;Adelie&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb541-6"><a href="#cb541-6" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb541-7"><a href="#cb541-7" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb541-8"><a href="#cb541-8" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species,</span>
<span id="cb541-9"><a href="#cb541-9" tabindex="-1"></a>           <span class="at">y =</span> n,</span>
<span id="cb541-10"><a href="#cb541-10" tabindex="-1"></a>           <span class="at">fill =</span> species))<span class="sc">+</span></span>
<span id="cb541-11"><a href="#cb541-11" tabindex="-1"></a>        <span class="fu">geom_col</span>()<span class="sc">+</span></span>
<span id="cb541-12"><a href="#cb541-12" tabindex="-1"></a>  <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> n),</span>
<span id="cb541-13"><a href="#cb541-13" tabindex="-1"></a>            <span class="at">fill =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb541-14"><a href="#cb541-14" tabindex="-1"></a>            <span class="at">nudge_y =</span> <span class="dv">1</span>,</span>
<span id="cb541-15"><a href="#cb541-15" tabindex="-1"></a>            <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb541-16"><a href="#cb541-16" tabindex="-1"></a>            <span class="at">fontface =</span> <span class="st">&quot;bold&quot;</span>)<span class="sc">+</span></span>
<span id="cb541-17"><a href="#cb541-17" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb541-18"><a href="#cb541-18" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Count&quot;</span>,</span>
<span id="cb541-19"><a href="#cb541-19" tabindex="-1"></a>       <span class="at">title =</span> <span class="fu">paste</span>(</span>
<span id="cb541-20"><a href="#cb541-20" tabindex="-1"></a>         <span class="st">&#39;There are almost half the observations on &lt;br&gt; &lt;span style = &quot;color:#A034F0&quot;&gt;Chinstrap&lt;/span&gt; penguins,  as there are &lt;br&gt; on &lt;span style = &quot;color:#FF8C00&quot;&gt;Adelie&lt;/span&gt; and &lt;span style =&quot;color:#159090&quot;&gt;Gentoo&lt;/span&gt;penguins&#39;</span></span>
<span id="cb541-21"><a href="#cb541-21" tabindex="-1"></a>       ))<span class="sc">+</span></span>
<span id="cb541-22"><a href="#cb541-22" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb541-23"><a href="#cb541-23" tabindex="-1"></a>    <span class="co"># when reordering levels - be careful about keeping colours consistent!!! May need manually sorting</span></span>
<span id="cb541-24"><a href="#cb541-24" tabindex="-1"></a>    <span class="at">values =</span> pal)<span class="sc">+</span></span>
<span id="cb541-25"><a href="#cb541-25" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb541-26"><a href="#cb541-26" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">200</span>))<span class="sc">+</span></span>
<span id="cb541-27"><a href="#cb541-27" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb541-28"><a href="#cb541-28" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(</span>
<span id="cb541-29"><a href="#cb541-29" tabindex="-1"></a>      <span class="at">color =</span> <span class="fu">c</span>( <span class="st">&quot;#A034F0&quot;</span>, <span class="st">&quot;#159090&quot;</span>, <span class="st">&quot;#FF8C00&quot;</span>)),</span>
<span id="cb541-30"><a href="#cb541-30" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_markdown</span>())</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-51-1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="scales" class="section level3" number="30.8.4">
<h3><span class="header-section-number">30.8.4</span> scales</h3>
<p>The <code>scales</code>package provides much of the infrastructure that underlies ggplot2’s scales, and using it allow you to customize the transformations, breaks, and labels used by ggplot2. It is particularly good at providing sensible labels apply transformations such as a log scale.</p>
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb542-1"><a href="#cb542-1" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb542-2"><a href="#cb542-2" tabindex="-1"></a></span>
<span id="cb542-3"><a href="#cb542-3" tabindex="-1"></a>penguins <span class="sc">|&gt;</span>  </span>
<span id="cb542-4"><a href="#cb542-4" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> culmen_length_mm, </span>
<span id="cb542-5"><a href="#cb542-5" tabindex="-1"></a>               <span class="at">y =</span> species,</span>
<span id="cb542-6"><a href="#cb542-6" tabindex="-1"></a>               <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb542-7"><a href="#cb542-7" tabindex="-1"></a>  <span class="fu">geom_density_ridges</span>() <span class="sc">+</span> <span class="co"># use hjust and vjust to position text</span></span>
<span id="cb542-8"><a href="#cb542-8" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> pal) <span class="sc">+</span></span>
<span id="cb542-9"><a href="#cb542-9" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> pal)<span class="sc">+</span></span>
<span id="cb542-10"><a href="#cb542-10" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb542-11"><a href="#cb542-11" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(</span>
<span id="cb542-12"><a href="#cb542-12" tabindex="-1"></a>    <span class="at">scale_cut =</span> <span class="fu">cut_si</span>(<span class="st">&quot;mm&quot;</span>)))<span class="sc">+</span></span>
<span id="cb542-13"><a href="#cb542-13" tabindex="-1"></a>  <span class="fu">labs</span>( <span class="at">x =</span> <span class="st">&quot;Bill length&quot;</span>,</span>
<span id="cb542-14"><a href="#cb542-14" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&quot;Species&quot;</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-52-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Here is a good example of the <code>scales</code> package in action.</p>
<p>The distribution of GDP per capita in the <code>gapminder</code> dataset is heavily skewed, with most countries reporting less than $10,000. As a result, the scatterplot makes an upside-down L shape. Try sticking a regression line on that and you’ll get in trouble.</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb543-1"><a href="#cb543-1" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb543-2"><a href="#cb543-2" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb543-3"><a href="#cb543-3" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> </span>
<span id="cb543-4"><a href="#cb543-4" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb543-5"><a href="#cb543-5" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb543-6"><a href="#cb543-6" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb543-7"><a href="#cb543-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;GDP per capita&quot;</span>,</span>
<span id="cb543-8"><a href="#cb543-8" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;GDP per capita raw values&quot;</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-53-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Fit this onto a log scale (R's standard log function is the natural log). And we get a straighter line but some ugly axis labels.</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="#cb544-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb544-2"><a href="#cb544-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> </span>
<span id="cb544-3"><a href="#cb544-3" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">log</span>(gdpPercap), <span class="at">y =</span> lifeExp, <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb544-4"><a href="#cb544-4" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb544-5"><a href="#cb544-5" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb544-6"><a href="#cb544-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;GDP per capita, natural log (base e)&quot;</span>,</span>
<span id="cb544-7"><a href="#cb544-7" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;GDP per capita logged manually&quot;</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-54-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>GGplot has a <code>scale_x/y_log10</code> scale but this applues the wrong transformation to our data - in this particular example there is little difference in the range of values when using a <code>log10</code> vs <code>log</code> transformation (as we will see in a moment).</p>
<div class="sourceCode" id="cb545"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb545-1"><a href="#cb545-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb545-2"><a href="#cb545-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> </span>
<span id="cb545-3"><a href="#cb545-3" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb545-4"><a href="#cb545-4" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb545-5"><a href="#cb545-5" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb545-6"><a href="#cb545-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;GDP per capita, log (base 10)&quot;</span>,</span>
<span id="cb545-7"><a href="#cb545-7" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;GDP per capita logged with scale&quot;</span>) <span class="sc">+</span></span>
<span id="cb545-8"><a href="#cb545-8" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-55-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>But we can set whatever custom transformation we wish</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="#cb546-1" tabindex="-1"></a>log_natural <span class="ot">&lt;-</span> <span class="fu">trans_new</span>(</span>
<span id="cb546-2"><a href="#cb546-2" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;logn&quot;</span>,</span>
<span id="cb546-3"><a href="#cb546-3" tabindex="-1"></a>  <span class="at">transform =</span> <span class="cf">function</span>(x) <span class="fu">log</span>(x),</span>
<span id="cb546-4"><a href="#cb546-4" tabindex="-1"></a>  <span class="at">inverse =</span> <span class="cf">function</span>(x) <span class="fu">exp</span>(x),</span>
<span id="cb546-5"><a href="#cb546-5" tabindex="-1"></a>  <span class="at">breaks =</span> <span class="fu">log_breaks</span>()</span>
<span id="cb546-6"><a href="#cb546-6" tabindex="-1"></a>)</span>
<span id="cb546-7"><a href="#cb546-7" tabindex="-1"></a></span>
<span id="cb546-8"><a href="#cb546-8" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb546-9"><a href="#cb546-9" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> </span>
<span id="cb546-10"><a href="#cb546-10" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb546-11"><a href="#cb546-11" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb546-12"><a href="#cb546-12" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb546-13"><a href="#cb546-13" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;GDP per capita, natural log (base e)&quot;</span>,</span>
<span id="cb546-14"><a href="#cb546-14" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;GDP per capita logged manually&quot;</span>) <span class="sc">+</span></span>
<span id="cb546-15"><a href="#cb546-15" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> log_natural,</span>
<span id="cb546-16"><a href="#cb546-16" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">label_dollar</span>(<span class="at">accuracy =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-56-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="maps" class="section level2" number="30.9">
<h2><span class="header-section-number">30.9</span> Maps</h2>
<p>Working with maps can be tricky. The <code>sf</code> package provides functions that work with ggplot2, such as <code>geom_sf()</code>. The <code>rnaturalearth</code> package provides high-quality mapping coordinates.</p>
<div class="sourceCode" id="cb547"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb547-1"><a href="#cb547-1" tabindex="-1"></a><span class="fu">library</span>(sf)          <span class="co"># for mapping geoms</span></span>
<span id="cb547-2"><a href="#cb547-2" tabindex="-1"></a><span class="fu">library</span>(rnaturalearth) <span class="co"># for map data</span></span>
<span id="cb547-3"><a href="#cb547-3" tabindex="-1"></a></span>
<span id="cb547-4"><a href="#cb547-4" tabindex="-1"></a><span class="co"># get and bind country data</span></span>
<span id="cb547-5"><a href="#cb547-5" tabindex="-1"></a>uk_sf <span class="ot">&lt;-</span> <span class="fu">ne_states</span>(<span class="at">country =</span> <span class="st">&quot;united kingdom&quot;</span>, <span class="at">returnclass =</span> <span class="st">&quot;sf&quot;</span>)</span>
<span id="cb547-6"><a href="#cb547-6" tabindex="-1"></a>ireland_sf <span class="ot">&lt;-</span> <span class="fu">ne_states</span>(<span class="at">country =</span> <span class="st">&quot;ireland&quot;</span>, <span class="at">returnclass =</span> <span class="st">&quot;sf&quot;</span>)</span>
<span id="cb547-7"><a href="#cb547-7" tabindex="-1"></a>islands <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(uk_sf, ireland_sf) <span class="sc">%&gt;%</span></span>
<span id="cb547-8"><a href="#cb547-8" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(geonunit))</span>
<span id="cb547-9"><a href="#cb547-9" tabindex="-1"></a></span>
<span id="cb547-10"><a href="#cb547-10" tabindex="-1"></a><span class="co"># set colours</span></span>
<span id="cb547-11"><a href="#cb547-11" tabindex="-1"></a>country_colours <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Scotland&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0962BA&quot;</span>,</span>
<span id="cb547-12"><a href="#cb547-12" tabindex="-1"></a>                     <span class="st">&quot;Wales&quot;</span> <span class="ot">=</span> <span class="st">&quot;#00AC48&quot;</span>,</span>
<span id="cb547-13"><a href="#cb547-13" tabindex="-1"></a>                     <span class="st">&quot;England&quot;</span> <span class="ot">=</span> <span class="st">&quot;#FF0000&quot;</span>,</span>
<span id="cb547-14"><a href="#cb547-14" tabindex="-1"></a>                     <span class="st">&quot;Northern Ireland&quot;</span> <span class="ot">=</span> <span class="st">&quot;#FFCD2C&quot;</span>,</span>
<span id="cb547-15"><a href="#cb547-15" tabindex="-1"></a>                     <span class="st">&quot;Ireland&quot;</span> <span class="ot">=</span> <span class="st">&quot;#F77613&quot;</span>)</span>
<span id="cb547-16"><a href="#cb547-16" tabindex="-1"></a></span>
<span id="cb547-17"><a href="#cb547-17" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb547-18"><a href="#cb547-18" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> islands,</span>
<span id="cb547-19"><a href="#cb547-19" tabindex="-1"></a>          <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> geonunit),</span>
<span id="cb547-20"><a href="#cb547-20" tabindex="-1"></a>          <span class="at">colour =</span> <span class="cn">NA</span>,</span>
<span id="cb547-21"><a href="#cb547-21" tabindex="-1"></a>          <span class="at">alpha =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb547-22"><a href="#cb547-22" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">crs =</span> sf<span class="sc">::</span><span class="fu">st_crs</span>(<span class="dv">4326</span>),</span>
<span id="cb547-23"><a href="#cb547-23" tabindex="-1"></a>           <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">10.7</span>, <span class="fl">2.1</span>), </span>
<span id="cb547-24"><a href="#cb547-24" tabindex="-1"></a>           <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fl">49.7</span>, <span class="dv">61</span>)) <span class="sc">+</span></span>
<span id="cb547-25"><a href="#cb547-25" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;Country&quot;</span>, </span>
<span id="cb547-26"><a href="#cb547-26" tabindex="-1"></a>                    <span class="at">values =</span> country_colours)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-57-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="layouts-and-compositions" class="section level2" number="30.10">
<h2><span class="header-section-number">30.10</span> Layouts and compositions</h2>
<p>Having control over layouts allow you to tailor the appearance of your plot to match your specific needs and preferences. You can control every aspect of the plot's design, including the arrangement of facets, legends, titles, and labels. When you need to create complex composite plots that combine multiple geoms and facets, custom layouts enable you to precisely position and arrange them.</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="#cb548-1" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb548-2"><a href="#cb548-2" tabindex="-1"></a><span class="fu">library</span>(png)</span>
<span id="cb548-3"><a href="#cb548-3" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span>
<span id="cb548-4"><a href="#cb548-4" tabindex="-1"></a></span>
<span id="cb548-5"><a href="#cb548-5" tabindex="-1"></a>penguin_pic <span class="ot">&lt;-</span> png<span class="sc">::</span><span class="fu">readPNG</span>(<span class="st">&quot;images/lter_penguins.png&quot;</span>)</span>
<span id="cb548-6"><a href="#cb548-6" tabindex="-1"></a></span>
<span id="cb548-7"><a href="#cb548-7" tabindex="-1"></a>penguin_fig <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb548-8"><a href="#cb548-8" tabindex="-1"></a>  <span class="fu">background_image</span>(penguin_pic)</span></code></pre></div>
<div class="sourceCode" id="cb549"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb549-1"><a href="#cb549-1" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb549-2"><a href="#cb549-2" tabindex="-1"></a>  <span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">label =</span> <span class="st">&#39;Simpsons Paradox is a statistical phenomenon where an association between two variables in a population emerges, disappears or reverses when the population is divided into subpopulations such as &lt;span style = &quot;color:#FF8C00&quot;&gt;Adelie&lt;/span&gt;, &lt;span style =&quot;color:#159090&quot;&gt;Gentoo&lt;/span&gt;, and &lt;span style = &quot;color:#A034F0&quot;&gt;Chinstrap&lt;/span&gt; penguin species&#39;</span></span>
<span id="cb549-3"><a href="#cb549-3" tabindex="-1"></a>)</span>
<span id="cb549-4"><a href="#cb549-4" tabindex="-1"></a></span>
<span id="cb549-5"><a href="#cb549-5" tabindex="-1"></a></span>
<span id="cb549-6"><a href="#cb549-6" tabindex="-1"></a></span>
<span id="cb549-7"><a href="#cb549-7" tabindex="-1"></a>pt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(text, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb549-8"><a href="#cb549-8" tabindex="-1"></a>  ggtext<span class="sc">::</span><span class="fu">geom_textbox</span>(</span>
<span id="cb549-9"><a href="#cb549-9" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> label),    <span class="co"># Map the &#39;label&#39; column from the &#39;text&#39; data to the text labels</span></span>
<span id="cb549-10"><a href="#cb549-10" tabindex="-1"></a>    <span class="at">box.color =</span> <span class="cn">NA</span>,         <span class="co"># Make the text box border color transparent</span></span>
<span id="cb549-11"><a href="#cb549-11" tabindex="-1"></a>    <span class="at">width =</span> <span class="fu">unit</span>(<span class="dv">10</span>, <span class="st">&quot;lines&quot;</span>),  <span class="co"># Set the width of the text boxes to 15 lines</span></span>
<span id="cb549-12"><a href="#cb549-12" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;grey40&quot;</span>,       <span class="co"># Set the text color to a light gray</span></span>
<span id="cb549-13"><a href="#cb549-13" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,             <span class="co"># Set the text size to 4 (adjust as needed)</span></span>
<span id="cb549-14"><a href="#cb549-14" tabindex="-1"></a>    <span class="at">lineheight =</span> <span class="fl">1.4</span>        <span class="co"># Set the line height for text within the boxes</span></span>
<span id="cb549-15"><a href="#cb549-15" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb549-16"><a href="#cb549-16" tabindex="-1"></a>  <span class="co"># Customize the plot coordinate system</span></span>
<span id="cb549-17"><a href="#cb549-17" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> <span class="cn">FALSE</span>, <span class="at">clip =</span> <span class="st">&quot;off&quot;</span>) <span class="sc">+</span></span>
<span id="cb549-18"><a href="#cb549-18" tabindex="-1"></a></span>
<span id="cb549-19"><a href="#cb549-19" tabindex="-1"></a>  <span class="co"># Apply a theme with a blank (void) background</span></span>
<span id="cb549-20"><a href="#cb549-20" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb549-21"><a href="#cb549-21" tabindex="-1"></a></span>
<span id="cb549-22"><a href="#cb549-22" tabindex="-1"></a>pt</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-60-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="#cb550-1" tabindex="-1"></a>layout <span class="ot">&lt;-</span> <span class="st">&quot;</span></span>
<span id="cb550-2"><a href="#cb550-2" tabindex="-1"></a><span class="st">AACCC</span></span>
<span id="cb550-3"><a href="#cb550-3" tabindex="-1"></a><span class="st">AACCC</span></span>
<span id="cb550-4"><a href="#cb550-4" tabindex="-1"></a><span class="st">BBDDD</span></span>
<span id="cb550-5"><a href="#cb550-5" tabindex="-1"></a><span class="st">BBDDD</span></span>
<span id="cb550-6"><a href="#cb550-6" tabindex="-1"></a><span class="st">&quot;</span></span>
<span id="cb550-7"><a href="#cb550-7" tabindex="-1"></a></span>
<span id="cb550-8"><a href="#cb550-8" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x=</span> culmen_length_mm, </span>
<span id="cb550-9"><a href="#cb550-9" tabindex="-1"></a>                     <span class="at">y=</span> culmen_depth_mm)) <span class="sc">+</span></span>
<span id="cb550-10"><a href="#cb550-10" tabindex="-1"></a>    <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb550-11"><a href="#cb550-11" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>,</span>
<span id="cb550-12"><a href="#cb550-12" tabindex="-1"></a>              <span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb550-13"><a href="#cb550-13" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)<span class="sc">+</span></span>
<span id="cb550-14"><a href="#cb550-14" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Bill length (mm)&quot;</span>,</span>
<span id="cb550-15"><a href="#cb550-15" tabindex="-1"></a>         <span class="at">y=</span><span class="st">&quot;Bill depth (mm)&quot;</span>)</span>
<span id="cb550-16"><a href="#cb550-16" tabindex="-1"></a></span>
<span id="cb550-17"><a href="#cb550-17" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x=</span> culmen_length_mm, </span>
<span id="cb550-18"><a href="#cb550-18" tabindex="-1"></a>                     <span class="at">y=</span> culmen_depth_mm,</span>
<span id="cb550-19"><a href="#cb550-19" tabindex="-1"></a>                     <span class="at">colour=</span>species)) <span class="sc">+</span></span>
<span id="cb550-20"><a href="#cb550-20" tabindex="-1"></a>    <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb550-21"><a href="#cb550-21" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>,</span>
<span id="cb550-22"><a href="#cb550-22" tabindex="-1"></a>              <span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb550-23"><a href="#cb550-23" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values=</span>pal)<span class="sc">+</span></span>
<span id="cb550-24"><a href="#cb550-24" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)<span class="sc">+</span></span>
<span id="cb550-25"><a href="#cb550-25" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Bill length (mm)&quot;</span>,</span>
<span id="cb550-26"><a href="#cb550-26" tabindex="-1"></a>         <span class="at">y=</span><span class="st">&quot;Bill depth (mm)&quot;</span>)</span>
<span id="cb550-27"><a href="#cb550-27" tabindex="-1"></a></span>
<span id="cb550-28"><a href="#cb550-28" tabindex="-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span> </span>
<span id="cb550-29"><a href="#cb550-29" tabindex="-1"></a>  pt <span class="sc">+</span>  penguin_fig <span class="sc">+</span> </span>
<span id="cb550-30"><a href="#cb550-30" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">design =</span> layout)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-61-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="activity-create-a-publication-style-multi-panel-figure" class="section level2" number="30.11">
<h2><span class="header-section-number">30.11</span> Activity: Create a Publication-Style Multi-Panel Figure</h2>
<p>Objective: Design and create a multi-panel data visualization figure in the style of a research publication. This exercise will challenge your skills in data visualization, data manipulation, and creating complex figures.</p>
<p>Steps:</p>
<ul>
<li><p>Choose a Dataset: Select a dataset that is suitable for creating a multi-panel figure. It could be related to a scientific research topic, public data (e.g., from government sources or data repositories), or any other dataset that interests you.</p></li>
<li><p>Data Preprocessing: Use dplyr and tidyr to preprocess the data. You may need to aggregate, filter, or reshape the data to fit the structure you want for your figure.</p></li>
<li><p>Design the Figure: Decide on the structure of your multi-panel figure. You could create subplots or facets to represent different aspects of the data. For example, you might have multiple box plots, scatter plots, or other visualizations arranged in a grid.</p></li>
<li><p>Create the Plot: Use ggplot2 to create the individual panels or subplots. Customize the appearance of each panel, including labels, colors, and titles.</p></li>
<li><p>Combine the Panels: Use the patchwork package or another method to arrange the individual panels into a single figure. This may involve adjusting the layout, labeling, and legends to make the figure coherent.</p></li>
<li><p>Add Annotations: Add relevant annotations to the figure, such as titles, subtitles, captions, and any necessary notes to explain the data or results.</p></li>
<li><p>Customize the Theme: Apply a custom theme to the entire figure. You can modify fonts, colors, grid lines, and other elements to match the style of a publication.</p></li>
</ul>
<p>Tips:</p>
<p>Plan your figure carefully, considering what story or message you want to convey.
Experiment with different geoms, scales, and themes to achieve the desired visual effect.
Use effective data visualization principles, such as avoiding misleading scales, providing clear labels and legends, and ensuring that the figure is accessible to a wide audience.</p>
</div>
</div>
<div id="custom-ggplot-themes" class="section level1" number="31">
<h1><span class="header-section-number">31</span> Custom ggplot themes</h1>
<p>It is often the case that we start to default to a particular 'style' for our figures, or you may be making several similar figures within a research paper. Creating custom functions can extend to making our own custom ggplot themes. You have probably already used theme variants such as <code>theme_bw()</code>, <code>theme_void()</code>, <code>theme_minimal()</code> - these are incredibly useful, but you might find you still wish to make consistent changes.</p>
<div class="sourceCode" id="cb551"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb551-1"><a href="#cb551-1" tabindex="-1"></a>plot <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb551-2"><a href="#cb551-2" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb551-3"><a href="#cb551-3" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> culmen_length_mm, <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb551-4"><a href="#cb551-4" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">width =</span> .<span class="dv">5</span>,</span>
<span id="cb551-5"><a href="#cb551-5" tabindex="-1"></a>              <span class="at">alpha =</span> .<span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb551-6"><a href="#cb551-6" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb551-7"><a href="#cb551-7" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) </span>
<span id="cb551-8"><a href="#cb551-8" tabindex="-1"></a></span>
<span id="cb551-9"><a href="#cb551-9" tabindex="-1"></a>plot</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-62-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>With the addition of a title and <code>theme_classic()</code> we can improve the style quickly</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="#cb552-1" tabindex="-1"></a>plot<span class="sc">+</span></span>
<span id="cb552-2"><a href="#cb552-2" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Comparison of bill lengths by species in Palmer Penguins&quot;</span>)<span class="sc">+</span></span>
<span id="cb552-3"><a href="#cb552-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb552-4"><a href="#cb552-4" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Bill length (mm)&quot;</span>)<span class="sc">+</span></span>
<span id="cb552-5"><a href="#cb552-5" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p>But I <strong>still</strong> want to make some more changes, rather than do this work for one figure, and potentially have to repeat this several times for subsequent figures, I can decide to make a new function instead. See <a href="https://ggplot2.tidyverse.org/reference/theme.html">here</a> for a full breakdown of the arguments for the <code>theme()</code> function.</p>
<div class="info">
<p>
Note when using a pre-set theme, and then modifying it further, it is
important to get the order of syntax correct e.g
</p>
<p>
theme_classic + theme() # is correct
</p>
<p>
theme() + theme_classic() # will not work as intended
</p>
</div>
<div class="sourceCode" id="cb553"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb553-1"><a href="#cb553-1" tabindex="-1"></a><span class="co"># custom theme sets defaults for font and size, but these can be changed without changing the function</span></span>
<span id="cb553-2"><a href="#cb553-2" tabindex="-1"></a>theme_custom <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">base_size=</span><span class="dv">12</span>, <span class="at">base_family=</span><span class="st">&quot;serif&quot;</span>){</span>
<span id="cb553-3"><a href="#cb553-3" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> base_size, </span>
<span id="cb553-4"><a href="#cb553-4" tabindex="-1"></a>                <span class="at">base_family =</span> base_family,</span>
<span id="cb553-5"><a href="#cb553-5" tabindex="-1"></a>                )  <span class="sc">%+replace%</span></span>
<span id="cb553-6"><a href="#cb553-6" tabindex="-1"></a><span class="co"># update theme minimal </span></span>
<span id="cb553-7"><a href="#cb553-7" tabindex="-1"></a><span class="fu">theme</span>(</span>
<span id="cb553-8"><a href="#cb553-8" tabindex="-1"></a>  <span class="co"># specify default settings for plot titles - use rel to set titles relative to base size</span></span>
<span id="cb553-9"><a href="#cb553-9" tabindex="-1"></a>  <span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="fu">rel</span>(<span class="fl">1.5</span>),</span>
<span id="cb553-10"><a href="#cb553-10" tabindex="-1"></a>      <span class="at">face=</span><span class="st">&quot;bold&quot;</span>,</span>
<span id="cb553-11"><a href="#cb553-11" tabindex="-1"></a>      <span class="at">family=</span>base_family),</span>
<span id="cb553-12"><a href="#cb553-12" tabindex="-1"></a>  <span class="co">#specify defaults for axis titles</span></span>
<span id="cb553-13"><a href="#cb553-13" tabindex="-1"></a>  <span class="at">axis.title=</span><span class="fu">element_text</span>(</span>
<span id="cb553-14"><a href="#cb553-14" tabindex="-1"></a>    <span class="at">size=</span><span class="fu">rel</span>(<span class="dv">1</span>),</span>
<span id="cb553-15"><a href="#cb553-15" tabindex="-1"></a>    <span class="at">family=</span>base_family),</span>
<span id="cb553-16"><a href="#cb553-16" tabindex="-1"></a>  <span class="co"># specify position for y axis title</span></span>
<span id="cb553-17"><a href="#cb553-17" tabindex="-1"></a>  <span class="at">axis.title.y=</span><span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>,</span>
<span id="cb553-18"><a href="#cb553-18" tabindex="-1"></a>                            <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">r =</span> <span class="dv">10</span>, <span class="at">l=</span> <span class="dv">10</span>)),</span>
<span id="cb553-19"><a href="#cb553-19" tabindex="-1"></a>  <span class="co"># specify position for x axis title</span></span>
<span id="cb553-20"><a href="#cb553-20" tabindex="-1"></a>  <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">10</span>, <span class="at">b =</span> <span class="dv">10</span>)),</span>
<span id="cb553-21"><a href="#cb553-21" tabindex="-1"></a>  <span class="co"># set major y grid lines</span></span>
<span id="cb553-22"><a href="#cb553-22" tabindex="-1"></a>  <span class="at">panel.grid.major.y =</span> <span class="fu">element_line</span>(<span class="at">colour=</span><span class="st">&quot;gray&quot;</span>, <span class="at">size=</span><span class="fl">0.5</span>),</span>
<span id="cb553-23"><a href="#cb553-23" tabindex="-1"></a>  <span class="co"># add axis lines</span></span>
<span id="cb553-24"><a href="#cb553-24" tabindex="-1"></a>  <span class="at">axis.line=</span><span class="fu">element_line</span>(),</span>
<span id="cb553-25"><a href="#cb553-25" tabindex="-1"></a>   <span class="co"># Adding a 0.5cm margin around the plot</span></span>
<span id="cb553-26"><a href="#cb553-26" tabindex="-1"></a>  <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>), <span class="at">units =</span> , <span class="st">&quot;cm&quot;</span>),    </span>
<span id="cb553-27"><a href="#cb553-27" tabindex="-1"></a>   <span class="co"># Setting the position for the legend</span></span>
<span id="cb553-28"><a href="#cb553-28" tabindex="-1"></a>  <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>             </span>
<span id="cb553-29"><a href="#cb553-29" tabindex="-1"></a>)</span>
<span id="cb553-30"><a href="#cb553-30" tabindex="-1"></a>  </span>
<span id="cb553-31"><a href="#cb553-31" tabindex="-1"></a>}</span></code></pre></div>
<p>With this function set, I can now use it for as many figures as I wish. To use it in the future I should probably save it in a unique script, with a clear title and comments for future use.</p>
<p>I could then easily use <code>source("custom_theme_function.R")</code> to make this available to any scripts I was using.</p>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="#cb554-1" tabindex="-1"></a>plot<span class="sc">+</span></span>
<span id="cb554-2"><a href="#cb554-2" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Comparison of bill lengths</span><span class="sc">\n</span><span class="st"> by species in Palmer Penguins&quot;</span>)<span class="sc">+</span></span>
<span id="cb554-3"><a href="#cb554-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb554-4"><a href="#cb554-4" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Bill length (mm)&quot;</span>)<span class="sc">+</span></span>
<span id="cb554-5"><a href="#cb554-5" tabindex="-1"></a>  <span class="fu">theme_custom</span>()</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-66-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="making-tables-with-gt" class="section level1" number="32">
<h1><span class="header-section-number">32</span> Making tables with gt</h1>
<p>In this chapter, we will accomplish two main objectives:</p>
<ol style="list-style-type: decimal">
<li><p>Acquire fundamental principles for creating improved tables.</p></li>
<li><p>Apply these principles using the <code>gt</code> package.
Naturally, to put these ideas into practice, we'll utilize the fantastic penguins dataset from <code>palmerpenguins</code> since I have a preference for penguins.</p></li>
</ol>
<p>PROS: Why <code>gt</code>? Has a grammar of tables, like <code>ggplot2</code>, supports HTML, Latex and RTF, followstidyverse conventions.</p>
<p>CONS: Still quite new, syntax is changing and developing.</p>
<p>For these tutorials we will use the <code>gt</code> package and helpers provided by <code>gtExtras</code>.</p>
<p>To follow along when you run a section of code, look for the output in the <strong>Viewer Pane</strong></p>
<div class="sourceCode" id="cb555"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb555-1"><a href="#cb555-1" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb555-2"><a href="#cb555-2" tabindex="-1"></a><span class="fu">library</span>(gtExtras)</span></code></pre></div>
<p>Let's use this dataset to tally the penguins. These counts will provide us with a straightforward dataset to use for practicing table construction. You will need your cleaned penguins dataframe from Day One.</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="#cb556-1" tabindex="-1"></a>penguin_counts <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb556-2"><a href="#cb556-2" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb556-3"><a href="#cb556-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.character</span>(year)) <span class="sc">|&gt;</span> </span>
<span id="cb556-4"><a href="#cb556-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sex =</span> <span class="fu">str_to_lower</span>(sex)) <span class="sc">|&gt;</span> </span>
<span id="cb556-5"><a href="#cb556-5" tabindex="-1"></a>  <span class="fu">group_by</span>(species, island, sex, year) <span class="sc">|&gt;</span> </span>
<span id="cb556-6"><a href="#cb556-6" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>)</span>
<span id="cb556-7"><a href="#cb556-7" tabindex="-1"></a></span>
<span id="cb556-8"><a href="#cb556-8" tabindex="-1"></a>penguin_counts</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr class="header">
<th align="left">species</th>
<th align="left">island</th>
<th align="left">sex</th>
<th align="left">year</th>
<th align="right">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Adelie</td>
<td align="left">Biscoe</td>
<td align="left">female</td>
<td align="left">2007</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">Adelie</td>
<td align="left">Biscoe</td>
<td align="left">female</td>
<td align="left">2008</td>
<td align="right">9</td>
</tr>
<tr class="odd">
<td align="left">Adelie</td>
<td align="left">Biscoe</td>
<td align="left">female</td>
<td align="left">2009</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">Adelie</td>
<td align="left">Biscoe</td>
<td align="left">male</td>
<td align="left">2007</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="left">Adelie</td>
<td align="left">Biscoe</td>
<td align="left">male</td>
<td align="left">2008</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="left">Adelie</td>
<td align="left">Biscoe</td>
<td align="left">male</td>
<td align="left">2009</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">Adelie</td>
<td align="left">Dream</td>
<td align="left">female</td>
<td align="left">2007</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="left">Adelie</td>
<td align="left">Dream</td>
<td align="left">female</td>
<td align="left">2008</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">Adelie</td>
<td align="left">Dream</td>
<td align="left">female</td>
<td align="left">2009</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="left">Adelie</td>
<td align="left">Dream</td>
<td align="left">male</td>
<td align="left">2007</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="left">Adelie</td>
<td align="left">Dream</td>
<td align="left">male</td>
<td align="left">2008</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">Adelie</td>
<td align="left">Dream</td>
<td align="left">male</td>
<td align="left">2009</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="left">Adelie</td>
<td align="left">Torgersen</td>
<td align="left">female</td>
<td align="left">2007</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">Adelie</td>
<td align="left">Torgersen</td>
<td align="left">female</td>
<td align="left">2008</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">Adelie</td>
<td align="left">Torgersen</td>
<td align="left">female</td>
<td align="left">2009</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">Adelie</td>
<td align="left">Torgersen</td>
<td align="left">male</td>
<td align="left">2007</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">Adelie</td>
<td align="left">Torgersen</td>
<td align="left">male</td>
<td align="left">2008</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">Adelie</td>
<td align="left">Torgersen</td>
<td align="left">male</td>
<td align="left">2009</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">Chinstrap</td>
<td align="left">Dream</td>
<td align="left">female</td>
<td align="left">2007</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="left">Chinstrap</td>
<td align="left">Dream</td>
<td align="left">female</td>
<td align="left">2008</td>
<td align="right">9</td>
</tr>
<tr class="odd">
<td align="left">Chinstrap</td>
<td align="left">Dream</td>
<td align="left">female</td>
<td align="left">2009</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">Chinstrap</td>
<td align="left">Dream</td>
<td align="left">male</td>
<td align="left">2007</td>
<td align="right">13</td>
</tr>
<tr class="odd">
<td align="left">Chinstrap</td>
<td align="left">Dream</td>
<td align="left">male</td>
<td align="left">2008</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="left">Chinstrap</td>
<td align="left">Dream</td>
<td align="left">male</td>
<td align="left">2009</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="left">Biscoe</td>
<td align="left">female</td>
<td align="left">2007</td>
<td align="right">16</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="left">Biscoe</td>
<td align="left">female</td>
<td align="left">2008</td>
<td align="right">22</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="left">Biscoe</td>
<td align="left">female</td>
<td align="left">2009</td>
<td align="right">20</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="left">Biscoe</td>
<td align="left">male</td>
<td align="left">2007</td>
<td align="right">17</td>
</tr>
<tr class="odd">
<td align="left">Gentoo</td>
<td align="left">Biscoe</td>
<td align="left">male</td>
<td align="left">2008</td>
<td align="right">23</td>
</tr>
<tr class="even">
<td align="left">Gentoo</td>
<td align="left">Biscoe</td>
<td align="left">male</td>
<td align="left">2009</td>
<td align="right">21</td>
</tr>
</tbody>
</table>
</div>
<p>In a real table, the data might be restructured for better readability. While there's nothing inherently wrong with the long (i.e., containing many rows) data format, this format is excellent for data analysis. However, in a table intended for human readers, rather than machines, you'd likely opt for a wider format.</p>
<div class="sourceCode" id="cb557"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb557-1"><a href="#cb557-1" tabindex="-1"></a>penguin_counts_wider <span class="ot">&lt;-</span> penguin_counts <span class="sc">|&gt;</span> </span>
<span id="cb557-2"><a href="#cb557-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb557-3"><a href="#cb557-3" tabindex="-1"></a>    <span class="at">names_from =</span> <span class="fu">c</span>(species, sex),</span>
<span id="cb557-4"><a href="#cb557-4" tabindex="-1"></a>    <span class="at">values_from =</span> n</span>
<span id="cb557-5"><a href="#cb557-5" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb557-6"><a href="#cb557-6" tabindex="-1"></a>  <span class="co"># Make missing numbers (NAs) into zero</span></span>
<span id="cb557-7"><a href="#cb557-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>), <span class="sc">~</span><span class="fu">replace_na</span>(., <span class="at">replace =</span> <span class="dv">0</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb557-8"><a href="#cb557-8" tabindex="-1"></a>  <span class="fu">arrange</span>(island, year) </span>
<span id="cb557-9"><a href="#cb557-9" tabindex="-1"></a></span>
<span id="cb557-10"><a href="#cb557-10" tabindex="-1"></a>penguin_counts_wider</span></code></pre></div>
<div class="kable-table">
<table>
<colgroup>
<col width="10%" />
<col width="5%" />
<col width="14%" />
<col width="12%" />
<col width="17%" />
<col width="15%" />
<col width="14%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">island</th>
<th align="left">year</th>
<th align="right">Adelie_female</th>
<th align="right">Adelie_male</th>
<th align="right">Chinstrap_female</th>
<th align="right">Chinstrap_male</th>
<th align="right">Gentoo_female</th>
<th align="right">Gentoo_male</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Biscoe</td>
<td align="left">2007</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">16</td>
<td align="right">17</td>
</tr>
<tr class="even">
<td align="left">Biscoe</td>
<td align="left">2008</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">22</td>
<td align="right">23</td>
</tr>
<tr class="odd">
<td align="left">Biscoe</td>
<td align="left">2009</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">20</td>
<td align="right">21</td>
</tr>
<tr class="even">
<td align="left">Dream</td>
<td align="left">2007</td>
<td align="right">9</td>
<td align="right">10</td>
<td align="right">13</td>
<td align="right">13</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Dream</td>
<td align="left">2008</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">9</td>
<td align="right">9</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Dream</td>
<td align="left">2009</td>
<td align="right">10</td>
<td align="right">10</td>
<td align="right">12</td>
<td align="right">12</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Torgersen</td>
<td align="left">2007</td>
<td align="right">8</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Torgersen</td>
<td align="left">2008</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Torgersen</td>
<td align="left">2009</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
<p>Here are six guidelines that will guide us as we make tables:</p>
<ol style="list-style-type: decimal">
<li><p>Avoid gridlines</p></li>
<li><p>Use better column names</p></li>
<li><p>Align columns</p></li>
<li><p>Use groups instead of repetitive columns</p></li>
<li><p>Remove missing numbers</p></li>
<li><p>Add summaries</p></li>
</ol>
<div id="avoid-vertical-lines" class="section level3" number="32.0.1">
<h3><span class="header-section-number">32.0.1</span> Avoid vertical lines</h3>
<p>Vertical lines can make our data look cramped. Fortunately, it appears that <code>gt</code> adheres to this principle by default. Hence, all we need to do is supply our dataset, <code>penguin_counts_wider</code>, to the <code>gt()</code> function.</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="#cb558-1" tabindex="-1"></a>penguin_counts_wider <span class="sc">|&gt;</span> </span>
<span id="cb558-2"><a href="#cb558-2" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code></pre></div>
<div id="xibansyjtr" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xibansyjtr table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xibansyjtr thead, #xibansyjtr tbody, #xibansyjtr tfoot, #xibansyjtr tr, #xibansyjtr td, #xibansyjtr th {
  border-style: none;
}

#xibansyjtr p {
  margin: 0;
  padding: 0;
}

#xibansyjtr .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xibansyjtr .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xibansyjtr .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xibansyjtr .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xibansyjtr .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xibansyjtr .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xibansyjtr .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xibansyjtr .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xibansyjtr .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xibansyjtr .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xibansyjtr .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xibansyjtr .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xibansyjtr .gt_spanner_row {
  border-bottom-style: hidden;
}

#xibansyjtr .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xibansyjtr .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xibansyjtr .gt_from_md > :first-child {
  margin-top: 0;
}

#xibansyjtr .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xibansyjtr .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xibansyjtr .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xibansyjtr .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xibansyjtr .gt_row_group_first td {
  border-top-width: 2px;
}

#xibansyjtr .gt_row_group_first th {
  border-top-width: 2px;
}

#xibansyjtr .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xibansyjtr .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xibansyjtr .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xibansyjtr .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xibansyjtr .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xibansyjtr .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xibansyjtr .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xibansyjtr .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xibansyjtr .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xibansyjtr .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xibansyjtr .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xibansyjtr .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xibansyjtr .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xibansyjtr .gt_left {
  text-align: left;
}

#xibansyjtr .gt_center {
  text-align: center;
}

#xibansyjtr .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xibansyjtr .gt_font_normal {
  font-weight: normal;
}

#xibansyjtr .gt_font_bold {
  font-weight: bold;
}

#xibansyjtr .gt_font_italic {
  font-style: italic;
}

#xibansyjtr .gt_super {
  font-size: 65%;
}

#xibansyjtr .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xibansyjtr .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xibansyjtr .gt_indent_1 {
  text-indent: 5px;
}

#xibansyjtr .gt_indent_2 {
  text-indent: 10px;
}

#xibansyjtr .gt_indent_3 {
  text-indent: 15px;
}

#xibansyjtr .gt_indent_4 {
  text-indent: 20px;
}

#xibansyjtr .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="island">island</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="year">year</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Adelie_female">Adelie_female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Adelie_male">Adelie_male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Chinstrap_female">Chinstrap_female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Chinstrap_male">Chinstrap_male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Gentoo_female">Gentoo_female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Gentoo_male">Gentoo_male</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">5</td>
<td headers="Adelie_male" class="gt_row gt_right">5</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">16</td>
<td headers="Gentoo_male" class="gt_row gt_right">17</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">9</td>
<td headers="Adelie_male" class="gt_row gt_right">9</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">22</td>
<td headers="Gentoo_male" class="gt_row gt_right">23</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">20</td>
<td headers="Gentoo_male" class="gt_row gt_right">21</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">9</td>
<td headers="Adelie_male" class="gt_row gt_right">10</td>
<td headers="Chinstrap_female" class="gt_row gt_right">13</td>
<td headers="Chinstrap_male" class="gt_row gt_right">13</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">9</td>
<td headers="Chinstrap_male" class="gt_row gt_right">9</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">10</td>
<td headers="Adelie_male" class="gt_row gt_right">10</td>
<td headers="Chinstrap_female" class="gt_row gt_right">12</td>
<td headers="Chinstrap_male" class="gt_row gt_right">12</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">7</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<div id="use-better-column-names-and-make-them-stand-out" class="section level3" number="32.0.2">
<h3><span class="header-section-number">32.0.2</span> Use better column names and make them stand out</h3>
<p>The <a href="https://gt.rstudio.com/reference/index.html#section-modify-columns"><code>cols_*()</code> functions</a> allow for modifications of entire columns.</p>
<p>We can control the column labels, cell alignment, column width and placement plus can combine multiple columns with <code>cols_*()</code> functions.</p>
<p>To modify the column names, you can employ the "layer" named <code>cols_layer()</code>. Similar to how {ggplot2} operates with layers, {gt} follows a similar approach. To make any adjustments to the table, you simply transfer it from one layer to the next, which can be done conveniently through piping. With this understanding, we can label the columns just as we did previously.</p>
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb559-1"><a href="#cb559-1" tabindex="-1"></a>penguin_counts_wider <span class="sc">|&gt;</span> </span>
<span id="cb559-2"><a href="#cb559-2" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb559-3"><a href="#cb559-3" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb559-4"><a href="#cb559-4" tabindex="-1"></a>    <span class="at">island =</span> <span class="st">&#39;Island&#39;</span>,</span>
<span id="cb559-5"><a href="#cb559-5" tabindex="-1"></a>    <span class="at">year =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb559-6"><a href="#cb559-6" tabindex="-1"></a>    <span class="at">Adelie_female =</span> <span class="st">&#39;Adelie (female)&#39;</span>,</span>
<span id="cb559-7"><a href="#cb559-7" tabindex="-1"></a>    <span class="at">Adelie_male =</span> <span class="st">&#39;Adelie (male)&#39;</span>,</span>
<span id="cb559-8"><a href="#cb559-8" tabindex="-1"></a>    <span class="at">Chinstrap_female =</span> <span class="st">&#39;Chinstrap (female)&#39;</span>,</span>
<span id="cb559-9"><a href="#cb559-9" tabindex="-1"></a>    <span class="at">Chinstrap_male =</span> <span class="st">&#39;Chinstrap (male)&#39;</span>,</span>
<span id="cb559-10"><a href="#cb559-10" tabindex="-1"></a>    <span class="at">Gentoo_female =</span> <span class="st">&#39;Gentoo (female)&#39;</span>,</span>
<span id="cb559-11"><a href="#cb559-11" tabindex="-1"></a>    <span class="at">Gentoo_male =</span> <span class="st">&#39;Gentoo (male)&#39;</span>,</span>
<span id="cb559-12"><a href="#cb559-12" tabindex="-1"></a>  )</span></code></pre></div>
<div id="cpwwjohjbu" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#cpwwjohjbu table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#cpwwjohjbu thead, #cpwwjohjbu tbody, #cpwwjohjbu tfoot, #cpwwjohjbu tr, #cpwwjohjbu td, #cpwwjohjbu th {
  border-style: none;
}

#cpwwjohjbu p {
  margin: 0;
  padding: 0;
}

#cpwwjohjbu .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#cpwwjohjbu .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#cpwwjohjbu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#cpwwjohjbu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#cpwwjohjbu .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cpwwjohjbu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cpwwjohjbu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cpwwjohjbu .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#cpwwjohjbu .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#cpwwjohjbu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#cpwwjohjbu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#cpwwjohjbu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#cpwwjohjbu .gt_spanner_row {
  border-bottom-style: hidden;
}

#cpwwjohjbu .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#cpwwjohjbu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#cpwwjohjbu .gt_from_md > :first-child {
  margin-top: 0;
}

#cpwwjohjbu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#cpwwjohjbu .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#cpwwjohjbu .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#cpwwjohjbu .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#cpwwjohjbu .gt_row_group_first td {
  border-top-width: 2px;
}

#cpwwjohjbu .gt_row_group_first th {
  border-top-width: 2px;
}

#cpwwjohjbu .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cpwwjohjbu .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#cpwwjohjbu .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#cpwwjohjbu .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cpwwjohjbu .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cpwwjohjbu .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#cpwwjohjbu .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#cpwwjohjbu .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#cpwwjohjbu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cpwwjohjbu .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cpwwjohjbu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cpwwjohjbu .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cpwwjohjbu .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cpwwjohjbu .gt_left {
  text-align: left;
}

#cpwwjohjbu .gt_center {
  text-align: center;
}

#cpwwjohjbu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#cpwwjohjbu .gt_font_normal {
  font-weight: normal;
}

#cpwwjohjbu .gt_font_bold {
  font-weight: bold;
}

#cpwwjohjbu .gt_font_italic {
  font-style: italic;
}

#cpwwjohjbu .gt_super {
  font-size: 65%;
}

#cpwwjohjbu .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#cpwwjohjbu .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#cpwwjohjbu .gt_indent_1 {
  text-indent: 5px;
}

#cpwwjohjbu .gt_indent_2 {
  text-indent: 10px;
}

#cpwwjohjbu .gt_indent_3 {
  text-indent: 15px;
}

#cpwwjohjbu .gt_indent_4 {
  text-indent: 20px;
}

#cpwwjohjbu .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Island">Island</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Year">Year</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Adelie (female)">Adelie (female)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Adelie (male)">Adelie (male)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Chinstrap (female)">Chinstrap (female)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Chinstrap (male)">Chinstrap (male)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Gentoo (female)">Gentoo (female)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Gentoo (male)">Gentoo (male)</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">5</td>
<td headers="Adelie_male" class="gt_row gt_right">5</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">16</td>
<td headers="Gentoo_male" class="gt_row gt_right">17</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">9</td>
<td headers="Adelie_male" class="gt_row gt_right">9</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">22</td>
<td headers="Gentoo_male" class="gt_row gt_right">23</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">20</td>
<td headers="Gentoo_male" class="gt_row gt_right">21</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">9</td>
<td headers="Adelie_male" class="gt_row gt_right">10</td>
<td headers="Chinstrap_female" class="gt_row gt_right">13</td>
<td headers="Chinstrap_male" class="gt_row gt_right">13</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">9</td>
<td headers="Chinstrap_male" class="gt_row gt_right">9</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">10</td>
<td headers="Adelie_male" class="gt_row gt_right">10</td>
<td headers="Chinstrap_female" class="gt_row gt_right">12</td>
<td headers="Chinstrap_male" class="gt_row gt_right">12</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">7</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
  </tbody>
  
  
</table>
</div>
<p>However, labeling the columns in this manner may not be the most effective approach. Let's explore an alternative method. First, we can create what are known as "spanners," which are merged columns.</p>
<p>We can modify the look of table parts more generally with [tab_*()] functions</p>
<p>Here we can generate column spanners with <code>tab_spanner()</code> layers, with one layer dedicated to each spanner. You can also control text formatting of labels with Markdown or HTML syntax. This can be used on any text in a <strong>gt</strong> table. Here I have applied some <code>md</code> to put my spanners in <strong>bold</strong>.</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="#cb560-1" tabindex="-1"></a>penguin_counts_wider <span class="sc">|&gt;</span> </span>
<span id="cb560-2"><a href="#cb560-2" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb560-3"><a href="#cb560-3" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb560-4"><a href="#cb560-4" tabindex="-1"></a>    <span class="at">island =</span> <span class="st">&#39;Island&#39;</span>,</span>
<span id="cb560-5"><a href="#cb560-5" tabindex="-1"></a>    <span class="at">year =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb560-6"><a href="#cb560-6" tabindex="-1"></a>    <span class="at">Adelie_female =</span> <span class="st">&#39;Adelie (female)&#39;</span>,</span>
<span id="cb560-7"><a href="#cb560-7" tabindex="-1"></a>    <span class="at">Adelie_male =</span> <span class="st">&#39;Adelie (male)&#39;</span>,</span>
<span id="cb560-8"><a href="#cb560-8" tabindex="-1"></a>    <span class="at">Chinstrap_female =</span> <span class="st">&#39;Chinstrap (female)&#39;</span>,</span>
<span id="cb560-9"><a href="#cb560-9" tabindex="-1"></a>    <span class="at">Chinstrap_male =</span> <span class="st">&#39;Chinstrap (male)&#39;</span>,</span>
<span id="cb560-10"><a href="#cb560-10" tabindex="-1"></a>    <span class="at">Gentoo_female =</span> <span class="st">&#39;Gentoo (female)&#39;</span>,</span>
<span id="cb560-11"><a href="#cb560-11" tabindex="-1"></a>    <span class="at">Gentoo_male =</span> <span class="st">&#39;Gentoo (male)&#39;</span>,</span>
<span id="cb560-12"><a href="#cb560-12" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb560-13"><a href="#cb560-13" tabindex="-1"></a>  <span class="co"># md() function applies markdown styling - we can make text bold</span></span>
<span id="cb560-14"><a href="#cb560-14" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb560-15"><a href="#cb560-15" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">md</span>(<span class="st">&#39;**Adelie**&#39;</span>),</span>
<span id="cb560-16"><a href="#cb560-16" tabindex="-1"></a>    <span class="at">columns =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb560-17"><a href="#cb560-17" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb560-18"><a href="#cb560-18" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb560-19"><a href="#cb560-19" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">md</span>(<span class="st">&#39;**Chinstrap**&#39;</span>),</span>
<span id="cb560-20"><a href="#cb560-20" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">&#39;Chinstrap_female&#39;</span>, <span class="st">&#39;Chinstrap_male&#39;</span>)</span>
<span id="cb560-21"><a href="#cb560-21" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb560-22"><a href="#cb560-22" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb560-23"><a href="#cb560-23" tabindex="-1"></a>    <span class="at">label =</span>  <span class="fu">md</span>(<span class="st">&#39;**Gentoo**&#39;</span>),</span>
<span id="cb560-24"><a href="#cb560-24" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">contains</span>(<span class="st">&#39;Gentoo&#39;</span>)</span>
<span id="cb560-25"><a href="#cb560-25" tabindex="-1"></a>  )</span></code></pre></div>
<div id="bhgcehthyf" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#bhgcehthyf table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#bhgcehthyf thead, #bhgcehthyf tbody, #bhgcehthyf tfoot, #bhgcehthyf tr, #bhgcehthyf td, #bhgcehthyf th {
  border-style: none;
}

#bhgcehthyf p {
  margin: 0;
  padding: 0;
}

#bhgcehthyf .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bhgcehthyf .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#bhgcehthyf .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bhgcehthyf .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bhgcehthyf .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bhgcehthyf .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bhgcehthyf .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bhgcehthyf .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bhgcehthyf .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bhgcehthyf .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bhgcehthyf .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bhgcehthyf .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bhgcehthyf .gt_spanner_row {
  border-bottom-style: hidden;
}

#bhgcehthyf .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#bhgcehthyf .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bhgcehthyf .gt_from_md > :first-child {
  margin-top: 0;
}

#bhgcehthyf .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bhgcehthyf .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bhgcehthyf .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#bhgcehthyf .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#bhgcehthyf .gt_row_group_first td {
  border-top-width: 2px;
}

#bhgcehthyf .gt_row_group_first th {
  border-top-width: 2px;
}

#bhgcehthyf .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bhgcehthyf .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#bhgcehthyf .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#bhgcehthyf .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bhgcehthyf .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bhgcehthyf .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bhgcehthyf .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#bhgcehthyf .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bhgcehthyf .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bhgcehthyf .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bhgcehthyf .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bhgcehthyf .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bhgcehthyf .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bhgcehthyf .gt_left {
  text-align: left;
}

#bhgcehthyf .gt_center {
  text-align: center;
}

#bhgcehthyf .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bhgcehthyf .gt_font_normal {
  font-weight: normal;
}

#bhgcehthyf .gt_font_bold {
  font-weight: bold;
}

#bhgcehthyf .gt_font_italic {
  font-style: italic;
}

#bhgcehthyf .gt_super {
  font-size: 65%;
}

#bhgcehthyf .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#bhgcehthyf .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#bhgcehthyf .gt_indent_1 {
  text-indent: 5px;
}

#bhgcehthyf .gt_indent_2 {
  text-indent: 10px;
}

#bhgcehthyf .gt_indent_3 {
  text-indent: 15px;
}

#bhgcehthyf .gt_indent_4 {
  text-indent: 20px;
}

#bhgcehthyf .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="Island">Island</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Year">Year</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Adelie&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Adelie</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Chinstrap&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Chinstrap</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Gentoo&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Gentoo</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Adelie (female)">Adelie (female)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Adelie (male)">Adelie (male)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Chinstrap (female)">Chinstrap (female)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Chinstrap (male)">Chinstrap (male)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Gentoo (female)">Gentoo (female)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Gentoo (male)">Gentoo (male)</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">5</td>
<td headers="Adelie_male" class="gt_row gt_right">5</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">16</td>
<td headers="Gentoo_male" class="gt_row gt_right">17</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">9</td>
<td headers="Adelie_male" class="gt_row gt_right">9</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">22</td>
<td headers="Gentoo_male" class="gt_row gt_right">23</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">20</td>
<td headers="Gentoo_male" class="gt_row gt_right">21</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">9</td>
<td headers="Adelie_male" class="gt_row gt_right">10</td>
<td headers="Chinstrap_female" class="gt_row gt_right">13</td>
<td headers="Chinstrap_male" class="gt_row gt_right">13</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">9</td>
<td headers="Chinstrap_male" class="gt_row gt_right">9</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">10</td>
<td headers="Adelie_male" class="gt_row gt_right">10</td>
<td headers="Chinstrap_female" class="gt_row gt_right">12</td>
<td headers="Chinstrap_male" class="gt_row gt_right">12</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">7</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
  </tbody>
  
  
</table>
</div>
<p>As you can see, tab_spanner() always requires two arguments label and columns. For the columns argument I have shown you three ways to get the job done:</p>
<ol style="list-style-type: decimal">
<li><p>Vector of column numbers</p></li>
<li><p>Vector of column names</p></li>
<li><p>tidyselect helpers</p></li>
</ol>
<p>First, we no longer need the species labels in the actual column names, as the spanners already provide that information. To update the column names, we can employ a handy trick that will save us from tedious typing.</p>
<p>Begin by creating a named vector that establishes a connection between the original column names, which include species labels, and the desired column names that exclude those labels. For example:</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="#cb561-1" tabindex="-1"></a>desired_colnames <span class="ot">&lt;-</span> <span class="fu">colnames</span>(penguin_counts_wider) <span class="sc">|&gt;</span> </span>
<span id="cb561-2"><a href="#cb561-2" tabindex="-1"></a>  <span class="fu">str_remove</span>(<span class="st">&quot;(Adelie|Gentoo|Chinstrap)_&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb561-3"><a href="#cb561-3" tabindex="-1"></a>  <span class="fu">str_to_title</span>()</span>
<span id="cb561-4"><a href="#cb561-4" tabindex="-1"></a></span>
<span id="cb561-5"><a href="#cb561-5" tabindex="-1"></a><span class="fu">names</span>(desired_colnames) <span class="ot">&lt;-</span> <span class="fu">names</span>(penguin_counts_wider)</span></code></pre></div>
<p>With this named vector in place, proceed to rename the columns using it in the .list argument in <code>cols_label()</code></p>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="#cb562-1" tabindex="-1"></a>penguin_counts_wider <span class="sc">|&gt;</span> </span>
<span id="cb562-2"><a href="#cb562-2" tabindex="-1"></a>    <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb562-3"><a href="#cb562-3" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">.list =</span> desired_colnames) <span class="sc">|&gt;</span> </span>
<span id="cb562-4"><a href="#cb562-4" tabindex="-1"></a>  <span class="co"># md() function applies markdown styling - we can make text bold</span></span>
<span id="cb562-5"><a href="#cb562-5" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb562-6"><a href="#cb562-6" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">md</span>(<span class="st">&#39;**Adelie**&#39;</span>),</span>
<span id="cb562-7"><a href="#cb562-7" tabindex="-1"></a>    <span class="at">columns =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb562-8"><a href="#cb562-8" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb562-9"><a href="#cb562-9" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb562-10"><a href="#cb562-10" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">md</span>(<span class="st">&#39;**Chinstrap**&#39;</span>),</span>
<span id="cb562-11"><a href="#cb562-11" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">&#39;Chinstrap_female&#39;</span>, <span class="st">&#39;Chinstrap_male&#39;</span>)</span>
<span id="cb562-12"><a href="#cb562-12" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb562-13"><a href="#cb562-13" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb562-14"><a href="#cb562-14" tabindex="-1"></a>    <span class="at">label =</span>  <span class="fu">md</span>(<span class="st">&#39;**Gentoo**&#39;</span>),</span>
<span id="cb562-15"><a href="#cb562-15" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">contains</span>(<span class="st">&#39;Gentoo&#39;</span>)</span>
<span id="cb562-16"><a href="#cb562-16" tabindex="-1"></a>  )</span></code></pre></div>
<div id="urenptfeld" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#urenptfeld table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#urenptfeld thead, #urenptfeld tbody, #urenptfeld tfoot, #urenptfeld tr, #urenptfeld td, #urenptfeld th {
  border-style: none;
}

#urenptfeld p {
  margin: 0;
  padding: 0;
}

#urenptfeld .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#urenptfeld .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#urenptfeld .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#urenptfeld .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#urenptfeld .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#urenptfeld .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#urenptfeld .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#urenptfeld .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#urenptfeld .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#urenptfeld .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#urenptfeld .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#urenptfeld .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#urenptfeld .gt_spanner_row {
  border-bottom-style: hidden;
}

#urenptfeld .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#urenptfeld .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#urenptfeld .gt_from_md > :first-child {
  margin-top: 0;
}

#urenptfeld .gt_from_md > :last-child {
  margin-bottom: 0;
}

#urenptfeld .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#urenptfeld .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#urenptfeld .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#urenptfeld .gt_row_group_first td {
  border-top-width: 2px;
}

#urenptfeld .gt_row_group_first th {
  border-top-width: 2px;
}

#urenptfeld .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#urenptfeld .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#urenptfeld .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#urenptfeld .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#urenptfeld .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#urenptfeld .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#urenptfeld .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#urenptfeld .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#urenptfeld .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#urenptfeld .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#urenptfeld .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#urenptfeld .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#urenptfeld .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#urenptfeld .gt_left {
  text-align: left;
}

#urenptfeld .gt_center {
  text-align: center;
}

#urenptfeld .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#urenptfeld .gt_font_normal {
  font-weight: normal;
}

#urenptfeld .gt_font_bold {
  font-weight: bold;
}

#urenptfeld .gt_font_italic {
  font-style: italic;
}

#urenptfeld .gt_super {
  font-size: 65%;
}

#urenptfeld .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#urenptfeld .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#urenptfeld .gt_indent_1 {
  text-indent: 5px;
}

#urenptfeld .gt_indent_2 {
  text-indent: 10px;
}

#urenptfeld .gt_indent_3 {
  text-indent: 15px;
}

#urenptfeld .gt_indent_4 {
  text-indent: 20px;
}

#urenptfeld .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="Island">Island</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Year">Year</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Adelie&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Adelie</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Chinstrap&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Chinstrap</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Gentoo&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Gentoo</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">5</td>
<td headers="Adelie_male" class="gt_row gt_right">5</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">16</td>
<td headers="Gentoo_male" class="gt_row gt_right">17</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">9</td>
<td headers="Adelie_male" class="gt_row gt_right">9</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">22</td>
<td headers="Gentoo_male" class="gt_row gt_right">23</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">20</td>
<td headers="Gentoo_male" class="gt_row gt_right">21</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">9</td>
<td headers="Adelie_male" class="gt_row gt_right">10</td>
<td headers="Chinstrap_female" class="gt_row gt_right">13</td>
<td headers="Chinstrap_male" class="gt_row gt_right">13</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">9</td>
<td headers="Chinstrap_male" class="gt_row gt_right">9</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">10</td>
<td headers="Adelie_male" class="gt_row gt_right">10</td>
<td headers="Chinstrap_female" class="gt_row gt_right">12</td>
<td headers="Chinstrap_male" class="gt_row gt_right">12</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">7</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
  </tbody>
  
  
</table>
</div>
<p>Finally we should add a title to our table. We can do this with <code>tab_header()</code></p>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb563-1"><a href="#cb563-1" tabindex="-1"></a>penguin_counts_wider <span class="sc">|&gt;</span> </span>
<span id="cb563-2"><a href="#cb563-2" tabindex="-1"></a>    <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb563-3"><a href="#cb563-3" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">.list =</span> desired_colnames) <span class="sc">|&gt;</span> </span>
<span id="cb563-4"><a href="#cb563-4" tabindex="-1"></a>  <span class="co"># md() function applies markdown styling - we can make text bold</span></span>
<span id="cb563-5"><a href="#cb563-5" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb563-6"><a href="#cb563-6" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">md</span>(<span class="st">&#39;**Adelie**&#39;</span>),</span>
<span id="cb563-7"><a href="#cb563-7" tabindex="-1"></a>    <span class="at">columns =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb563-8"><a href="#cb563-8" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb563-9"><a href="#cb563-9" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb563-10"><a href="#cb563-10" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">md</span>(<span class="st">&#39;**Chinstrap**&#39;</span>),</span>
<span id="cb563-11"><a href="#cb563-11" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">&#39;Chinstrap_female&#39;</span>, <span class="st">&#39;Chinstrap_male&#39;</span>)</span>
<span id="cb563-12"><a href="#cb563-12" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb563-13"><a href="#cb563-13" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb563-14"><a href="#cb563-14" tabindex="-1"></a>    <span class="at">label =</span>  <span class="fu">md</span>(<span class="st">&#39;**Gentoo**&#39;</span>),</span>
<span id="cb563-15"><a href="#cb563-15" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">contains</span>(<span class="st">&#39;Gentoo&#39;</span>)</span>
<span id="cb563-16"><a href="#cb563-16" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb563-17"><a href="#cb563-17" tabindex="-1"></a>   <span class="fu">tab_header</span>(</span>
<span id="cb563-18"><a href="#cb563-18" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&#39;Penguins of the Palmer Archipelago&#39;</span>,</span>
<span id="cb563-19"><a href="#cb563-19" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&#39;Data is courtesy of the palmerpenguins R package by Allison Horst&#39;</span></span>
<span id="cb563-20"><a href="#cb563-20" tabindex="-1"></a>  ) </span></code></pre></div>
<div id="rxdgxrtjca" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rxdgxrtjca table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rxdgxrtjca thead, #rxdgxrtjca tbody, #rxdgxrtjca tfoot, #rxdgxrtjca tr, #rxdgxrtjca td, #rxdgxrtjca th {
  border-style: none;
}

#rxdgxrtjca p {
  margin: 0;
  padding: 0;
}

#rxdgxrtjca .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rxdgxrtjca .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rxdgxrtjca .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rxdgxrtjca .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rxdgxrtjca .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rxdgxrtjca .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rxdgxrtjca .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rxdgxrtjca .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rxdgxrtjca .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rxdgxrtjca .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rxdgxrtjca .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rxdgxrtjca .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rxdgxrtjca .gt_spanner_row {
  border-bottom-style: hidden;
}

#rxdgxrtjca .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rxdgxrtjca .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rxdgxrtjca .gt_from_md > :first-child {
  margin-top: 0;
}

#rxdgxrtjca .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rxdgxrtjca .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rxdgxrtjca .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rxdgxrtjca .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rxdgxrtjca .gt_row_group_first td {
  border-top-width: 2px;
}

#rxdgxrtjca .gt_row_group_first th {
  border-top-width: 2px;
}

#rxdgxrtjca .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rxdgxrtjca .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rxdgxrtjca .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rxdgxrtjca .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rxdgxrtjca .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rxdgxrtjca .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rxdgxrtjca .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rxdgxrtjca .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rxdgxrtjca .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rxdgxrtjca .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rxdgxrtjca .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rxdgxrtjca .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rxdgxrtjca .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rxdgxrtjca .gt_left {
  text-align: left;
}

#rxdgxrtjca .gt_center {
  text-align: center;
}

#rxdgxrtjca .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rxdgxrtjca .gt_font_normal {
  font-weight: normal;
}

#rxdgxrtjca .gt_font_bold {
  font-weight: bold;
}

#rxdgxrtjca .gt_font_italic {
  font-style: italic;
}

#rxdgxrtjca .gt_super {
  font-size: 65%;
}

#rxdgxrtjca .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rxdgxrtjca .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rxdgxrtjca .gt_indent_1 {
  text-indent: 5px;
}

#rxdgxrtjca .gt_indent_2 {
  text-indent: 10px;
}

#rxdgxrtjca .gt_indent_3 {
  text-indent: 15px;
}

#rxdgxrtjca .gt_indent_4 {
  text-indent: 20px;
}

#rxdgxrtjca .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="8" class="gt_heading gt_title gt_font_normal" style>Penguins of the Palmer Archipelago</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="8" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Data is courtesy of the palmerpenguins R package by Allison Horst</td>
    </tr>
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="Island">Island</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Year">Year</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Adelie&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Adelie</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Chinstrap&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Chinstrap</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Gentoo&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Gentoo</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">5</td>
<td headers="Adelie_male" class="gt_row gt_right">5</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">16</td>
<td headers="Gentoo_male" class="gt_row gt_right">17</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">9</td>
<td headers="Adelie_male" class="gt_row gt_right">9</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">22</td>
<td headers="Gentoo_male" class="gt_row gt_right">23</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">20</td>
<td headers="Gentoo_male" class="gt_row gt_right">21</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">9</td>
<td headers="Adelie_male" class="gt_row gt_right">10</td>
<td headers="Chinstrap_female" class="gt_row gt_right">13</td>
<td headers="Chinstrap_male" class="gt_row gt_right">13</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">9</td>
<td headers="Chinstrap_male" class="gt_row gt_right">9</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">10</td>
<td headers="Adelie_male" class="gt_row gt_right">10</td>
<td headers="Chinstrap_female" class="gt_row gt_right">12</td>
<td headers="Chinstrap_male" class="gt_row gt_right">12</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">7</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
  </tbody>
  
  
</table>
</div>
<p>We could if we wanted wrap this into a simple function - as the headers and titles will not change across this tutorial:</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="#cb564-1" tabindex="-1"></a>labels_and_title <span class="ot">&lt;-</span> <span class="cf">function</span>(gt_tbl){</span>
<span id="cb564-2"><a href="#cb564-2" tabindex="-1"></a> gt_tbl <span class="sc">|&gt;</span> </span>
<span id="cb564-3"><a href="#cb564-3" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb564-4"><a href="#cb564-4" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">md</span>(<span class="st">&#39;**Adelie**&#39;</span>),</span>
<span id="cb564-5"><a href="#cb564-5" tabindex="-1"></a>    <span class="at">columns =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb564-6"><a href="#cb564-6" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb564-7"><a href="#cb564-7" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb564-8"><a href="#cb564-8" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">md</span>(<span class="st">&#39;**Chinstrap**&#39;</span>),</span>
<span id="cb564-9"><a href="#cb564-9" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">&#39;Chinstrap_female&#39;</span>, <span class="st">&#39;Chinstrap_male&#39;</span>)</span>
<span id="cb564-10"><a href="#cb564-10" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb564-11"><a href="#cb564-11" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb564-12"><a href="#cb564-12" tabindex="-1"></a>    <span class="at">label =</span>  <span class="fu">md</span>(<span class="st">&#39;**Gentoo**&#39;</span>),</span>
<span id="cb564-13"><a href="#cb564-13" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">contains</span>(<span class="st">&#39;Gentoo&#39;</span>)</span>
<span id="cb564-14"><a href="#cb564-14" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb564-15"><a href="#cb564-15" tabindex="-1"></a>   <span class="fu">tab_header</span>(</span>
<span id="cb564-16"><a href="#cb564-16" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&#39;Penguins of the Palmer Archipelago&#39;</span>,</span>
<span id="cb564-17"><a href="#cb564-17" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&#39;Data is courtesy of the palmerpenguins R package by Allison Horst&#39;</span></span>
<span id="cb564-18"><a href="#cb564-18" tabindex="-1"></a>  )</span>
<span id="cb564-19"><a href="#cb564-19" tabindex="-1"></a>}</span>
<span id="cb564-20"><a href="#cb564-20" tabindex="-1"></a></span>
<span id="cb564-21"><a href="#cb564-21" tabindex="-1"></a><span class="co"># This produces the same output</span></span>
<span id="cb564-22"><a href="#cb564-22" tabindex="-1"></a>penguin_counts_wider <span class="sc">|&gt;</span> </span>
<span id="cb564-23"><a href="#cb564-23" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb564-24"><a href="#cb564-24" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">.list =</span> desired_colnames)  <span class="sc">|&gt;</span> </span>
<span id="cb564-25"><a href="#cb564-25" tabindex="-1"></a>  <span class="fu">labels_and_title</span>() </span></code></pre></div>
<div id="mnljvaddas" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#mnljvaddas table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mnljvaddas thead, #mnljvaddas tbody, #mnljvaddas tfoot, #mnljvaddas tr, #mnljvaddas td, #mnljvaddas th {
  border-style: none;
}

#mnljvaddas p {
  margin: 0;
  padding: 0;
}

#mnljvaddas .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mnljvaddas .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mnljvaddas .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mnljvaddas .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mnljvaddas .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mnljvaddas .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mnljvaddas .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mnljvaddas .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mnljvaddas .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mnljvaddas .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mnljvaddas .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mnljvaddas .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mnljvaddas .gt_spanner_row {
  border-bottom-style: hidden;
}

#mnljvaddas .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mnljvaddas .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mnljvaddas .gt_from_md > :first-child {
  margin-top: 0;
}

#mnljvaddas .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mnljvaddas .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mnljvaddas .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mnljvaddas .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mnljvaddas .gt_row_group_first td {
  border-top-width: 2px;
}

#mnljvaddas .gt_row_group_first th {
  border-top-width: 2px;
}

#mnljvaddas .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mnljvaddas .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mnljvaddas .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mnljvaddas .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mnljvaddas .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mnljvaddas .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mnljvaddas .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mnljvaddas .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mnljvaddas .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mnljvaddas .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mnljvaddas .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mnljvaddas .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mnljvaddas .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mnljvaddas .gt_left {
  text-align: left;
}

#mnljvaddas .gt_center {
  text-align: center;
}

#mnljvaddas .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mnljvaddas .gt_font_normal {
  font-weight: normal;
}

#mnljvaddas .gt_font_bold {
  font-weight: bold;
}

#mnljvaddas .gt_font_italic {
  font-style: italic;
}

#mnljvaddas .gt_super {
  font-size: 65%;
}

#mnljvaddas .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mnljvaddas .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mnljvaddas .gt_indent_1 {
  text-indent: 5px;
}

#mnljvaddas .gt_indent_2 {
  text-indent: 10px;
}

#mnljvaddas .gt_indent_3 {
  text-indent: 15px;
}

#mnljvaddas .gt_indent_4 {
  text-indent: 20px;
}

#mnljvaddas .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="8" class="gt_heading gt_title gt_font_normal" style>Penguins of the Palmer Archipelago</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="8" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Data is courtesy of the palmerpenguins R package by Allison Horst</td>
    </tr>
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="Island">Island</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Year">Year</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Adelie&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Adelie</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Chinstrap&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Chinstrap</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Gentoo&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Gentoo</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">5</td>
<td headers="Adelie_male" class="gt_row gt_right">5</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">16</td>
<td headers="Gentoo_male" class="gt_row gt_right">17</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">9</td>
<td headers="Adelie_male" class="gt_row gt_right">9</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">22</td>
<td headers="Gentoo_male" class="gt_row gt_right">23</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">20</td>
<td headers="Gentoo_male" class="gt_row gt_right">21</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">9</td>
<td headers="Adelie_male" class="gt_row gt_right">10</td>
<td headers="Chinstrap_female" class="gt_row gt_right">13</td>
<td headers="Chinstrap_male" class="gt_row gt_right">13</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">9</td>
<td headers="Chinstrap_male" class="gt_row gt_right">9</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">10</td>
<td headers="Adelie_male" class="gt_row gt_right">10</td>
<td headers="Chinstrap_female" class="gt_row gt_right">12</td>
<td headers="Chinstrap_male" class="gt_row gt_right">12</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">7</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<div id="alignment" class="section level3" number="32.0.3">
<h3><span class="header-section-number">32.0.3</span> Alignment</h3>
<p>Align all text within a column using <code>cols_align()</code>. Most commonly we left-align text with varying length and right-align numbers.</p>
<p>Here's why these default alignments make sense:</p>
<ul>
<li><p>Numbers to the Right: Numeric values, such as counts, are usually aligned to the right because this aligns the decimal points and makes it easier to compare and perform calculations with numbers. It also allows for neat alignment of digits, which is particularly important when working with large datasets.</p></li>
<li><p>Text to the Left: Text data, like character vectors, is aligned to the left by default. This is because text doesn't have decimal points or numeric values to compare, and left-aligning text provides a clean and uniform appearance. It makes the start of the text easily scannable and helps maintain readability, even for lengthy text entries.</p></li>
<li><p>Center Alignment for Factors: Factors (categorical data) are aligned to the center by default. This is a compromise between left and right alignment. While the factor's entries are characters, they represent categories and are often used for grouping or sorting. Center alignment ensures that the category labels are visually centered in the available space, making it easier to identify the category while maintaining a visually appealing table.</p></li>
</ul>
<p>These default alignments are well-established conventions in table formatting and help readers quickly interpret and work with tabular data. They follow a balance between readability, aesthetics, and the nature of the data being presented.</p>
<p>Island is currently coded as a factor, we could recode this in our data, or we can use the <code>cols_align()</code> layer:</p>
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb565-1"><a href="#cb565-1" tabindex="-1"></a>penguin_counts_wider <span class="sc">|&gt;</span> </span>
<span id="cb565-2"><a href="#cb565-2" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb565-3"><a href="#cb565-3" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">.list =</span> desired_colnames) <span class="sc">|&gt;</span> </span>
<span id="cb565-4"><a href="#cb565-4" tabindex="-1"></a>  <span class="fu">labels_and_title</span>()  <span class="sc">|&gt;</span> </span>
<span id="cb565-5"><a href="#cb565-5" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="at">align =</span> <span class="st">&#39;right&#39;</span>, <span class="at">columns =</span> <span class="st">&#39;year&#39;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb565-6"><a href="#cb565-6" tabindex="-1"></a>  <span class="fu">cols_align</span>(</span>
<span id="cb565-7"><a href="#cb565-7" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">&#39;left&#39;</span>, </span>
<span id="cb565-8"><a href="#cb565-8" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">where</span>(is.factor)</span>
<span id="cb565-9"><a href="#cb565-9" tabindex="-1"></a>  ) </span></code></pre></div>
<div id="qhlqqthlkj" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qhlqqthlkj table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qhlqqthlkj thead, #qhlqqthlkj tbody, #qhlqqthlkj tfoot, #qhlqqthlkj tr, #qhlqqthlkj td, #qhlqqthlkj th {
  border-style: none;
}

#qhlqqthlkj p {
  margin: 0;
  padding: 0;
}

#qhlqqthlkj .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qhlqqthlkj .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qhlqqthlkj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qhlqqthlkj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qhlqqthlkj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qhlqqthlkj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qhlqqthlkj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qhlqqthlkj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qhlqqthlkj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qhlqqthlkj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qhlqqthlkj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qhlqqthlkj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qhlqqthlkj .gt_spanner_row {
  border-bottom-style: hidden;
}

#qhlqqthlkj .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qhlqqthlkj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qhlqqthlkj .gt_from_md > :first-child {
  margin-top: 0;
}

#qhlqqthlkj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qhlqqthlkj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qhlqqthlkj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qhlqqthlkj .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qhlqqthlkj .gt_row_group_first td {
  border-top-width: 2px;
}

#qhlqqthlkj .gt_row_group_first th {
  border-top-width: 2px;
}

#qhlqqthlkj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qhlqqthlkj .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qhlqqthlkj .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qhlqqthlkj .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qhlqqthlkj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qhlqqthlkj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qhlqqthlkj .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#qhlqqthlkj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qhlqqthlkj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qhlqqthlkj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qhlqqthlkj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qhlqqthlkj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qhlqqthlkj .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qhlqqthlkj .gt_left {
  text-align: left;
}

#qhlqqthlkj .gt_center {
  text-align: center;
}

#qhlqqthlkj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qhlqqthlkj .gt_font_normal {
  font-weight: normal;
}

#qhlqqthlkj .gt_font_bold {
  font-weight: bold;
}

#qhlqqthlkj .gt_font_italic {
  font-style: italic;
}

#qhlqqthlkj .gt_super {
  font-size: 65%;
}

#qhlqqthlkj .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qhlqqthlkj .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qhlqqthlkj .gt_indent_1 {
  text-indent: 5px;
}

#qhlqqthlkj .gt_indent_2 {
  text-indent: 10px;
}

#qhlqqthlkj .gt_indent_3 {
  text-indent: 15px;
}

#qhlqqthlkj .gt_indent_4 {
  text-indent: 20px;
}

#qhlqqthlkj .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="8" class="gt_heading gt_title gt_font_normal" style>Penguins of the Palmer Archipelago</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="8" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Data is courtesy of the palmerpenguins R package by Allison Horst</td>
    </tr>
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="Island">Island</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Year">Year</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Adelie&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Adelie</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Chinstrap&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Chinstrap</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Gentoo&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Gentoo</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">5</td>
<td headers="Adelie_male" class="gt_row gt_right">5</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">16</td>
<td headers="Gentoo_male" class="gt_row gt_right">17</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">9</td>
<td headers="Adelie_male" class="gt_row gt_right">9</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">22</td>
<td headers="Gentoo_male" class="gt_row gt_right">23</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">20</td>
<td headers="Gentoo_male" class="gt_row gt_right">21</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">9</td>
<td headers="Adelie_male" class="gt_row gt_right">10</td>
<td headers="Chinstrap_female" class="gt_row gt_right">13</td>
<td headers="Chinstrap_male" class="gt_row gt_right">13</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">9</td>
<td headers="Chinstrap_male" class="gt_row gt_right">9</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Dream</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">10</td>
<td headers="Adelie_male" class="gt_row gt_right">10</td>
<td headers="Chinstrap_female" class="gt_row gt_right">12</td>
<td headers="Chinstrap_male" class="gt_row gt_right">12</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2007</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">7</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2008</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="year" class="gt_row gt_right">2009</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<div id="move-columns-around" class="section level3" number="32.0.4">
<h3><span class="header-section-number">32.0.4</span> Move columns around</h3>
<p>Move columns to the start or end or wherever you like with <code>cols_move_*()</code> functions</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="#cb566-1" tabindex="-1"></a>penguin_counts_wider <span class="sc">|&gt;</span> </span>
<span id="cb566-2"><a href="#cb566-2" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb566-3"><a href="#cb566-3" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">.list =</span> desired_colnames) <span class="sc">|&gt;</span> </span>
<span id="cb566-4"><a href="#cb566-4" tabindex="-1"></a>  <span class="fu">labels_and_title</span>()  <span class="sc">|&gt;</span> </span>
<span id="cb566-5"><a href="#cb566-5" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="at">align =</span> <span class="st">&#39;right&#39;</span>, <span class="at">columns =</span> <span class="st">&#39;year&#39;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb566-6"><a href="#cb566-6" tabindex="-1"></a>  <span class="fu">cols_align</span>(</span>
<span id="cb566-7"><a href="#cb566-7" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">&#39;left&#39;</span>, </span>
<span id="cb566-8"><a href="#cb566-8" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">where</span>(is.factor)</span>
<span id="cb566-9"><a href="#cb566-9" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb566-10"><a href="#cb566-10" tabindex="-1"></a>  <span class="fu">cols_move_to_start</span>(<span class="at">columns =</span> <span class="fu">vars</span>(year))</span></code></pre></div>
<div id="secmdlopuj" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#secmdlopuj table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#secmdlopuj thead, #secmdlopuj tbody, #secmdlopuj tfoot, #secmdlopuj tr, #secmdlopuj td, #secmdlopuj th {
  border-style: none;
}

#secmdlopuj p {
  margin: 0;
  padding: 0;
}

#secmdlopuj .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#secmdlopuj .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#secmdlopuj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#secmdlopuj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#secmdlopuj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#secmdlopuj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#secmdlopuj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#secmdlopuj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#secmdlopuj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#secmdlopuj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#secmdlopuj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#secmdlopuj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#secmdlopuj .gt_spanner_row {
  border-bottom-style: hidden;
}

#secmdlopuj .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#secmdlopuj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#secmdlopuj .gt_from_md > :first-child {
  margin-top: 0;
}

#secmdlopuj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#secmdlopuj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#secmdlopuj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#secmdlopuj .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#secmdlopuj .gt_row_group_first td {
  border-top-width: 2px;
}

#secmdlopuj .gt_row_group_first th {
  border-top-width: 2px;
}

#secmdlopuj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#secmdlopuj .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#secmdlopuj .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#secmdlopuj .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#secmdlopuj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#secmdlopuj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#secmdlopuj .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#secmdlopuj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#secmdlopuj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#secmdlopuj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#secmdlopuj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#secmdlopuj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#secmdlopuj .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#secmdlopuj .gt_left {
  text-align: left;
}

#secmdlopuj .gt_center {
  text-align: center;
}

#secmdlopuj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#secmdlopuj .gt_font_normal {
  font-weight: normal;
}

#secmdlopuj .gt_font_bold {
  font-weight: bold;
}

#secmdlopuj .gt_font_italic {
  font-style: italic;
}

#secmdlopuj .gt_super {
  font-size: 65%;
}

#secmdlopuj .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#secmdlopuj .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#secmdlopuj .gt_indent_1 {
  text-indent: 5px;
}

#secmdlopuj .gt_indent_2 {
  text-indent: 10px;
}

#secmdlopuj .gt_indent_3 {
  text-indent: 15px;
}

#secmdlopuj .gt_indent_4 {
  text-indent: 20px;
}

#secmdlopuj .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="8" class="gt_heading gt_title gt_font_normal" style>Penguins of the Palmer Archipelago</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="8" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Data is courtesy of the palmerpenguins R package by Allison Horst</td>
    </tr>
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="Year">Year</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="Island">Island</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Adelie&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Adelie</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Chinstrap&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Chinstrap</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Gentoo&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Gentoo</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="year" class="gt_row gt_right">2007</td>
<td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="Adelie_female" class="gt_row gt_right">5</td>
<td headers="Adelie_male" class="gt_row gt_right">5</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">16</td>
<td headers="Gentoo_male" class="gt_row gt_right">17</td></tr>
    <tr><td headers="year" class="gt_row gt_right">2008</td>
<td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="Adelie_female" class="gt_row gt_right">9</td>
<td headers="Adelie_male" class="gt_row gt_right">9</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">22</td>
<td headers="Gentoo_male" class="gt_row gt_right">23</td></tr>
    <tr><td headers="year" class="gt_row gt_right">2009</td>
<td headers="island" class="gt_row gt_left">Biscoe</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">20</td>
<td headers="Gentoo_male" class="gt_row gt_right">21</td></tr>
    <tr><td headers="year" class="gt_row gt_right">2007</td>
<td headers="island" class="gt_row gt_left">Dream</td>
<td headers="Adelie_female" class="gt_row gt_right">9</td>
<td headers="Adelie_male" class="gt_row gt_right">10</td>
<td headers="Chinstrap_female" class="gt_row gt_right">13</td>
<td headers="Chinstrap_male" class="gt_row gt_right">13</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="year" class="gt_row gt_right">2008</td>
<td headers="island" class="gt_row gt_left">Dream</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">9</td>
<td headers="Chinstrap_male" class="gt_row gt_right">9</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="year" class="gt_row gt_right">2009</td>
<td headers="island" class="gt_row gt_left">Dream</td>
<td headers="Adelie_female" class="gt_row gt_right">10</td>
<td headers="Adelie_male" class="gt_row gt_right">10</td>
<td headers="Chinstrap_female" class="gt_row gt_right">12</td>
<td headers="Chinstrap_male" class="gt_row gt_right">12</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="year" class="gt_row gt_right">2007</td>
<td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">7</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="year" class="gt_row gt_right">2008</td>
<td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><td headers="year" class="gt_row gt_right">2009</td>
<td headers="island" class="gt_row gt_left">Torgersen</td>
<td headers="Adelie_female" class="gt_row gt_right">8</td>
<td headers="Adelie_male" class="gt_row gt_right">8</td>
<td headers="Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Gentoo_male" class="gt_row gt_right">0</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<div id="avoid-repetitive-information" class="section level3" number="32.0.5">
<h3><span class="header-section-number">32.0.5</span> Avoid repetitive information</h3>
<p>Removing repetitive columns and using additional rows to group data can indeed enhance the readability of a table. In the context of the <code>gt</code> package, achieving this is straightforward. Here's how you can do it with <code>group_name_col()</code> Specifying which group to use and which columns to apply this grouping to:</p>
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb567-1"><a href="#cb567-1" tabindex="-1"></a>penguin_counts_wider <span class="sc">|&gt;</span> </span>
<span id="cb567-2"><a href="#cb567-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb567-3"><a href="#cb567-3" tabindex="-1"></a>    <span class="at">island =</span> <span class="fu">as.character</span>(island), </span>
<span id="cb567-4"><a href="#cb567-4" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">as.numeric</span>(year)</span>
<span id="cb567-5"><a href="#cb567-5" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb567-6"><a href="#cb567-6" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">groupname_col =</span> <span class="st">&#39;island&#39;</span>, <span class="at">rowname_col =</span> <span class="st">&#39;year&#39;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb567-7"><a href="#cb567-7" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">.list =</span> desired_colnames) <span class="sc">|&gt;</span> </span>
<span id="cb567-8"><a href="#cb567-8" tabindex="-1"></a>  <span class="fu">labels_and_title</span>()  </span></code></pre></div>
<div id="nctzihwtrq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#nctzihwtrq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nctzihwtrq thead, #nctzihwtrq tbody, #nctzihwtrq tfoot, #nctzihwtrq tr, #nctzihwtrq td, #nctzihwtrq th {
  border-style: none;
}

#nctzihwtrq p {
  margin: 0;
  padding: 0;
}

#nctzihwtrq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nctzihwtrq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nctzihwtrq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nctzihwtrq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nctzihwtrq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nctzihwtrq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nctzihwtrq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nctzihwtrq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nctzihwtrq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nctzihwtrq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nctzihwtrq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nctzihwtrq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nctzihwtrq .gt_spanner_row {
  border-bottom-style: hidden;
}

#nctzihwtrq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nctzihwtrq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nctzihwtrq .gt_from_md > :first-child {
  margin-top: 0;
}

#nctzihwtrq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nctzihwtrq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nctzihwtrq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#nctzihwtrq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nctzihwtrq .gt_row_group_first td {
  border-top-width: 2px;
}

#nctzihwtrq .gt_row_group_first th {
  border-top-width: 2px;
}

#nctzihwtrq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nctzihwtrq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#nctzihwtrq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nctzihwtrq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nctzihwtrq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nctzihwtrq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nctzihwtrq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#nctzihwtrq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nctzihwtrq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nctzihwtrq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nctzihwtrq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nctzihwtrq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nctzihwtrq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nctzihwtrq .gt_left {
  text-align: left;
}

#nctzihwtrq .gt_center {
  text-align: center;
}

#nctzihwtrq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nctzihwtrq .gt_font_normal {
  font-weight: normal;
}

#nctzihwtrq .gt_font_bold {
  font-weight: bold;
}

#nctzihwtrq .gt_font_italic {
  font-style: italic;
}

#nctzihwtrq .gt_super {
  font-size: 65%;
}

#nctzihwtrq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nctzihwtrq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nctzihwtrq .gt_indent_1 {
  text-indent: 5px;
}

#nctzihwtrq .gt_indent_2 {
  text-indent: 10px;
}

#nctzihwtrq .gt_indent_3 {
  text-indent: 15px;
}

#nctzihwtrq .gt_indent_4 {
  text-indent: 20px;
}

#nctzihwtrq .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style>Penguins of the Palmer Archipelago</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Data is courtesy of the palmerpenguins R package by Allison Horst</td>
    </tr>
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id=""></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Adelie&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Adelie</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Chinstrap&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Chinstrap</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Gentoo&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Gentoo</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Biscoe">Biscoe</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_1" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Biscoe stub_1_1 Adelie_female" class="gt_row gt_right">5</td>
<td headers="Biscoe stub_1_1 Adelie_male" class="gt_row gt_right">5</td>
<td headers="Biscoe stub_1_1 Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Biscoe stub_1_1 Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Biscoe stub_1_1 Gentoo_female" class="gt_row gt_right">16</td>
<td headers="Biscoe stub_1_1 Gentoo_male" class="gt_row gt_right">17</td></tr>
    <tr><th id="stub_1_2" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Biscoe stub_1_2 Adelie_female" class="gt_row gt_right">9</td>
<td headers="Biscoe stub_1_2 Adelie_male" class="gt_row gt_right">9</td>
<td headers="Biscoe stub_1_2 Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Biscoe stub_1_2 Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Biscoe stub_1_2 Gentoo_female" class="gt_row gt_right">22</td>
<td headers="Biscoe stub_1_2 Gentoo_male" class="gt_row gt_right">23</td></tr>
    <tr><th id="stub_1_3" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Biscoe stub_1_3 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Biscoe stub_1_3 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Biscoe stub_1_3 Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Biscoe stub_1_3 Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Biscoe stub_1_3 Gentoo_female" class="gt_row gt_right">20</td>
<td headers="Biscoe stub_1_3 Gentoo_male" class="gt_row gt_right">21</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Dream">Dream</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_4" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Dream stub_1_4 Adelie_female" class="gt_row gt_right">9</td>
<td headers="Dream stub_1_4 Adelie_male" class="gt_row gt_right">10</td>
<td headers="Dream stub_1_4 Chinstrap_female" class="gt_row gt_right">13</td>
<td headers="Dream stub_1_4 Chinstrap_male" class="gt_row gt_right">13</td>
<td headers="Dream stub_1_4 Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Dream stub_1_4 Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><th id="stub_1_5" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Dream stub_1_5 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Dream stub_1_5 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Dream stub_1_5 Chinstrap_female" class="gt_row gt_right">9</td>
<td headers="Dream stub_1_5 Chinstrap_male" class="gt_row gt_right">9</td>
<td headers="Dream stub_1_5 Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Dream stub_1_5 Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><th id="stub_1_6" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Dream stub_1_6 Adelie_female" class="gt_row gt_right">10</td>
<td headers="Dream stub_1_6 Adelie_male" class="gt_row gt_right">10</td>
<td headers="Dream stub_1_6 Chinstrap_female" class="gt_row gt_right">12</td>
<td headers="Dream stub_1_6 Chinstrap_male" class="gt_row gt_right">12</td>
<td headers="Dream stub_1_6 Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Dream stub_1_6 Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Torgersen">Torgersen</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_7" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Torgersen stub_1_7 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Torgersen stub_1_7 Adelie_male" class="gt_row gt_right">7</td>
<td headers="Torgersen stub_1_7 Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Torgersen stub_1_7 Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Torgersen stub_1_7 Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Torgersen stub_1_7 Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><th id="stub_1_8" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Torgersen stub_1_8 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Torgersen stub_1_8 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Torgersen stub_1_8 Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Torgersen stub_1_8 Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Torgersen stub_1_8 Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Torgersen stub_1_8 Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><th id="stub_1_9" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Torgersen stub_1_9 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Torgersen stub_1_9 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Torgersen stub_1_9 Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Torgersen stub_1_9 Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Torgersen stub_1_9 Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Torgersen stub_1_9 Gentoo_male" class="gt_row gt_right">0</td></tr>
  </tbody>
  
  
</table>
</div>
<p>But an island label could be nice. The easiest way to add that to the group names is via string manipulation before <code>gt()</code> is called.</p>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="#cb568-1" tabindex="-1"></a>penguin_counts_wider <span class="sc">|&gt;</span> </span>
<span id="cb568-2"><a href="#cb568-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb568-3"><a href="#cb568-3" tabindex="-1"></a>    <span class="at">island =</span> <span class="fu">as.character</span>(island), </span>
<span id="cb568-4"><a href="#cb568-4" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">as.numeric</span>(year),</span>
<span id="cb568-5"><a href="#cb568-5" tabindex="-1"></a>    <span class="at">island =</span> <span class="fu">paste0</span>(<span class="st">&#39;Island: &#39;</span>, island)</span>
<span id="cb568-6"><a href="#cb568-6" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb568-7"><a href="#cb568-7" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">groupname_col =</span> <span class="st">&#39;island&#39;</span>, <span class="at">rowname_col =</span> <span class="st">&#39;year&#39;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb568-8"><a href="#cb568-8" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">.list =</span> desired_colnames) <span class="sc">|&gt;</span> </span>
<span id="cb568-9"><a href="#cb568-9" tabindex="-1"></a>  <span class="fu">labels_and_title</span>() </span></code></pre></div>
<div id="kyulndlxyh" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#kyulndlxyh table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#kyulndlxyh thead, #kyulndlxyh tbody, #kyulndlxyh tfoot, #kyulndlxyh tr, #kyulndlxyh td, #kyulndlxyh th {
  border-style: none;
}

#kyulndlxyh p {
  margin: 0;
  padding: 0;
}

#kyulndlxyh .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#kyulndlxyh .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#kyulndlxyh .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#kyulndlxyh .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#kyulndlxyh .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kyulndlxyh .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kyulndlxyh .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kyulndlxyh .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#kyulndlxyh .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#kyulndlxyh .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#kyulndlxyh .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#kyulndlxyh .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#kyulndlxyh .gt_spanner_row {
  border-bottom-style: hidden;
}

#kyulndlxyh .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#kyulndlxyh .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#kyulndlxyh .gt_from_md > :first-child {
  margin-top: 0;
}

#kyulndlxyh .gt_from_md > :last-child {
  margin-bottom: 0;
}

#kyulndlxyh .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#kyulndlxyh .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#kyulndlxyh .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#kyulndlxyh .gt_row_group_first td {
  border-top-width: 2px;
}

#kyulndlxyh .gt_row_group_first th {
  border-top-width: 2px;
}

#kyulndlxyh .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kyulndlxyh .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#kyulndlxyh .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#kyulndlxyh .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kyulndlxyh .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kyulndlxyh .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#kyulndlxyh .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#kyulndlxyh .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#kyulndlxyh .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kyulndlxyh .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kyulndlxyh .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kyulndlxyh .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kyulndlxyh .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kyulndlxyh .gt_left {
  text-align: left;
}

#kyulndlxyh .gt_center {
  text-align: center;
}

#kyulndlxyh .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#kyulndlxyh .gt_font_normal {
  font-weight: normal;
}

#kyulndlxyh .gt_font_bold {
  font-weight: bold;
}

#kyulndlxyh .gt_font_italic {
  font-style: italic;
}

#kyulndlxyh .gt_super {
  font-size: 65%;
}

#kyulndlxyh .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#kyulndlxyh .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#kyulndlxyh .gt_indent_1 {
  text-indent: 5px;
}

#kyulndlxyh .gt_indent_2 {
  text-indent: 10px;
}

#kyulndlxyh .gt_indent_3 {
  text-indent: 15px;
}

#kyulndlxyh .gt_indent_4 {
  text-indent: 20px;
}

#kyulndlxyh .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style>Penguins of the Palmer Archipelago</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Data is courtesy of the palmerpenguins R package by Allison Horst</td>
    </tr>
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id=""></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Adelie&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Adelie</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Chinstrap&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Chinstrap</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Gentoo&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Gentoo</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Biscoe">Island: Biscoe</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_1" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Biscoe stub_1_1 Adelie_female" class="gt_row gt_right">5</td>
<td headers="Island: Biscoe stub_1_1 Adelie_male" class="gt_row gt_right">5</td>
<td headers="Island: Biscoe stub_1_1 Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Island: Biscoe stub_1_1 Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Island: Biscoe stub_1_1 Gentoo_female" class="gt_row gt_right">16</td>
<td headers="Island: Biscoe stub_1_1 Gentoo_male" class="gt_row gt_right">17</td></tr>
    <tr><th id="stub_1_2" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Biscoe stub_1_2 Adelie_female" class="gt_row gt_right">9</td>
<td headers="Island: Biscoe stub_1_2 Adelie_male" class="gt_row gt_right">9</td>
<td headers="Island: Biscoe stub_1_2 Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Island: Biscoe stub_1_2 Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Island: Biscoe stub_1_2 Gentoo_female" class="gt_row gt_right">22</td>
<td headers="Island: Biscoe stub_1_2 Gentoo_male" class="gt_row gt_right">23</td></tr>
    <tr><th id="stub_1_3" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Biscoe stub_1_3 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Biscoe stub_1_3 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Biscoe stub_1_3 Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Island: Biscoe stub_1_3 Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Island: Biscoe stub_1_3 Gentoo_female" class="gt_row gt_right">20</td>
<td headers="Island: Biscoe stub_1_3 Gentoo_male" class="gt_row gt_right">21</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Dream">Island: Dream</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_4" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Dream stub_1_4 Adelie_female" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_4 Adelie_male" class="gt_row gt_right">10</td>
<td headers="Island: Dream stub_1_4 Chinstrap_female" class="gt_row gt_right">13</td>
<td headers="Island: Dream stub_1_4 Chinstrap_male" class="gt_row gt_right">13</td>
<td headers="Island: Dream stub_1_4 Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Island: Dream stub_1_4 Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><th id="stub_1_5" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Dream stub_1_5 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Dream stub_1_5 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Dream stub_1_5 Chinstrap_female" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_5 Chinstrap_male" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_5 Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Island: Dream stub_1_5 Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><th id="stub_1_6" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Dream stub_1_6 Adelie_female" class="gt_row gt_right">10</td>
<td headers="Island: Dream stub_1_6 Adelie_male" class="gt_row gt_right">10</td>
<td headers="Island: Dream stub_1_6 Chinstrap_female" class="gt_row gt_right">12</td>
<td headers="Island: Dream stub_1_6 Chinstrap_male" class="gt_row gt_right">12</td>
<td headers="Island: Dream stub_1_6 Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Island: Dream stub_1_6 Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Torgersen">Island: Torgersen</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_7" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Torgersen stub_1_7 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_7 Adelie_male" class="gt_row gt_right">7</td>
<td headers="Island: Torgersen stub_1_7 Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Island: Torgersen stub_1_7 Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Island: Torgersen stub_1_7 Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Island: Torgersen stub_1_7 Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><th id="stub_1_8" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Torgersen stub_1_8 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_8 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_8 Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Island: Torgersen stub_1_8 Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Island: Torgersen stub_1_8 Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Island: Torgersen stub_1_8 Gentoo_male" class="gt_row gt_right">0</td></tr>
    <tr><th id="stub_1_9" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Torgersen stub_1_9 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_9 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_9 Chinstrap_female" class="gt_row gt_right">0</td>
<td headers="Island: Torgersen stub_1_9 Chinstrap_male" class="gt_row gt_right">0</td>
<td headers="Island: Torgersen stub_1_9 Gentoo_female" class="gt_row gt_right">0</td>
<td headers="Island: Torgersen stub_1_9 Gentoo_male" class="gt_row gt_right">0</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<div id="remove-missing-numbers" class="section level3" number="32.0.6">
<h3><span class="header-section-number">32.0.6</span> Remove missing numbers</h3>
<p>If we want to remove zeroes from our table, we could use <code>dplyr</code> functions</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb569-1"><a href="#cb569-1" tabindex="-1"></a>penguin_counts_wider <span class="sc">|&gt;</span> </span>
<span id="cb569-2"><a href="#cb569-2" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb569-3"><a href="#cb569-3" tabindex="-1"></a>        <span class="at">island =</span> <span class="fu">as.character</span>(island), </span>
<span id="cb569-4"><a href="#cb569-4" tabindex="-1"></a>        <span class="at">year =</span> <span class="fu">as.numeric</span>(year),</span>
<span id="cb569-5"><a href="#cb569-5" tabindex="-1"></a>        <span class="at">island =</span> <span class="fu">paste0</span>(<span class="st">&#39;Island: &#39;</span>, island)</span>
<span id="cb569-6"><a href="#cb569-6" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb569-7"><a href="#cb569-7" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">where</span>(is.integer), <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">ifelse</span>(.x <span class="sc">&lt;=</span> <span class="dv">0</span>, <span class="st">&quot;-&quot;</span>, <span class="fu">as.character</span>(.) ))) <span class="sc">|&gt;</span> </span>
<span id="cb569-8"><a href="#cb569-8" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">groupname_col =</span> <span class="st">&#39;island&#39;</span>, <span class="at">rowname_col =</span> <span class="st">&#39;year&#39;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb569-9"><a href="#cb569-9" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">.list =</span> desired_colnames) <span class="sc">|&gt;</span> </span>
<span id="cb569-10"><a href="#cb569-10" tabindex="-1"></a>  <span class="fu">labels_and_title</span>() </span></code></pre></div>
<div id="bkqlemyktw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#bkqlemyktw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#bkqlemyktw thead, #bkqlemyktw tbody, #bkqlemyktw tfoot, #bkqlemyktw tr, #bkqlemyktw td, #bkqlemyktw th {
  border-style: none;
}

#bkqlemyktw p {
  margin: 0;
  padding: 0;
}

#bkqlemyktw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bkqlemyktw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#bkqlemyktw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bkqlemyktw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bkqlemyktw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bkqlemyktw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bkqlemyktw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bkqlemyktw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bkqlemyktw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bkqlemyktw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bkqlemyktw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bkqlemyktw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bkqlemyktw .gt_spanner_row {
  border-bottom-style: hidden;
}

#bkqlemyktw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#bkqlemyktw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bkqlemyktw .gt_from_md > :first-child {
  margin-top: 0;
}

#bkqlemyktw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bkqlemyktw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bkqlemyktw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#bkqlemyktw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#bkqlemyktw .gt_row_group_first td {
  border-top-width: 2px;
}

#bkqlemyktw .gt_row_group_first th {
  border-top-width: 2px;
}

#bkqlemyktw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bkqlemyktw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#bkqlemyktw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#bkqlemyktw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bkqlemyktw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bkqlemyktw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bkqlemyktw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#bkqlemyktw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bkqlemyktw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bkqlemyktw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bkqlemyktw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bkqlemyktw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bkqlemyktw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bkqlemyktw .gt_left {
  text-align: left;
}

#bkqlemyktw .gt_center {
  text-align: center;
}

#bkqlemyktw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bkqlemyktw .gt_font_normal {
  font-weight: normal;
}

#bkqlemyktw .gt_font_bold {
  font-weight: bold;
}

#bkqlemyktw .gt_font_italic {
  font-style: italic;
}

#bkqlemyktw .gt_super {
  font-size: 65%;
}

#bkqlemyktw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#bkqlemyktw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#bkqlemyktw .gt_indent_1 {
  text-indent: 5px;
}

#bkqlemyktw .gt_indent_2 {
  text-indent: 10px;
}

#bkqlemyktw .gt_indent_3 {
  text-indent: 15px;
}

#bkqlemyktw .gt_indent_4 {
  text-indent: 20px;
}

#bkqlemyktw .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style>Penguins of the Palmer Archipelago</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Data is courtesy of the palmerpenguins R package by Allison Horst</td>
    </tr>
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id=""></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Adelie&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Adelie</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Chinstrap&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Chinstrap</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Gentoo&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Gentoo</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Biscoe">Island: Biscoe</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_1" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Biscoe stub_1_1 Adelie_female" class="gt_row gt_right">5</td>
<td headers="Island: Biscoe stub_1_1 Adelie_male" class="gt_row gt_right">5</td>
<td headers="Island: Biscoe stub_1_1 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_1 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_1 Gentoo_female" class="gt_row gt_right">16</td>
<td headers="Island: Biscoe stub_1_1 Gentoo_male" class="gt_row gt_right">17</td></tr>
    <tr><th id="stub_1_2" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Biscoe stub_1_2 Adelie_female" class="gt_row gt_right">9</td>
<td headers="Island: Biscoe stub_1_2 Adelie_male" class="gt_row gt_right">9</td>
<td headers="Island: Biscoe stub_1_2 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_2 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_2 Gentoo_female" class="gt_row gt_right">22</td>
<td headers="Island: Biscoe stub_1_2 Gentoo_male" class="gt_row gt_right">23</td></tr>
    <tr><th id="stub_1_3" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Biscoe stub_1_3 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Biscoe stub_1_3 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Biscoe stub_1_3 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_3 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_3 Gentoo_female" class="gt_row gt_right">20</td>
<td headers="Island: Biscoe stub_1_3 Gentoo_male" class="gt_row gt_right">21</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Dream">Island: Dream</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_4" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Dream stub_1_4 Adelie_female" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_4 Adelie_male" class="gt_row gt_right">10</td>
<td headers="Island: Dream stub_1_4 Chinstrap_female" class="gt_row gt_right">13</td>
<td headers="Island: Dream stub_1_4 Chinstrap_male" class="gt_row gt_right">13</td>
<td headers="Island: Dream stub_1_4 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Dream stub_1_4 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_5" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Dream stub_1_5 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Dream stub_1_5 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Dream stub_1_5 Chinstrap_female" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_5 Chinstrap_male" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_5 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Dream stub_1_5 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_6" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Dream stub_1_6 Adelie_female" class="gt_row gt_right">10</td>
<td headers="Island: Dream stub_1_6 Adelie_male" class="gt_row gt_right">10</td>
<td headers="Island: Dream stub_1_6 Chinstrap_female" class="gt_row gt_right">12</td>
<td headers="Island: Dream stub_1_6 Chinstrap_male" class="gt_row gt_right">12</td>
<td headers="Island: Dream stub_1_6 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Dream stub_1_6 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Torgersen">Island: Torgersen</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_7" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Torgersen stub_1_7 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_7 Adelie_male" class="gt_row gt_right">7</td>
<td headers="Island: Torgersen stub_1_7 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_8" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Torgersen stub_1_8 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_8 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_8 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_8 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_8 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_8 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_9" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Torgersen stub_1_9 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_9 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_9 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Gentoo_male" class="gt_row gt_right">-</td></tr>
  </tbody>
  
  
</table>
</div>
<p>Or we can accomplish the same thing by adding a <code>sub_zero()</code> layer</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="#cb570-1" tabindex="-1"></a>penguin_counts_wider <span class="sc">|&gt;</span> </span>
<span id="cb570-2"><a href="#cb570-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb570-3"><a href="#cb570-3" tabindex="-1"></a>    <span class="at">island =</span> <span class="fu">as.character</span>(island), </span>
<span id="cb570-4"><a href="#cb570-4" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">as.numeric</span>(year),</span>
<span id="cb570-5"><a href="#cb570-5" tabindex="-1"></a>    <span class="at">island =</span> <span class="fu">paste0</span>(<span class="st">&#39;Island: &#39;</span>, island)</span>
<span id="cb570-6"><a href="#cb570-6" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb570-7"><a href="#cb570-7" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">groupname_col =</span> <span class="st">&#39;island&#39;</span>, <span class="at">rowname_col =</span> <span class="st">&#39;year&#39;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb570-8"><a href="#cb570-8" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">.list =</span> desired_colnames) <span class="sc">|&gt;</span> </span>
<span id="cb570-9"><a href="#cb570-9" tabindex="-1"></a>  <span class="fu">labels_and_title</span>()  <span class="sc">|&gt;</span> </span>
<span id="cb570-10"><a href="#cb570-10" tabindex="-1"></a>  <span class="fu">sub_zero</span>(<span class="at">zero_text =</span> <span class="st">&#39;-&#39;</span>)</span></code></pre></div>
<div id="sbbnszofwt" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#sbbnszofwt table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#sbbnszofwt thead, #sbbnszofwt tbody, #sbbnszofwt tfoot, #sbbnszofwt tr, #sbbnszofwt td, #sbbnszofwt th {
  border-style: none;
}

#sbbnszofwt p {
  margin: 0;
  padding: 0;
}

#sbbnszofwt .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#sbbnszofwt .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#sbbnszofwt .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#sbbnszofwt .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#sbbnszofwt .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#sbbnszofwt .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#sbbnszofwt .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#sbbnszofwt .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#sbbnszofwt .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#sbbnszofwt .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#sbbnszofwt .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#sbbnszofwt .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#sbbnszofwt .gt_spanner_row {
  border-bottom-style: hidden;
}

#sbbnszofwt .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#sbbnszofwt .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#sbbnszofwt .gt_from_md > :first-child {
  margin-top: 0;
}

#sbbnszofwt .gt_from_md > :last-child {
  margin-bottom: 0;
}

#sbbnszofwt .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#sbbnszofwt .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#sbbnszofwt .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#sbbnszofwt .gt_row_group_first td {
  border-top-width: 2px;
}

#sbbnszofwt .gt_row_group_first th {
  border-top-width: 2px;
}

#sbbnszofwt .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#sbbnszofwt .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#sbbnszofwt .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#sbbnszofwt .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#sbbnszofwt .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#sbbnszofwt .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#sbbnszofwt .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#sbbnszofwt .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#sbbnszofwt .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#sbbnszofwt .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#sbbnszofwt .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#sbbnszofwt .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#sbbnszofwt .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#sbbnszofwt .gt_left {
  text-align: left;
}

#sbbnszofwt .gt_center {
  text-align: center;
}

#sbbnszofwt .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#sbbnszofwt .gt_font_normal {
  font-weight: normal;
}

#sbbnszofwt .gt_font_bold {
  font-weight: bold;
}

#sbbnszofwt .gt_font_italic {
  font-style: italic;
}

#sbbnszofwt .gt_super {
  font-size: 65%;
}

#sbbnszofwt .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#sbbnszofwt .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#sbbnszofwt .gt_indent_1 {
  text-indent: 5px;
}

#sbbnszofwt .gt_indent_2 {
  text-indent: 10px;
}

#sbbnszofwt .gt_indent_3 {
  text-indent: 15px;
}

#sbbnszofwt .gt_indent_4 {
  text-indent: 20px;
}

#sbbnszofwt .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style>Penguins of the Palmer Archipelago</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Data is courtesy of the palmerpenguins R package by Allison Horst</td>
    </tr>
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id=""></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Adelie&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Adelie</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Chinstrap&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Chinstrap</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Gentoo&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Gentoo</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Biscoe">Island: Biscoe</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_1" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Biscoe stub_1_1 Adelie_female" class="gt_row gt_right">5</td>
<td headers="Island: Biscoe stub_1_1 Adelie_male" class="gt_row gt_right">5</td>
<td headers="Island: Biscoe stub_1_1 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_1 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_1 Gentoo_female" class="gt_row gt_right">16</td>
<td headers="Island: Biscoe stub_1_1 Gentoo_male" class="gt_row gt_right">17</td></tr>
    <tr><th id="stub_1_2" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Biscoe stub_1_2 Adelie_female" class="gt_row gt_right">9</td>
<td headers="Island: Biscoe stub_1_2 Adelie_male" class="gt_row gt_right">9</td>
<td headers="Island: Biscoe stub_1_2 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_2 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_2 Gentoo_female" class="gt_row gt_right">22</td>
<td headers="Island: Biscoe stub_1_2 Gentoo_male" class="gt_row gt_right">23</td></tr>
    <tr><th id="stub_1_3" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Biscoe stub_1_3 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Biscoe stub_1_3 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Biscoe stub_1_3 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_3 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_3 Gentoo_female" class="gt_row gt_right">20</td>
<td headers="Island: Biscoe stub_1_3 Gentoo_male" class="gt_row gt_right">21</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Dream">Island: Dream</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_4" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Dream stub_1_4 Adelie_female" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_4 Adelie_male" class="gt_row gt_right">10</td>
<td headers="Island: Dream stub_1_4 Chinstrap_female" class="gt_row gt_right">13</td>
<td headers="Island: Dream stub_1_4 Chinstrap_male" class="gt_row gt_right">13</td>
<td headers="Island: Dream stub_1_4 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Dream stub_1_4 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_5" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Dream stub_1_5 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Dream stub_1_5 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Dream stub_1_5 Chinstrap_female" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_5 Chinstrap_male" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_5 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Dream stub_1_5 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_6" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Dream stub_1_6 Adelie_female" class="gt_row gt_right">10</td>
<td headers="Island: Dream stub_1_6 Adelie_male" class="gt_row gt_right">10</td>
<td headers="Island: Dream stub_1_6 Chinstrap_female" class="gt_row gt_right">12</td>
<td headers="Island: Dream stub_1_6 Chinstrap_male" class="gt_row gt_right">12</td>
<td headers="Island: Dream stub_1_6 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Dream stub_1_6 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Torgersen">Island: Torgersen</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_7" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Torgersen stub_1_7 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_7 Adelie_male" class="gt_row gt_right">7</td>
<td headers="Island: Torgersen stub_1_7 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_8" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Torgersen stub_1_8 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_8 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_8 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_8 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_8 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_8 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_9" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Torgersen stub_1_9 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_9 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_9 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Gentoo_male" class="gt_row gt_right">-</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<div id="add-summaries" class="section level3" number="32.0.7">
<h3><span class="header-section-number">32.0.7</span> Add summaries</h3>
<p>If we think it is necessary we could even add some summaries to the tables with <code>summary_rows()</code>.
Sub-zero doesn't seem to work in the summaries, so we have to include a workaround:</p>
<div class="sourceCode" id="cb571"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb571-1"><a href="#cb571-1" tabindex="-1"></a>penguin_counts_wider <span class="sc">|&gt;</span> </span>
<span id="cb571-2"><a href="#cb571-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb571-3"><a href="#cb571-3" tabindex="-1"></a>    <span class="at">island =</span> <span class="fu">as.character</span>(island), </span>
<span id="cb571-4"><a href="#cb571-4" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">as.numeric</span>(year),</span>
<span id="cb571-5"><a href="#cb571-5" tabindex="-1"></a>    <span class="at">island =</span> <span class="fu">paste0</span>(<span class="st">&#39;Island: &#39;</span>, island)</span>
<span id="cb571-6"><a href="#cb571-6" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb571-7"><a href="#cb571-7" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">groupname_col =</span> <span class="st">&#39;island&#39;</span>, <span class="at">rowname_col =</span> <span class="st">&#39;year&#39;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb571-8"><a href="#cb571-8" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">.list =</span> desired_colnames) <span class="sc">|&gt;</span> </span>
<span id="cb571-9"><a href="#cb571-9" tabindex="-1"></a>  <span class="fu">labels_and_title</span>()  <span class="sc">|&gt;</span> </span>
<span id="cb571-10"><a href="#cb571-10" tabindex="-1"></a>  <span class="fu">sub_zero</span>(<span class="at">zero_text =</span> <span class="st">&#39;-&#39;</span>)<span class="sc">|&gt;</span></span>
<span id="cb571-11"><a href="#cb571-11" tabindex="-1"></a>   <span class="fu">summary_rows</span>(</span>
<span id="cb571-12"><a href="#cb571-12" tabindex="-1"></a>    <span class="at">groups =</span> <span class="fu">everything</span>(),</span>
<span id="cb571-13"><a href="#cb571-13" tabindex="-1"></a>   <span class="at">fns =</span> <span class="fu">list</span>(</span>
<span id="cb571-14"><a href="#cb571-14" tabindex="-1"></a>      <span class="st">&quot;Mean&quot;</span> <span class="ot">=</span> <span class="er">~</span><span class="fu">na_if</span>(<span class="fu">mean</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">0</span>),</span>
<span id="cb571-15"><a href="#cb571-15" tabindex="-1"></a>      <span class="st">&quot;Total&quot;</span> <span class="ot">=</span> <span class="er">~</span><span class="fu">na_if</span>(<span class="fu">sum</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">0</span>)</span>
<span id="cb571-16"><a href="#cb571-16" tabindex="-1"></a>    ),</span>
<span id="cb571-17"><a href="#cb571-17" tabindex="-1"></a>    <span class="at">fmt =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="fu">fmt_number</span>(., <span class="at">decimals =</span> <span class="dv">0</span>)),</span>
<span id="cb571-18"><a href="#cb571-18" tabindex="-1"></a>    <span class="at">missing_text =</span> <span class="st">&quot;-&quot;</span>)</span></code></pre></div>
<div id="akqawfulxx" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#akqawfulxx table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#akqawfulxx thead, #akqawfulxx tbody, #akqawfulxx tfoot, #akqawfulxx tr, #akqawfulxx td, #akqawfulxx th {
  border-style: none;
}

#akqawfulxx p {
  margin: 0;
  padding: 0;
}

#akqawfulxx .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#akqawfulxx .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#akqawfulxx .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#akqawfulxx .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#akqawfulxx .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#akqawfulxx .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#akqawfulxx .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#akqawfulxx .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#akqawfulxx .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#akqawfulxx .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#akqawfulxx .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#akqawfulxx .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#akqawfulxx .gt_spanner_row {
  border-bottom-style: hidden;
}

#akqawfulxx .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#akqawfulxx .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#akqawfulxx .gt_from_md > :first-child {
  margin-top: 0;
}

#akqawfulxx .gt_from_md > :last-child {
  margin-bottom: 0;
}

#akqawfulxx .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#akqawfulxx .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#akqawfulxx .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#akqawfulxx .gt_row_group_first td {
  border-top-width: 2px;
}

#akqawfulxx .gt_row_group_first th {
  border-top-width: 2px;
}

#akqawfulxx .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#akqawfulxx .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#akqawfulxx .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#akqawfulxx .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#akqawfulxx .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#akqawfulxx .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#akqawfulxx .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#akqawfulxx .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#akqawfulxx .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#akqawfulxx .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#akqawfulxx .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#akqawfulxx .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#akqawfulxx .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#akqawfulxx .gt_left {
  text-align: left;
}

#akqawfulxx .gt_center {
  text-align: center;
}

#akqawfulxx .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#akqawfulxx .gt_font_normal {
  font-weight: normal;
}

#akqawfulxx .gt_font_bold {
  font-weight: bold;
}

#akqawfulxx .gt_font_italic {
  font-style: italic;
}

#akqawfulxx .gt_super {
  font-size: 65%;
}

#akqawfulxx .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#akqawfulxx .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#akqawfulxx .gt_indent_1 {
  text-indent: 5px;
}

#akqawfulxx .gt_indent_2 {
  text-indent: 10px;
}

#akqawfulxx .gt_indent_3 {
  text-indent: 15px;
}

#akqawfulxx .gt_indent_4 {
  text-indent: 20px;
}

#akqawfulxx .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style>Penguins of the Palmer Archipelago</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Data is courtesy of the palmerpenguins R package by Allison Horst</td>
    </tr>
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id=""></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Adelie&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Adelie</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Chinstrap&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Chinstrap</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Gentoo&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Gentoo</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Biscoe">Island: Biscoe</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_1" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Biscoe stub_1_1 Adelie_female" class="gt_row gt_right">5</td>
<td headers="Island: Biscoe stub_1_1 Adelie_male" class="gt_row gt_right">5</td>
<td headers="Island: Biscoe stub_1_1 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_1 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_1 Gentoo_female" class="gt_row gt_right">16</td>
<td headers="Island: Biscoe stub_1_1 Gentoo_male" class="gt_row gt_right">17</td></tr>
    <tr><th id="stub_1_2" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Biscoe stub_1_2 Adelie_female" class="gt_row gt_right">9</td>
<td headers="Island: Biscoe stub_1_2 Adelie_male" class="gt_row gt_right">9</td>
<td headers="Island: Biscoe stub_1_2 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_2 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_2 Gentoo_female" class="gt_row gt_right">22</td>
<td headers="Island: Biscoe stub_1_2 Gentoo_male" class="gt_row gt_right">23</td></tr>
    <tr><th id="stub_1_3" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Biscoe stub_1_3 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Biscoe stub_1_3 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Biscoe stub_1_3 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_3 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_3 Gentoo_female" class="gt_row gt_right">20</td>
<td headers="Island: Biscoe stub_1_3 Gentoo_male" class="gt_row gt_right">21</td></tr>
    <tr><th id="summary_stub_Island: Biscoe_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick">Mean</th>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Adelie_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">7</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Adelie_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">7</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Gentoo_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">19</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Gentoo_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">20</td></tr>
    <tr><th id="summary_stub_Island: Biscoe_2" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_last_summary_row">Total</th>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Adelie_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">22</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Adelie_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">22</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Gentoo_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">58</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Gentoo_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">61</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Dream">Island: Dream</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_4" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Dream stub_1_4 Adelie_female" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_4 Adelie_male" class="gt_row gt_right">10</td>
<td headers="Island: Dream stub_1_4 Chinstrap_female" class="gt_row gt_right">13</td>
<td headers="Island: Dream stub_1_4 Chinstrap_male" class="gt_row gt_right">13</td>
<td headers="Island: Dream stub_1_4 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Dream stub_1_4 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_5" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Dream stub_1_5 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Dream stub_1_5 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Dream stub_1_5 Chinstrap_female" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_5 Chinstrap_male" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_5 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Dream stub_1_5 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_6" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Dream stub_1_6 Adelie_female" class="gt_row gt_right">10</td>
<td headers="Island: Dream stub_1_6 Adelie_male" class="gt_row gt_right">10</td>
<td headers="Island: Dream stub_1_6 Chinstrap_female" class="gt_row gt_right">12</td>
<td headers="Island: Dream stub_1_6 Chinstrap_male" class="gt_row gt_right">12</td>
<td headers="Island: Dream stub_1_6 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Dream stub_1_6 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="summary_stub_Island: Dream_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick">Mean</th>
<td headers="Island: Dream summary_stub_Island: Dream_1 Adelie_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">9</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Adelie_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">9</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">11</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">11</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Gentoo_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Gentoo_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td></tr>
    <tr><th id="summary_stub_Island: Dream_2" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_last_summary_row">Total</th>
<td headers="Island: Dream summary_stub_Island: Dream_2 Adelie_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">27</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Adelie_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">28</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">34</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">34</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Gentoo_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Gentoo_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Torgersen">Island: Torgersen</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_7" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Torgersen stub_1_7 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_7 Adelie_male" class="gt_row gt_right">7</td>
<td headers="Island: Torgersen stub_1_7 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_8" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Torgersen stub_1_8 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_8 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_8 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_8 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_8 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_8 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_9" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Torgersen stub_1_9 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_9 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_9 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="summary_stub_Island: Torgersen_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick">Mean</th>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Adelie_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">8</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Adelie_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">8</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Gentoo_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Gentoo_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td></tr>
    <tr><th id="summary_stub_Island: Torgersen_2" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_last_summary_row">Total</th>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Adelie_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">24</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Adelie_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">23</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Gentoo_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Gentoo_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<div id="stylise" class="section level3" number="32.0.8">
<h3><span class="header-section-number">32.0.8</span> Stylise</h3>
<p>With the additional information incorporated into the table, it has grown in length, which may not be ideal. To address this, we can make the table more concise by decreasing the row heights.</p>
<p>To achieve this, we can adjust the so-called <code>data_row.padding</code> to 2 pixels. You can accomplish this using the <code>tab_options()</code> function, which is a central layer for styling the table. Similarly, there are padding options available for <code>summary_row</code> and <code>row_group</code>. While we're at it, it's a good idea to enhance the table's appearance by applying a predefined theme using <code>opt_stylize()</code>.</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb572-1"><a href="#cb572-1" tabindex="-1"></a>penguin_counts_wider <span class="sc">|&gt;</span> </span>
<span id="cb572-2"><a href="#cb572-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb572-3"><a href="#cb572-3" tabindex="-1"></a>    <span class="at">island =</span> <span class="fu">as.character</span>(island), </span>
<span id="cb572-4"><a href="#cb572-4" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">as.numeric</span>(year),</span>
<span id="cb572-5"><a href="#cb572-5" tabindex="-1"></a>    <span class="at">island =</span> <span class="fu">paste0</span>(<span class="st">&#39;Island: &#39;</span>, island)</span>
<span id="cb572-6"><a href="#cb572-6" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb572-7"><a href="#cb572-7" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">groupname_col =</span> <span class="st">&#39;island&#39;</span>, <span class="at">rowname_col =</span> <span class="st">&#39;year&#39;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb572-8"><a href="#cb572-8" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">.list =</span> desired_colnames) <span class="sc">|&gt;</span> </span>
<span id="cb572-9"><a href="#cb572-9" tabindex="-1"></a>  <span class="fu">labels_and_title</span>()  <span class="sc">|&gt;</span> </span>
<span id="cb572-10"><a href="#cb572-10" tabindex="-1"></a>  <span class="fu">sub_zero</span>(<span class="at">zero_text =</span> <span class="st">&#39;-&#39;</span>)<span class="sc">|&gt;</span></span>
<span id="cb572-11"><a href="#cb572-11" tabindex="-1"></a>   <span class="fu">summary_rows</span>(</span>
<span id="cb572-12"><a href="#cb572-12" tabindex="-1"></a>    <span class="at">groups =</span> <span class="fu">everything</span>(),</span>
<span id="cb572-13"><a href="#cb572-13" tabindex="-1"></a>   <span class="at">fns =</span> <span class="fu">list</span>(</span>
<span id="cb572-14"><a href="#cb572-14" tabindex="-1"></a>      <span class="st">&quot;Mean&quot;</span> <span class="ot">=</span> <span class="er">~</span><span class="fu">na_if</span>(<span class="fu">mean</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">0</span>),</span>
<span id="cb572-15"><a href="#cb572-15" tabindex="-1"></a>      <span class="st">&quot;Total&quot;</span> <span class="ot">=</span> <span class="er">~</span><span class="fu">na_if</span>(<span class="fu">sum</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">0</span>)</span>
<span id="cb572-16"><a href="#cb572-16" tabindex="-1"></a>    ),</span>
<span id="cb572-17"><a href="#cb572-17" tabindex="-1"></a>    <span class="at">fmt =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="fu">fmt_number</span>(., <span class="at">decimals =</span> <span class="dv">0</span>)),</span>
<span id="cb572-18"><a href="#cb572-18" tabindex="-1"></a>    <span class="at">missing_text =</span> <span class="st">&quot;-&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb572-19"><a href="#cb572-19" tabindex="-1"></a>    <span class="fu">tab_options</span>(</span>
<span id="cb572-20"><a href="#cb572-20" tabindex="-1"></a>    <span class="at">data_row.padding =</span> <span class="fu">px</span>(<span class="dv">2</span>),</span>
<span id="cb572-21"><a href="#cb572-21" tabindex="-1"></a>    <span class="at">summary_row.padding =</span> <span class="fu">px</span>(<span class="dv">3</span>), <span class="co"># A bit more padding for summaries</span></span>
<span id="cb572-22"><a href="#cb572-22" tabindex="-1"></a>    <span class="at">row_group.padding =</span> <span class="fu">px</span>(<span class="dv">4</span>)    <span class="co"># And even more for our groups</span></span>
<span id="cb572-23"><a href="#cb572-23" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb572-24"><a href="#cb572-24" tabindex="-1"></a>  <span class="fu">opt_stylize</span>(<span class="at">style =</span> <span class="dv">6</span>, <span class="at">color =</span> <span class="st">&#39;gray&#39;</span>)</span></code></pre></div>
<div id="vvtesztqjy" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#vvtesztqjy table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#vvtesztqjy thead, #vvtesztqjy tbody, #vvtesztqjy tfoot, #vvtesztqjy tr, #vvtesztqjy td, #vvtesztqjy th {
  border-style: none;
}

#vvtesztqjy p {
  margin: 0;
  padding: 0;
}

#vvtesztqjy .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vvtesztqjy .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#vvtesztqjy .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vvtesztqjy .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vvtesztqjy .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vvtesztqjy .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#vvtesztqjy .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vvtesztqjy .gt_col_heading {
  color: #FFFFFF;
  background-color: #5F5F5F;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vvtesztqjy .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #5F5F5F;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vvtesztqjy .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vvtesztqjy .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vvtesztqjy .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vvtesztqjy .gt_spanner_row {
  border-bottom-style: hidden;
}

#vvtesztqjy .gt_group_heading {
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#vvtesztqjy .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#vvtesztqjy .gt_from_md > :first-child {
  margin-top: 0;
}

#vvtesztqjy .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vvtesztqjy .gt_row {
  padding-top: 2px;
  padding-bottom: 2px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#vvtesztqjy .gt_stub {
  color: #333333;
  background-color: #D5D5D5;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#vvtesztqjy .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#vvtesztqjy .gt_row_group_first td {
  border-top-width: 2px;
}

#vvtesztqjy .gt_row_group_first th {
  border-top-width: 2px;
}

#vvtesztqjy .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
}

#vvtesztqjy .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#vvtesztqjy .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#vvtesztqjy .gt_last_summary_row {
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#vvtesztqjy .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vvtesztqjy .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#vvtesztqjy .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#vvtesztqjy .gt_striped {
  background-color: #F4F4F4;
}

#vvtesztqjy .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#vvtesztqjy .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vvtesztqjy .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vvtesztqjy .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vvtesztqjy .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vvtesztqjy .gt_left {
  text-align: left;
}

#vvtesztqjy .gt_center {
  text-align: center;
}

#vvtesztqjy .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vvtesztqjy .gt_font_normal {
  font-weight: normal;
}

#vvtesztqjy .gt_font_bold {
  font-weight: bold;
}

#vvtesztqjy .gt_font_italic {
  font-style: italic;
}

#vvtesztqjy .gt_super {
  font-size: 65%;
}

#vvtesztqjy .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#vvtesztqjy .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#vvtesztqjy .gt_indent_1 {
  text-indent: 5px;
}

#vvtesztqjy .gt_indent_2 {
  text-indent: 10px;
}

#vvtesztqjy .gt_indent_3 {
  text-indent: 15px;
}

#vvtesztqjy .gt_indent_4 {
  text-indent: 20px;
}

#vvtesztqjy .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style>Penguins of the Palmer Archipelago</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Data is courtesy of the palmerpenguins R package by Allison Horst</td>
    </tr>
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id=""></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Adelie&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Adelie</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Chinstrap&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Chinstrap</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Gentoo&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Gentoo</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Biscoe">Island: Biscoe</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_1" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Biscoe stub_1_1 Adelie_female" class="gt_row gt_right">5</td>
<td headers="Island: Biscoe stub_1_1 Adelie_male" class="gt_row gt_right">5</td>
<td headers="Island: Biscoe stub_1_1 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_1 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_1 Gentoo_female" class="gt_row gt_right">16</td>
<td headers="Island: Biscoe stub_1_1 Gentoo_male" class="gt_row gt_right">17</td></tr>
    <tr><th id="stub_1_2" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Biscoe stub_1_2 Adelie_female" class="gt_row gt_right gt_striped">9</td>
<td headers="Island: Biscoe stub_1_2 Adelie_male" class="gt_row gt_right gt_striped">9</td>
<td headers="Island: Biscoe stub_1_2 Chinstrap_female" class="gt_row gt_right gt_striped">-</td>
<td headers="Island: Biscoe stub_1_2 Chinstrap_male" class="gt_row gt_right gt_striped">-</td>
<td headers="Island: Biscoe stub_1_2 Gentoo_female" class="gt_row gt_right gt_striped">22</td>
<td headers="Island: Biscoe stub_1_2 Gentoo_male" class="gt_row gt_right gt_striped">23</td></tr>
    <tr><th id="stub_1_3" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Biscoe stub_1_3 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Biscoe stub_1_3 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Biscoe stub_1_3 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_3 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_3 Gentoo_female" class="gt_row gt_right">20</td>
<td headers="Island: Biscoe stub_1_3 Gentoo_male" class="gt_row gt_right">21</td></tr>
    <tr><th id="summary_stub_Island: Biscoe_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick">Mean</th>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Adelie_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">7</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Adelie_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">7</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Gentoo_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">19</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Gentoo_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">20</td></tr>
    <tr><th id="summary_stub_Island: Biscoe_2" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_last_summary_row">Total</th>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Adelie_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">22</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Adelie_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">22</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Gentoo_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">58</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Gentoo_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">61</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Dream">Island: Dream</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_4" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Dream stub_1_4 Adelie_female" class="gt_row gt_right gt_striped">9</td>
<td headers="Island: Dream stub_1_4 Adelie_male" class="gt_row gt_right gt_striped">10</td>
<td headers="Island: Dream stub_1_4 Chinstrap_female" class="gt_row gt_right gt_striped">13</td>
<td headers="Island: Dream stub_1_4 Chinstrap_male" class="gt_row gt_right gt_striped">13</td>
<td headers="Island: Dream stub_1_4 Gentoo_female" class="gt_row gt_right gt_striped">-</td>
<td headers="Island: Dream stub_1_4 Gentoo_male" class="gt_row gt_right gt_striped">-</td></tr>
    <tr><th id="stub_1_5" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Dream stub_1_5 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Dream stub_1_5 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Dream stub_1_5 Chinstrap_female" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_5 Chinstrap_male" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_5 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Dream stub_1_5 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_6" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Dream stub_1_6 Adelie_female" class="gt_row gt_right gt_striped">10</td>
<td headers="Island: Dream stub_1_6 Adelie_male" class="gt_row gt_right gt_striped">10</td>
<td headers="Island: Dream stub_1_6 Chinstrap_female" class="gt_row gt_right gt_striped">12</td>
<td headers="Island: Dream stub_1_6 Chinstrap_male" class="gt_row gt_right gt_striped">12</td>
<td headers="Island: Dream stub_1_6 Gentoo_female" class="gt_row gt_right gt_striped">-</td>
<td headers="Island: Dream stub_1_6 Gentoo_male" class="gt_row gt_right gt_striped">-</td></tr>
    <tr><th id="summary_stub_Island: Dream_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick">Mean</th>
<td headers="Island: Dream summary_stub_Island: Dream_1 Adelie_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">9</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Adelie_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">9</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">11</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">11</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Gentoo_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Gentoo_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td></tr>
    <tr><th id="summary_stub_Island: Dream_2" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_last_summary_row">Total</th>
<td headers="Island: Dream summary_stub_Island: Dream_2 Adelie_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">27</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Adelie_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">28</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">34</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">34</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Gentoo_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Gentoo_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Torgersen">Island: Torgersen</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_7" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Torgersen stub_1_7 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_7 Adelie_male" class="gt_row gt_right">7</td>
<td headers="Island: Torgersen stub_1_7 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_8" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Torgersen stub_1_8 Adelie_female" class="gt_row gt_right gt_striped">8</td>
<td headers="Island: Torgersen stub_1_8 Adelie_male" class="gt_row gt_right gt_striped">8</td>
<td headers="Island: Torgersen stub_1_8 Chinstrap_female" class="gt_row gt_right gt_striped">-</td>
<td headers="Island: Torgersen stub_1_8 Chinstrap_male" class="gt_row gt_right gt_striped">-</td>
<td headers="Island: Torgersen stub_1_8 Gentoo_female" class="gt_row gt_right gt_striped">-</td>
<td headers="Island: Torgersen stub_1_8 Gentoo_male" class="gt_row gt_right gt_striped">-</td></tr>
    <tr><th id="stub_1_9" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Torgersen stub_1_9 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_9 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_9 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="summary_stub_Island: Torgersen_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick">Mean</th>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Adelie_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">8</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Adelie_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">8</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Gentoo_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Gentoo_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td></tr>
    <tr><th id="summary_stub_Island: Torgersen_2" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_last_summary_row">Total</th>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Adelie_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">24</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Adelie_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">23</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Gentoo_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Gentoo_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<div id="use-appropriate-colour" class="section level3" number="32.0.9">
<h3><span class="header-section-number">32.0.9</span> Use appropriate colour</h3>
<p>So far, our table hasn’t used any color. We’ll add some now to highlight outlier values.</p>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb573-1"><a href="#cb573-1" tabindex="-1"></a>penguin_counts_wider <span class="sc">|&gt;</span> </span>
<span id="cb573-2"><a href="#cb573-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb573-3"><a href="#cb573-3" tabindex="-1"></a>    <span class="at">island =</span> <span class="fu">as.character</span>(island), </span>
<span id="cb573-4"><a href="#cb573-4" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">as.numeric</span>(year),</span>
<span id="cb573-5"><a href="#cb573-5" tabindex="-1"></a>    <span class="at">island =</span> <span class="fu">paste0</span>(<span class="st">&#39;Island: &#39;</span>, island)</span>
<span id="cb573-6"><a href="#cb573-6" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb573-7"><a href="#cb573-7" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">groupname_col =</span> <span class="st">&#39;island&#39;</span>, <span class="at">rowname_col =</span> <span class="st">&#39;year&#39;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb573-8"><a href="#cb573-8" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">.list =</span> desired_colnames) <span class="sc">|&gt;</span> </span>
<span id="cb573-9"><a href="#cb573-9" tabindex="-1"></a>  <span class="fu">labels_and_title</span>()  <span class="sc">|&gt;</span> </span>
<span id="cb573-10"><a href="#cb573-10" tabindex="-1"></a>  <span class="fu">sub_zero</span>(<span class="at">zero_text =</span> <span class="st">&#39;-&#39;</span>)<span class="sc">|&gt;</span></span>
<span id="cb573-11"><a href="#cb573-11" tabindex="-1"></a>   <span class="fu">summary_rows</span>(</span>
<span id="cb573-12"><a href="#cb573-12" tabindex="-1"></a>    <span class="at">groups =</span> <span class="fu">everything</span>(),</span>
<span id="cb573-13"><a href="#cb573-13" tabindex="-1"></a>   <span class="at">fns =</span> <span class="fu">list</span>(</span>
<span id="cb573-14"><a href="#cb573-14" tabindex="-1"></a>      <span class="st">&quot;Mean&quot;</span> <span class="ot">=</span> <span class="er">~</span><span class="fu">na_if</span>(<span class="fu">mean</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">0</span>),</span>
<span id="cb573-15"><a href="#cb573-15" tabindex="-1"></a>      <span class="st">&quot;Total&quot;</span> <span class="ot">=</span> <span class="er">~</span><span class="fu">na_if</span>(<span class="fu">sum</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">0</span>)</span>
<span id="cb573-16"><a href="#cb573-16" tabindex="-1"></a>    ),</span>
<span id="cb573-17"><a href="#cb573-17" tabindex="-1"></a>    <span class="at">fmt =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="fu">fmt_number</span>(., <span class="at">decimals =</span> <span class="dv">0</span>)),</span>
<span id="cb573-18"><a href="#cb573-18" tabindex="-1"></a>    <span class="at">missing_text =</span> <span class="st">&quot;-&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb573-19"><a href="#cb573-19" tabindex="-1"></a>    <span class="fu">tab_options</span>(</span>
<span id="cb573-20"><a href="#cb573-20" tabindex="-1"></a>    <span class="at">data_row.padding =</span> <span class="fu">px</span>(<span class="dv">2</span>),</span>
<span id="cb573-21"><a href="#cb573-21" tabindex="-1"></a>    <span class="at">summary_row.padding =</span> <span class="fu">px</span>(<span class="dv">3</span>), <span class="co"># A bit more padding for summaries</span></span>
<span id="cb573-22"><a href="#cb573-22" tabindex="-1"></a>    <span class="at">row_group.padding =</span> <span class="fu">px</span>(<span class="dv">4</span>)    <span class="co"># And even more for our groups</span></span>
<span id="cb573-23"><a href="#cb573-23" tabindex="-1"></a>   )<span class="sc">|&gt;</span> </span>
<span id="cb573-24"><a href="#cb573-24" tabindex="-1"></a>    <span class="fu">tab_style</span>(<span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">color =</span> <span class="st">&quot;orange&quot;</span>,</span>
<span id="cb573-25"><a href="#cb573-25" tabindex="-1"></a>                              <span class="at">weight =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb573-26"><a href="#cb573-26" tabindex="-1"></a>            <span class="at">locations =</span> <span class="fu">cells_body</span>(</span>
<span id="cb573-27"><a href="#cb573-27" tabindex="-1"></a>              <span class="at">columns =</span> <span class="dv">3</span>,</span>
<span id="cb573-28"><a href="#cb573-28" tabindex="-1"></a>             <span class="at">rows =</span> <span class="fu">which</span>(penguin_counts_wider[,<span class="dv">3</span>] <span class="sc">==</span> <span class="fu">max</span>(penguin_counts_wider[,<span class="dv">3</span>])))</span>
<span id="cb573-29"><a href="#cb573-29" tabindex="-1"></a>            ) </span></code></pre></div>
<div id="txhydrlpch" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#txhydrlpch table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#txhydrlpch thead, #txhydrlpch tbody, #txhydrlpch tfoot, #txhydrlpch tr, #txhydrlpch td, #txhydrlpch th {
  border-style: none;
}

#txhydrlpch p {
  margin: 0;
  padding: 0;
}

#txhydrlpch .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#txhydrlpch .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#txhydrlpch .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#txhydrlpch .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#txhydrlpch .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#txhydrlpch .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#txhydrlpch .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#txhydrlpch .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#txhydrlpch .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#txhydrlpch .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#txhydrlpch .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#txhydrlpch .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#txhydrlpch .gt_spanner_row {
  border-bottom-style: hidden;
}

#txhydrlpch .gt_group_heading {
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#txhydrlpch .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#txhydrlpch .gt_from_md > :first-child {
  margin-top: 0;
}

#txhydrlpch .gt_from_md > :last-child {
  margin-bottom: 0;
}

#txhydrlpch .gt_row {
  padding-top: 2px;
  padding-bottom: 2px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#txhydrlpch .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#txhydrlpch .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#txhydrlpch .gt_row_group_first td {
  border-top-width: 2px;
}

#txhydrlpch .gt_row_group_first th {
  border-top-width: 2px;
}

#txhydrlpch .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
}

#txhydrlpch .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#txhydrlpch .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#txhydrlpch .gt_last_summary_row {
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#txhydrlpch .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#txhydrlpch .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#txhydrlpch .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#txhydrlpch .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#txhydrlpch .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#txhydrlpch .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#txhydrlpch .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#txhydrlpch .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#txhydrlpch .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#txhydrlpch .gt_left {
  text-align: left;
}

#txhydrlpch .gt_center {
  text-align: center;
}

#txhydrlpch .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#txhydrlpch .gt_font_normal {
  font-weight: normal;
}

#txhydrlpch .gt_font_bold {
  font-weight: bold;
}

#txhydrlpch .gt_font_italic {
  font-style: italic;
}

#txhydrlpch .gt_super {
  font-size: 65%;
}

#txhydrlpch .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#txhydrlpch .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#txhydrlpch .gt_indent_1 {
  text-indent: 5px;
}

#txhydrlpch .gt_indent_2 {
  text-indent: 10px;
}

#txhydrlpch .gt_indent_3 {
  text-indent: 15px;
}

#txhydrlpch .gt_indent_4 {
  text-indent: 20px;
}

#txhydrlpch .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style>Penguins of the Palmer Archipelago</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Data is courtesy of the palmerpenguins R package by Allison Horst</td>
    </tr>
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id=""></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Adelie&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Adelie</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Chinstrap&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Chinstrap</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Gentoo&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Gentoo</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Biscoe">Island: Biscoe</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_1" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Biscoe stub_1_1 Adelie_female" class="gt_row gt_right">5</td>
<td headers="Island: Biscoe stub_1_1 Adelie_male" class="gt_row gt_right">5</td>
<td headers="Island: Biscoe stub_1_1 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_1 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_1 Gentoo_female" class="gt_row gt_right">16</td>
<td headers="Island: Biscoe stub_1_1 Gentoo_male" class="gt_row gt_right">17</td></tr>
    <tr><th id="stub_1_2" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Biscoe stub_1_2 Adelie_female" class="gt_row gt_right">9</td>
<td headers="Island: Biscoe stub_1_2 Adelie_male" class="gt_row gt_right">9</td>
<td headers="Island: Biscoe stub_1_2 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_2 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_2 Gentoo_female" class="gt_row gt_right">22</td>
<td headers="Island: Biscoe stub_1_2 Gentoo_male" class="gt_row gt_right">23</td></tr>
    <tr><th id="stub_1_3" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Biscoe stub_1_3 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Biscoe stub_1_3 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Biscoe stub_1_3 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_3 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_3 Gentoo_female" class="gt_row gt_right">20</td>
<td headers="Island: Biscoe stub_1_3 Gentoo_male" class="gt_row gt_right">21</td></tr>
    <tr><th id="summary_stub_Island: Biscoe_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick">Mean</th>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Adelie_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">7</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Adelie_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">7</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Gentoo_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">19</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Gentoo_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">20</td></tr>
    <tr><th id="summary_stub_Island: Biscoe_2" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_last_summary_row">Total</th>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Adelie_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">22</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Adelie_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">22</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Gentoo_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">58</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Gentoo_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">61</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Dream">Island: Dream</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_4" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Dream stub_1_4 Adelie_female" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_4 Adelie_male" class="gt_row gt_right">10</td>
<td headers="Island: Dream stub_1_4 Chinstrap_female" class="gt_row gt_right">13</td>
<td headers="Island: Dream stub_1_4 Chinstrap_male" class="gt_row gt_right">13</td>
<td headers="Island: Dream stub_1_4 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Dream stub_1_4 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_5" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Dream stub_1_5 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Dream stub_1_5 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Dream stub_1_5 Chinstrap_female" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_5 Chinstrap_male" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_5 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Dream stub_1_5 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_6" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Dream stub_1_6 Adelie_female" class="gt_row gt_right" style="color: #FFA500; font-weight: bold;">10</td>
<td headers="Island: Dream stub_1_6 Adelie_male" class="gt_row gt_right">10</td>
<td headers="Island: Dream stub_1_6 Chinstrap_female" class="gt_row gt_right">12</td>
<td headers="Island: Dream stub_1_6 Chinstrap_male" class="gt_row gt_right">12</td>
<td headers="Island: Dream stub_1_6 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Dream stub_1_6 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="summary_stub_Island: Dream_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick">Mean</th>
<td headers="Island: Dream summary_stub_Island: Dream_1 Adelie_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">9</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Adelie_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">9</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">11</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">11</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Gentoo_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Gentoo_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td></tr>
    <tr><th id="summary_stub_Island: Dream_2" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_last_summary_row">Total</th>
<td headers="Island: Dream summary_stub_Island: Dream_2 Adelie_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">27</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Adelie_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">28</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">34</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">34</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Gentoo_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Gentoo_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Torgersen">Island: Torgersen</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_7" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Torgersen stub_1_7 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_7 Adelie_male" class="gt_row gt_right">7</td>
<td headers="Island: Torgersen stub_1_7 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_8" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Torgersen stub_1_8 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_8 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_8 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_8 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_8 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_8 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_9" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Torgersen stub_1_9 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_9 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_9 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="summary_stub_Island: Torgersen_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick">Mean</th>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Adelie_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">8</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Adelie_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">8</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Gentoo_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Gentoo_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td></tr>
    <tr><th id="summary_stub_Island: Torgersen_2" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_last_summary_row">Total</th>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Adelie_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">24</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Adelie_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">23</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Gentoo_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Gentoo_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td></tr>
  </tbody>
  
  
</table>
</div>
<p>If we repeat this code for each column, we generate the result shown below</p>
<div id="gjjhdflpji" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#gjjhdflpji table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gjjhdflpji thead, #gjjhdflpji tbody, #gjjhdflpji tfoot, #gjjhdflpji tr, #gjjhdflpji td, #gjjhdflpji th {
  border-style: none;
}

#gjjhdflpji p {
  margin: 0;
  padding: 0;
}

#gjjhdflpji .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gjjhdflpji .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gjjhdflpji .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gjjhdflpji .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gjjhdflpji .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gjjhdflpji .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gjjhdflpji .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gjjhdflpji .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gjjhdflpji .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gjjhdflpji .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gjjhdflpji .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gjjhdflpji .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gjjhdflpji .gt_spanner_row {
  border-bottom-style: hidden;
}

#gjjhdflpji .gt_group_heading {
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gjjhdflpji .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gjjhdflpji .gt_from_md > :first-child {
  margin-top: 0;
}

#gjjhdflpji .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gjjhdflpji .gt_row {
  padding-top: 2px;
  padding-bottom: 2px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gjjhdflpji .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#gjjhdflpji .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gjjhdflpji .gt_row_group_first td {
  border-top-width: 2px;
}

#gjjhdflpji .gt_row_group_first th {
  border-top-width: 2px;
}

#gjjhdflpji .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
}

#gjjhdflpji .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gjjhdflpji .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gjjhdflpji .gt_last_summary_row {
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gjjhdflpji .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gjjhdflpji .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gjjhdflpji .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#gjjhdflpji .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gjjhdflpji .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gjjhdflpji .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gjjhdflpji .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gjjhdflpji .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gjjhdflpji .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gjjhdflpji .gt_left {
  text-align: left;
}

#gjjhdflpji .gt_center {
  text-align: center;
}

#gjjhdflpji .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gjjhdflpji .gt_font_normal {
  font-weight: normal;
}

#gjjhdflpji .gt_font_bold {
  font-weight: bold;
}

#gjjhdflpji .gt_font_italic {
  font-style: italic;
}

#gjjhdflpji .gt_super {
  font-size: 65%;
}

#gjjhdflpji .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gjjhdflpji .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gjjhdflpji .gt_indent_1 {
  text-indent: 5px;
}

#gjjhdflpji .gt_indent_2 {
  text-indent: 10px;
}

#gjjhdflpji .gt_indent_3 {
  text-indent: 15px;
}

#gjjhdflpji .gt_indent_4 {
  text-indent: 20px;
}

#gjjhdflpji .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style>Penguins of the Palmer Archipelago</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Data is courtesy of the palmerpenguins R package by Allison Horst</td>
    </tr>
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id=""></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Adelie&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Adelie</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Chinstrap&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Chinstrap</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Gentoo&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Gentoo</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Biscoe">Island: Biscoe</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_1" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Biscoe stub_1_1 Adelie_female" class="gt_row gt_right">5</td>
<td headers="Island: Biscoe stub_1_1 Adelie_male" class="gt_row gt_right">5</td>
<td headers="Island: Biscoe stub_1_1 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_1 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_1 Gentoo_female" class="gt_row gt_right">16</td>
<td headers="Island: Biscoe stub_1_1 Gentoo_male" class="gt_row gt_right">17</td></tr>
    <tr><th id="stub_1_2" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Biscoe stub_1_2 Adelie_female" class="gt_row gt_right">9</td>
<td headers="Island: Biscoe stub_1_2 Adelie_male" class="gt_row gt_right">9</td>
<td headers="Island: Biscoe stub_1_2 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_2 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_2 Gentoo_female" class="gt_row gt_right" style="color: #FFA500; font-weight: bold;">22</td>
<td headers="Island: Biscoe stub_1_2 Gentoo_male" class="gt_row gt_right" style="color: #FFA500; font-weight: bold;">23</td></tr>
    <tr><th id="stub_1_3" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Biscoe stub_1_3 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Biscoe stub_1_3 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Biscoe stub_1_3 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_3 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Biscoe stub_1_3 Gentoo_female" class="gt_row gt_right">20</td>
<td headers="Island: Biscoe stub_1_3 Gentoo_male" class="gt_row gt_right">21</td></tr>
    <tr><th id="summary_stub_Island: Biscoe_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick">Mean</th>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Adelie_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">7</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Adelie_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">7</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Gentoo_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">19</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Gentoo_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">20</td></tr>
    <tr><th id="summary_stub_Island: Biscoe_2" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_last_summary_row">Total</th>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Adelie_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">22</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Adelie_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">22</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Gentoo_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">58</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Gentoo_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">61</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Dream">Island: Dream</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_4" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Dream stub_1_4 Adelie_female" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_4 Adelie_male" class="gt_row gt_right" style="color: #FFA500; font-weight: bold;">10</td>
<td headers="Island: Dream stub_1_4 Chinstrap_female" class="gt_row gt_right" style="color: #FFA500; font-weight: bold;">13</td>
<td headers="Island: Dream stub_1_4 Chinstrap_male" class="gt_row gt_right" style="color: #FFA500; font-weight: bold;">13</td>
<td headers="Island: Dream stub_1_4 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Dream stub_1_4 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_5" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Dream stub_1_5 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Dream stub_1_5 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Dream stub_1_5 Chinstrap_female" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_5 Chinstrap_male" class="gt_row gt_right">9</td>
<td headers="Island: Dream stub_1_5 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Dream stub_1_5 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_6" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Dream stub_1_6 Adelie_female" class="gt_row gt_right" style="color: #FFA500; font-weight: bold;">10</td>
<td headers="Island: Dream stub_1_6 Adelie_male" class="gt_row gt_right" style="color: #FFA500; font-weight: bold;">10</td>
<td headers="Island: Dream stub_1_6 Chinstrap_female" class="gt_row gt_right">12</td>
<td headers="Island: Dream stub_1_6 Chinstrap_male" class="gt_row gt_right">12</td>
<td headers="Island: Dream stub_1_6 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Dream stub_1_6 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="summary_stub_Island: Dream_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick">Mean</th>
<td headers="Island: Dream summary_stub_Island: Dream_1 Adelie_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">9</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Adelie_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">9</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">11</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">11</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Gentoo_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Gentoo_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td></tr>
    <tr><th id="summary_stub_Island: Dream_2" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_last_summary_row">Total</th>
<td headers="Island: Dream summary_stub_Island: Dream_2 Adelie_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">27</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Adelie_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">28</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">34</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">34</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Gentoo_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Gentoo_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Torgersen">Island: Torgersen</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_7" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Torgersen stub_1_7 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_7 Adelie_male" class="gt_row gt_right">7</td>
<td headers="Island: Torgersen stub_1_7 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_7 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_8" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Torgersen stub_1_8 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_8 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_8 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_8 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_8 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_8 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="stub_1_9" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Torgersen stub_1_9 Adelie_female" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_9 Adelie_male" class="gt_row gt_right">8</td>
<td headers="Island: Torgersen stub_1_9 Chinstrap_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Chinstrap_male" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Gentoo_female" class="gt_row gt_right">-</td>
<td headers="Island: Torgersen stub_1_9 Gentoo_male" class="gt_row gt_right">-</td></tr>
    <tr><th id="summary_stub_Island: Torgersen_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick">Mean</th>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Adelie_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">8</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Adelie_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">8</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Gentoo_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Gentoo_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td></tr>
    <tr><th id="summary_stub_Island: Torgersen_2" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_last_summary_row">Total</th>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Adelie_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">24</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Adelie_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">23</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Gentoo_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Gentoo_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<div id="heatmap" class="section level3" number="32.0.10">
<h3><span class="header-section-number">32.0.10</span> Heatmap</h3>
<p>We can add a heatmap to our cells to more clearly show the differences. This will require us to set a colour palette and apply a conditional colouring using <code>data_color()</code></p>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb574-1"><a href="#cb574-1" tabindex="-1"></a>penguin_counts_wider <span class="sc">|&gt;</span> </span>
<span id="cb574-2"><a href="#cb574-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb574-3"><a href="#cb574-3" tabindex="-1"></a>    <span class="at">island =</span> <span class="fu">as.character</span>(island), </span>
<span id="cb574-4"><a href="#cb574-4" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">as.numeric</span>(year),</span>
<span id="cb574-5"><a href="#cb574-5" tabindex="-1"></a>    <span class="at">island =</span> <span class="fu">paste0</span>(<span class="st">&#39;Island: &#39;</span>, island)</span>
<span id="cb574-6"><a href="#cb574-6" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb574-7"><a href="#cb574-7" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">groupname_col =</span> <span class="st">&#39;island&#39;</span>, <span class="at">rowname_col =</span> <span class="st">&#39;year&#39;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb574-8"><a href="#cb574-8" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">.list =</span> desired_colnames) <span class="sc">|&gt;</span> </span>
<span id="cb574-9"><a href="#cb574-9" tabindex="-1"></a>  <span class="fu">labels_and_title</span>()  <span class="sc">|&gt;</span> </span>
<span id="cb574-10"><a href="#cb574-10" tabindex="-1"></a>  <span class="fu">sub_zero</span>(<span class="at">zero_text =</span> <span class="st">&#39;-&#39;</span>)<span class="sc">|&gt;</span></span>
<span id="cb574-11"><a href="#cb574-11" tabindex="-1"></a>   <span class="fu">summary_rows</span>(</span>
<span id="cb574-12"><a href="#cb574-12" tabindex="-1"></a>    <span class="at">groups =</span> <span class="fu">everything</span>(),</span>
<span id="cb574-13"><a href="#cb574-13" tabindex="-1"></a>   <span class="at">fns =</span> <span class="fu">list</span>(</span>
<span id="cb574-14"><a href="#cb574-14" tabindex="-1"></a>      <span class="st">&quot;Mean&quot;</span> <span class="ot">=</span> <span class="er">~</span><span class="fu">na_if</span>(<span class="fu">mean</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">0</span>),</span>
<span id="cb574-15"><a href="#cb574-15" tabindex="-1"></a>      <span class="st">&quot;Total&quot;</span> <span class="ot">=</span> <span class="er">~</span><span class="fu">na_if</span>(<span class="fu">sum</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">0</span>)</span>
<span id="cb574-16"><a href="#cb574-16" tabindex="-1"></a>    ),</span>
<span id="cb574-17"><a href="#cb574-17" tabindex="-1"></a>    <span class="at">fmt =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="fu">fmt_number</span>(., <span class="at">decimals =</span> <span class="dv">0</span>)),</span>
<span id="cb574-18"><a href="#cb574-18" tabindex="-1"></a>    <span class="at">missing_text =</span> <span class="st">&quot;-&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb574-19"><a href="#cb574-19" tabindex="-1"></a>    <span class="fu">tab_options</span>(</span>
<span id="cb574-20"><a href="#cb574-20" tabindex="-1"></a>    <span class="at">data_row.padding =</span> <span class="fu">px</span>(<span class="dv">2</span>),</span>
<span id="cb574-21"><a href="#cb574-21" tabindex="-1"></a>    <span class="at">summary_row.padding =</span> <span class="fu">px</span>(<span class="dv">3</span>), <span class="co"># A bit more padding for summaries</span></span>
<span id="cb574-22"><a href="#cb574-22" tabindex="-1"></a>    <span class="at">row_group.padding =</span> <span class="fu">px</span>(<span class="dv">4</span>)    <span class="co"># And even more for our groups</span></span>
<span id="cb574-23"><a href="#cb574-23" tabindex="-1"></a>   )<span class="sc">|&gt;</span>  </span>
<span id="cb574-24"><a href="#cb574-24" tabindex="-1"></a><span class="fu">data_color</span>(<span class="at">palette =</span> <span class="fu">c</span>(<span class="st">&quot;#FEF0D9&quot;</span>, <span class="st">&quot;#990000&quot;</span>), <span class="at">domain =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">30</span>))</span></code></pre></div>
<div id="xudknnhovx" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xudknnhovx table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xudknnhovx thead, #xudknnhovx tbody, #xudknnhovx tfoot, #xudknnhovx tr, #xudknnhovx td, #xudknnhovx th {
  border-style: none;
}

#xudknnhovx p {
  margin: 0;
  padding: 0;
}

#xudknnhovx .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xudknnhovx .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xudknnhovx .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xudknnhovx .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xudknnhovx .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xudknnhovx .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xudknnhovx .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xudknnhovx .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xudknnhovx .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xudknnhovx .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xudknnhovx .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xudknnhovx .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xudknnhovx .gt_spanner_row {
  border-bottom-style: hidden;
}

#xudknnhovx .gt_group_heading {
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xudknnhovx .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xudknnhovx .gt_from_md > :first-child {
  margin-top: 0;
}

#xudknnhovx .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xudknnhovx .gt_row {
  padding-top: 2px;
  padding-bottom: 2px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xudknnhovx .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xudknnhovx .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xudknnhovx .gt_row_group_first td {
  border-top-width: 2px;
}

#xudknnhovx .gt_row_group_first th {
  border-top-width: 2px;
}

#xudknnhovx .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
}

#xudknnhovx .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xudknnhovx .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xudknnhovx .gt_last_summary_row {
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xudknnhovx .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xudknnhovx .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xudknnhovx .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xudknnhovx .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xudknnhovx .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xudknnhovx .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xudknnhovx .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xudknnhovx .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xudknnhovx .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xudknnhovx .gt_left {
  text-align: left;
}

#xudknnhovx .gt_center {
  text-align: center;
}

#xudknnhovx .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xudknnhovx .gt_font_normal {
  font-weight: normal;
}

#xudknnhovx .gt_font_bold {
  font-weight: bold;
}

#xudknnhovx .gt_font_italic {
  font-style: italic;
}

#xudknnhovx .gt_super {
  font-size: 65%;
}

#xudknnhovx .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xudknnhovx .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xudknnhovx .gt_indent_1 {
  text-indent: 5px;
}

#xudknnhovx .gt_indent_2 {
  text-indent: 10px;
}

#xudknnhovx .gt_indent_3 {
  text-indent: 15px;
}

#xudknnhovx .gt_indent_4 {
  text-indent: 20px;
}

#xudknnhovx .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style>Penguins of the Palmer Archipelago</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Data is courtesy of the palmerpenguins R package by Allison Horst</td>
    </tr>
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id=""></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Adelie&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Adelie</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Chinstrap&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Chinstrap</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="&lt;strong&gt;Gentoo&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Gentoo</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Female">Female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Male">Male</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Biscoe">Island: Biscoe</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_1" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Biscoe stub_1_1 Adelie_female" class="gt_row gt_right" style="background-color: #F3CCB2; color: #000000;">5</td>
<td headers="Island: Biscoe stub_1_1 Adelie_male" class="gt_row gt_right" style="background-color: #F3CCB2; color: #000000;">5</td>
<td headers="Island: Biscoe stub_1_1 Chinstrap_female" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Biscoe stub_1_1 Chinstrap_male" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Biscoe stub_1_1 Gentoo_female" class="gt_row gt_right" style="background-color: #D27E60; color: #FFFFFF;">16</td>
<td headers="Island: Biscoe stub_1_1 Gentoo_male" class="gt_row gt_right" style="background-color: #CF7759; color: #FFFFFF;">17</td></tr>
    <tr><th id="stub_1_2" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Biscoe stub_1_2 Adelie_female" class="gt_row gt_right" style="background-color: #E8AF93; color: #000000;">9</td>
<td headers="Island: Biscoe stub_1_2 Adelie_male" class="gt_row gt_right" style="background-color: #E8AF93; color: #000000;">9</td>
<td headers="Island: Biscoe stub_1_2 Chinstrap_female" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Biscoe stub_1_2 Chinstrap_male" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Biscoe stub_1_2 Gentoo_female" class="gt_row gt_right" style="background-color: #BC5337; color: #FFFFFF;">22</td>
<td headers="Island: Biscoe stub_1_2 Gentoo_male" class="gt_row gt_right" style="background-color: #B84B30; color: #FFFFFF;">23</td></tr>
    <tr><th id="stub_1_3" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Biscoe stub_1_3 Adelie_female" class="gt_row gt_right" style="background-color: #EBB69B; color: #000000;">8</td>
<td headers="Island: Biscoe stub_1_3 Adelie_male" class="gt_row gt_right" style="background-color: #EBB69B; color: #000000;">8</td>
<td headers="Island: Biscoe stub_1_3 Chinstrap_female" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Biscoe stub_1_3 Chinstrap_male" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Biscoe stub_1_3 Gentoo_female" class="gt_row gt_right" style="background-color: #C36144; color: #FFFFFF;">20</td>
<td headers="Island: Biscoe stub_1_3 Gentoo_male" class="gt_row gt_right" style="background-color: #C05A3E; color: #FFFFFF;">21</td></tr>
    <tr><th id="summary_stub_Island: Biscoe_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick">Mean</th>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Adelie_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">7</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Adelie_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">7</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Gentoo_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">19</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_1 Gentoo_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">20</td></tr>
    <tr><th id="summary_stub_Island: Biscoe_2" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_last_summary_row">Total</th>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Adelie_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">22</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Adelie_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">22</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Gentoo_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">58</td>
<td headers="Island: Biscoe summary_stub_Island: Biscoe_2 Gentoo_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">61</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Dream">Island: Dream</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_4" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Dream stub_1_4 Adelie_female" class="gt_row gt_right" style="background-color: #E8AF93; color: #000000;">9</td>
<td headers="Island: Dream stub_1_4 Adelie_male" class="gt_row gt_right" style="background-color: #E5A88C; color: #000000;">10</td>
<td headers="Island: Dream stub_1_4 Chinstrap_female" class="gt_row gt_right" style="background-color: #DC9376; color: #000000;">13</td>
<td headers="Island: Dream stub_1_4 Chinstrap_male" class="gt_row gt_right" style="background-color: #DC9376; color: #000000;">13</td>
<td headers="Island: Dream stub_1_4 Gentoo_female" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Dream stub_1_4 Gentoo_male" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td></tr>
    <tr><th id="stub_1_5" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Dream stub_1_5 Adelie_female" class="gt_row gt_right" style="background-color: #EBB69B; color: #000000;">8</td>
<td headers="Island: Dream stub_1_5 Adelie_male" class="gt_row gt_right" style="background-color: #EBB69B; color: #000000;">8</td>
<td headers="Island: Dream stub_1_5 Chinstrap_female" class="gt_row gt_right" style="background-color: #E8AF93; color: #000000;">9</td>
<td headers="Island: Dream stub_1_5 Chinstrap_male" class="gt_row gt_right" style="background-color: #E8AF93; color: #000000;">9</td>
<td headers="Island: Dream stub_1_5 Gentoo_female" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Dream stub_1_5 Gentoo_male" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td></tr>
    <tr><th id="stub_1_6" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Dream stub_1_6 Adelie_female" class="gt_row gt_right" style="background-color: #E5A88C; color: #000000;">10</td>
<td headers="Island: Dream stub_1_6 Adelie_male" class="gt_row gt_right" style="background-color: #E5A88C; color: #000000;">10</td>
<td headers="Island: Dream stub_1_6 Chinstrap_female" class="gt_row gt_right" style="background-color: #DF9A7D; color: #000000;">12</td>
<td headers="Island: Dream stub_1_6 Chinstrap_male" class="gt_row gt_right" style="background-color: #DF9A7D; color: #000000;">12</td>
<td headers="Island: Dream stub_1_6 Gentoo_female" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Dream stub_1_6 Gentoo_male" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td></tr>
    <tr><th id="summary_stub_Island: Dream_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick">Mean</th>
<td headers="Island: Dream summary_stub_Island: Dream_1 Adelie_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">9</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Adelie_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">9</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">11</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">11</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Gentoo_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Dream summary_stub_Island: Dream_1 Gentoo_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td></tr>
    <tr><th id="summary_stub_Island: Dream_2" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_last_summary_row">Total</th>
<td headers="Island: Dream summary_stub_Island: Dream_2 Adelie_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">27</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Adelie_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">28</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">34</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">34</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Gentoo_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Dream summary_stub_Island: Dream_2 Gentoo_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Island: Torgersen">Island: Torgersen</th>
    </tr>
    <tr class="gt_row_group_first"><th id="stub_1_7" scope="row" class="gt_row gt_right gt_stub">2007</th>
<td headers="Island: Torgersen stub_1_7 Adelie_female" class="gt_row gt_right" style="background-color: #EBB69B; color: #000000;">8</td>
<td headers="Island: Torgersen stub_1_7 Adelie_male" class="gt_row gt_right" style="background-color: #EEBEA2; color: #000000;">7</td>
<td headers="Island: Torgersen stub_1_7 Chinstrap_female" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Torgersen stub_1_7 Chinstrap_male" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Torgersen stub_1_7 Gentoo_female" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Torgersen stub_1_7 Gentoo_male" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td></tr>
    <tr><th id="stub_1_8" scope="row" class="gt_row gt_right gt_stub">2008</th>
<td headers="Island: Torgersen stub_1_8 Adelie_female" class="gt_row gt_right" style="background-color: #EBB69B; color: #000000;">8</td>
<td headers="Island: Torgersen stub_1_8 Adelie_male" class="gt_row gt_right" style="background-color: #EBB69B; color: #000000;">8</td>
<td headers="Island: Torgersen stub_1_8 Chinstrap_female" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Torgersen stub_1_8 Chinstrap_male" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Torgersen stub_1_8 Gentoo_female" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Torgersen stub_1_8 Gentoo_male" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td></tr>
    <tr><th id="stub_1_9" scope="row" class="gt_row gt_right gt_stub">2009</th>
<td headers="Island: Torgersen stub_1_9 Adelie_female" class="gt_row gt_right" style="background-color: #EBB69B; color: #000000;">8</td>
<td headers="Island: Torgersen stub_1_9 Adelie_male" class="gt_row gt_right" style="background-color: #EBB69B; color: #000000;">8</td>
<td headers="Island: Torgersen stub_1_9 Chinstrap_female" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Torgersen stub_1_9 Chinstrap_male" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Torgersen stub_1_9 Gentoo_female" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td>
<td headers="Island: Torgersen stub_1_9 Gentoo_male" class="gt_row gt_right" style="background-color: #FEF0D9; color: #000000;">-</td></tr>
    <tr><th id="summary_stub_Island: Torgersen_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick">Mean</th>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Adelie_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">8</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Adelie_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">8</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Gentoo_female" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_1 Gentoo_male" class="gt_row gt_right gt_summary_row gt_first_summary_row thick">-</td></tr>
    <tr><th id="summary_stub_Island: Torgersen_2" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_last_summary_row">Total</th>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Adelie_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">24</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Adelie_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">23</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Chinstrap_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Chinstrap_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Gentoo_female" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td>
<td headers="Island: Torgersen summary_stub_Island: Torgersen_2 Gentoo_male" class="gt_row gt_right gt_summary_row gt_last_summary_row">-</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<div id="data-visualisations" class="section level3" number="32.0.11">
<h3><span class="header-section-number">32.0.11</span> Data visualisations</h3>
<p>In this chapter, we’re going to learn how to add fancy elements like plots, icon and images to <code>gt</code> tables.</p>
<p>You can actually add any ggplot you want to your table. For example, we could look at our penguins from the last chapter again. Here’s a table about their weight and its distribution (visualized with a violin plot.)</p>
<div class="sourceCode" id="cb575"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb575-1"><a href="#cb575-1" tabindex="-1"></a>filtered_penguins <span class="ot">&lt;-</span> palmerpenguins<span class="sc">::</span>penguins <span class="sc">|&gt;</span></span>
<span id="cb575-2"><a href="#cb575-2" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(sex))</span>
<span id="cb575-3"><a href="#cb575-3" tabindex="-1"></a></span>
<span id="cb575-4"><a href="#cb575-4" tabindex="-1"></a>penguin_weights <span class="ot">&lt;-</span> filtered_penguins <span class="sc">|&gt;</span></span>
<span id="cb575-5"><a href="#cb575-5" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span></span>
<span id="cb575-6"><a href="#cb575-6" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb575-7"><a href="#cb575-7" tabindex="-1"></a>    <span class="at">Min =</span> <span class="fu">min</span>(body_mass_g),</span>
<span id="cb575-8"><a href="#cb575-8" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">mean</span>(body_mass_g) <span class="sc">|&gt;</span> <span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb575-9"><a href="#cb575-9" tabindex="-1"></a>    <span class="at">Max =</span> <span class="fu">max</span>(body_mass_g)</span>
<span id="cb575-10"><a href="#cb575-10" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb575-11"><a href="#cb575-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">as.character</span>(species)) <span class="sc">|&gt;</span></span>
<span id="cb575-12"><a href="#cb575-12" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Species =</span> species)</span>
<span id="cb575-13"><a href="#cb575-13" tabindex="-1"></a></span>
<span id="cb575-14"><a href="#cb575-14" tabindex="-1"></a>penguin_weights <span class="sc">|&gt;</span></span>
<span id="cb575-15"><a href="#cb575-15" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb575-16"><a href="#cb575-16" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb575-17"><a href="#cb575-17" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&#39;Penguin</span><span class="sc">\&#39;</span><span class="st">s Weight&#39;</span>,</span>
<span id="cb575-18"><a href="#cb575-18" tabindex="-1"></a>    <span class="at">columns =</span> <span class="sc">-</span>Species</span>
<span id="cb575-19"><a href="#cb575-19" tabindex="-1"></a>  ) </span></code></pre></div>
<div id="bizlklkidq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#bizlklkidq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#bizlklkidq thead, #bizlklkidq tbody, #bizlklkidq tfoot, #bizlklkidq tr, #bizlklkidq td, #bizlklkidq th {
  border-style: none;
}

#bizlklkidq p {
  margin: 0;
  padding: 0;
}

#bizlklkidq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bizlklkidq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#bizlklkidq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bizlklkidq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bizlklkidq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bizlklkidq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bizlklkidq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bizlklkidq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bizlklkidq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bizlklkidq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bizlklkidq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bizlklkidq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bizlklkidq .gt_spanner_row {
  border-bottom-style: hidden;
}

#bizlklkidq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#bizlklkidq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bizlklkidq .gt_from_md > :first-child {
  margin-top: 0;
}

#bizlklkidq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bizlklkidq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bizlklkidq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#bizlklkidq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#bizlklkidq .gt_row_group_first td {
  border-top-width: 2px;
}

#bizlklkidq .gt_row_group_first th {
  border-top-width: 2px;
}

#bizlklkidq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bizlklkidq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#bizlklkidq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#bizlklkidq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bizlklkidq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bizlklkidq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bizlklkidq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#bizlklkidq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bizlklkidq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bizlklkidq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bizlklkidq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bizlklkidq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bizlklkidq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bizlklkidq .gt_left {
  text-align: left;
}

#bizlklkidq .gt_center {
  text-align: center;
}

#bizlklkidq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bizlklkidq .gt_font_normal {
  font-weight: normal;
}

#bizlklkidq .gt_font_bold {
  font-weight: bold;
}

#bizlklkidq .gt_font_italic {
  font-style: italic;
}

#bizlklkidq .gt_super {
  font-size: 65%;
}

#bizlklkidq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#bizlklkidq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#bizlklkidq .gt_indent_1 {
  text-indent: 5px;
}

#bizlklkidq .gt_indent_2 {
  text-indent: 10px;
}

#bizlklkidq .gt_indent_3 {
  text-indent: 15px;
}

#bizlklkidq .gt_indent_4 {
  text-indent: 20px;
}

#bizlklkidq .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="Species">Species</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Penguin's Weight">
        <span class="gt_column_spanner">Penguin's Weight</span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Min">Min</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Mean">Mean</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Max">Max</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Species" class="gt_row gt_left">Adelie</td>
<td headers="Min" class="gt_row gt_right">2850</td>
<td headers="Mean" class="gt_row gt_right">3706.16</td>
<td headers="Max" class="gt_row gt_right">4775</td></tr>
    <tr><td headers="Species" class="gt_row gt_left">Chinstrap</td>
<td headers="Min" class="gt_row gt_right">2700</td>
<td headers="Mean" class="gt_row gt_right">3733.09</td>
<td headers="Max" class="gt_row gt_right">4800</td></tr>
    <tr><td headers="Species" class="gt_row gt_left">Gentoo</td>
<td headers="Min" class="gt_row gt_right">3950</td>
<td headers="Mean" class="gt_row gt_right">5092.44</td>
<td headers="Max" class="gt_row gt_right">6300</td></tr>
  </tbody>
  
  
</table>
</div>
<p>To create this table, let us begin with the basics. Let’s compute the numeric values first.</p>
<div id="hhgryftrhs" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#hhgryftrhs table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#hhgryftrhs thead, #hhgryftrhs tbody, #hhgryftrhs tfoot, #hhgryftrhs tr, #hhgryftrhs td, #hhgryftrhs th {
  border-style: none;
}

#hhgryftrhs p {
  margin: 0;
  padding: 0;
}

#hhgryftrhs .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hhgryftrhs .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#hhgryftrhs .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hhgryftrhs .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hhgryftrhs .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hhgryftrhs .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hhgryftrhs .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hhgryftrhs .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hhgryftrhs .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hhgryftrhs .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hhgryftrhs .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hhgryftrhs .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hhgryftrhs .gt_spanner_row {
  border-bottom-style: hidden;
}

#hhgryftrhs .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#hhgryftrhs .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hhgryftrhs .gt_from_md > :first-child {
  margin-top: 0;
}

#hhgryftrhs .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hhgryftrhs .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hhgryftrhs .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#hhgryftrhs .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#hhgryftrhs .gt_row_group_first td {
  border-top-width: 2px;
}

#hhgryftrhs .gt_row_group_first th {
  border-top-width: 2px;
}

#hhgryftrhs .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hhgryftrhs .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#hhgryftrhs .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#hhgryftrhs .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hhgryftrhs .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hhgryftrhs .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hhgryftrhs .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#hhgryftrhs .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hhgryftrhs .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hhgryftrhs .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hhgryftrhs .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hhgryftrhs .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hhgryftrhs .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hhgryftrhs .gt_left {
  text-align: left;
}

#hhgryftrhs .gt_center {
  text-align: center;
}

#hhgryftrhs .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hhgryftrhs .gt_font_normal {
  font-weight: normal;
}

#hhgryftrhs .gt_font_bold {
  font-weight: bold;
}

#hhgryftrhs .gt_font_italic {
  font-style: italic;
}

#hhgryftrhs .gt_super {
  font-size: 65%;
}

#hhgryftrhs .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#hhgryftrhs .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#hhgryftrhs .gt_indent_1 {
  text-indent: 5px;
}

#hhgryftrhs .gt_indent_2 {
  text-indent: 10px;
}

#hhgryftrhs .gt_indent_3 {
  text-indent: 15px;
}

#hhgryftrhs .gt_indent_4 {
  text-indent: 20px;
}

#hhgryftrhs .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="Species">Species</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Penguin's Weight">
        <span class="gt_column_spanner">Penguin's Weight</span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Min">Min</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Mean">Mean</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Max">Max</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Distribution">Distribution</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Species" class="gt_row gt_left">Adelie</td>
<td headers="Min" class="gt_row gt_right">2850</td>
<td headers="Mean" class="gt_row gt_right">3706.16</td>
<td headers="Max" class="gt_row gt_right">4775</td>
<td headers="Distribution" class="gt_row gt_left"><img src="data:image/png;base64,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" style="height:50px;"></td></tr>
    <tr><td headers="Species" class="gt_row gt_left">Chinstrap</td>
<td headers="Min" class="gt_row gt_right">2700</td>
<td headers="Mean" class="gt_row gt_right">3733.09</td>
<td headers="Max" class="gt_row gt_right">4800</td>
<td headers="Distribution" class="gt_row gt_left"><img src="data:image/png;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoK7FZAAAAPUlEQVQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHgm/z8udfFKOoLt3QAAAABJRU5ErkJggg==" style="height:50px;"></td></tr>
    <tr><td headers="Species" class="gt_row gt_left">Gentoo</td>
<td headers="Min" class="gt_row gt_right">3950</td>
<td headers="Mean" class="gt_row gt_right">5092.44</td>
<td headers="Max" class="gt_row gt_right">6300</td>
<td headers="Distribution" class="gt_row gt_left"><img src="data:image/png;base64,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" style="height:50px;"></td></tr>
  </tbody>
  
  
</table>
</div>
<p>Next write a function <code>plot_violin_species(my_species)</code> that depends on a penguin species and creates one violin plot.</p>
<button id="displayTextunnamed-chunk-91" onclick="javascript:toggle(&#39;unnamed-chunk-91&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-91" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb576-1"><a href="#cb576-1" tabindex="-1"></a>plot_density_species <span class="ot">&lt;-</span> <span class="cf">function</span>(my_species) {</span>
<span id="cb576-2"><a href="#cb576-2" tabindex="-1"></a>  full_range <span class="ot">&lt;-</span> filtered_penguins <span class="sc">|&gt;</span></span>
<span id="cb576-3"><a href="#cb576-3" tabindex="-1"></a>    <span class="fu">pull</span>(body_mass_g) <span class="sc">|&gt;</span></span>
<span id="cb576-4"><a href="#cb576-4" tabindex="-1"></a>    <span class="fu">range</span>()</span>
<span id="cb576-5"><a href="#cb576-5" tabindex="-1"></a></span>
<span id="cb576-6"><a href="#cb576-6" tabindex="-1"></a>  filtered_penguins <span class="sc">|&gt;</span></span>
<span id="cb576-7"><a href="#cb576-7" tabindex="-1"></a>    <span class="fu">filter</span>(species <span class="sc">==</span> my_species) <span class="sc">|&gt;</span></span>
<span id="cb576-8"><a href="#cb576-8" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> species)) <span class="sc">+</span></span>
<span id="cb576-9"><a href="#cb576-9" tabindex="-1"></a>    <span class="fu">geom_violin</span>(<span class="at">fill =</span> <span class="st">&#39;dodgerblue4&#39;</span>) <span class="sc">+</span></span>
<span id="cb576-10"><a href="#cb576-10" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb576-11"><a href="#cb576-11" tabindex="-1"></a>    <span class="fu">scale_y_discrete</span>(<span class="at">breaks =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb576-12"><a href="#cb576-12" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb576-13"><a href="#cb576-13" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">element_blank</span>(), <span class="at">y =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb576-14"><a href="#cb576-14" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> full_range)</span>
<span id="cb576-15"><a href="#cb576-15" tabindex="-1"></a>}</span>
<span id="cb576-16"><a href="#cb576-16" tabindex="-1"></a><span class="fu">plot_density_species</span>(<span class="st">&quot;Adelie&quot;</span>)</span></code></pre></div>
<p><img src="06-ggplot-principles_files/figure-html/unnamed-chunk-94-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<p>Notice that I have set the coordinate system of the plot to the full range of the data (regardless of the species). This part is important. Without this trick, the three plots would not share a common x-axis.</p>
<p>Ok, so now we have a function that creates the desired plots. Time to apply it to our table. For this to work, we need an additional column that we can target. So we use <code>mutate()</code> to add a new column, then <code>text_transform()</code> to turn this column into images, and finally <code>.fn</code> argument can be supplied with our function iterated over each species with <code>map()</code>.</p>
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb577-1"><a href="#cb577-1" tabindex="-1"></a>penguin_weights <span class="sc">|&gt;</span></span>
<span id="cb577-2"><a href="#cb577-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Distribution =</span> Species) <span class="sc">|&gt;</span> </span>
<span id="cb577-3"><a href="#cb577-3" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb577-4"><a href="#cb577-4" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb577-5"><a href="#cb577-5" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&#39;Penguin</span><span class="sc">\&#39;</span><span class="st">s Weight&#39;</span>,</span>
<span id="cb577-6"><a href="#cb577-6" tabindex="-1"></a>    <span class="at">columns =</span> <span class="sc">-</span>Species</span>
<span id="cb577-7"><a href="#cb577-7" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb577-8"><a href="#cb577-8" tabindex="-1"></a>  <span class="fu">text_transform</span>(</span>
<span id="cb577-9"><a href="#cb577-9" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">columns =</span> <span class="st">&#39;Distribution&#39;</span>),</span>
<span id="cb577-10"><a href="#cb577-10" tabindex="-1"></a>    <span class="at">fn =</span> <span class="cf">function</span>(column) {</span>
<span id="cb577-11"><a href="#cb577-11" tabindex="-1"></a>      <span class="fu">map</span>(column, plot_density_species) <span class="sc">|&gt;</span></span>
<span id="cb577-12"><a href="#cb577-12" tabindex="-1"></a>        <span class="fu">ggplot_image</span>(<span class="at">height =</span> <span class="fu">px</span>(<span class="dv">50</span>), <span class="at">aspect_ratio =</span> <span class="dv">3</span>)</span>
<span id="cb577-13"><a href="#cb577-13" tabindex="-1"></a>    }</span>
<span id="cb577-14"><a href="#cb577-14" tabindex="-1"></a>  ) </span></code></pre></div>
<div id="drptbqojsz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#drptbqojsz table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#drptbqojsz thead, #drptbqojsz tbody, #drptbqojsz tfoot, #drptbqojsz tr, #drptbqojsz td, #drptbqojsz th {
  border-style: none;
}

#drptbqojsz p {
  margin: 0;
  padding: 0;
}

#drptbqojsz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#drptbqojsz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#drptbqojsz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#drptbqojsz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#drptbqojsz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#drptbqojsz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#drptbqojsz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#drptbqojsz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#drptbqojsz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#drptbqojsz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#drptbqojsz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#drptbqojsz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#drptbqojsz .gt_spanner_row {
  border-bottom-style: hidden;
}

#drptbqojsz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#drptbqojsz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#drptbqojsz .gt_from_md > :first-child {
  margin-top: 0;
}

#drptbqojsz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#drptbqojsz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#drptbqojsz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#drptbqojsz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#drptbqojsz .gt_row_group_first td {
  border-top-width: 2px;
}

#drptbqojsz .gt_row_group_first th {
  border-top-width: 2px;
}

#drptbqojsz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#drptbqojsz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#drptbqojsz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#drptbqojsz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#drptbqojsz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#drptbqojsz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#drptbqojsz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#drptbqojsz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#drptbqojsz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#drptbqojsz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#drptbqojsz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#drptbqojsz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#drptbqojsz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#drptbqojsz .gt_left {
  text-align: left;
}

#drptbqojsz .gt_center {
  text-align: center;
}

#drptbqojsz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#drptbqojsz .gt_font_normal {
  font-weight: normal;
}

#drptbqojsz .gt_font_bold {
  font-weight: bold;
}

#drptbqojsz .gt_font_italic {
  font-style: italic;
}

#drptbqojsz .gt_super {
  font-size: 65%;
}

#drptbqojsz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#drptbqojsz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#drptbqojsz .gt_indent_1 {
  text-indent: 5px;
}

#drptbqojsz .gt_indent_2 {
  text-indent: 10px;
}

#drptbqojsz .gt_indent_3 {
  text-indent: 15px;
}

#drptbqojsz .gt_indent_4 {
  text-indent: 20px;
}

#drptbqojsz .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="Species">Species</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Penguin's Weight">
        <span class="gt_column_spanner">Penguin's Weight</span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Min">Min</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Mean">Mean</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Max">Max</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Distribution">Distribution</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Species" class="gt_row gt_left">Adelie</td>
<td headers="Min" class="gt_row gt_right">2850</td>
<td headers="Mean" class="gt_row gt_right">3706.16</td>
<td headers="Max" class="gt_row gt_right">4775</td>
<td headers="Distribution" class="gt_row gt_left"><img src="data:image/png;base64,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" style="height:50px;"></td></tr>
    <tr><td headers="Species" class="gt_row gt_left">Chinstrap</td>
<td headers="Min" class="gt_row gt_right">2700</td>
<td headers="Mean" class="gt_row gt_right">3733.09</td>
<td headers="Max" class="gt_row gt_right">4800</td>
<td headers="Distribution" class="gt_row gt_left"><img src="data:image/png;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoK7FZAAAAPUlEQVQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHgm/z8udfFKOoLt3QAAAABJRU5ErkJggg==" style="height:50px;"></td></tr>
    <tr><td headers="Species" class="gt_row gt_left">Gentoo</td>
<td headers="Min" class="gt_row gt_right">3950</td>
<td headers="Mean" class="gt_row gt_right">5092.44</td>
<td headers="Max" class="gt_row gt_right">6300</td>
<td headers="Distribution" class="gt_row gt_left"><img src="data:image/png;base64,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" style="height:50px;"></td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<div id="conclusion" class="section level2" number="32.1">
<h2><span class="header-section-number">32.1</span> Conclusion</h2>
<p>Many of the tweaks we made to our table are quite subtle. Changes like removing excess gridlines, bolding header text, right-aligning numeric values, and adjusting the level of precision can often go unnoticed, but if you skip them, your table will be far less effective. Our final product isn’t flashy, but it does communicate clearly.</p>
<p>We used the gt package to make our high-quality table, and as we’ve repeatedly seen, this package has good defaults built in. Often, you don’t need to change much in your code to make effective tables. But no matter which package you use, it’s essential to treat tables as worthy of just as much thought as other kinds of data visualization.</p>
<p>Later you’ll learn how to create reports using R Markdown, which can integrate your tables directly into the final document.</p>
</div>
<div id="reading-2" class="section level2" number="32.2">
<h2><span class="header-section-number">32.2</span> Reading</h2>
<p>Consult the following resources to learn about table design principles and how to make high-quality tables with the gt package:</p>
<p><a href="https://gt.rstudio.com/articles/gt.html">"gt package intro"</a></p>
<p>“Ten Guidelines for Better Tables” by Jon Schwabish (Journal of Benefit-Cost Analysis, 2020), <a href="https://doi.org/10.1017/bca.2020.11" class="uri">https://doi.org/10.1017/bca.2020.11</a></p>
<p>“10+ Guidelines for Better Tables in R” by Tom Mock (2020), <a href="https://themockup.blog/posts/2020-09-04-10-table-rules-in-r/" class="uri">https://themockup.blog/posts/2020-09-04-10-table-rules-in-r/</a></p>
<!--chapter:end:06-ggplot-principles.Rmd-->
</div>
</div>
<div id="part-introduction-to-shiny" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) Introduction to Shiny</h1>
</div>
<div id="getting-to-work-with-shiny" class="section level1" number="33">
<h1><span class="header-section-number">33</span> Getting to work with Shiny</h1>
<p>At its core, Shiny is essentially an R package, similar to dplyr or ggplot2. However, Shiny is unique in that it allows you to build web applications using the R language, instead of relying on traditional web development technologies like JavaScript or HTML5. This R-based approach makes Shiny an efficient choice for creating web applications tailored for data presentation and analysis.</p>
<p>To illustrate, let's take a look at an example of a basic Shiny app that we will recreate in today's tutorial</p>
<div id="image" class="section level2" number="33.1">
<h2><span class="header-section-number">33.1</span> IMAGE</h2>
<p>Shiny apps are useful for several purposes:</p>
<p><strong>Interactive Data Visualization for Presentations and Websites:</strong> Shiny apps allow you to create interactive data visualizations, which can enhance your presentations, reports, or websites. Users can explore data, change parameters, and see real-time updates, making the information more engaging and informative.</p>
<p><strong>Sharing Results with Collaborators:</strong> Shiny apps are valuable for sharing data and analysis results with collaborators, team members, or clients. By creating interactive dashboards or tools, you can make it easier for others to interact with and understand the data, even if they don't have expertise in R or data analysis.</p>
<p><strong>Communicating Science in an Accessible Way:</strong> Shiny apps can be a powerful tool for scientists, researchers, and educators to communicate complex scientific concepts or research findings to a broader audience. They provide an accessible and user-friendly interface to explore and understand data-driven insights.</p>
<p><strong>Bridging the Gap Between R Users and Non-R Users:</strong> Shiny acts as a bridge between R users and individuals who may not be familiar with R programming. With Shiny, you can create applications that allow non-R users to interact with and benefit from R's data analysis capabilities without needing to write R code themselves.</p>
</div>
<div id="using-the-demo-app" class="section level2" number="33.2">
<h2><span class="header-section-number">33.2</span> Using the Demo App</h2>
<p>New project…
Under the File menu, choose New Project.... You will see a popup window like the one below. Choose New Directory.</p>
<p>Then choose <code>Shiny Web App</code></p>
<p><img src="images/demo-app.png" width="100%" style="display: block; margin: auto;" /></p>
<div id="run-the-app" class="section level3" number="33.2.1">
<h3><span class="header-section-number">33.2.1</span> Run the app</h3>
<p>Click on Run App in the top right corner of the source pane. The app will open up in a new window. Play with the slider and watch the histogram change.</p>
<p><img src="images/first-app.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="modify-the-demo-app" class="section level3" number="33.2.2">
<h3><span class="header-section-number">33.2.2</span> Modify the Demo App</h3>
<p>Now we’re going to make a series of changes to the demo app until it’s all your own.</p>
<p>You can close the app by closing the window or browser tab it’s running in, or leave it running while you edit the code. If you have multiple screens, it’s useful to have the app open on one screen and the code on another.</p>
<p><strong>1. Change the title</strong></p>
<p>Change the title to "My First App". Make sure the title is inside quotes and the whole quoted string is inside the parentheses. Save the file.</p>
<p>Then click <strong>Run App</strong></p>
<p><img src="images/title-app.png" width="100%" style="display: block; margin: auto;" /></p>
<p><strong>2. Change the input</strong></p>
<p>Now let's change the input. Find the function sliderInput() (line 21). The first argument is the name you can use in the code to find the value of this input, so don't change it just yet. The second argument is the text that displays before the slider. Change this to something else and re-run the app.</p>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb578-1"><a href="#cb578-1" tabindex="-1"></a><span class="fu">sliderInput</span>(<span class="st">&quot;bins&quot;</span>,</span>
<span id="cb578-2"><a href="#cb578-2" tabindex="-1"></a>            <span class="st">&quot;Number of bins:&quot;</span>,</span>
<span id="cb578-3"><a href="#cb578-3" tabindex="-1"></a>            <span class="at">min =</span> <span class="dv">0</span>,</span>
<span id="cb578-4"><a href="#cb578-4" tabindex="-1"></a>            <span class="at">max =</span> <span class="dv">50</span>,</span>
<span id="cb578-5"><a href="#cb578-5" tabindex="-1"></a>            <span class="at">value =</span> <span class="dv">30</span>)</span></code></pre></div>
<div class="try">
<p>
See if you can figure out what the next three arguments to
sliderInput() do. Change them to different integers, then re-run the app
to see what’s changed.
</p>
</div>
<p>The arguments to the function <code>sidebarPanel()</code> are just a list of things you want to display in the sidebar. To add some explanatory text in a paragraph before <code>sliderInput()</code>, just use the paragraph function <code>p()</code>.</p>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb579-1"><a href="#cb579-1" tabindex="-1"></a><span class="fu">sidebarPanel</span>(</span>
<span id="cb579-2"><a href="#cb579-2" tabindex="-1"></a>   <span class="fu">p</span>(<span class="st">&quot;I am explaining this perfectly&quot;</span>),</span>
<span id="cb579-3"><a href="#cb579-3" tabindex="-1"></a>   <span class="fu">sliderInput</span>(<span class="st">&quot;bins&quot;</span>,</span>
<span id="cb579-4"><a href="#cb579-4" tabindex="-1"></a>               <span class="st">&quot;Choose the best bin number:&quot;</span>,</span>
<span id="cb579-5"><a href="#cb579-5" tabindex="-1"></a>               <span class="at">min =</span> <span class="dv">10</span>,</span>
<span id="cb579-6"><a href="#cb579-6" tabindex="-1"></a>               <span class="at">max =</span> <span class="dv">40</span>,</span>
<span id="cb579-7"><a href="#cb579-7" tabindex="-1"></a>               <span class="at">value =</span> <span class="dv">25</span>)</span>
<span id="cb579-8"><a href="#cb579-8" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="images/sidebar-app.png" width="100%" style="display: block; margin: auto;" /></p>
<p><strong>3. Change the layout</strong></p>
<p>I don't like the position of this explanatory text, so we can move this text out of the sidebar and to the top of the page, just under the title. Try this and re-run the app.</p>
<div class="sourceCode" id="cb580"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb580-1"><a href="#cb580-1" tabindex="-1"></a><span class="co"># Application title</span></span>
<span id="cb580-2"><a href="#cb580-2" tabindex="-1"></a><span class="fu">titlePanel</span>(<span class="st">&quot;My First App&quot;</span>),</span>
<span id="cb580-3"><a href="#cb580-3" tabindex="-1"></a></span>
<span id="cb580-4"><a href="#cb580-4" tabindex="-1"></a><span class="fu">p</span>(<span class="st">&quot;I am explaining this perfectly&quot;</span>),</span>
<span id="cb580-5"><a href="#cb580-5" tabindex="-1"></a></span>
<span id="cb580-6"><a href="#cb580-6" tabindex="-1"></a><span class="co"># Sidebar with a slider input for number of bins</span></span>
<span id="cb580-7"><a href="#cb580-7" tabindex="-1"></a><span class="fu">sidebarLayout</span>(...)</span></code></pre></div>
<p><strong>4. Change some colours</strong></p>
<p>I'm also not keen on the grey plot. We can change the plot colour inside <code>hist()</code></p>
<div class="sourceCode" id="cb581"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb581-1"><a href="#cb581-1" tabindex="-1"></a><span class="co"># draw the histogram with the specified number of bins</span></span>
<span id="cb581-2"><a href="#cb581-2" tabindex="-1"></a><span class="fu">hist</span>(x, <span class="at">breaks =</span> bins, <span class="at">col =</span> <span class="st">&#39;skyblue&#39;</span>, <span class="at">border =</span> <span class="st">&#39;grey30&#39;</span>)</span></code></pre></div>
<p><strong>5. Change the plot</strong></p>
<p>I prefer ggplots, so let's make the plot with <code>geom_histogram()</code> instead of <code>hist()</code> (which is a great function for really quick plots, but not very visually appealing). Since we need several functions from the <code>ggplot2</code> package, we'll need to load that package at the top of the script, just under where the shiny package is loaded:</p>
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb582-1"><a href="#cb582-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb582-2"><a href="#cb582-2" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<p>You can replace all of the code in <code>renderPlot()</code> with the code below.</p>
<div class="sourceCode" id="cb583"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb583-1"><a href="#cb583-1" tabindex="-1"></a>output<span class="sc">$</span>distPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb583-2"><a href="#cb583-2" tabindex="-1"></a>  <span class="co"># create plot</span></span>
<span id="cb583-3"><a href="#cb583-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(faithful, <span class="fu">aes</span>(waiting)) <span class="sc">+</span></span>
<span id="cb583-4"><a href="#cb583-4" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">bins =</span> input<span class="sc">$</span>bins,</span>
<span id="cb583-5"><a href="#cb583-5" tabindex="-1"></a>                   <span class="at">fill =</span> <span class="st">&quot;steelblue3&quot;</span>,</span>
<span id="cb583-6"><a href="#cb583-6" tabindex="-1"></a>                   <span class="at">colour =</span> <span class="st">&quot;grey30&quot;</span>) <span class="sc">+</span></span>
<span id="cb583-7"><a href="#cb583-7" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;What are we even plotting here?&quot;</span>) <span class="sc">+</span></span>
<span id="cb583-8"><a href="#cb583-8" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb583-9"><a href="#cb583-9" tabindex="-1"></a>})</span></code></pre></div>
<p><strong>6.Plot new things</strong></p>
<p>The <code>faithful</code> dataset includes two columns: eruptions and waiting. We've been plotting the waiting variable, but what if you wanted to plot the eruptions variable instead?</p>
<div class="try">
<p>
Try plotting the eruption time (eruptions) instead of the waiting
time. You just have to change one word in ggplot() and update the x-axis
label.
</p>
</div>
<p>We can add another input widget to let the user switch between plotting eruption time and wait time. We'll learn more about the different input options in Section 3. We need to toggle between two options, so we can use either radio buttons or a select box. Radio buttons are probably best if you have only a few options and the user will want to see them all at the same time to decide.</p>
<p>Add the following code as the first argument to sidebarPanel(), which just takes a list of different widgets. radioButtons() is the widget we're using. We'll set four arguments:</p>
<ul>
<li><p>inputId: a unique identifier that we will use later in the code to find the value of this widget</p></li>
<li><p>label: the text to display to the user</p></li>
<li><p>choices: a list of choices in the format c("label1" = "value1", "label2" = "value2", ...)</p></li>
<li><p>selected: the value of the default choice</p></li>
</ul>
<p>For choices, the label is what gets shown to the user and the value is what gets used by the code (these can be the same, but you often want the user label to be more descriptive).</p>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="#cb584-1" tabindex="-1"></a> <span class="fu">radioButtons</span>(<span class="at">inputId =</span> <span class="st">&quot;display_var&quot;</span>,</span>
<span id="cb584-2"><a href="#cb584-2" tabindex="-1"></a>              <span class="at">label =</span> <span class="st">&quot;Which variable to display&quot;</span>,</span>
<span id="cb584-3"><a href="#cb584-3" tabindex="-1"></a>              <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Waiting time to next eruption&quot;</span> <span class="ot">=</span> <span class="st">&quot;waiting&quot;</span>,</span>
<span id="cb584-4"><a href="#cb584-4" tabindex="-1"></a>                          <span class="st">&quot;Eruption time&quot;</span> <span class="ot">=</span> <span class="st">&quot;eruptions&quot;</span>),</span>
<span id="cb584-5"><a href="#cb584-5" tabindex="-1"></a>              <span class="at">selected =</span> <span class="st">&quot;waiting&quot;</span></span>
<span id="cb584-6"><a href="#cb584-6" tabindex="-1"></a> ),</span></code></pre></div>
<p>Save this and re-run the app.</p>
<p><img src="images/widget-app.png" width="100%" style="display: block; margin: auto;" /></p>
<p>You should have a radio button interface now. You can click on the options to switch the button, but it won't do anything to your plot yet. We need to edit the plot-generating code to make that happen.</p>
<p>First, we need to change the x-axis label depending on what we're graphing. We use an if/else statement to set the variable xlabel to one thing if <code>input$display_var</code> is equivalent to "eruptions", and to something else if it's equivalent to "waiting". Put this code at the very beginning of the code block for <code>renderPlot()</code> (after the line <code>output$distPlot &lt;- renderPlot({</code>).</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb585-1"><a href="#cb585-1" tabindex="-1"></a><span class="co"># set x-axis label depending on the value of display_var</span></span>
<span id="cb585-2"><a href="#cb585-2" tabindex="-1"></a><span class="cf">if</span> (input<span class="sc">$</span>display_var <span class="sc">==</span> <span class="st">&quot;eruptions&quot;</span>) {</span>
<span id="cb585-3"><a href="#cb585-3" tabindex="-1"></a>  xlabel <span class="ot">&lt;-</span> <span class="st">&quot;Eruption Time (in minutes)&quot;</span></span>
<span id="cb585-4"><a href="#cb585-4" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (input<span class="sc">$</span>display_var <span class="sc">==</span> <span class="st">&quot;waiting&quot;</span>) {</span>
<span id="cb585-5"><a href="#cb585-5" tabindex="-1"></a>  xlabel <span class="ot">&lt;-</span> <span class="st">&quot;Waiting Time to Next Eruption (in minutes)&quot;</span></span>
<span id="cb585-6"><a href="#cb585-6" tabindex="-1"></a>}</span></code></pre></div>
<p>Then we have to edit ggplot() to use the new label and to plot the correct column. The variable <code>input$display_var</code> gives you the user-input value of the widget called "display_var".</p>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="#cb586-1" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb586-2"><a href="#cb586-2" tabindex="-1"></a><span class="fu">ggplot</span>(faithful, <span class="fu">aes</span>(.data[[input<span class="sc">$</span>display_var]])) <span class="sc">+</span></span>
<span id="cb586-3"><a href="#cb586-3" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> input<span class="sc">$</span>bins,</span>
<span id="cb586-4"><a href="#cb586-4" tabindex="-1"></a>                 <span class="at">fill =</span> <span class="st">&quot;steelblue3&quot;</span>,</span>
<span id="cb586-5"><a href="#cb586-5" tabindex="-1"></a>                 <span class="at">colour =</span> <span class="st">&quot;grey30&quot;</span>) <span class="sc">+</span></span>
<span id="cb586-6"><a href="#cb586-6" tabindex="-1"></a>  <span class="fu">xlab</span>(xlabel) <span class="sc">+</span></span>
<span id="cb586-7"><a href="#cb586-7" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p>Re-run your app and see if you can change the data and x-axis label with your new widget.</p>
</div>
</div>
</div>
<div id="make-our-own-app" class="section level1" number="34">
<h1><span class="header-section-number">34</span> Make our own App</h1>
<p>Now that you've seen a basic Shiny app in actin, let's return to the beginning and create our own app.R file. A basic app.R consists of five key parts:</p>
<p><strong>Package Loading:</strong> At the top of the script, load any necessary R packages for your app to function. <code>shiny</code> is a requirement, but you can add others like <code>dplyr</code> or <code>ggplot2</code> as needed. If any packages are missing, you'll encounter an error, so ensure that you have them installed.</p>
<div class="sourceCode" id="cb587"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb587-1"><a href="#cb587-1" tabindex="-1"></a><span class="co"># Load the required packages</span></span>
<span id="cb587-2"><a href="#cb587-2" tabindex="-1"></a><span class="fu">library</span>(shiny)       <span class="co"># Essential for running any Shiny app</span></span>
<span id="cb587-3"><a href="#cb587-3" tabindex="-1"></a><span class="fu">library</span>(tidyverse)  <span class="co"># Contains readr, dplyr and ggplot2</span></span>
<span id="cb587-4"><a href="#cb587-4" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)    <span class="co"># The source of your data</span></span></code></pre></div>
<p><strong>Data Loading:</strong> Next, load any data necessary for your app. This typically involves reading datasets into R objects. Ensure that you have the data file or source available in the specified format.</p>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb588-1"><a href="#cb588-1" tabindex="-1"></a><span class="co"># Load the data</span></span>
<span id="cb588-2"><a href="#cb588-2" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(penguins)</span></code></pre></div>
<p><strong>UI Object:</strong> Create an object called ui that defines the app's user interface. This specifies how the app will appear in the web browser. The <code>fluidPage()</code> function creates a responsive layout that adjusts to the browser window's size. All of your UI code will go inside the curly braces.</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb589-1"><a href="#cb589-1" tabindex="-1"></a><span class="co"># Define the UI</span></span>
<span id="cb589-2"><a href="#cb589-2" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb589-3"><a href="#cb589-3" tabindex="-1"></a>  <span class="co"># Your UI components will be defined here</span></span>
<span id="cb589-4"><a href="#cb589-4" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>Server Object:</strong> Create another object called server, which contains the app's logic. Here, you specify how your app computes and creates plots, tables, maps, or any other content based on the user's input. All of the app's logic code will be placed inside the server function.</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="#cb590-1" tabindex="-1"></a><span class="co"># Define the server logic</span></span>
<span id="cb590-2"><a href="#cb590-2" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb590-3"><a href="#cb590-3" tabindex="-1"></a>  <span class="co"># Your server logic will be defined here</span></span>
<span id="cb590-4"><a href="#cb590-4" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>App Execution:</strong> Finally, include a command at the end of app.R to run your app. This informs Shiny that the user interface is defined by the ui object, and the server logic (data, plots, tables, etc.) is defined by the server object.</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb591-1"><a href="#cb591-1" tabindex="-1"></a><span class="co"># Run the app</span></span>
<span id="cb591-2"><a href="#cb591-2" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<p>To create your own Shiny app, you should remove any example code generated automatically when you created app.R and replace it with the structure provided above. Check that your final app.R script resembles the following:</p>
<button id="displayTextunnamed-chunk-23" onclick="javascript:toggle(&#39;unnamed-chunk-23&#39;);">
Show Solution
</button>
<div id="toggleTextunnamed-chunk-23" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb592-1"><a href="#cb592-1" tabindex="-1"></a><span class="co"># Packages ----</span></span>
<span id="cb592-2"><a href="#cb592-2" tabindex="-1"></a><span class="fu">library</span>(shiny)       <span class="co"># Essential for running any Shiny app</span></span>
<span id="cb592-3"><a href="#cb592-3" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb592-4"><a href="#cb592-4" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)    <span class="co"># The source of your data</span></span>
<span id="cb592-5"><a href="#cb592-5" tabindex="-1"></a></span>
<span id="cb592-6"><a href="#cb592-6" tabindex="-1"></a><span class="co"># Load the data</span></span>
<span id="cb592-7"><a href="#cb592-7" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(penguins)</span>
<span id="cb592-8"><a href="#cb592-8" tabindex="-1"></a></span>
<span id="cb592-9"><a href="#cb592-9" tabindex="-1"></a><span class="co"># ui.R ----</span></span>
<span id="cb592-10"><a href="#cb592-10" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb592-11"><a href="#cb592-11" tabindex="-1"></a>  <span class="co"># Your UI components will be defined here</span></span>
<span id="cb592-12"><a href="#cb592-12" tabindex="-1"></a>)</span>
<span id="cb592-13"><a href="#cb592-13" tabindex="-1"></a></span>
<span id="cb592-14"><a href="#cb592-14" tabindex="-1"></a><span class="co"># server.R ----</span></span>
<span id="cb592-15"><a href="#cb592-15" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb592-16"><a href="#cb592-16" tabindex="-1"></a>  <span class="co"># Your server logic will be defined here</span></span>
<span id="cb592-17"><a href="#cb592-17" tabindex="-1"></a>}</span>
<span id="cb592-18"><a href="#cb592-18" tabindex="-1"></a></span>
<span id="cb592-19"><a href="#cb592-19" tabindex="-1"></a><span class="co"># Run the app ----</span></span>
<span id="cb592-20"><a href="#cb592-20" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</div>
</div>
</div>
<p>By following these steps, you'll have the basic structure of a Shiny app in place, ready for you to add your UI elements and server logic to create an interactive web application.</p>
</div>
<div id="inputs" class="section level1" number="35">
<h1><span class="header-section-number">35</span> Inputs</h1>
<p>Now that you have the basic structure of your Shiny app, you can start adding input and output elements to make it interactive. This example app includes four input widgets: a <code>selectInput</code> for genotype, another <code>selectInput</code> for histogram color, a <code>sliderInput</code> for the number of bins, and a <code>textInput</code> for arbitrary text. These widgets provide information on how to display a histogram and its accompanying table. In the example app, all these widgets are placed in the <code>sidebarPanel</code>. Here's how you can incorporate these widgets into your app:</p>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb593-1"><a href="#cb593-1" tabindex="-1"></a><span class="co"># Packages ----</span></span>
<span id="cb593-2"><a href="#cb593-2" tabindex="-1"></a><span class="fu">library</span>(shiny)       <span class="co"># Essential for running any Shiny app</span></span>
<span id="cb593-3"><a href="#cb593-3" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb593-4"><a href="#cb593-4" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)    <span class="co"># The source of your data</span></span>
<span id="cb593-5"><a href="#cb593-5" tabindex="-1"></a></span>
<span id="cb593-6"><a href="#cb593-6" tabindex="-1"></a><span class="co"># Load the data</span></span>
<span id="cb593-7"><a href="#cb593-7" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(penguins)</span>
<span id="cb593-8"><a href="#cb593-8" tabindex="-1"></a></span>
<span id="cb593-9"><a href="#cb593-9" tabindex="-1"></a><span class="co"># ui.R ----</span></span>
<span id="cb593-10"><a href="#cb593-10" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb593-11"><a href="#cb593-11" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb593-12"><a href="#cb593-12" tabindex="-1"></a>     <span class="fu">sidebarPanel</span>(</span>
<span id="cb593-13"><a href="#cb593-13" tabindex="-1"></a>      demo_sp <span class="ot">&lt;-</span> <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;species&quot;</span>,  <span class="co"># Give the input a name &quot;genotype&quot;</span></span>
<span id="cb593-14"><a href="#cb593-14" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;1. Select species&quot;</span>,  <span class="co"># Give the input a label to be displayed in the app</span></span>
<span id="cb593-15"><a href="#cb593-15" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span> <span class="ot">=</span> <span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span> <span class="ot">=</span> <span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span> <span class="ot">=</span> <span class="st">&quot;Gentoo&quot;</span>), <span class="at">selected =</span> <span class="st">&quot;Adelie&quot;</span>),  <span class="co"># Create the choices that can be selected. e.g. Display &quot;Adelie&quot; and link to value &quot;Adelie&quot;</span></span>
<span id="cb593-16"><a href="#cb593-16" tabindex="-1"></a>      demo_select <span class="ot">&lt;-</span> <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;colour&quot;</span>, </span>
<span id="cb593-17"><a href="#cb593-17" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;2. Select histogram colour&quot;</span>, </span>
<span id="cb593-18"><a href="#cb593-18" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;green&quot;</span>,<span class="st">&quot;red&quot;</span>,<span class="st">&quot;purple&quot;</span>,<span class="st">&quot;grey&quot;</span>), <span class="at">selected =</span> <span class="st">&quot;grey&quot;</span>),</span>
<span id="cb593-19"><a href="#cb593-19" tabindex="-1"></a>      demo_slide <span class="ot">&lt;-</span> <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;bin&quot;</span>, </span>
<span id="cb593-20"><a href="#cb593-20" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;3. Select number of histogram bins&quot;</span>, </span>
<span id="cb593-21"><a href="#cb593-21" tabindex="-1"></a>                  <span class="at">min=</span><span class="dv">1</span>, <span class="at">max=</span><span class="dv">25</span>, <span class="at">value=</span> <span class="fu">c</span>(<span class="dv">10</span>)),</span>
<span id="cb593-22"><a href="#cb593-22" tabindex="-1"></a>      demo_text <span class="ot">&lt;-</span> <span class="fu">textAreaInput</span>(<span class="at">inputId =</span> <span class="st">&quot;text&quot;</span>, </span>
<span id="cb593-23"><a href="#cb593-23" tabindex="-1"></a>                <span class="at">label =</span> <span class="st">&quot;4. Enter some text to be displayed&quot;</span>,</span>
<span id="cb593-24"><a href="#cb593-24" tabindex="-1"></a>                <span class="at">rows =</span> <span class="dv">5</span>,</span>
<span id="cb593-25"><a href="#cb593-25" tabindex="-1"></a>                <span class="at">placeholder =</span> <span class="st">&quot;Enter some information here&quot;</span>)</span>
<span id="cb593-26"><a href="#cb593-26" tabindex="-1"></a>    ),</span>
<span id="cb593-27"><a href="#cb593-27" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb593-28"><a href="#cb593-28" tabindex="-1"></a>      <span class="co"># Output elements go here</span></span>
<span id="cb593-29"><a href="#cb593-29" tabindex="-1"></a>    )</span>
<span id="cb593-30"><a href="#cb593-30" tabindex="-1"></a>  )</span>
<span id="cb593-31"><a href="#cb593-31" tabindex="-1"></a>)</span>
<span id="cb593-32"><a href="#cb593-32" tabindex="-1"></a><span class="co"># server.R ----</span></span>
<span id="cb593-33"><a href="#cb593-33" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb593-34"><a href="#cb593-34" tabindex="-1"></a>  <span class="co"># Your server logic will be defined here</span></span>
<span id="cb593-35"><a href="#cb593-35" tabindex="-1"></a></span>
<span id="cb593-36"><a href="#cb593-36" tabindex="-1"></a>}</span>
<span id="cb593-37"><a href="#cb593-37" tabindex="-1"></a></span>
<span id="cb593-38"><a href="#cb593-38" tabindex="-1"></a></span>
<span id="cb593-39"><a href="#cb593-39" tabindex="-1"></a></span>
<span id="cb593-40"><a href="#cb593-40" tabindex="-1"></a><span class="co"># Run the app ----</span></span>
<span id="cb593-41"><a href="#cb593-41" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<p>In the code above, we've added the input widgets in the <code>sidebarPanel</code> section of your <code>ui</code> object. These widgets allow users to select a genotype, choose a histogram color, set the number of bins for the histogram, and add arbitrary text.</p>
<p>Let's take a moment to understand the <code>selectInput()</code> function and how it's configured:</p>
<p><strong>inputId = "species":</strong> This is the unique identifier for this input element. It's crucial for later referencing this input within your app script.</p>
<p><strong>label = "1. Select species":</strong> This is the label you want to display above the input in your app. It provides clarity to users by describing the purpose of the input.</p>
<p><strong>choices = c("Adelie" = "Adelie", "Chinstrap" = "Chinstrap", ...):</strong> Here, you define a list of choices that will be presented in the dropdown menu. Each choice has two parts: the display label (on the left) and the corresponding value that the app will collect and use in its output (on the right).</p>
<p><strong>selected = "grey":</strong> This specifies the default value selected in the dropdown menu when the app is first loaded. In this example, 'grey' will be preselected.</p>
<p>Now that you've grasped how <code>selectInput()</code> works, let's use it to customize your Shiny app further."</p>
<p>The above explanation clarifies the purpose and settings of the <code>selectInput()</code> function, and you can use this understanding to configure other input elements in your Shiny app. Below is a summary of the different Input functions available for Shiny</p>
<div id="textinput" class="section level3" number="35.0.1">
<h3><span class="header-section-number">35.0.1</span> textInput</h3>
<p><code>textInput</code> creates a one-line box for short text input. The first <code>argument</code>, <code>inputId</code> (the argument name is usually omitted), needs to be a unique string that you cannot use for another input or output in this app.</p>
<div class="sourceCode" id="cb594"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb594-1"><a href="#cb594-1" tabindex="-1"></a>demo_text <span class="ot">&lt;-</span> </span>
<span id="cb594-2"><a href="#cb594-2" tabindex="-1"></a>  <span class="fu">textInput</span>(<span class="st">&quot;demo_text&quot;</span>, </span>
<span id="cb594-3"><a href="#cb594-3" tabindex="-1"></a>            <span class="at">label =</span> <span class="st">&quot;Name&quot;</span>, </span>
<span id="cb594-4"><a href="#cb594-4" tabindex="-1"></a>            <span class="at">value =</span> <span class="st">&quot;&quot;</span>, </span>
<span id="cb594-5"><a href="#cb594-5" tabindex="-1"></a>            <span class="at">width =</span> <span class="st">&quot;100%&quot;</span>,</span>
<span id="cb594-6"><a href="#cb594-6" tabindex="-1"></a>            <span class="at">placeholder =</span> <span class="st">&quot;Your Name&quot;</span>)</span></code></pre></div>
<div class="try">
<p>
Experiment with the values of <code>arg("label")</code>,
<code>arg("value")</code>, <code>arg("width")</code>, and
<code>arg("placeholder")</code> to see what they do.
</p>
</div>
</div>
<div id="textareainput" class="section level3" number="35.0.2">
<h3><span class="header-section-number">35.0.2</span> textAreaInput</h3>
<p><code>func("textAreaInput")</code> creates a multi-line box for longer text input.</p>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb595-1"><a href="#cb595-1" tabindex="-1"></a>demo_textarea <span class="ot">&lt;-</span> </span>
<span id="cb595-2"><a href="#cb595-2" tabindex="-1"></a>  <span class="fu">textAreaInput</span>(<span class="st">&quot;demo_textarea&quot;</span>, </span>
<span id="cb595-3"><a href="#cb595-3" tabindex="-1"></a>                <span class="at">label =</span> <span class="st">&quot;Biography&quot;</span>, </span>
<span id="cb595-4"><a href="#cb595-4" tabindex="-1"></a>                <span class="at">value =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb595-5"><a href="#cb595-5" tabindex="-1"></a>                <span class="at">width =</span> <span class="st">&quot;100%&quot;</span>,</span>
<span id="cb595-6"><a href="#cb595-6" tabindex="-1"></a>                <span class="at">rows =</span> <span class="dv">5</span>, </span>
<span id="cb595-7"><a href="#cb595-7" tabindex="-1"></a>                <span class="at">placeholder =</span> <span class="st">&quot;Tell us something interesting about you.&quot;</span>)</span></code></pre></div>
<p>What is the <code>arg("inputId")</code> of the widget above?</p>
<p><select class='webex-select'><option value='blank'></option><option value=''>textAreaInput</option><option value='answer'>demo_textarea</option><option value=''>Biography</option></select></p>
</div>
<div id="selectinput" class="section level3" number="35.0.3">
<h3><span class="header-section-number">35.0.3</span> selectInput</h3>
<p><code>func("selectInput")</code> creates a drop-down menu. Set the first <code>arg("choice")</code> to <code>""</code> to default to <code>NA</code>. If your choices are a named <code>"list"</code> or <code>"vector"</code>, the names are what is shown and the values are what is recorded. If the choices aren't named, the displayed and recorded values are the same.</p>
<div class="sourceCode" id="cb596"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb596-1"><a href="#cb596-1" tabindex="-1"></a>demo_select <span class="ot">&lt;-</span> </span>
<span id="cb596-2"><a href="#cb596-2" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">&quot;demo_select&quot;</span>, </span>
<span id="cb596-3"><a href="#cb596-3" tabindex="-1"></a>              <span class="at">label =</span> <span class="st">&quot;Do you like Shiny?&quot;</span>, </span>
<span id="cb596-4"><a href="#cb596-4" tabindex="-1"></a>              <span class="at">choices =</span> <span class="fu">list</span>(<span class="st">&quot;&quot;</span>, </span>
<span id="cb596-5"><a href="#cb596-5" tabindex="-1"></a>                             <span class="st">&quot;Yes, I do&quot;</span> <span class="ot">=</span> <span class="st">&quot;y&quot;</span>, </span>
<span id="cb596-6"><a href="#cb596-6" tabindex="-1"></a>                             <span class="st">&quot;No, I don&#39;t&quot;</span> <span class="ot">=</span> <span class="st">&quot;n&quot;</span>),</span>
<span id="cb596-7"><a href="#cb596-7" tabindex="-1"></a>              <span class="at">selected =</span> <span class="cn">NULL</span>,</span>
<span id="cb596-8"><a href="#cb596-8" tabindex="-1"></a>              <span class="at">width =</span> <span class="st">&quot;100%&quot;</span>)</span></code></pre></div>
<p>If you set <code>arg("multiple")</code> to <code>dt(TRUE)</code>, you can also make a select where users can choose multiple options.</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb597-1"><a href="#cb597-1" tabindex="-1"></a>genders <span class="ot">&lt;-</span> <span class="fu">list</span>( <span class="co"># no blank needed</span></span>
<span id="cb597-2"><a href="#cb597-2" tabindex="-1"></a>  <span class="st">&quot;Non-binary&quot;</span> <span class="ot">=</span> <span class="st">&quot;nb&quot;</span>,</span>
<span id="cb597-3"><a href="#cb597-3" tabindex="-1"></a>  <span class="st">&quot;Male&quot;</span> <span class="ot">=</span> <span class="st">&quot;m&quot;</span>,</span>
<span id="cb597-4"><a href="#cb597-4" tabindex="-1"></a>  <span class="st">&quot;Female&quot;</span> <span class="ot">=</span> <span class="st">&quot;f&quot;</span>,</span>
<span id="cb597-5"><a href="#cb597-5" tabindex="-1"></a>  <span class="st">&quot;Prefer not to say&quot;</span> <span class="ot">=</span> <span class="st">&quot;p&quot;</span></span>
<span id="cb597-6"><a href="#cb597-6" tabindex="-1"></a>)</span>
<span id="cb597-7"><a href="#cb597-7" tabindex="-1"></a></span>
<span id="cb597-8"><a href="#cb597-8" tabindex="-1"></a>demo_select_multi <span class="ot">&lt;-</span> </span>
<span id="cb597-9"><a href="#cb597-9" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">&quot;demo_select2&quot;</span>, </span>
<span id="cb597-10"><a href="#cb597-10" tabindex="-1"></a>              <span class="at">label =</span> <span class="st">&quot;Gender&quot;</span>, </span>
<span id="cb597-11"><a href="#cb597-11" tabindex="-1"></a>              <span class="at">choices =</span> genders,</span>
<span id="cb597-12"><a href="#cb597-12" tabindex="-1"></a>              <span class="at">selected =</span> <span class="cn">NULL</span>,</span>
<span id="cb597-13"><a href="#cb597-13" tabindex="-1"></a>              <span class="at">multiple =</span> <span class="cn">TRUE</span>, </span>
<span id="cb597-14"><a href="#cb597-14" tabindex="-1"></a>              <span class="at">selectize =</span> <span class="cn">FALSE</span>,</span>
<span id="cb597-15"><a href="#cb597-15" tabindex="-1"></a>              <span class="at">size =</span> <span class="dv">5</span>)</span></code></pre></div>
</div>
<div id="checkboxgroupinput" class="section level3" number="35.0.4">
<h3><span class="header-section-number">35.0.4</span> checkboxGroupInput</h3>
<p>However, this interface almost always looks better with <code>func("checkboxGroupInput")</code>.</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb598-1"><a href="#cb598-1" tabindex="-1"></a>demo_cbgi <span class="ot">&lt;-</span></span>
<span id="cb598-2"><a href="#cb598-2" tabindex="-1"></a>  <span class="fu">checkboxGroupInput</span>(<span class="st">&quot;demo_cbgi&quot;</span>,</span>
<span id="cb598-3"><a href="#cb598-3" tabindex="-1"></a>                     <span class="at">label =</span> <span class="st">&quot;Gender)&quot;</span>,</span>
<span id="cb598-4"><a href="#cb598-4" tabindex="-1"></a>                     <span class="at">choices =</span> genders)</span></code></pre></div>
<p>How can you get the checkboxes to display horizontally instead of vertically?</p>
<p><select class='webex-select'><option value='blank'></option><option value=''>display = 'horizontal'</option><option value=''>class = 'horiz'</option><option value='answer'>inline = TRUE</option><option value=''>class = 'shiny-input-container-inline'</option></select></p>
</div>
<div id="checkboxinput" class="section level3" number="35.0.5">
<h3><span class="header-section-number">35.0.5</span> checkboxInput</h3>
<p>You can also make a single checkbox with <code>func("checkboxInput")</code>. The <code>arg("value")</code> is <code>dt(TRUE)</code> when checked and <code>dt(FALSE)</code> when not.</p>
<div class="sourceCode" id="cb599"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb599-1"><a href="#cb599-1" tabindex="-1"></a>demo_cb <span class="ot">&lt;-</span> <span class="fu">checkboxInput</span>(<span class="st">&quot;demo_cb&quot;</span>,</span>
<span id="cb599-2"><a href="#cb599-2" tabindex="-1"></a>                         <span class="at">label =</span> <span class="st">&quot;I love R&quot;</span>,</span>
<span id="cb599-3"><a href="#cb599-3" tabindex="-1"></a>                         <span class="at">value =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><code>func("sliderInput")</code> allows you to choose numbers between a <code>arg("min")</code> and <code>arg("max")</code> value.</p>
<div class="sourceCode" id="cb600"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb600-1"><a href="#cb600-1" tabindex="-1"></a>demo_slider <span class="ot">&lt;-</span> <span class="fu">sliderInput</span>(<span class="st">&quot;demo_slider&quot;</span>,</span>
<span id="cb600-2"><a href="#cb600-2" tabindex="-1"></a>                           <span class="at">label =</span> <span class="st">&quot;Age&quot;</span>,</span>
<span id="cb600-3"><a href="#cb600-3" tabindex="-1"></a>                           <span class="at">min =</span> <span class="dv">0</span>,</span>
<span id="cb600-4"><a href="#cb600-4" tabindex="-1"></a>                           <span class="at">max =</span> <span class="dv">100</span>,</span>
<span id="cb600-5"><a href="#cb600-5" tabindex="-1"></a>                           <span class="at">value =</span> <span class="dv">0</span>,</span>
<span id="cb600-6"><a href="#cb600-6" tabindex="-1"></a>                           <span class="at">step =</span> <span class="dv">1</span>,</span>
<span id="cb600-7"><a href="#cb600-7" tabindex="-1"></a>                           <span class="at">width =</span> <span class="st">&quot;100%&quot;</span>)</span></code></pre></div>
<div class="try">
<p>
What happens if you change <code>arg("value")</code> or
<code>arg("step")</code>? Try changing <code>arg("value")</code> to
<code>c(10, 20)</code>.
</p>
</div>
</div>
<div id="radiobuttons" class="section level3" number="35.0.6">
<h3><span class="header-section-number">35.0.6</span> radioButtons</h3>
<p>If you want users to only be able to choose one option and there are a small number of short options, <code>func("radioButton")</code> is a good interface.</p>
<div class="sourceCode" id="cb601"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb601-1"><a href="#cb601-1" tabindex="-1"></a>demo_radio <span class="ot">&lt;-</span> <span class="fu">radioButtons</span>(<span class="st">&quot;demo_radio&quot;</span>,</span>
<span id="cb601-2"><a href="#cb601-2" tabindex="-1"></a>                           <span class="at">label =</span> <span class="st">&quot;Choose one&quot;</span>,</span>
<span id="cb601-3"><a href="#cb601-3" tabindex="-1"></a>                           <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Cats&quot;</span>, <span class="st">&quot;Dogs&quot;</span>),</span>
<span id="cb601-4"><a href="#cb601-4" tabindex="-1"></a>                           <span class="at">selected =</span> <span class="fu">character</span>(<span class="dv">0</span>),</span>
<span id="cb601-5"><a href="#cb601-5" tabindex="-1"></a>                           <span class="at">inline =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<div class="info">
<p>
Radio buttons default to selecting the first item unless you set
<code>arg("selected")</code> to a choice value or
<code>character(0)</code> to start with no selection.
</p>
</div>
</div>
<div id="dateinput" class="section level3" number="35.0.7">
<h3><span class="header-section-number">35.0.7</span> dateInput</h3>
<p>I find the date interface a little clunky, but...</p>
<div class="sourceCode" id="cb602"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb602-1"><a href="#cb602-1" tabindex="-1"></a>demo_date <span class="ot">&lt;-</span> <span class="fu">dateInput</span>(<span class="st">&quot;demo_date&quot;</span>,</span>
<span id="cb602-2"><a href="#cb602-2" tabindex="-1"></a>                       <span class="at">label =</span> <span class="st">&quot;What is your birth date?&quot;</span>,</span>
<span id="cb602-3"><a href="#cb602-3" tabindex="-1"></a>                       <span class="at">min =</span> <span class="st">&quot;1900-01-01&quot;</span>,</span>
<span id="cb602-4"><a href="#cb602-4" tabindex="-1"></a>                       <span class="at">max =</span> <span class="fu">Sys.Date</span>(),</span>
<span id="cb602-5"><a href="#cb602-5" tabindex="-1"></a>                       <span class="at">format =</span> <span class="st">&quot;yyyy-mm-dd&quot;</span>,</span>
<span id="cb602-6"><a href="#cb602-6" tabindex="-1"></a>                       <span class="at">startview =</span> <span class="st">&quot;year&quot;</span>)</span></code></pre></div>
<div class="info">
<p>
IMHO, the default of <code>dt("yyyy-mm-dd")</code> is the best
because it sorts into chronological order.
</p>
</div>
<p>What would you set <code>arg("format")</code> to in order to display dates like "Sunday July 4, 2021"?<br />
<select class='webex-select'><option value='blank'></option><option value=''>D M d, Y</option><option value='answer'>DD MM d, yyyy</option><option value=''>DAY MONTH day, YEAR</option><option value=''>D MM dd, yyyy</option></select></p>
</div>
<div id="fileinput" class="section level3" number="35.0.8">
<h3><span class="header-section-number">35.0.8</span> fileInput</h3>
<p>Users can upload one or more files with <code>func("fileInput")</code>. The argument <code>arg("accept")</code> lets you limit this to certain file types, but some browsers can bypass this requirement, so it's not fool-proof.</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb603-1"><a href="#cb603-1" tabindex="-1"></a>demo_file <span class="ot">&lt;-</span> <span class="fu">fileInput</span>(<span class="st">&quot;demo_file&quot;</span>,</span>
<span id="cb603-2"><a href="#cb603-2" tabindex="-1"></a>                       <span class="at">label =</span> <span class="st">&quot;Upload a data table&quot;</span>,</span>
<span id="cb603-3"><a href="#cb603-3" tabindex="-1"></a>                       <span class="at">multiple =</span> <span class="cn">FALSE</span>,</span>
<span id="cb603-4"><a href="#cb603-4" tabindex="-1"></a>                       <span class="at">accept =</span> <span class="fu">c</span>(<span class="st">&quot;.csv&quot;</span>, <span class="st">&quot;.tsv&quot;</span>),</span>
<span id="cb603-5"><a href="#cb603-5" tabindex="-1"></a>                       <span class="at">buttonLabel =</span> <span class="st">&quot;Upload&quot;</span>)</span></code></pre></div>
<p>What would you set <code>arg("accept")</code> to to accept any image file?<br />
<select class='webex-select'><option value='blank'></option><option value='answer'>image/*</option><option value=''>.jpg</option><option value=''>jpg</option><option value=''>images</option><option value=''>.img</option></select></p>
<p>Next, you'll need to implement the server logic and output elements in the <code>server.R</code> section. The server logic will define how these inputs affect the display of your histogram and table, but that would require additional code specific to your application's requirements.</p>
<p>Remember that Shiny allows you to create reactive expressions and functions that respond to changes in input values. You can use these reactive expressions to generate the histogram and associated table based on user input.</p>
<p>As you proceed, you can add more details to your <code>server.R</code> to handle these inputs and create the corresponding outputs.</p>
</div>
<div id="exercise-7" class="section level2" number="35.1">
<h2><span class="header-section-number">35.1</span> Exercise</h2>
<p><strong>1. Save a separate file with the progress on our penguins app</strong></p>
</div>
</div>
<div id="outputs" class="section level1" number="36">
<h1><span class="header-section-number">36</span> Outputs</h1>
<div class="sourceCode" id="cb604"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb604-1"><a href="#cb604-1" tabindex="-1"></a><span class="co"># Packages ----</span></span>
<span id="cb604-2"><a href="#cb604-2" tabindex="-1"></a><span class="fu">library</span>(shiny)       <span class="co"># Essential for running any Shiny app</span></span>
<span id="cb604-3"><a href="#cb604-3" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb604-4"><a href="#cb604-4" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)    <span class="co"># The source of your data</span></span>
<span id="cb604-5"><a href="#cb604-5" tabindex="-1"></a></span>
<span id="cb604-6"><a href="#cb604-6" tabindex="-1"></a><span class="co"># Load the data</span></span>
<span id="cb604-7"><a href="#cb604-7" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(penguins)</span>
<span id="cb604-8"><a href="#cb604-8" tabindex="-1"></a></span>
<span id="cb604-9"><a href="#cb604-9" tabindex="-1"></a><span class="co"># ui.R ----</span></span>
<span id="cb604-10"><a href="#cb604-10" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb604-11"><a href="#cb604-11" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb604-12"><a href="#cb604-12" tabindex="-1"></a>     <span class="fu">sidebarPanel</span>(</span>
<span id="cb604-13"><a href="#cb604-13" tabindex="-1"></a>       </span>
<span id="cb604-14"><a href="#cb604-14" tabindex="-1"></a>      demo_sp <span class="ot">&lt;-</span> <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;species&quot;</span>,  <span class="co"># Give the input a name &quot;genotype&quot;</span></span>
<span id="cb604-15"><a href="#cb604-15" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;1. Select species&quot;</span>,  <span class="co"># Give the input a label to be displayed in the app</span></span>
<span id="cb604-16"><a href="#cb604-16" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span> <span class="ot">=</span> <span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span> <span class="ot">=</span> <span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span> <span class="ot">=</span> <span class="st">&quot;Gentoo&quot;</span>), <span class="at">selected =</span> <span class="st">&quot;Adelie&quot;</span>),  <span class="co"># Create the choices that can be selected. e.g. Display &quot;Adelie&quot; and link to value &quot;Adelie&quot;</span></span>
<span id="cb604-17"><a href="#cb604-17" tabindex="-1"></a>      </span>
<span id="cb604-18"><a href="#cb604-18" tabindex="-1"></a>      demo_select <span class="ot">&lt;-</span> <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;colour&quot;</span>, </span>
<span id="cb604-19"><a href="#cb604-19" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;2. Select histogram colour&quot;</span>, </span>
<span id="cb604-20"><a href="#cb604-20" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;green&quot;</span>,<span class="st">&quot;red&quot;</span>,<span class="st">&quot;purple&quot;</span>,<span class="st">&quot;grey&quot;</span>), <span class="at">selected =</span> <span class="st">&quot;grey&quot;</span>),</span>
<span id="cb604-21"><a href="#cb604-21" tabindex="-1"></a>      </span>
<span id="cb604-22"><a href="#cb604-22" tabindex="-1"></a>      demo_slide <span class="ot">&lt;-</span> <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;bin&quot;</span>, </span>
<span id="cb604-23"><a href="#cb604-23" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;3. Select number of histogram bins&quot;</span>, </span>
<span id="cb604-24"><a href="#cb604-24" tabindex="-1"></a>                  <span class="at">min=</span><span class="dv">1</span>, <span class="at">max=</span><span class="dv">25</span>, <span class="at">value=</span> <span class="fu">c</span>(<span class="dv">10</span>)),</span>
<span id="cb604-25"><a href="#cb604-25" tabindex="-1"></a>      demo_text <span class="ot">&lt;-</span> <span class="fu">textAreaInput</span>(<span class="at">inputId =</span> <span class="st">&quot;text&quot;</span>, </span>
<span id="cb604-26"><a href="#cb604-26" tabindex="-1"></a>                <span class="at">label =</span> <span class="st">&quot;4. Enter some text to be displayed&quot;</span>,</span>
<span id="cb604-27"><a href="#cb604-27" tabindex="-1"></a>                <span class="at">rows =</span> <span class="dv">5</span>,</span>
<span id="cb604-28"><a href="#cb604-28" tabindex="-1"></a>                <span class="at">placeholder =</span> <span class="st">&quot;Enter some information here&quot;</span>)</span>
<span id="cb604-29"><a href="#cb604-29" tabindex="-1"></a>    ),</span>
<span id="cb604-30"><a href="#cb604-30" tabindex="-1"></a>    </span>
<span id="cb604-31"><a href="#cb604-31" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb604-32"><a href="#cb604-32" tabindex="-1"></a>      <span class="co"># Output elements go here</span></span>
<span id="cb604-33"><a href="#cb604-33" tabindex="-1"></a>        <span class="fu">textOutput</span>(<span class="st">&quot;demo_text&quot;</span>),</span>
<span id="cb604-34"><a href="#cb604-34" tabindex="-1"></a>        <span class="fu">plotOutput</span>(<span class="st">&quot;demo_plot&quot;</span>, <span class="at">width =</span> <span class="st">&quot;500px&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span>),</span>
<span id="cb604-35"><a href="#cb604-35" tabindex="-1"></a>        </span>
<span id="cb604-36"><a href="#cb604-36" tabindex="-1"></a>        DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="st">&quot;demo_table&quot;</span>,</span>
<span id="cb604-37"><a href="#cb604-37" tabindex="-1"></a>                    <span class="at">width =</span> <span class="st">&quot;50%&quot;</span>,</span>
<span id="cb604-38"><a href="#cb604-38" tabindex="-1"></a>                    <span class="at">height =</span> <span class="st">&quot;auto&quot;</span>),</span>
<span id="cb604-39"><a href="#cb604-39" tabindex="-1"></a>        <span class="fu">verbatimTextOutput</span>(<span class="st">&quot;demo_verbatim&quot;</span>)</span>
<span id="cb604-40"><a href="#cb604-40" tabindex="-1"></a>    )</span>
<span id="cb604-41"><a href="#cb604-41" tabindex="-1"></a>  )</span>
<span id="cb604-42"><a href="#cb604-42" tabindex="-1"></a>)</span>
<span id="cb604-43"><a href="#cb604-43" tabindex="-1"></a><span class="co"># server.R ----</span></span>
<span id="cb604-44"><a href="#cb604-44" tabindex="-1"></a></span>
<span id="cb604-45"><a href="#cb604-45" tabindex="-1"></a> </span>
<span id="cb604-46"><a href="#cb604-46" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb604-47"><a href="#cb604-47" tabindex="-1"></a>   <span class="co"># Your server logic will be defined here</span></span>
<span id="cb604-48"><a href="#cb604-48" tabindex="-1"></a>  output<span class="sc">$</span>demo_text <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb604-49"><a href="#cb604-49" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">&quot;Figure 1.&quot;</span>, input<span class="sc">$</span>species, input<span class="sc">$</span>text)</span>
<span id="cb604-50"><a href="#cb604-50" tabindex="-1"></a>  })</span>
<span id="cb604-51"><a href="#cb604-51" tabindex="-1"></a>  </span>
<span id="cb604-52"><a href="#cb604-52" tabindex="-1"></a>  output<span class="sc">$</span>demo_plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb604-53"><a href="#cb604-53" tabindex="-1"></a>    penguins_filtered <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span></span>
<span id="cb604-54"><a href="#cb604-54" tabindex="-1"></a>      <span class="fu">filter</span>(species <span class="sc">==</span> input<span class="sc">$</span>species)</span>
<span id="cb604-55"><a href="#cb604-55" tabindex="-1"></a>    </span>
<span id="cb604-56"><a href="#cb604-56" tabindex="-1"></a>    <span class="fu">ggplot</span>(penguins_filtered, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm)) <span class="sc">+</span></span>
<span id="cb604-57"><a href="#cb604-57" tabindex="-1"></a>      <span class="fu">geom_histogram</span>(<span class="at">fill =</span> input<span class="sc">$</span>colour, <span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">bins =</span> input<span class="sc">$</span>bin) <span class="sc">+</span></span>
<span id="cb604-58"><a href="#cb604-58" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Color&quot;</span>) <span class="sc">+</span></span>
<span id="cb604-59"><a href="#cb604-59" tabindex="-1"></a>      <span class="fu">theme_minimal</span>()</span>
<span id="cb604-60"><a href="#cb604-60" tabindex="-1"></a>  })</span>
<span id="cb604-61"><a href="#cb604-61" tabindex="-1"></a>  </span>
<span id="cb604-62"><a href="#cb604-62" tabindex="-1"></a>  output<span class="sc">$</span>demo_table <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>({</span>
<span id="cb604-63"><a href="#cb604-63" tabindex="-1"></a>   penguins  <span class="sc">|&gt;</span> </span>
<span id="cb604-64"><a href="#cb604-64" tabindex="-1"></a>      <span class="fu">filter</span>(species <span class="sc">==</span> input<span class="sc">$</span>species) <span class="sc">|&gt;</span> </span>
<span id="cb604-65"><a href="#cb604-65" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">flipper_length_mm =</span> <span class="fu">quantile</span>(flipper_length_mm, <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), <span class="at">na.rm =</span> T), <span class="at">quantile =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>))</span>
<span id="cb604-66"><a href="#cb604-66" tabindex="-1"></a>})</span>
<span id="cb604-67"><a href="#cb604-67" tabindex="-1"></a>  </span>
<span id="cb604-68"><a href="#cb604-68" tabindex="-1"></a>  output<span class="sc">$</span>demo_verbatim <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb604-69"><a href="#cb604-69" tabindex="-1"></a>  code <span class="ot">&lt;-</span></span>
<span id="cb604-70"><a href="#cb604-70" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="st">&quot;penguins_filtered &lt;- penguins %&gt;%</span></span>
<span id="cb604-71"><a href="#cb604-71" tabindex="-1"></a><span class="st">      filter(species == &#39;&quot;</span>, input<span class="sc">$</span>species,<span class="st">&quot;&#39;)</span></span>
<span id="cb604-72"><a href="#cb604-72" tabindex="-1"></a><span class="st">    </span></span>
<span id="cb604-73"><a href="#cb604-73" tabindex="-1"></a><span class="st">    ggplot(penguins_filtered, aes(x = flipper_length_mm)) +</span></span>
<span id="cb604-74"><a href="#cb604-74" tabindex="-1"></a><span class="st">      geom_histogram(fill = &#39;&quot;</span>, input<span class="sc">$</span>colour, <span class="st">&quot;&#39;, show.legend = FALSE, bins = &quot;</span>, input<span class="sc">$</span>bin, <span class="st">&quot;) +</span></span>
<span id="cb604-75"><a href="#cb604-75" tabindex="-1"></a><span class="st">      theme_minimal()&quot;</span>)</span>
<span id="cb604-76"><a href="#cb604-76" tabindex="-1"></a>  </span>
<span id="cb604-77"><a href="#cb604-77" tabindex="-1"></a>  code</span>
<span id="cb604-78"><a href="#cb604-78" tabindex="-1"></a>})</span>
<span id="cb604-79"><a href="#cb604-79" tabindex="-1"></a>  </span>
<span id="cb604-80"><a href="#cb604-80" tabindex="-1"></a>}</span>
<span id="cb604-81"><a href="#cb604-81" tabindex="-1"></a></span>
<span id="cb604-82"><a href="#cb604-82" tabindex="-1"></a></span>
<span id="cb604-83"><a href="#cb604-83" tabindex="-1"></a></span>
<span id="cb604-84"><a href="#cb604-84" tabindex="-1"></a><span class="co"># Run the app ----</span></span>
<span id="cb604-85"><a href="#cb604-85" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<div id="text-1" class="section level2" number="36.1">
<h2><span class="header-section-number">36.1</span> Text</h2>
<p><code>func("textOutput")</code> defaults to text inside a generic <code>&lt;span&gt;</code> or <code>&lt;div&gt;</code>.</p>
<div class="sourceCode" id="cb605"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb605-1"><a href="#cb605-1" tabindex="-1"></a><span class="co"># in the UI function</span></span>
<span id="cb605-2"><a href="#cb605-2" tabindex="-1"></a><span class="fu">textOutput</span>(<span class="st">&quot;demo_text&quot;</span>, <span class="at">container =</span> tags<span class="sc">$</span>h3)</span></code></pre></div>
<p><code>func("renderText")</code> replaces the text of the linked element with its returned string.</p>
<div class="sourceCode" id="cb606"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb606-1"><a href="#cb606-1" tabindex="-1"></a><span class="co"># in the server function</span></span>
<span id="cb606-2"><a href="#cb606-2" tabindex="-1"></a>  output<span class="sc">$</span>demo_text <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb606-3"><a href="#cb606-3" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">&quot;Figure 1.&quot;</span>, input<span class="sc">$</span>species, input<span class="sc">$</span>text)</span>
<span id="cb606-4"><a href="#cb606-4" tabindex="-1"></a>  })</span></code></pre></div>
<p>If you use <code>func("verbatimTextOutput")</code> in the UI (no change to the render function), it will show the output in a fixed-width font. This can be good for code or text you want the user to copy.</p>
<div class="sourceCode" id="cb607"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb607-1"><a href="#cb607-1" tabindex="-1"></a><span class="co"># in the UI function</span></span>
<span id="cb607-2"><a href="#cb607-2" tabindex="-1"></a><span class="fu">verbatimTextOutput</span>(<span class="st">&quot;demo_verbatim&quot;</span>)</span>
<span id="cb607-3"><a href="#cb607-3" tabindex="-1"></a></span>
<span id="cb607-4"><a href="#cb607-4" tabindex="-1"></a><span class="co"># in the server function</span></span>
<span id="cb607-5"><a href="#cb607-5" tabindex="-1"></a>  output<span class="sc">$</span>demo_verbatim <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb607-6"><a href="#cb607-6" tabindex="-1"></a>  code <span class="ot">&lt;-</span></span>
<span id="cb607-7"><a href="#cb607-7" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="st">&quot;penguins_filtered &lt;- penguins %&gt;%</span></span>
<span id="cb607-8"><a href="#cb607-8" tabindex="-1"></a><span class="st">      filter(species == &#39;&quot;</span>, input<span class="sc">$</span>species,<span class="st">&quot;&#39;)</span></span>
<span id="cb607-9"><a href="#cb607-9" tabindex="-1"></a><span class="st">    </span></span>
<span id="cb607-10"><a href="#cb607-10" tabindex="-1"></a><span class="st">    ggplot(penguins_filtered, aes(x = flipper_length_mm)) +</span></span>
<span id="cb607-11"><a href="#cb607-11" tabindex="-1"></a><span class="st">      geom_histogram(fill = &#39;&quot;</span>, input<span class="sc">$</span>colour, <span class="st">&quot;&#39;, show.legend = FALSE, bins = &quot;</span>, input<span class="sc">$</span>bin, <span class="st">&quot;) +</span></span>
<span id="cb607-12"><a href="#cb607-12" tabindex="-1"></a><span class="st">      theme_minimal()&quot;</span>)</span>
<span id="cb607-13"><a href="#cb607-13" tabindex="-1"></a>  </span>
<span id="cb607-14"><a href="#cb607-14" tabindex="-1"></a>  code</span>
<span id="cb607-15"><a href="#cb607-15" tabindex="-1"></a>})</span></code></pre></div>
</div>
<div id="plots" class="section level2" number="36.2">
<h2><span class="header-section-number">36.2</span> Plots</h2>
<p><code>func("plotOutput")</code> displays plots made with the <code>base R</code> plotting functions (e.g., <code>"plot"</code>, <code>hist</code>) or <code>ggplot2</code> functions.</p>
<div class="sourceCode" id="cb608"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb608-1"><a href="#cb608-1" tabindex="-1"></a><span class="co"># in the UI function</span></span>
<span id="cb608-2"><a href="#cb608-2" tabindex="-1"></a><span class="fu">plotOutput</span>(<span class="st">&quot;demo_plot&quot;</span>, <span class="at">width =</span> <span class="st">&quot;500px&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span>)</span></code></pre></div>
<p>What is the default value for <code>width</code>?<br />
<select class='webex-select'><option value='blank'></option><option value='answer'>100%</option><option value=''>400px</option><option value=''>400</option><option value=''>5in</option><option value=''>7in</option></select></p>
<p>What is the default value for <code>height</code>?<br />
<select class='webex-select'><option value='blank'></option><option value=''>100%</option><option value='answer'>400px</option><option value=''>400</option><option value=''>5in</option><option value=''>7in</option></select></p>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb609-1"><a href="#cb609-1" tabindex="-1"></a><span class="co"># in the server function</span></span>
<span id="cb609-2"><a href="#cb609-2" tabindex="-1"></a>  output<span class="sc">$</span>demo_plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb609-3"><a href="#cb609-3" tabindex="-1"></a>    penguins_filtered <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span></span>
<span id="cb609-4"><a href="#cb609-4" tabindex="-1"></a>      <span class="fu">filter</span>(species <span class="sc">==</span> input<span class="sc">$</span>species)</span>
<span id="cb609-5"><a href="#cb609-5" tabindex="-1"></a>    </span>
<span id="cb609-6"><a href="#cb609-6" tabindex="-1"></a>    <span class="fu">ggplot</span>(penguins_filtered, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm)) <span class="sc">+</span></span>
<span id="cb609-7"><a href="#cb609-7" tabindex="-1"></a>      <span class="fu">geom_histogram</span>(<span class="at">fill =</span> input<span class="sc">$</span>colour, <span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">bins =</span> input<span class="sc">$</span>bin) <span class="sc">+</span></span>
<span id="cb609-8"><a href="#cb609-8" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Color&quot;</span>) <span class="sc">+</span></span>
<span id="cb609-9"><a href="#cb609-9" tabindex="-1"></a>      <span class="fu">theme_minimal</span>()</span>
<span id="cb609-10"><a href="#cb609-10" tabindex="-1"></a>  })</span></code></pre></div>
<div class="warning">
<p>
If you want to create dynamic plots that change with input, note how
you need to use <code>y = .data[[input<span class="math inline">\(y]]&lt;/code&gt; inside &lt;code&gt;aes&lt;/code&gt;, instead of just &lt;code&gt;y = input\)</span>y</code>.
</p>
</div>
</div>
<div id="images" class="section level2" number="36.3">
<h2><span class="header-section-number">36.3</span> Images</h2>
<p><code>imageOutput</code> takes the same arguments as <code>plotOutput</code>. You can leave <code>width</code> and <code>height</code> as their defaults if you are going to set those values in the render function.</p>
<div class="sourceCode" id="cb610"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb610-1"><a href="#cb610-1" tabindex="-1"></a><span class="co"># in the UI function</span></span>
<span id="cb610-2"><a href="#cb610-2" tabindex="-1"></a><span class="fu">imageOutput</span>(<span class="st">&quot;demo_image&quot;</span>)</span></code></pre></div>
<p><code>renderImage</code> needs to return a named list with at least an <code>src</code> with the image path. You can also set the <code>width</code> and <code>height</code> (numeric values are in pixels), <code>class</code> and <code>alt</code> (the alt-text for screen readers).</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb611-1"><a href="#cb611-1" tabindex="-1"></a><span class="co"># in the server function</span></span>
<span id="cb611-2"><a href="#cb611-2" tabindex="-1"></a>output<span class="sc">$</span>demo_image <span class="ot">&lt;-</span> <span class="fu">renderImage</span>({</span>
<span id="cb611-3"><a href="#cb611-3" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">src =</span> <span class="st">&quot;images/penguin.jpg&quot;</span>,</span>
<span id="cb611-4"><a href="#cb611-4" tabindex="-1"></a>         <span class="at">width =</span> <span class="dv">100</span>,</span>
<span id="cb611-5"><a href="#cb611-5" tabindex="-1"></a>         <span class="at">height =</span> <span class="dv">100</span>,</span>
<span id="cb611-6"><a href="#cb611-6" tabindex="-1"></a>         <span class="at">alt =</span> <span class="st">&quot;A flower&quot;</span>)</span>
<span id="cb611-7"><a href="#cb611-7" tabindex="-1"></a>}, <span class="at">deleteFile =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="warning">
<p>
The <code>deleteFile</code> argument is currently optional, but
triggers periodic warnings that it won’t be optional in the future. You
should set it to <code>TRUE</code> if you’re making a temporary file
(this stops unneeded plots using memory) and <code>FALSE</code> if
you’re referencing a file you previously saved.
</p>
</div>
</div>
<div id="data-tables" class="section level2" number="36.4">
<h2><span class="header-section-number">36.4</span> Data Tables</h2>
<p>Display a table using <code>tableOutput</code>.</p>
<div class="sourceCode" id="cb612"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb612-1"><a href="#cb612-1" tabindex="-1"></a><span class="co"># in the UI function</span></span>
<span id="cb612-2"><a href="#cb612-2" tabindex="-1"></a><span class="fu">tableOutput</span>(<span class="st">&quot;demo_table&quot;</span>)</span></code></pre></div>
<p>This is paired with <code>DT::renderDataTable</code>, which makes a table out of any data frame it returns.</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb613-1"><a href="#cb613-1" tabindex="-1"></a><span class="co"># in the server function</span></span>
<span id="cb613-2"><a href="#cb613-2" tabindex="-1"></a>  output<span class="sc">$</span>demo_table <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>({</span>
<span id="cb613-3"><a href="#cb613-3" tabindex="-1"></a>   penguins  <span class="sc">|&gt;</span> </span>
<span id="cb613-4"><a href="#cb613-4" tabindex="-1"></a>      <span class="fu">filter</span>(species <span class="sc">==</span> input<span class="sc">$</span>species) <span class="sc">|&gt;</span> </span>
<span id="cb613-5"><a href="#cb613-5" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">flipper_length_mm =</span> <span class="fu">quantile</span>(flipper_length_mm, <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), <span class="at">na.rm =</span> T), <span class="at">quantile =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>))</span>
<span id="cb613-6"><a href="#cb613-6" tabindex="-1"></a>})</span></code></pre></div>
<div class="warning">
<p>
Note how you need to use <code>.data[[input<span class="math inline">\(y]]&lt;/code&gt; inside &lt;code&gt;dplyr::summarise&lt;/code&gt;, instead of just &lt;code&gt;input\)</span>y</code> to
dynamically choose which variable to summarise.
</p>
</div>
<p>I much prefer <code>DT::dataTableOutput</code> over the basic <code>shiny</code> package <code>dataTableOutput</code> and <code>renderDataTable</code> functions, but they can be buggy. The versions in the <code>DT</code> package are better and have <a href="https://rstudio.github.io/DT/">many additional functions</a>, so I use those.</p>
<div class="info">
<p>
You can use the <code>DT</code> synonyms to make sure you’re not
accidentally using the <code>shiny</code> versions, which don’t have the
same options.
</p>
</div>
</div>
<div id="emphasis" class="section level2" number="36.5">
<h2><span class="header-section-number">36.5</span> Emphasis</h2>
<p>We can use basic HTML to start customising appearance and emphasis - later we will use the <code>bslib</code> package to give us lots of easy customisation:</p>
<pre><code>  
p(&quot;p creates a paragraph of text.&quot;),

      
      p(&quot;A new p() command starts a new paragraph. Supply a style attribute to change the format of the entire paragraph.&quot;, style = &quot;font-family: &#39;times&#39;; font-si16pt&quot;),
      
      strong(&quot;strong() makes bold text.&quot;),
      
      em(&quot;em() creates italicized (i.e, emphasized) text.&quot;),
      
      br(),
      
      code(&quot;code displays your text similar to computer code&quot;),
      
      div(&quot;div creates segments of text with a similar style. This division of text is all blue because I passed the argument &#39;style = color:blue&#39; to div&quot;, style = &quot;color:blue&quot;),
      
      br(),
      
      p(&quot;span does the same thing as div, but it works with&quot;,
        span(&quot;groups of words&quot;, style = &quot;color:blue&quot;),
        &quot;that appear inside a paragraph.&quot;),
</code></pre>
<div class="sourceCode" id="cb615"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb615-1"><a href="#cb615-1" tabindex="-1"></a><span class="co"># Packages ----</span></span>
<span id="cb615-2"><a href="#cb615-2" tabindex="-1"></a><span class="fu">library</span>(shiny)       <span class="co"># Essential for running any Shiny app</span></span>
<span id="cb615-3"><a href="#cb615-3" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb615-4"><a href="#cb615-4" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)    <span class="co"># The source of your data</span></span>
<span id="cb615-5"><a href="#cb615-5" tabindex="-1"></a></span>
<span id="cb615-6"><a href="#cb615-6" tabindex="-1"></a><span class="co"># Load the data</span></span>
<span id="cb615-7"><a href="#cb615-7" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(penguins)</span>
<span id="cb615-8"><a href="#cb615-8" tabindex="-1"></a></span>
<span id="cb615-9"><a href="#cb615-9" tabindex="-1"></a><span class="co"># ui.R ----</span></span>
<span id="cb615-10"><a href="#cb615-10" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb615-11"><a href="#cb615-11" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb615-12"><a href="#cb615-12" tabindex="-1"></a>     <span class="fu">sidebarPanel</span>(</span>
<span id="cb615-13"><a href="#cb615-13" tabindex="-1"></a>      demo_sp <span class="ot">&lt;-</span> <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;species&quot;</span>,  <span class="co"># Give the input a name &quot;genotype&quot;</span></span>
<span id="cb615-14"><a href="#cb615-14" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;1. Select species&quot;</span>,  <span class="co"># Give the input a label to be displayed in the app</span></span>
<span id="cb615-15"><a href="#cb615-15" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span> <span class="ot">=</span> <span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span> <span class="ot">=</span> <span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span> <span class="ot">=</span> <span class="st">&quot;Gentoo&quot;</span>), <span class="at">selected =</span> <span class="st">&quot;Adelie&quot;</span>),  <span class="co"># Create the choices that can be selected. e.g. Display &quot;Adelie&quot; and link to value &quot;Adelie&quot;</span></span>
<span id="cb615-16"><a href="#cb615-16" tabindex="-1"></a>      demo_select <span class="ot">&lt;-</span> <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;colour&quot;</span>, </span>
<span id="cb615-17"><a href="#cb615-17" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;2. Select histogram colour&quot;</span>, </span>
<span id="cb615-18"><a href="#cb615-18" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;green&quot;</span>,<span class="st">&quot;red&quot;</span>,<span class="st">&quot;purple&quot;</span>,<span class="st">&quot;grey&quot;</span>), <span class="at">selected =</span> <span class="st">&quot;grey&quot;</span>),</span>
<span id="cb615-19"><a href="#cb615-19" tabindex="-1"></a>      demo_slide <span class="ot">&lt;-</span> <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;bin&quot;</span>, </span>
<span id="cb615-20"><a href="#cb615-20" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;3. Select number of histogram bins&quot;</span>, </span>
<span id="cb615-21"><a href="#cb615-21" tabindex="-1"></a>                  <span class="at">min=</span><span class="dv">1</span>, <span class="at">max=</span><span class="dv">25</span>, <span class="at">value=</span> <span class="fu">c</span>(<span class="dv">10</span>)),</span>
<span id="cb615-22"><a href="#cb615-22" tabindex="-1"></a>      demo_text <span class="ot">&lt;-</span> <span class="fu">textAreaInput</span>(<span class="at">inputId =</span> <span class="st">&quot;text&quot;</span>, </span>
<span id="cb615-23"><a href="#cb615-23" tabindex="-1"></a>                <span class="at">label =</span> <span class="st">&quot;4. Enter some text to be displayed&quot;</span>,</span>
<span id="cb615-24"><a href="#cb615-24" tabindex="-1"></a>                <span class="at">rows =</span> <span class="dv">5</span>,</span>
<span id="cb615-25"><a href="#cb615-25" tabindex="-1"></a>                <span class="at">placeholder =</span> <span class="st">&quot;Enter some information here&quot;</span>)</span>
<span id="cb615-26"><a href="#cb615-26" tabindex="-1"></a>    ),</span>
<span id="cb615-27"><a href="#cb615-27" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb615-28"><a href="#cb615-28" tabindex="-1"></a>      <span class="co"># Output elements go here</span></span>
<span id="cb615-29"><a href="#cb615-29" tabindex="-1"></a>        </span>
<span id="cb615-30"><a href="#cb615-30" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">ul</span>(</span>
<span id="cb615-31"><a href="#cb615-31" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">strong</span>(<span class="fu">textOutput</span>(<span class="st">&quot;demo_sp&quot;</span>)), <span class="co"># emphasise text</span></span>
<span id="cb615-32"><a href="#cb615-32" tabindex="-1"></a>    <span class="fu">textOutput</span>(<span class="st">&quot;demo_text&quot;</span>)),</span>
<span id="cb615-33"><a href="#cb615-33" tabindex="-1"></a>  </span>
<span id="cb615-34"><a href="#cb615-34" tabindex="-1"></a>        <span class="fu">plotOutput</span>(<span class="st">&quot;demo_plot&quot;</span>, <span class="at">width =</span> <span class="st">&quot;500px&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span>),</span>
<span id="cb615-35"><a href="#cb615-35" tabindex="-1"></a>        </span>
<span id="cb615-36"><a href="#cb615-36" tabindex="-1"></a>        DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="st">&quot;demo_table&quot;</span>,</span>
<span id="cb615-37"><a href="#cb615-37" tabindex="-1"></a>                    <span class="at">width =</span> <span class="st">&quot;50%&quot;</span>,</span>
<span id="cb615-38"><a href="#cb615-38" tabindex="-1"></a>                    <span class="at">height =</span> <span class="st">&quot;auto&quot;</span>)</span>
<span id="cb615-39"><a href="#cb615-39" tabindex="-1"></a>    )</span>
<span id="cb615-40"><a href="#cb615-40" tabindex="-1"></a>  )</span>
<span id="cb615-41"><a href="#cb615-41" tabindex="-1"></a>)</span>
<span id="cb615-42"><a href="#cb615-42" tabindex="-1"></a><span class="co"># server.R ----</span></span>
<span id="cb615-43"><a href="#cb615-43" tabindex="-1"></a></span>
<span id="cb615-44"><a href="#cb615-44" tabindex="-1"></a> </span>
<span id="cb615-45"><a href="#cb615-45" tabindex="-1"></a></span>
<span id="cb615-46"><a href="#cb615-46" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb615-47"><a href="#cb615-47" tabindex="-1"></a>  </span>
<span id="cb615-48"><a href="#cb615-48" tabindex="-1"></a></span>
<span id="cb615-49"><a href="#cb615-49" tabindex="-1"></a>  output<span class="sc">$</span>demo_sp <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb615-50"><a href="#cb615-50" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">&quot;Figure 1.&quot;</span>, input<span class="sc">$</span>species)</span>
<span id="cb615-51"><a href="#cb615-51" tabindex="-1"></a>  })</span>
<span id="cb615-52"><a href="#cb615-52" tabindex="-1"></a>  </span>
<span id="cb615-53"><a href="#cb615-53" tabindex="-1"></a>output<span class="sc">$</span>demo_text <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb615-54"><a href="#cb615-54" tabindex="-1"></a>  (input<span class="sc">$</span>text)</span>
<span id="cb615-55"><a href="#cb615-55" tabindex="-1"></a>})</span>
<span id="cb615-56"><a href="#cb615-56" tabindex="-1"></a>   </span>
<span id="cb615-57"><a href="#cb615-57" tabindex="-1"></a>    </span>
<span id="cb615-58"><a href="#cb615-58" tabindex="-1"></a>  output<span class="sc">$</span>demo_plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb615-59"><a href="#cb615-59" tabindex="-1"></a>    penguins_filtered <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span></span>
<span id="cb615-60"><a href="#cb615-60" tabindex="-1"></a>      <span class="fu">filter</span>(species <span class="sc">==</span> input<span class="sc">$</span>species)</span>
<span id="cb615-61"><a href="#cb615-61" tabindex="-1"></a>    </span>
<span id="cb615-62"><a href="#cb615-62" tabindex="-1"></a>    <span class="fu">ggplot</span>(penguins_filtered, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm)) <span class="sc">+</span></span>
<span id="cb615-63"><a href="#cb615-63" tabindex="-1"></a>      <span class="fu">geom_histogram</span>(<span class="at">fill =</span> input<span class="sc">$</span>colour, <span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">bins =</span> input<span class="sc">$</span>bin) <span class="sc">+</span></span>
<span id="cb615-64"><a href="#cb615-64" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Color&quot;</span>) <span class="sc">+</span></span>
<span id="cb615-65"><a href="#cb615-65" tabindex="-1"></a>      <span class="fu">theme_minimal</span>()</span>
<span id="cb615-66"><a href="#cb615-66" tabindex="-1"></a>  })</span>
<span id="cb615-67"><a href="#cb615-67" tabindex="-1"></a>  </span>
<span id="cb615-68"><a href="#cb615-68" tabindex="-1"></a>  output<span class="sc">$</span>demo_table <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>({</span>
<span id="cb615-69"><a href="#cb615-69" tabindex="-1"></a>   penguins <span class="sc">|&gt;</span></span>
<span id="cb615-70"><a href="#cb615-70" tabindex="-1"></a>      <span class="fu">filter</span>(species <span class="sc">==</span> input<span class="sc">$</span>species) <span class="sc">|&gt;</span> </span>
<span id="cb615-71"><a href="#cb615-71" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">flipper_length_mm =</span> <span class="fu">quantile</span>(flipper_length_mm, <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), <span class="at">na.rm =</span> T), <span class="at">quantile =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>))</span>
<span id="cb615-72"><a href="#cb615-72" tabindex="-1"></a>})</span>
<span id="cb615-73"><a href="#cb615-73" tabindex="-1"></a>  </span>
<span id="cb615-74"><a href="#cb615-74" tabindex="-1"></a>}</span>
<span id="cb615-75"><a href="#cb615-75" tabindex="-1"></a></span>
<span id="cb615-76"><a href="#cb615-76" tabindex="-1"></a></span>
<span id="cb615-77"><a href="#cb615-77" tabindex="-1"></a></span>
<span id="cb615-78"><a href="#cb615-78" tabindex="-1"></a><span class="co"># Run the app ----</span></span>
<span id="cb615-79"><a href="#cb615-79" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</div>
</div>
<div id="reactive" class="section level1" number="37">
<h1><span class="header-section-number">37</span> Reactive</h1>
<p>Reactivity is how Shiny determines which code in server() gets to run when. Some types of objects, such as the input object or objects made by <code>reactiveValues()</code>, can trigger some types of functions to run whenever they change.</p>
<p>In the example below if you move the data filtering outside of <code>renderPlot()</code>, you'll get an error message like "Can't access reactive value outside of reactive consumer." This means that the input values can only be read inside certain functions, like <code>reactive()</code>, <code>observeEvent()</code>, or a render function like <code>renderPlot()</code>.</p>
<div class="sourceCode" id="cb616"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb616-1"><a href="#cb616-1" tabindex="-1"></a><span class="co"># Packages ----</span></span>
<span id="cb616-2"><a href="#cb616-2" tabindex="-1"></a><span class="fu">library</span>(shiny)       <span class="co"># Essential for running any Shiny app</span></span>
<span id="cb616-3"><a href="#cb616-3" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb616-4"><a href="#cb616-4" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)    <span class="co"># The source of your data</span></span>
<span id="cb616-5"><a href="#cb616-5" tabindex="-1"></a></span>
<span id="cb616-6"><a href="#cb616-6" tabindex="-1"></a><span class="co"># Load the data</span></span>
<span id="cb616-7"><a href="#cb616-7" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(penguins)</span>
<span id="cb616-8"><a href="#cb616-8" tabindex="-1"></a></span>
<span id="cb616-9"><a href="#cb616-9" tabindex="-1"></a><span class="co"># ui.R ----</span></span>
<span id="cb616-10"><a href="#cb616-10" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb616-11"><a href="#cb616-11" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb616-12"><a href="#cb616-12" tabindex="-1"></a>     <span class="fu">sidebarPanel</span>(</span>
<span id="cb616-13"><a href="#cb616-13" tabindex="-1"></a>      demo_sp <span class="ot">&lt;-</span> <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;species&quot;</span>,  <span class="co"># Give the input a name &quot;genotype&quot;</span></span>
<span id="cb616-14"><a href="#cb616-14" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;1. Select species&quot;</span>,  <span class="co"># Give the input a label to be displayed in the app</span></span>
<span id="cb616-15"><a href="#cb616-15" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span> <span class="ot">=</span> <span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span> <span class="ot">=</span> <span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span> <span class="ot">=</span> <span class="st">&quot;Gentoo&quot;</span>), <span class="at">selected =</span> <span class="st">&quot;Adelie&quot;</span>),  <span class="co"># Create the choices that can be selected. e.g. Display &quot;Adelie&quot; and link to value &quot;Adelie&quot;</span></span>
<span id="cb616-16"><a href="#cb616-16" tabindex="-1"></a>      demo_select <span class="ot">&lt;-</span> <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;colour&quot;</span>, </span>
<span id="cb616-17"><a href="#cb616-17" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;2. Select histogram colour&quot;</span>, </span>
<span id="cb616-18"><a href="#cb616-18" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;green&quot;</span>,<span class="st">&quot;red&quot;</span>,<span class="st">&quot;purple&quot;</span>,<span class="st">&quot;grey&quot;</span>), <span class="at">selected =</span> <span class="st">&quot;grey&quot;</span>),</span>
<span id="cb616-19"><a href="#cb616-19" tabindex="-1"></a>      demo_slide <span class="ot">&lt;-</span> <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;bin&quot;</span>, </span>
<span id="cb616-20"><a href="#cb616-20" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;3. Select number of histogram bins&quot;</span>, </span>
<span id="cb616-21"><a href="#cb616-21" tabindex="-1"></a>                  <span class="at">min=</span><span class="dv">1</span>, <span class="at">max=</span><span class="dv">25</span>, <span class="at">value=</span> <span class="fu">c</span>(<span class="dv">10</span>)),</span>
<span id="cb616-22"><a href="#cb616-22" tabindex="-1"></a>      demo_text <span class="ot">&lt;-</span> <span class="fu">textAreaInput</span>(<span class="at">inputId =</span> <span class="st">&quot;text&quot;</span>, </span>
<span id="cb616-23"><a href="#cb616-23" tabindex="-1"></a>                <span class="at">label =</span> <span class="st">&quot;4. Enter some text to be displayed&quot;</span>,</span>
<span id="cb616-24"><a href="#cb616-24" tabindex="-1"></a>                <span class="at">rows =</span> <span class="dv">5</span>,</span>
<span id="cb616-25"><a href="#cb616-25" tabindex="-1"></a>                <span class="at">placeholder =</span> <span class="st">&quot;Enter some information here&quot;</span>)</span>
<span id="cb616-26"><a href="#cb616-26" tabindex="-1"></a>    ),</span>
<span id="cb616-27"><a href="#cb616-27" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb616-28"><a href="#cb616-28" tabindex="-1"></a>      <span class="co"># Output elements go here</span></span>
<span id="cb616-29"><a href="#cb616-29" tabindex="-1"></a>        </span>
<span id="cb616-30"><a href="#cb616-30" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">ul</span>(</span>
<span id="cb616-31"><a href="#cb616-31" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">strong</span>(<span class="fu">textOutput</span>(<span class="st">&quot;demo_sp&quot;</span>)),</span>
<span id="cb616-32"><a href="#cb616-32" tabindex="-1"></a>    <span class="fu">textOutput</span>(<span class="st">&quot;demo_text&quot;</span>)),</span>
<span id="cb616-33"><a href="#cb616-33" tabindex="-1"></a>  </span>
<span id="cb616-34"><a href="#cb616-34" tabindex="-1"></a>        <span class="fu">plotOutput</span>(<span class="st">&quot;demo_plot&quot;</span>, <span class="at">width =</span> <span class="st">&quot;500px&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span>),</span>
<span id="cb616-35"><a href="#cb616-35" tabindex="-1"></a>        </span>
<span id="cb616-36"><a href="#cb616-36" tabindex="-1"></a>        DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="st">&quot;demo_table&quot;</span>,</span>
<span id="cb616-37"><a href="#cb616-37" tabindex="-1"></a>                    <span class="at">width =</span> <span class="st">&quot;50%&quot;</span>,</span>
<span id="cb616-38"><a href="#cb616-38" tabindex="-1"></a>                    <span class="at">height =</span> <span class="st">&quot;auto&quot;</span>)</span>
<span id="cb616-39"><a href="#cb616-39" tabindex="-1"></a>    )</span>
<span id="cb616-40"><a href="#cb616-40" tabindex="-1"></a>  )</span>
<span id="cb616-41"><a href="#cb616-41" tabindex="-1"></a>)</span>
<span id="cb616-42"><a href="#cb616-42" tabindex="-1"></a><span class="co"># server.R ----</span></span>
<span id="cb616-43"><a href="#cb616-43" tabindex="-1"></a></span>
<span id="cb616-44"><a href="#cb616-44" tabindex="-1"></a> </span>
<span id="cb616-45"><a href="#cb616-45" tabindex="-1"></a></span>
<span id="cb616-46"><a href="#cb616-46" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb616-47"><a href="#cb616-47" tabindex="-1"></a>  </span>
<span id="cb616-48"><a href="#cb616-48" tabindex="-1"></a>penguins_filtered <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span></span>
<span id="cb616-49"><a href="#cb616-49" tabindex="-1"></a>      <span class="fu">filter</span>(species <span class="sc">==</span> input<span class="sc">$</span>species) </span>
<span id="cb616-50"><a href="#cb616-50" tabindex="-1"></a>  </span>
<span id="cb616-51"><a href="#cb616-51" tabindex="-1"></a>  output<span class="sc">$</span>demo_sp <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb616-52"><a href="#cb616-52" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">&quot;Figure 1.&quot;</span>, input<span class="sc">$</span>species)</span>
<span id="cb616-53"><a href="#cb616-53" tabindex="-1"></a>  })</span>
<span id="cb616-54"><a href="#cb616-54" tabindex="-1"></a>  </span>
<span id="cb616-55"><a href="#cb616-55" tabindex="-1"></a>output<span class="sc">$</span>demo_text <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb616-56"><a href="#cb616-56" tabindex="-1"></a>  (input<span class="sc">$</span>text) <span class="co"># here to trigger the function</span></span>
<span id="cb616-57"><a href="#cb616-57" tabindex="-1"></a>})</span>
<span id="cb616-58"><a href="#cb616-58" tabindex="-1"></a>   </span>
<span id="cb616-59"><a href="#cb616-59" tabindex="-1"></a></span>
<span id="cb616-60"><a href="#cb616-60" tabindex="-1"></a>    </span>
<span id="cb616-61"><a href="#cb616-61" tabindex="-1"></a>  output<span class="sc">$</span>demo_plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb616-62"><a href="#cb616-62" tabindex="-1"></a>    </span>
<span id="cb616-63"><a href="#cb616-63" tabindex="-1"></a>    <span class="fu">ggplot</span>(penguins_filtered, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm)) <span class="sc">+</span></span>
<span id="cb616-64"><a href="#cb616-64" tabindex="-1"></a>      <span class="fu">geom_histogram</span>(<span class="at">fill =</span> input<span class="sc">$</span>colour, <span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">bins =</span> input<span class="sc">$</span>bin) <span class="sc">+</span></span>
<span id="cb616-65"><a href="#cb616-65" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Color&quot;</span>) <span class="sc">+</span></span>
<span id="cb616-66"><a href="#cb616-66" tabindex="-1"></a>      <span class="fu">theme_minimal</span>()</span>
<span id="cb616-67"><a href="#cb616-67" tabindex="-1"></a>  })</span>
<span id="cb616-68"><a href="#cb616-68" tabindex="-1"></a>  </span>
<span id="cb616-69"><a href="#cb616-69" tabindex="-1"></a>  output<span class="sc">$</span>demo_table <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>({</span>
<span id="cb616-70"><a href="#cb616-70" tabindex="-1"></a>   penguins_filtered <span class="sc">|&gt;</span> </span>
<span id="cb616-71"><a href="#cb616-71" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">flipper_length_mm =</span> <span class="fu">quantile</span>(flipper_length_mm, <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), <span class="at">na.rm =</span> T), <span class="at">quantile =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>))</span>
<span id="cb616-72"><a href="#cb616-72" tabindex="-1"></a>})</span>
<span id="cb616-73"><a href="#cb616-73" tabindex="-1"></a>  </span>
<span id="cb616-74"><a href="#cb616-74" tabindex="-1"></a>}</span>
<span id="cb616-75"><a href="#cb616-75" tabindex="-1"></a></span>
<span id="cb616-76"><a href="#cb616-76" tabindex="-1"></a></span>
<span id="cb616-77"><a href="#cb616-77" tabindex="-1"></a></span>
<span id="cb616-78"><a href="#cb616-78" tabindex="-1"></a><span class="co"># Run the app ----</span></span>
<span id="cb616-79"><a href="#cb616-79" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<pre><code>Error in filter(., species == input$species) : 
  ℹ In argument: `species == input$species`.
Caused by error in `input$species`:
! Can&#39;t access reactive value &#39;species&#39; outside of reactive consumer.
ℹ Do you need to wrap inside reactive() or observe()?
</code></pre>
<p>However, we can put the data filtering inside <code>reactive()</code>. This means that whenever an input inside that function changes, the code will run and update the value of <code>data()</code>. This can be useful if you need to recalculate the data table each time the inputs change, and then use it in more than one function.</p>
<div class="sourceCode" id="cb618"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb618-1"><a href="#cb618-1" tabindex="-1"></a><span class="co"># Packages ----</span></span>
<span id="cb618-2"><a href="#cb618-2" tabindex="-1"></a><span class="fu">library</span>(shiny)       <span class="co"># Essential for running any Shiny app</span></span>
<span id="cb618-3"><a href="#cb618-3" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb618-4"><a href="#cb618-4" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)    <span class="co"># The source of your data</span></span>
<span id="cb618-5"><a href="#cb618-5" tabindex="-1"></a></span>
<span id="cb618-6"><a href="#cb618-6" tabindex="-1"></a><span class="co"># Load the data</span></span>
<span id="cb618-7"><a href="#cb618-7" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(penguins)</span>
<span id="cb618-8"><a href="#cb618-8" tabindex="-1"></a></span>
<span id="cb618-9"><a href="#cb618-9" tabindex="-1"></a> </span>
<span id="cb618-10"><a href="#cb618-10" tabindex="-1"></a></span>
<span id="cb618-11"><a href="#cb618-11" tabindex="-1"></a><span class="co"># ui.R ----</span></span>
<span id="cb618-12"><a href="#cb618-12" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb618-13"><a href="#cb618-13" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb618-14"><a href="#cb618-14" tabindex="-1"></a>     <span class="fu">sidebarPanel</span>(</span>
<span id="cb618-15"><a href="#cb618-15" tabindex="-1"></a>      demo_sp <span class="ot">&lt;-</span> <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;species&quot;</span>,  <span class="co"># Give the input a name &quot;genotype&quot;</span></span>
<span id="cb618-16"><a href="#cb618-16" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;1. Select species&quot;</span>,  <span class="co"># Give the input a label to be displayed in the app</span></span>
<span id="cb618-17"><a href="#cb618-17" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span> <span class="ot">=</span> <span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span> <span class="ot">=</span> <span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span> <span class="ot">=</span> <span class="st">&quot;Gentoo&quot;</span>), <span class="at">selected =</span> <span class="st">&quot;Adelie&quot;</span>),  <span class="co"># Create the choices that can be selected. e.g. Display &quot;Adelie&quot; and link to value &quot;Adelie&quot;</span></span>
<span id="cb618-18"><a href="#cb618-18" tabindex="-1"></a>      demo_select <span class="ot">&lt;-</span> <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;colour&quot;</span>, </span>
<span id="cb618-19"><a href="#cb618-19" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;2. Select histogram colour&quot;</span>, </span>
<span id="cb618-20"><a href="#cb618-20" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;green&quot;</span>,<span class="st">&quot;red&quot;</span>,<span class="st">&quot;purple&quot;</span>,<span class="st">&quot;grey&quot;</span>), <span class="at">selected =</span> <span class="st">&quot;grey&quot;</span>),</span>
<span id="cb618-21"><a href="#cb618-21" tabindex="-1"></a>      demo_slide <span class="ot">&lt;-</span> <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;bin&quot;</span>, </span>
<span id="cb618-22"><a href="#cb618-22" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;3. Select number of histogram bins&quot;</span>, </span>
<span id="cb618-23"><a href="#cb618-23" tabindex="-1"></a>                  <span class="at">min=</span><span class="dv">1</span>, <span class="at">max=</span><span class="dv">25</span>, <span class="at">value=</span> <span class="fu">c</span>(<span class="dv">10</span>)),</span>
<span id="cb618-24"><a href="#cb618-24" tabindex="-1"></a>      demo_text <span class="ot">&lt;-</span> <span class="fu">textAreaInput</span>(<span class="at">inputId =</span> <span class="st">&quot;text&quot;</span>, </span>
<span id="cb618-25"><a href="#cb618-25" tabindex="-1"></a>                <span class="at">label =</span> <span class="st">&quot;4. Enter some text to be displayed&quot;</span>,</span>
<span id="cb618-26"><a href="#cb618-26" tabindex="-1"></a>                <span class="at">rows =</span> <span class="dv">5</span>,</span>
<span id="cb618-27"><a href="#cb618-27" tabindex="-1"></a>                <span class="at">placeholder =</span> <span class="st">&quot;Enter some information here&quot;</span>)</span>
<span id="cb618-28"><a href="#cb618-28" tabindex="-1"></a>    ),</span>
<span id="cb618-29"><a href="#cb618-29" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb618-30"><a href="#cb618-30" tabindex="-1"></a>      <span class="co"># Output elements go here</span></span>
<span id="cb618-31"><a href="#cb618-31" tabindex="-1"></a>        </span>
<span id="cb618-32"><a href="#cb618-32" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">ul</span>(</span>
<span id="cb618-33"><a href="#cb618-33" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">strong</span>(<span class="fu">textOutput</span>(<span class="st">&quot;demo_sp&quot;</span>)),</span>
<span id="cb618-34"><a href="#cb618-34" tabindex="-1"></a>    <span class="fu">textOutput</span>(<span class="st">&quot;demo_text&quot;</span>)),</span>
<span id="cb618-35"><a href="#cb618-35" tabindex="-1"></a>  </span>
<span id="cb618-36"><a href="#cb618-36" tabindex="-1"></a>        <span class="fu">plotOutput</span>(<span class="st">&quot;demo_plot&quot;</span>, <span class="at">width =</span> <span class="st">&quot;500px&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span>),</span>
<span id="cb618-37"><a href="#cb618-37" tabindex="-1"></a>        </span>
<span id="cb618-38"><a href="#cb618-38" tabindex="-1"></a>        DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="st">&quot;demo_table&quot;</span>,</span>
<span id="cb618-39"><a href="#cb618-39" tabindex="-1"></a>                    <span class="at">width =</span> <span class="st">&quot;50%&quot;</span>,</span>
<span id="cb618-40"><a href="#cb618-40" tabindex="-1"></a>                    <span class="at">height =</span> <span class="st">&quot;auto&quot;</span>)</span>
<span id="cb618-41"><a href="#cb618-41" tabindex="-1"></a>    )</span>
<span id="cb618-42"><a href="#cb618-42" tabindex="-1"></a>  )</span>
<span id="cb618-43"><a href="#cb618-43" tabindex="-1"></a>)</span>
<span id="cb618-44"><a href="#cb618-44" tabindex="-1"></a><span class="co"># server.R ----</span></span>
<span id="cb618-45"><a href="#cb618-45" tabindex="-1"></a></span>
<span id="cb618-46"><a href="#cb618-46" tabindex="-1"></a> </span>
<span id="cb618-47"><a href="#cb618-47" tabindex="-1"></a></span>
<span id="cb618-48"><a href="#cb618-48" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb618-49"><a href="#cb618-49" tabindex="-1"></a>  </span>
<span id="cb618-50"><a href="#cb618-50" tabindex="-1"></a>penguins_filtered <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb618-51"><a href="#cb618-51" tabindex="-1"></a>  penguins <span class="sc">|&gt;</span></span>
<span id="cb618-52"><a href="#cb618-52" tabindex="-1"></a>      <span class="fu">filter</span>(species <span class="sc">==</span> input<span class="sc">$</span>species)</span>
<span id="cb618-53"><a href="#cb618-53" tabindex="-1"></a>})</span>
<span id="cb618-54"><a href="#cb618-54" tabindex="-1"></a></span>
<span id="cb618-55"><a href="#cb618-55" tabindex="-1"></a>  output<span class="sc">$</span>demo_sp <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb618-56"><a href="#cb618-56" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">&quot;Figure 1.&quot;</span>, input<span class="sc">$</span>species)</span>
<span id="cb618-57"><a href="#cb618-57" tabindex="-1"></a>  })</span>
<span id="cb618-58"><a href="#cb618-58" tabindex="-1"></a>  </span>
<span id="cb618-59"><a href="#cb618-59" tabindex="-1"></a>output<span class="sc">$</span>demo_text <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb618-60"><a href="#cb618-60" tabindex="-1"></a>  (input<span class="sc">$</span>text)</span>
<span id="cb618-61"><a href="#cb618-61" tabindex="-1"></a>})</span>
<span id="cb618-62"><a href="#cb618-62" tabindex="-1"></a>   </span>
<span id="cb618-63"><a href="#cb618-63" tabindex="-1"></a></span>
<span id="cb618-64"><a href="#cb618-64" tabindex="-1"></a>    </span>
<span id="cb618-65"><a href="#cb618-65" tabindex="-1"></a>  output<span class="sc">$</span>demo_plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb618-66"><a href="#cb618-66" tabindex="-1"></a>    </span>
<span id="cb618-67"><a href="#cb618-67" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">penguins_filtered</span>(), <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm)) <span class="sc">+</span></span>
<span id="cb618-68"><a href="#cb618-68" tabindex="-1"></a>      <span class="fu">geom_histogram</span>(<span class="at">fill =</span> input<span class="sc">$</span>colour, <span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">bins =</span> input<span class="sc">$</span>bin) <span class="sc">+</span></span>
<span id="cb618-69"><a href="#cb618-69" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Color&quot;</span>) <span class="sc">+</span></span>
<span id="cb618-70"><a href="#cb618-70" tabindex="-1"></a>      <span class="fu">theme_minimal</span>()</span>
<span id="cb618-71"><a href="#cb618-71" tabindex="-1"></a>  })</span>
<span id="cb618-72"><a href="#cb618-72" tabindex="-1"></a>  </span>
<span id="cb618-73"><a href="#cb618-73" tabindex="-1"></a>  output<span class="sc">$</span>demo_table <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>({</span>
<span id="cb618-74"><a href="#cb618-74" tabindex="-1"></a>   </span>
<span id="cb618-75"><a href="#cb618-75" tabindex="-1"></a>    <span class="fu">penguins_filtered</span>() <span class="sc">|&gt;</span> </span>
<span id="cb618-76"><a href="#cb618-76" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">flipper_length_mm =</span> <span class="fu">quantile</span>(flipper_length_mm, <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), <span class="at">na.rm =</span> T), <span class="at">quantile =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>))</span>
<span id="cb618-77"><a href="#cb618-77" tabindex="-1"></a>})</span>
<span id="cb618-78"><a href="#cb618-78" tabindex="-1"></a>  </span>
<span id="cb618-79"><a href="#cb618-79" tabindex="-1"></a>}</span>
<span id="cb618-80"><a href="#cb618-80" tabindex="-1"></a></span>
<span id="cb618-81"><a href="#cb618-81" tabindex="-1"></a></span>
<span id="cb618-82"><a href="#cb618-82" tabindex="-1"></a></span>
<span id="cb618-83"><a href="#cb618-83" tabindex="-1"></a><span class="co"># Run the app ----</span></span>
<span id="cb618-84"><a href="#cb618-84" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<p>My most common error is trying to use data or title as an object instead of as a function. Notice how the first argument to ggplot is no longer data, but <code>data()</code> and you set the value of data with <code>data(newdata)</code>, not data &lt;- newdata. For now, just remember this as a quirk of shiny.</p>
<div id="observable" class="section level2" number="37.1">
<h2><span class="header-section-number">37.1</span> Observable</h2>
<p>What if you only want to update things when an update button is clicked, and not whenever the user changes an option?</p>
<p><code>observeEvent()</code>. This function runs the code whenever the value of the first argument changes. If there are reactive values inside the function, they won't trigger the code to run when they change.</p>
<div class="sourceCode" id="cb619"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb619-1"><a href="#cb619-1" tabindex="-1"></a><span class="co"># Packages ----</span></span>
<span id="cb619-2"><a href="#cb619-2" tabindex="-1"></a><span class="fu">library</span>(shiny)       <span class="co"># Essential for running any Shiny app</span></span>
<span id="cb619-3"><a href="#cb619-3" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb619-4"><a href="#cb619-4" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)    <span class="co"># The source of your data</span></span>
<span id="cb619-5"><a href="#cb619-5" tabindex="-1"></a></span>
<span id="cb619-6"><a href="#cb619-6" tabindex="-1"></a><span class="co"># Load the data</span></span>
<span id="cb619-7"><a href="#cb619-7" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(penguins)</span>
<span id="cb619-8"><a href="#cb619-8" tabindex="-1"></a></span>
<span id="cb619-9"><a href="#cb619-9" tabindex="-1"></a> </span>
<span id="cb619-10"><a href="#cb619-10" tabindex="-1"></a></span>
<span id="cb619-11"><a href="#cb619-11" tabindex="-1"></a><span class="co"># ui.R ----</span></span>
<span id="cb619-12"><a href="#cb619-12" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb619-13"><a href="#cb619-13" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb619-14"><a href="#cb619-14" tabindex="-1"></a>     <span class="fu">sidebarPanel</span>(</span>
<span id="cb619-15"><a href="#cb619-15" tabindex="-1"></a>      demo_sp <span class="ot">&lt;-</span> <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;species&quot;</span>,  <span class="co"># Give the input a name &quot;genotype&quot;</span></span>
<span id="cb619-16"><a href="#cb619-16" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;1. Select species&quot;</span>,  <span class="co"># Give the input a label to be displayed in the app</span></span>
<span id="cb619-17"><a href="#cb619-17" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span> <span class="ot">=</span> <span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span> <span class="ot">=</span> <span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span> <span class="ot">=</span> <span class="st">&quot;Gentoo&quot;</span>), <span class="at">selected =</span> <span class="st">&quot;Adelie&quot;</span>),  <span class="co"># Create the choices that can be selected. e.g. Display &quot;Adelie&quot; and link to value &quot;Adelie&quot;</span></span>
<span id="cb619-18"><a href="#cb619-18" tabindex="-1"></a>      demo_select <span class="ot">&lt;-</span> <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;colour&quot;</span>, </span>
<span id="cb619-19"><a href="#cb619-19" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;2. Select histogram colour&quot;</span>, </span>
<span id="cb619-20"><a href="#cb619-20" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;green&quot;</span>,<span class="st">&quot;red&quot;</span>,<span class="st">&quot;purple&quot;</span>,<span class="st">&quot;grey&quot;</span>), <span class="at">selected =</span> <span class="st">&quot;grey&quot;</span>),</span>
<span id="cb619-21"><a href="#cb619-21" tabindex="-1"></a>      demo_slide <span class="ot">&lt;-</span> <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;bin&quot;</span>, </span>
<span id="cb619-22"><a href="#cb619-22" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;3. Select number of histogram bins&quot;</span>, </span>
<span id="cb619-23"><a href="#cb619-23" tabindex="-1"></a>                  <span class="at">min=</span><span class="dv">1</span>, <span class="at">max=</span><span class="dv">25</span>, <span class="at">value=</span> <span class="fu">c</span>(<span class="dv">10</span>)),</span>
<span id="cb619-24"><a href="#cb619-24" tabindex="-1"></a>      demo_text <span class="ot">&lt;-</span> <span class="fu">textAreaInput</span>(<span class="at">inputId =</span> <span class="st">&quot;text&quot;</span>, </span>
<span id="cb619-25"><a href="#cb619-25" tabindex="-1"></a>                <span class="at">label =</span> <span class="st">&quot;4. Enter some text to be displayed&quot;</span>,</span>
<span id="cb619-26"><a href="#cb619-26" tabindex="-1"></a>                <span class="at">rows =</span> <span class="dv">5</span>,</span>
<span id="cb619-27"><a href="#cb619-27" tabindex="-1"></a>                <span class="at">placeholder =</span> <span class="st">&quot;Enter some information here&quot;</span>),</span>
<span id="cb619-28"><a href="#cb619-28" tabindex="-1"></a>      demo_button <span class="ot">&lt;-</span> <span class="fu">actionButton</span>(<span class="st">&quot;update&quot;</span>, <span class="st">&quot;Plot&quot;</span>)</span>
<span id="cb619-29"><a href="#cb619-29" tabindex="-1"></a>    ),</span>
<span id="cb619-30"><a href="#cb619-30" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb619-31"><a href="#cb619-31" tabindex="-1"></a>      <span class="co"># Output elements go here</span></span>
<span id="cb619-32"><a href="#cb619-32" tabindex="-1"></a>        </span>
<span id="cb619-33"><a href="#cb619-33" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">ul</span>(</span>
<span id="cb619-34"><a href="#cb619-34" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">strong</span>(<span class="fu">textOutput</span>(<span class="st">&quot;demo_sp&quot;</span>)),</span>
<span id="cb619-35"><a href="#cb619-35" tabindex="-1"></a>    <span class="fu">textOutput</span>(<span class="st">&quot;demo_text&quot;</span>)),</span>
<span id="cb619-36"><a href="#cb619-36" tabindex="-1"></a>  </span>
<span id="cb619-37"><a href="#cb619-37" tabindex="-1"></a>        <span class="fu">plotOutput</span>(<span class="st">&quot;demo_plot&quot;</span>, <span class="at">width =</span> <span class="st">&quot;500px&quot;</span>, <span class="at">height=</span><span class="st">&quot;300px&quot;</span>),</span>
<span id="cb619-38"><a href="#cb619-38" tabindex="-1"></a>        </span>
<span id="cb619-39"><a href="#cb619-39" tabindex="-1"></a>        DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="st">&quot;demo_table&quot;</span>,</span>
<span id="cb619-40"><a href="#cb619-40" tabindex="-1"></a>                    <span class="at">width =</span> <span class="st">&quot;50%&quot;</span>,</span>
<span id="cb619-41"><a href="#cb619-41" tabindex="-1"></a>                    <span class="at">height =</span> <span class="st">&quot;auto&quot;</span>)</span>
<span id="cb619-42"><a href="#cb619-42" tabindex="-1"></a>    )</span>
<span id="cb619-43"><a href="#cb619-43" tabindex="-1"></a>  )</span>
<span id="cb619-44"><a href="#cb619-44" tabindex="-1"></a>)</span>
<span id="cb619-45"><a href="#cb619-45" tabindex="-1"></a><span class="co"># server.R ----</span></span>
<span id="cb619-46"><a href="#cb619-46" tabindex="-1"></a></span>
<span id="cb619-47"><a href="#cb619-47" tabindex="-1"></a> </span>
<span id="cb619-48"><a href="#cb619-48" tabindex="-1"></a></span>
<span id="cb619-49"><a href="#cb619-49" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb619-50"><a href="#cb619-50" tabindex="-1"></a>  </span>
<span id="cb619-51"><a href="#cb619-51" tabindex="-1"></a> </span>
<span id="cb619-52"><a href="#cb619-52" tabindex="-1"></a></span>
<span id="cb619-53"><a href="#cb619-53" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>update, {</span>
<span id="cb619-54"><a href="#cb619-54" tabindex="-1"></a>    </span>
<span id="cb619-55"><a href="#cb619-55" tabindex="-1"></a>    penguins_filtered <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span></span>
<span id="cb619-56"><a href="#cb619-56" tabindex="-1"></a>      <span class="fu">filter</span>(species <span class="sc">==</span> input<span class="sc">$</span>species)</span>
<span id="cb619-57"><a href="#cb619-57" tabindex="-1"></a>    </span>
<span id="cb619-58"><a href="#cb619-58" tabindex="-1"></a>     bins <span class="ot">&lt;-</span> input<span class="sc">$</span>bin</span>
<span id="cb619-59"><a href="#cb619-59" tabindex="-1"></a>     </span>
<span id="cb619-60"><a href="#cb619-60" tabindex="-1"></a>     colour <span class="ot">&lt;-</span> input<span class="sc">$</span>colour</span>
<span id="cb619-61"><a href="#cb619-61" tabindex="-1"></a> </span>
<span id="cb619-62"><a href="#cb619-62" tabindex="-1"></a></span>
<span id="cb619-63"><a href="#cb619-63" tabindex="-1"></a>    output<span class="sc">$</span>demo_sp <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb619-64"><a href="#cb619-64" tabindex="-1"></a>      <span class="fu">paste</span>(<span class="st">&quot;Figure 1.&quot;</span>, input<span class="sc">$</span>species)</span>
<span id="cb619-65"><a href="#cb619-65" tabindex="-1"></a>    })</span>
<span id="cb619-66"><a href="#cb619-66" tabindex="-1"></a></span>
<span id="cb619-67"><a href="#cb619-67" tabindex="-1"></a>    output<span class="sc">$</span>demo_text <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb619-68"><a href="#cb619-68" tabindex="-1"></a>      (input<span class="sc">$</span>text)</span>
<span id="cb619-69"><a href="#cb619-69" tabindex="-1"></a>    })</span>
<span id="cb619-70"><a href="#cb619-70" tabindex="-1"></a></span>
<span id="cb619-71"><a href="#cb619-71" tabindex="-1"></a>    output<span class="sc">$</span>demo_plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb619-72"><a href="#cb619-72" tabindex="-1"></a>        <span class="fu">ggplot</span>(penguins_filtered, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm)) <span class="sc">+</span></span>
<span id="cb619-73"><a href="#cb619-73" tabindex="-1"></a>        <span class="fu">geom_histogram</span>(<span class="at">fill =</span> colour, <span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">bins =</span> bins) <span class="sc">+</span></span>
<span id="cb619-74"><a href="#cb619-74" tabindex="-1"></a>        <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Color&quot;</span>) <span class="sc">+</span></span>
<span id="cb619-75"><a href="#cb619-75" tabindex="-1"></a>        <span class="fu">theme_minimal</span>()</span>
<span id="cb619-76"><a href="#cb619-76" tabindex="-1"></a>    })</span>
<span id="cb619-77"><a href="#cb619-77" tabindex="-1"></a></span>
<span id="cb619-78"><a href="#cb619-78" tabindex="-1"></a>    output<span class="sc">$</span>demo_table <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>({</span>
<span id="cb619-79"><a href="#cb619-79" tabindex="-1"></a>      penguins_filtered <span class="sc">|&gt;</span> </span>
<span id="cb619-80"><a href="#cb619-80" tabindex="-1"></a>        <span class="fu">summarise</span>(<span class="at">flipper_length_mm =</span> <span class="fu">quantile</span>(flipper_length_mm, <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), <span class="at">na.rm =</span> T), <span class="at">quantile =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>))</span>
<span id="cb619-81"><a href="#cb619-81" tabindex="-1"></a>    })</span>
<span id="cb619-82"><a href="#cb619-82" tabindex="-1"></a>  })</span>
<span id="cb619-83"><a href="#cb619-83" tabindex="-1"></a>  </span>
<span id="cb619-84"><a href="#cb619-84" tabindex="-1"></a>}</span>
<span id="cb619-85"><a href="#cb619-85" tabindex="-1"></a></span>
<span id="cb619-86"><a href="#cb619-86" tabindex="-1"></a></span>
<span id="cb619-87"><a href="#cb619-87" tabindex="-1"></a></span>
<span id="cb619-88"><a href="#cb619-88" tabindex="-1"></a></span>
<span id="cb619-89"><a href="#cb619-89" tabindex="-1"></a><span class="co"># Run the app ----</span></span>
<span id="cb619-90"><a href="#cb619-90" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<p>Q. Which things are now updated by the plot button?</p>
</div>
</div>
<div id="shiny-dashboards" class="section level1" number="38">
<h1><span class="header-section-number">38</span> Shiny Dashboards</h1>
<p><code>bslib</code> is an R package that extends Bootstrap 4 and allows you to customize the appearance and style of your Shiny applications or R Markdown documents. With <code>bslib</code>, you can easily modify the look and feel of your Shiny apps by defining custom themes, colors, fonts, and other visual aspects.</p>
<p>It provides a flexible way to create a consistent and visually appealing design for your Shiny applications without having to write extensive CSS code.</p>
<p>You can use <code>bslib</code> functions like <code>bs_theme()</code>, to define and apply custom styles to your Shiny app.</p>
<div class="sourceCode" id="cb620"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb620-1"><a href="#cb620-1" tabindex="-1"></a><span class="co"># Packages ----</span></span>
<span id="cb620-2"><a href="#cb620-2" tabindex="-1"></a><span class="fu">library</span>(shiny)       <span class="co"># Essential for running any Shiny app</span></span>
<span id="cb620-3"><a href="#cb620-3" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb620-4"><a href="#cb620-4" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)    <span class="co"># The source of your data</span></span>
<span id="cb620-5"><a href="#cb620-5" tabindex="-1"></a><span class="fu">library</span>(bslib)</span>
<span id="cb620-6"><a href="#cb620-6" tabindex="-1"></a></span>
<span id="cb620-7"><a href="#cb620-7" tabindex="-1"></a><span class="co"># Load the data</span></span>
<span id="cb620-8"><a href="#cb620-8" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(penguins)</span>
<span id="cb620-9"><a href="#cb620-9" tabindex="-1"></a></span>
<span id="cb620-10"><a href="#cb620-10" tabindex="-1"></a><span class="co"># Calculate column means for the value boxes</span></span>
<span id="cb620-11"><a href="#cb620-11" tabindex="-1"></a>means <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb620-12"><a href="#cb620-12" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb620-13"><a href="#cb620-13" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">round</span>(<span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm =</span> T), <span class="dv">2</span>))</span>
<span id="cb620-14"><a href="#cb620-14" tabindex="-1"></a></span>
<span id="cb620-15"><a href="#cb620-15" tabindex="-1"></a><span class="co"># Turn on thematic for theme-matched plots</span></span>
<span id="cb620-16"><a href="#cb620-16" tabindex="-1"></a>thematic<span class="sc">::</span><span class="fu">thematic_shiny</span>(<span class="at">font =</span> <span class="st">&quot;auto&quot;</span>)</span>
<span id="cb620-17"><a href="#cb620-17" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">16</span>))</span>
<span id="cb620-18"><a href="#cb620-18" tabindex="-1"></a></span>
<span id="cb620-19"><a href="#cb620-19" tabindex="-1"></a><span class="co"># ui.R ----</span></span>
<span id="cb620-20"><a href="#cb620-20" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">page_sidebar</span>(</span>
<span id="cb620-21"><a href="#cb620-21" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">&quot;Penguins flipper dashboard&quot;</span>,</span>
<span id="cb620-22"><a href="#cb620-22" tabindex="-1"></a>  <span class="at">sidebar =</span> <span class="fu">sidebar</span>(</span>
<span id="cb620-23"><a href="#cb620-23" tabindex="-1"></a>      demo_sp <span class="ot">&lt;-</span> <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;species&quot;</span>,  <span class="co"># Give the input a name &quot;genotype&quot;</span></span>
<span id="cb620-24"><a href="#cb620-24" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;1. Select species&quot;</span>,  <span class="co"># Give the input a label to be displayed in the app</span></span>
<span id="cb620-25"><a href="#cb620-25" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span> <span class="ot">=</span> <span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span> <span class="ot">=</span> <span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span> <span class="ot">=</span> <span class="st">&quot;Gentoo&quot;</span>), <span class="at">selected =</span> <span class="st">&quot;Adelie&quot;</span>),  <span class="co"># Create the choices that can be selected. e.g. Display &quot;Adelie&quot; and link to value &quot;Adelie&quot;</span></span>
<span id="cb620-26"><a href="#cb620-26" tabindex="-1"></a>      demo_select <span class="ot">&lt;-</span> <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;colour&quot;</span>, </span>
<span id="cb620-27"><a href="#cb620-27" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;2. Select histogram colour&quot;</span>, </span>
<span id="cb620-28"><a href="#cb620-28" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;green&quot;</span>,<span class="st">&quot;red&quot;</span>,<span class="st">&quot;purple&quot;</span>,<span class="st">&quot;grey&quot;</span>), <span class="at">selected =</span> <span class="st">&quot;grey&quot;</span>),</span>
<span id="cb620-29"><a href="#cb620-29" tabindex="-1"></a>      demo_slide <span class="ot">&lt;-</span> <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;bin&quot;</span>, </span>
<span id="cb620-30"><a href="#cb620-30" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;3. Select number of histogram bins&quot;</span>, </span>
<span id="cb620-31"><a href="#cb620-31" tabindex="-1"></a>                  <span class="at">min=</span><span class="dv">1</span>, <span class="at">max=</span><span class="dv">25</span>, <span class="at">value=</span> <span class="fu">c</span>(<span class="dv">10</span>)),</span>
<span id="cb620-32"><a href="#cb620-32" tabindex="-1"></a>      demo_text <span class="ot">&lt;-</span> <span class="fu">textAreaInput</span>(<span class="at">inputId =</span> <span class="st">&quot;text&quot;</span>, </span>
<span id="cb620-33"><a href="#cb620-33" tabindex="-1"></a>                <span class="at">label =</span> <span class="st">&quot;4. Enter some text to be displayed&quot;</span>,</span>
<span id="cb620-34"><a href="#cb620-34" tabindex="-1"></a>                <span class="at">rows =</span> <span class="dv">5</span>,</span>
<span id="cb620-35"><a href="#cb620-35" tabindex="-1"></a>                <span class="at">placeholder =</span> <span class="st">&quot;Enter some information here&quot;</span>),</span>
<span id="cb620-36"><a href="#cb620-36" tabindex="-1"></a>      demo_button <span class="ot">&lt;-</span> <span class="fu">actionButton</span>(<span class="st">&quot;update&quot;</span>, <span class="st">&quot;Plot&quot;</span>)</span>
<span id="cb620-37"><a href="#cb620-37" tabindex="-1"></a>    )</span>
<span id="cb620-38"><a href="#cb620-38" tabindex="-1"></a>  ,</span>
<span id="cb620-39"><a href="#cb620-39" tabindex="-1"></a>   <span class="fu">layout_columns</span>(</span>
<span id="cb620-40"><a href="#cb620-40" tabindex="-1"></a>    <span class="at">fill =</span> <span class="cn">FALSE</span>,</span>
<span id="cb620-41"><a href="#cb620-41" tabindex="-1"></a>    <span class="fu">value_box</span>(</span>
<span id="cb620-42"><a href="#cb620-42" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">&quot;Adelie Flipper Length&quot;</span>,</span>
<span id="cb620-43"><a href="#cb620-43" tabindex="-1"></a>      <span class="at">value =</span> scales<span class="sc">::</span><span class="fu">unit_format</span>(<span class="at">unit =</span> <span class="st">&quot;mm&quot;</span>)(means[[<span class="dv">1</span>,<span class="dv">2</span>]]),</span>
<span id="cb620-44"><a href="#cb620-44" tabindex="-1"></a>      <span class="at">showcase =</span> bsicons<span class="sc">::</span><span class="fu">bs_icon</span>(<span class="st">&quot;align-bottom&quot;</span>),</span>
<span id="cb620-45"><a href="#cb620-45" tabindex="-1"></a>      <span class="at">theme_color =</span> <span class="st">&quot;grey&quot;</span></span>
<span id="cb620-46"><a href="#cb620-46" tabindex="-1"></a>    ),</span>
<span id="cb620-47"><a href="#cb620-47" tabindex="-1"></a>    <span class="fu">value_box</span>(</span>
<span id="cb620-48"><a href="#cb620-48" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">&quot;Chinstrap Flipper&quot;</span>,</span>
<span id="cb620-49"><a href="#cb620-49" tabindex="-1"></a>      <span class="at">value =</span> scales<span class="sc">::</span><span class="fu">unit_format</span>(<span class="at">unit =</span> <span class="st">&quot;mm&quot;</span>)(means[[<span class="dv">2</span>,<span class="dv">2</span>]]),</span>
<span id="cb620-50"><a href="#cb620-50" tabindex="-1"></a>      <span class="at">showcase =</span> bsicons<span class="sc">::</span><span class="fu">bs_icon</span>(<span class="st">&quot;align-center&quot;</span>),</span>
<span id="cb620-51"><a href="#cb620-51" tabindex="-1"></a>      <span class="at">theme_color =</span> <span class="st">&quot;grey&quot;</span></span>
<span id="cb620-52"><a href="#cb620-52" tabindex="-1"></a>    ),</span>
<span id="cb620-53"><a href="#cb620-53" tabindex="-1"></a> <span class="fu">value_box</span>(</span>
<span id="cb620-54"><a href="#cb620-54" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">&quot;Gentoo Flipper Length&quot;</span>,</span>
<span id="cb620-55"><a href="#cb620-55" tabindex="-1"></a>      <span class="at">value =</span> scales<span class="sc">::</span><span class="fu">unit_format</span>(<span class="at">unit =</span> <span class="st">&quot;mm&quot;</span>)(means[[<span class="dv">3</span>,<span class="dv">2</span>]]),</span>
<span id="cb620-56"><a href="#cb620-56" tabindex="-1"></a>      <span class="at">showcase =</span> bsicons<span class="sc">::</span><span class="fu">bs_icon</span>(<span class="st">&quot;align-top&quot;</span>),</span>
<span id="cb620-57"><a href="#cb620-57" tabindex="-1"></a>      <span class="at">theme_color =</span> <span class="st">&quot;grey&quot;</span></span>
<span id="cb620-58"><a href="#cb620-58" tabindex="-1"></a>    )</span>
<span id="cb620-59"><a href="#cb620-59" tabindex="-1"></a>  ),</span>
<span id="cb620-60"><a href="#cb620-60" tabindex="-1"></a>    </span>
<span id="cb620-61"><a href="#cb620-61" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">ul</span>(</span>
<span id="cb620-62"><a href="#cb620-62" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">strong</span>(<span class="fu">textOutput</span>(<span class="st">&quot;demo_sp&quot;</span>)),</span>
<span id="cb620-63"><a href="#cb620-63" tabindex="-1"></a>    <span class="fu">textOutput</span>(<span class="st">&quot;demo_text&quot;</span>)),</span>
<span id="cb620-64"><a href="#cb620-64" tabindex="-1"></a> </span>
<span id="cb620-65"><a href="#cb620-65" tabindex="-1"></a>      <span class="co"># Output elements go here</span></span>
<span id="cb620-66"><a href="#cb620-66" tabindex="-1"></a>      <span class="fu">layout_columns</span>(</span>
<span id="cb620-67"><a href="#cb620-67" tabindex="-1"></a>    <span class="fu">card</span>(</span>
<span id="cb620-68"><a href="#cb620-68" tabindex="-1"></a>      <span class="at">full_screen =</span> <span class="cn">TRUE</span>,</span>
<span id="cb620-69"><a href="#cb620-69" tabindex="-1"></a>      <span class="fu">card_header</span>(<span class="st">&quot;Plot&quot;</span>),</span>
<span id="cb620-70"><a href="#cb620-70" tabindex="-1"></a>      <span class="fu">plotOutput</span>(<span class="st">&quot;demo_plot&quot;</span>)</span>
<span id="cb620-71"><a href="#cb620-71" tabindex="-1"></a>    ),</span>
<span id="cb620-72"><a href="#cb620-72" tabindex="-1"></a>    <span class="fu">card</span>(</span>
<span id="cb620-73"><a href="#cb620-73" tabindex="-1"></a>      <span class="at">full_screen =</span> <span class="cn">TRUE</span>,</span>
<span id="cb620-74"><a href="#cb620-74" tabindex="-1"></a>      <span class="fu">card_header</span>(<span class="st">&quot;Table&quot;</span>),</span>
<span id="cb620-75"><a href="#cb620-75" tabindex="-1"></a>      DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="st">&quot;demo_table&quot;</span>,</span>
<span id="cb620-76"><a href="#cb620-76" tabindex="-1"></a>                    <span class="at">width =</span> <span class="st">&quot;100%&quot;</span>,</span>
<span id="cb620-77"><a href="#cb620-77" tabindex="-1"></a>                    <span class="at">height =</span> <span class="st">&quot;auto&quot;</span>)</span>
<span id="cb620-78"><a href="#cb620-78" tabindex="-1"></a>    )  </span>
<span id="cb620-79"><a href="#cb620-79" tabindex="-1"></a>)</span>
<span id="cb620-80"><a href="#cb620-80" tabindex="-1"></a>)</span>
<span id="cb620-81"><a href="#cb620-81" tabindex="-1"></a>  </span>
<span id="cb620-82"><a href="#cb620-82" tabindex="-1"></a></span>
<span id="cb620-83"><a href="#cb620-83" tabindex="-1"></a><span class="co"># server.R ----</span></span>
<span id="cb620-84"><a href="#cb620-84" tabindex="-1"></a></span>
<span id="cb620-85"><a href="#cb620-85" tabindex="-1"></a> </span>
<span id="cb620-86"><a href="#cb620-86" tabindex="-1"></a></span>
<span id="cb620-87"><a href="#cb620-87" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb620-88"><a href="#cb620-88" tabindex="-1"></a>  </span>
<span id="cb620-89"><a href="#cb620-89" tabindex="-1"></a></span>
<span id="cb620-90"><a href="#cb620-90" tabindex="-1"></a></span>
<span id="cb620-91"><a href="#cb620-91" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>update, {</span>
<span id="cb620-92"><a href="#cb620-92" tabindex="-1"></a>    </span>
<span id="cb620-93"><a href="#cb620-93" tabindex="-1"></a>    penguins_filtered <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span></span>
<span id="cb620-94"><a href="#cb620-94" tabindex="-1"></a>      <span class="fu">filter</span>(species <span class="sc">==</span> input<span class="sc">$</span>species)</span>
<span id="cb620-95"><a href="#cb620-95" tabindex="-1"></a>    </span>
<span id="cb620-96"><a href="#cb620-96" tabindex="-1"></a>     bins <span class="ot">&lt;-</span> input<span class="sc">$</span>bin</span>
<span id="cb620-97"><a href="#cb620-97" tabindex="-1"></a>     </span>
<span id="cb620-98"><a href="#cb620-98" tabindex="-1"></a>     colour <span class="ot">&lt;-</span> input<span class="sc">$</span>colour</span>
<span id="cb620-99"><a href="#cb620-99" tabindex="-1"></a> </span>
<span id="cb620-100"><a href="#cb620-100" tabindex="-1"></a></span>
<span id="cb620-101"><a href="#cb620-101" tabindex="-1"></a>    output<span class="sc">$</span>demo_sp <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb620-102"><a href="#cb620-102" tabindex="-1"></a>      <span class="fu">paste</span>(<span class="st">&quot;Figure 1.&quot;</span>, input<span class="sc">$</span>species)</span>
<span id="cb620-103"><a href="#cb620-103" tabindex="-1"></a>    })</span>
<span id="cb620-104"><a href="#cb620-104" tabindex="-1"></a></span>
<span id="cb620-105"><a href="#cb620-105" tabindex="-1"></a>    output<span class="sc">$</span>demo_text <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb620-106"><a href="#cb620-106" tabindex="-1"></a>      (input<span class="sc">$</span>text)</span>
<span id="cb620-107"><a href="#cb620-107" tabindex="-1"></a>    })</span>
<span id="cb620-108"><a href="#cb620-108" tabindex="-1"></a></span>
<span id="cb620-109"><a href="#cb620-109" tabindex="-1"></a>    output<span class="sc">$</span>demo_plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb620-110"><a href="#cb620-110" tabindex="-1"></a>        <span class="fu">ggplot</span>(penguins_filtered, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm)) <span class="sc">+</span></span>
<span id="cb620-111"><a href="#cb620-111" tabindex="-1"></a>        <span class="fu">geom_histogram</span>(<span class="at">fill =</span> colour, <span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">bins =</span> bins) <span class="sc">+</span></span>
<span id="cb620-112"><a href="#cb620-112" tabindex="-1"></a>        <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Color&quot;</span>) <span class="sc">+</span></span>
<span id="cb620-113"><a href="#cb620-113" tabindex="-1"></a>        <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">16</span>)</span>
<span id="cb620-114"><a href="#cb620-114" tabindex="-1"></a>    })</span>
<span id="cb620-115"><a href="#cb620-115" tabindex="-1"></a></span>
<span id="cb620-116"><a href="#cb620-116" tabindex="-1"></a>    output<span class="sc">$</span>demo_table <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>({</span>
<span id="cb620-117"><a href="#cb620-117" tabindex="-1"></a>      penguins_filtered <span class="sc">|&gt;</span> </span>
<span id="cb620-118"><a href="#cb620-118" tabindex="-1"></a>        <span class="fu">summarise</span>(<span class="at">flipper_length_mm =</span> <span class="fu">quantile</span>(flipper_length_mm, <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), <span class="at">na.rm =</span> T), <span class="at">quantile =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>))</span>
<span id="cb620-119"><a href="#cb620-119" tabindex="-1"></a>    })</span>
<span id="cb620-120"><a href="#cb620-120" tabindex="-1"></a>  })</span>
<span id="cb620-121"><a href="#cb620-121" tabindex="-1"></a>  </span>
<span id="cb620-122"><a href="#cb620-122" tabindex="-1"></a>}</span>
<span id="cb620-123"><a href="#cb620-123" tabindex="-1"></a></span>
<span id="cb620-124"><a href="#cb620-124" tabindex="-1"></a></span>
<span id="cb620-125"><a href="#cb620-125" tabindex="-1"></a></span>
<span id="cb620-126"><a href="#cb620-126" tabindex="-1"></a></span>
<span id="cb620-127"><a href="#cb620-127" tabindex="-1"></a><span class="co"># Run the app ----</span></span>
<span id="cb620-128"><a href="#cb620-128" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<div id="themable-dashboards" class="section level3" number="38.0.1">
<h3><span class="header-section-number">38.0.1</span> Themable Dashboards</h3>
<p>Adding the <code>bstheme()</code> function to the server adds real time theme changes to dashboards.</p>
<div class="sourceCode" id="cb621"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb621-1"><a href="#cb621-1" tabindex="-1"></a><span class="co"># Packages ----</span></span>
<span id="cb621-2"><a href="#cb621-2" tabindex="-1"></a><span class="fu">library</span>(shiny)       <span class="co"># Essential for running any Shiny app</span></span>
<span id="cb621-3"><a href="#cb621-3" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb621-4"><a href="#cb621-4" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)    <span class="co"># The source of your data</span></span>
<span id="cb621-5"><a href="#cb621-5" tabindex="-1"></a><span class="fu">library</span>(bslib)</span>
<span id="cb621-6"><a href="#cb621-6" tabindex="-1"></a></span>
<span id="cb621-7"><a href="#cb621-7" tabindex="-1"></a><span class="co"># Load the data</span></span>
<span id="cb621-8"><a href="#cb621-8" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(penguins)</span>
<span id="cb621-9"><a href="#cb621-9" tabindex="-1"></a></span>
<span id="cb621-10"><a href="#cb621-10" tabindex="-1"></a><span class="co"># Turn on thematic for theme-matched plots</span></span>
<span id="cb621-11"><a href="#cb621-11" tabindex="-1"></a>thematic<span class="sc">::</span><span class="fu">thematic_shiny</span>(<span class="at">font =</span> <span class="st">&quot;auto&quot;</span>)</span>
<span id="cb621-12"><a href="#cb621-12" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">16</span>))</span>
<span id="cb621-13"><a href="#cb621-13" tabindex="-1"></a></span>
<span id="cb621-14"><a href="#cb621-14" tabindex="-1"></a><span class="co"># Calculate column means for the value boxes</span></span>
<span id="cb621-15"><a href="#cb621-15" tabindex="-1"></a>means <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb621-16"><a href="#cb621-16" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb621-17"><a href="#cb621-17" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">round</span>(<span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm =</span> T), <span class="dv">2</span>))</span>
<span id="cb621-18"><a href="#cb621-18" tabindex="-1"></a></span>
<span id="cb621-19"><a href="#cb621-19" tabindex="-1"></a><span class="co"># Turn on thematic for theme-matched plots</span></span>
<span id="cb621-20"><a href="#cb621-20" tabindex="-1"></a>thematic<span class="sc">::</span><span class="fu">thematic_shiny</span>(<span class="at">font =</span> <span class="st">&quot;auto&quot;</span>)</span>
<span id="cb621-21"><a href="#cb621-21" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">16</span>))</span>
<span id="cb621-22"><a href="#cb621-22" tabindex="-1"></a></span>
<span id="cb621-23"><a href="#cb621-23" tabindex="-1"></a><span class="co"># ui.R ----</span></span>
<span id="cb621-24"><a href="#cb621-24" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">page_sidebar</span>(</span>
<span id="cb621-25"><a href="#cb621-25" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">&quot;Penguins flipper dashboard&quot;</span>,</span>
<span id="cb621-26"><a href="#cb621-26" tabindex="-1"></a>  <span class="at">sidebar =</span> <span class="fu">sidebar</span>(</span>
<span id="cb621-27"><a href="#cb621-27" tabindex="-1"></a>      demo_sp <span class="ot">&lt;-</span> <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;species&quot;</span>,  <span class="co"># Give the input a name &quot;genotype&quot;</span></span>
<span id="cb621-28"><a href="#cb621-28" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;1. Select species&quot;</span>,  <span class="co"># Give the input a label to be displayed in the app</span></span>
<span id="cb621-29"><a href="#cb621-29" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span> <span class="ot">=</span> <span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span> <span class="ot">=</span> <span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span> <span class="ot">=</span> <span class="st">&quot;Gentoo&quot;</span>), <span class="at">selected =</span> <span class="st">&quot;Adelie&quot;</span>),  <span class="co"># Create the choices that can be selected. e.g. Display &quot;Adelie&quot; and link to value &quot;Adelie&quot;</span></span>
<span id="cb621-30"><a href="#cb621-30" tabindex="-1"></a>      demo_select <span class="ot">&lt;-</span> <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;colour&quot;</span>, </span>
<span id="cb621-31"><a href="#cb621-31" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;2. Select histogram colour&quot;</span>, </span>
<span id="cb621-32"><a href="#cb621-32" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;green&quot;</span>,<span class="st">&quot;red&quot;</span>,<span class="st">&quot;purple&quot;</span>,<span class="st">&quot;grey&quot;</span>), <span class="at">selected =</span> <span class="st">&quot;grey&quot;</span>),</span>
<span id="cb621-33"><a href="#cb621-33" tabindex="-1"></a>      demo_slide <span class="ot">&lt;-</span> <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;bin&quot;</span>, </span>
<span id="cb621-34"><a href="#cb621-34" tabindex="-1"></a>                  <span class="at">label =</span> <span class="st">&quot;3. Select number of histogram bins&quot;</span>, </span>
<span id="cb621-35"><a href="#cb621-35" tabindex="-1"></a>                  <span class="at">min=</span><span class="dv">1</span>, <span class="at">max=</span><span class="dv">25</span>, <span class="at">value=</span> <span class="fu">c</span>(<span class="dv">10</span>)),</span>
<span id="cb621-36"><a href="#cb621-36" tabindex="-1"></a>      demo_text <span class="ot">&lt;-</span> <span class="fu">textAreaInput</span>(<span class="at">inputId =</span> <span class="st">&quot;text&quot;</span>, </span>
<span id="cb621-37"><a href="#cb621-37" tabindex="-1"></a>                <span class="at">label =</span> <span class="st">&quot;4. Enter some text to be displayed&quot;</span>,</span>
<span id="cb621-38"><a href="#cb621-38" tabindex="-1"></a>                <span class="at">rows =</span> <span class="dv">5</span>,</span>
<span id="cb621-39"><a href="#cb621-39" tabindex="-1"></a>                <span class="at">placeholder =</span> <span class="st">&quot;Enter some information here&quot;</span>),</span>
<span id="cb621-40"><a href="#cb621-40" tabindex="-1"></a>      demo_button <span class="ot">&lt;-</span> <span class="fu">actionButton</span>(<span class="st">&quot;update&quot;</span>, <span class="st">&quot;Plot&quot;</span>)</span>
<span id="cb621-41"><a href="#cb621-41" tabindex="-1"></a>    )</span>
<span id="cb621-42"><a href="#cb621-42" tabindex="-1"></a>  ,</span>
<span id="cb621-43"><a href="#cb621-43" tabindex="-1"></a>   <span class="fu">layout_columns</span>(</span>
<span id="cb621-44"><a href="#cb621-44" tabindex="-1"></a>    <span class="at">fill =</span> <span class="cn">FALSE</span>,</span>
<span id="cb621-45"><a href="#cb621-45" tabindex="-1"></a>    <span class="fu">value_box</span>(</span>
<span id="cb621-46"><a href="#cb621-46" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">&quot;Adelie Flipper Length&quot;</span>,</span>
<span id="cb621-47"><a href="#cb621-47" tabindex="-1"></a>      <span class="at">value =</span> scales<span class="sc">::</span><span class="fu">unit_format</span>(<span class="at">unit =</span> <span class="st">&quot;mm&quot;</span>)(means[[<span class="dv">1</span>,<span class="dv">2</span>]]),</span>
<span id="cb621-48"><a href="#cb621-48" tabindex="-1"></a>      <span class="at">showcase =</span> bsicons<span class="sc">::</span><span class="fu">bs_icon</span>(<span class="st">&quot;align-bottom&quot;</span>),</span>
<span id="cb621-49"><a href="#cb621-49" tabindex="-1"></a>      <span class="at">theme_color =</span> <span class="st">&quot;grey&quot;</span></span>
<span id="cb621-50"><a href="#cb621-50" tabindex="-1"></a>    ),</span>
<span id="cb621-51"><a href="#cb621-51" tabindex="-1"></a>    <span class="fu">value_box</span>(</span>
<span id="cb621-52"><a href="#cb621-52" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">&quot;Chinstrap Flipper&quot;</span>,</span>
<span id="cb621-53"><a href="#cb621-53" tabindex="-1"></a>      <span class="at">value =</span> scales<span class="sc">::</span><span class="fu">unit_format</span>(<span class="at">unit =</span> <span class="st">&quot;mm&quot;</span>)(means[[<span class="dv">2</span>,<span class="dv">2</span>]]),</span>
<span id="cb621-54"><a href="#cb621-54" tabindex="-1"></a>      <span class="at">showcase =</span> bsicons<span class="sc">::</span><span class="fu">bs_icon</span>(<span class="st">&quot;align-center&quot;</span>),</span>
<span id="cb621-55"><a href="#cb621-55" tabindex="-1"></a>      <span class="at">theme_color =</span> <span class="st">&quot;grey&quot;</span></span>
<span id="cb621-56"><a href="#cb621-56" tabindex="-1"></a>    ),</span>
<span id="cb621-57"><a href="#cb621-57" tabindex="-1"></a> <span class="fu">value_box</span>(</span>
<span id="cb621-58"><a href="#cb621-58" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">&quot;Gentoo Flipper Length&quot;</span>,</span>
<span id="cb621-59"><a href="#cb621-59" tabindex="-1"></a>      <span class="at">value =</span> scales<span class="sc">::</span><span class="fu">unit_format</span>(<span class="at">unit =</span> <span class="st">&quot;mm&quot;</span>)(means[[<span class="dv">3</span>,<span class="dv">2</span>]]),</span>
<span id="cb621-60"><a href="#cb621-60" tabindex="-1"></a>      <span class="at">showcase =</span> bsicons<span class="sc">::</span><span class="fu">bs_icon</span>(<span class="st">&quot;align-top&quot;</span>),</span>
<span id="cb621-61"><a href="#cb621-61" tabindex="-1"></a>      <span class="at">theme_color =</span> <span class="st">&quot;grey&quot;</span></span>
<span id="cb621-62"><a href="#cb621-62" tabindex="-1"></a>    )</span>
<span id="cb621-63"><a href="#cb621-63" tabindex="-1"></a>  ),</span>
<span id="cb621-64"><a href="#cb621-64" tabindex="-1"></a>    </span>
<span id="cb621-65"><a href="#cb621-65" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">ul</span>(</span>
<span id="cb621-66"><a href="#cb621-66" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">strong</span>(<span class="fu">textOutput</span>(<span class="st">&quot;demo_sp&quot;</span>)),</span>
<span id="cb621-67"><a href="#cb621-67" tabindex="-1"></a>    <span class="fu">textOutput</span>(<span class="st">&quot;demo_text&quot;</span>)),</span>
<span id="cb621-68"><a href="#cb621-68" tabindex="-1"></a> </span>
<span id="cb621-69"><a href="#cb621-69" tabindex="-1"></a>      <span class="co"># Output elements go here</span></span>
<span id="cb621-70"><a href="#cb621-70" tabindex="-1"></a>      <span class="fu">layout_columns</span>(</span>
<span id="cb621-71"><a href="#cb621-71" tabindex="-1"></a>    <span class="fu">card</span>(</span>
<span id="cb621-72"><a href="#cb621-72" tabindex="-1"></a>      <span class="at">full_screen =</span> <span class="cn">TRUE</span>,</span>
<span id="cb621-73"><a href="#cb621-73" tabindex="-1"></a>      <span class="fu">card_header</span>(<span class="st">&quot;Plot&quot;</span>),</span>
<span id="cb621-74"><a href="#cb621-74" tabindex="-1"></a>      <span class="fu">plotOutput</span>(<span class="st">&quot;demo_plot&quot;</span>)</span>
<span id="cb621-75"><a href="#cb621-75" tabindex="-1"></a>    ),</span>
<span id="cb621-76"><a href="#cb621-76" tabindex="-1"></a>    <span class="fu">card</span>(</span>
<span id="cb621-77"><a href="#cb621-77" tabindex="-1"></a>      <span class="at">full_screen =</span> <span class="cn">TRUE</span>,</span>
<span id="cb621-78"><a href="#cb621-78" tabindex="-1"></a>      <span class="fu">card_header</span>(<span class="st">&quot;Table&quot;</span>),</span>
<span id="cb621-79"><a href="#cb621-79" tabindex="-1"></a>      DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="st">&quot;demo_table&quot;</span>,</span>
<span id="cb621-80"><a href="#cb621-80" tabindex="-1"></a>                    <span class="at">width =</span> <span class="st">&quot;100%&quot;</span>,</span>
<span id="cb621-81"><a href="#cb621-81" tabindex="-1"></a>                    <span class="at">height =</span> <span class="st">&quot;auto&quot;</span>)</span>
<span id="cb621-82"><a href="#cb621-82" tabindex="-1"></a>    )  </span>
<span id="cb621-83"><a href="#cb621-83" tabindex="-1"></a>)</span>
<span id="cb621-84"><a href="#cb621-84" tabindex="-1"></a>)</span>
<span id="cb621-85"><a href="#cb621-85" tabindex="-1"></a>  </span>
<span id="cb621-86"><a href="#cb621-86" tabindex="-1"></a></span>
<span id="cb621-87"><a href="#cb621-87" tabindex="-1"></a><span class="co"># server.R ----</span></span>
<span id="cb621-88"><a href="#cb621-88" tabindex="-1"></a></span>
<span id="cb621-89"><a href="#cb621-89" tabindex="-1"></a> </span>
<span id="cb621-90"><a href="#cb621-90" tabindex="-1"></a></span>
<span id="cb621-91"><a href="#cb621-91" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb621-92"><a href="#cb621-92" tabindex="-1"></a>    <span class="fu">bs_themer</span>()</span>
<span id="cb621-93"><a href="#cb621-93" tabindex="-1"></a></span>
<span id="cb621-94"><a href="#cb621-94" tabindex="-1"></a></span>
<span id="cb621-95"><a href="#cb621-95" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>update, {</span>
<span id="cb621-96"><a href="#cb621-96" tabindex="-1"></a>    </span>
<span id="cb621-97"><a href="#cb621-97" tabindex="-1"></a>    penguins_filtered <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span></span>
<span id="cb621-98"><a href="#cb621-98" tabindex="-1"></a>      <span class="fu">filter</span>(species <span class="sc">==</span> input<span class="sc">$</span>species)</span>
<span id="cb621-99"><a href="#cb621-99" tabindex="-1"></a>    </span>
<span id="cb621-100"><a href="#cb621-100" tabindex="-1"></a>     bins <span class="ot">&lt;-</span> input<span class="sc">$</span>bin</span>
<span id="cb621-101"><a href="#cb621-101" tabindex="-1"></a>     </span>
<span id="cb621-102"><a href="#cb621-102" tabindex="-1"></a>     colour <span class="ot">&lt;-</span> input<span class="sc">$</span>colour</span>
<span id="cb621-103"><a href="#cb621-103" tabindex="-1"></a> </span>
<span id="cb621-104"><a href="#cb621-104" tabindex="-1"></a></span>
<span id="cb621-105"><a href="#cb621-105" tabindex="-1"></a>    output<span class="sc">$</span>demo_sp <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb621-106"><a href="#cb621-106" tabindex="-1"></a>      <span class="fu">paste</span>(<span class="st">&quot;Figure 1.&quot;</span>, input<span class="sc">$</span>species)</span>
<span id="cb621-107"><a href="#cb621-107" tabindex="-1"></a>    })</span>
<span id="cb621-108"><a href="#cb621-108" tabindex="-1"></a></span>
<span id="cb621-109"><a href="#cb621-109" tabindex="-1"></a>    output<span class="sc">$</span>demo_text <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb621-110"><a href="#cb621-110" tabindex="-1"></a>      (input<span class="sc">$</span>text)</span>
<span id="cb621-111"><a href="#cb621-111" tabindex="-1"></a>    })</span>
<span id="cb621-112"><a href="#cb621-112" tabindex="-1"></a></span>
<span id="cb621-113"><a href="#cb621-113" tabindex="-1"></a>    output<span class="sc">$</span>demo_plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb621-114"><a href="#cb621-114" tabindex="-1"></a>        <span class="fu">ggplot</span>(penguins_filtered, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm)) <span class="sc">+</span></span>
<span id="cb621-115"><a href="#cb621-115" tabindex="-1"></a>        <span class="fu">geom_histogram</span>(<span class="at">fill =</span> colour, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">bins =</span> bins) <span class="sc">+</span></span>
<span id="cb621-116"><a href="#cb621-116" tabindex="-1"></a>        <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Color&quot;</span>) <span class="sc">+</span></span>
<span id="cb621-117"><a href="#cb621-117" tabindex="-1"></a>        <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">16</span>)</span>
<span id="cb621-118"><a href="#cb621-118" tabindex="-1"></a>    })</span>
<span id="cb621-119"><a href="#cb621-119" tabindex="-1"></a></span>
<span id="cb621-120"><a href="#cb621-120" tabindex="-1"></a>    output<span class="sc">$</span>demo_table <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>({</span>
<span id="cb621-121"><a href="#cb621-121" tabindex="-1"></a>      penguins_filtered <span class="sc">|&gt;</span> </span>
<span id="cb621-122"><a href="#cb621-122" tabindex="-1"></a>        <span class="fu">summarise</span>(<span class="at">flipper_length_mm =</span> <span class="fu">quantile</span>(flipper_length_mm, <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), <span class="at">na.rm =</span> T), <span class="at">quantile =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>))</span>
<span id="cb621-123"><a href="#cb621-123" tabindex="-1"></a>    })</span>
<span id="cb621-124"><a href="#cb621-124" tabindex="-1"></a>  })</span>
<span id="cb621-125"><a href="#cb621-125" tabindex="-1"></a>  </span>
<span id="cb621-126"><a href="#cb621-126" tabindex="-1"></a>}</span>
<span id="cb621-127"><a href="#cb621-127" tabindex="-1"></a></span>
<span id="cb621-128"><a href="#cb621-128" tabindex="-1"></a></span>
<span id="cb621-129"><a href="#cb621-129" tabindex="-1"></a></span>
<span id="cb621-130"><a href="#cb621-130" tabindex="-1"></a></span>
<span id="cb621-131"><a href="#cb621-131" tabindex="-1"></a><span class="co"># Run the app ----</span></span>
<span id="cb621-132"><a href="#cb621-132" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</div>
<div id="reading-3" class="section level3" number="38.0.2">
<h3><span class="header-section-number">38.0.2</span> Reading</h3>
<p>Check out the bslib information (<a href="https://rstudio.github.io/bslib/index.html" class="uri">https://rstudio.github.io/bslib/index.html</a>)</p>
<p>As well as this short article on updates and changes with follow-along examples <a href="https://shiny.posit.co/blog/posts/bslib-dashboards/" class="uri">https://shiny.posit.co/blog/posts/bslib-dashboards/</a></p>
</div>
</div>
<div id="sharing" class="section level1" number="39">
<h1><span class="header-section-number">39</span> Sharing</h1>
<div id="shiny-apps" class="section level2" number="39.1">
<h2><span class="header-section-number">39.1</span> Shiny Apps</h2>
<p>The easiest way to share your apps is with (<a href="https://shinyapps.io" class="uri">https://shinyapps.io</a>)</p>
<ol style="list-style-type: decimal">
<li>Open <strong><code>Tools &gt; Global Options ...</code></strong></li>
<li>Go to the <strong><code>Publishing</code></strong> tab</li>
<li>Click the <strong><code>Connect</code></strong> button and choose ShinyApps.io</li>
<li>Click on the link to <a href="https://www.shinyapps.io/" target="_blank">go to your account</a></li>
<li>Click the <strong><code>Sign Up</code></strong> button and <strong><code>Sign up with GitHub</code></strong></li>
<li>You should now be in your shinyapps.io dashboard; click on your name in the upper right and choose <strong><code>Tokens</code></strong></li>
<li>Add a token</li>
<li>Click <strong><code>Show</code></strong> next to the token and copy the text to the clipboard
<img src="images/saio_secret.png" style="width:100.0%" /></li>
<li>Go back to RStudio and paste the text in the box and click <strong><code>Connect Account</code></strong></li>
<li>Make sure the box next to "Enable publishing..." is ticked, click <strong><code>Apply</code></strong>, and close the options window</li>
</ol>
<div class="sourceCode" id="cb622"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb622-1"><a href="#cb622-1" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code></pre></div>
<pre><code>## R version 4.3.1 (2023-06-16)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 20.04.6 LTS
## 
## Matrix products: default
## BLAS:   /usr/lib/x86_64-linux-gnu/atlas/libblas.so.3.10.3 
## LAPACK: /usr/lib/x86_64-linux-gnu/atlas/liblapack.so.3.10.3;  LAPACK version 3.9.0
## 
## locale:
##  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       
##  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   
##  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          
## [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   
## 
## time zone: UTC
## tzcode source: system (glibc)
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] knitr_1.43         webexercises_1.1.0 glossary_1.0.0     lubridate_1.9.2   
##  [5] forcats_1.0.0      stringr_1.5.0      dplyr_1.1.2        purrr_1.0.1       
##  [9] readr_2.1.4        tidyr_1.3.0        tibble_3.2.1       ggplot2_3.4.2     
## [13] tidyverse_2.0.0   
## 
## loaded via a namespace (and not attached):
##  [1] sass_0.4.6        utf8_1.2.3        generics_0.1.3    xml2_1.3.5       
##  [5] stringi_1.7.12    hms_1.1.3         digest_0.6.33     magrittr_2.0.3   
##  [9] evaluate_0.21     grid_4.3.1        timechange_0.2.0  bookdown_0.34    
## [13] fastmap_1.1.1     jsonlite_1.8.7    fansi_1.0.4       scales_1.2.1     
## [17] jquerylib_0.1.4   cli_3.6.1         rlang_1.1.1       munsell_0.5.0    
## [21] withr_2.5.0       cachem_1.0.8      yaml_2.3.7        tools_4.3.1      
## [25] tzdb_0.4.0        memoise_2.0.1     colorspace_2.1-0  vctrs_0.6.3      
## [29] R6_2.5.1          lifecycle_1.0.3   fs_1.6.2          pkgconfig_2.0.3  
## [33] pillar_1.9.0      bslib_0.5.0       gtable_0.3.3      glue_1.6.2       
## [37] xfun_0.39         tidyselect_1.2.0  rstudioapi_0.15.0 htmltools_0.5.5  
## [41] rmarkdown_2.23    compiler_4.3.1    downlit_0.4.3</code></pre>
</div>
<div id="github" class="section level2" number="39.2">
<h2><span class="header-section-number">39.2</span> Github</h2>
<p>GitHub is a great place to organise and share your code using version control. You can also use it to host Shiny app code for others to download and run on their own computer. You can share your ShinyApp in the same way you would share any R project.</p>
</div>
<div id="in-an-r-package" class="section level2" number="39.3">
<h2><span class="header-section-number">39.3</span> In an R package</h2>
<p>You can put your app in a custom R package to make it even easier for people to run the app. The usethis package is incredibly helpful for setting up packages. But this is beyond the scope of this class.</p>
</div>
<div id="further-reading-1" class="section level2" number="39.4">
<h2><span class="header-section-number">39.4</span> Further Reading</h2>
<ul>
<li><p><a href="https://shiny.posit.co/blog/posts/bslib-dashboards/" class="uri">https://shiny.posit.co/blog/posts/bslib-dashboards/</a></p></li>
<li><p><a href="https://mastering-shiny.org/action-dynamic.html" class="uri">https://mastering-shiny.org/action-dynamic.html</a></p></li>
<li><p><a href="https://www.jumpingrivers.com/blog/r-shiny-customising-shinydashboard/#" class="uri">https://www.jumpingrivers.com/blog/r-shiny-customising-shinydashboard/#</a>:~:text=The%20main%20way%20of%20including,css%20by%20convention.</p></li>
</ul>
<!--chapter:end:07-shiny.rmd-->
</div>
</div>
<div id="part-literate-programming-and-reproducibility" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) Literate Programming and Reproducibility</h1>
</div>
<div id="rmarkdown" class="section level1" number="40">
<h1><span class="header-section-number">40</span> RMarkdown</h1>
<p><img src="images/rmarkdownoutputformats.png" width="100%" style="display: block; margin: auto;" /></p>
<p>R Markdown is a widely-used tool for creating automated, reproducible, and share-worthy outputs, such as reports. It can generate static or interactive outputs, in Word, pdf, html, Powerpoint slides, and many other formats.</p>
<p>An R Markdown script combines R code and text such that the script actually becomes your output document. You can create an entire formatted document, including narrative text (can be dynamic to change based on your data), tables, figures, bullets/numbers, bibliographies, etc.</p>
<p>Documents produced with Rmarkdown, allow analyses to be included easily - and make the link between raw data, analysis &amp; and a published report <em>completely reproducible</em>.</p>
<p>With Rmarkdown we can make reproducible html, word, pdf, powerpoints or websites and dashboards<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<div id="how-it-works" class="section level2 unnumbered">
<h2 class="unnumbered">How it works</h2>
<p>To create an R Markdown document in RStudio, go to <strong>File &gt; New File &gt; R Markdown</strong>. Choose a title, author, and date, as well as your default output format (HTML, PDF, or Word). These values can be changed later. Click OK, and RStudio will create an R Markdown document with some placeholder content.</p>
<p><img src="images/templatermd.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Delete this content and replace it with your own. As an example, let’s create a report about penguins using data from the <code>palmerpenguins</code> package. I’ve separated the data by year, and we’ll use just the 2007 data. Add the following content to add to your R Markdown document:</p>
<div class="sourceCode" id="cb624"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb624-1"><a href="#cb624-1" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb624-2"><a href="#cb624-2" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;Penguins Report&quot;</span></span>
<span id="cb624-3"><a href="#cb624-3" tabindex="-1"></a><span class="an">author:</span><span class="co"> &quot;Phil&quot;</span></span>
<span id="cb624-4"><a href="#cb624-4" tabindex="-1"></a><span class="an">date:</span><span class="co"> &quot;2024-01-12&quot;</span></span>
<span id="cb624-5"><a href="#cb624-5" tabindex="-1"></a><span class="an">output:</span><span class="co"> word_document</span></span>
<span id="cb624-6"><a href="#cb624-6" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb624-7"><a href="#cb624-7" tabindex="-1"></a>  </span>
<span id="cb624-8"><a href="#cb624-8" tabindex="-1"></a>``{r setup, include = FALSE}</span>
<span id="cb624-9"><a href="#cb624-9" tabindex="-1"></a>knitr::opts_chunk$set(include = TRUE, </span>
<span id="cb624-10"><a href="#cb624-10" tabindex="-1"></a>                      echo = FALSE,</span>
<span id="cb624-11"><a href="#cb624-11" tabindex="-1"></a>                      message = FALSE,</span>
<span id="cb624-12"><a href="#cb624-12" tabindex="-1"></a>                      warning = FALSE)</span>
<span id="cb624-13"><a href="#cb624-13" tabindex="-1"></a>``</span>
<span id="cb624-14"><a href="#cb624-14" tabindex="-1"></a></span>
<span id="cb624-15"><a href="#cb624-15" tabindex="-1"></a>``{r}</span>
<span id="cb624-16"><a href="#cb624-16" tabindex="-1"></a>library(tidyverse)</span>
<span id="cb624-17"><a href="#cb624-17" tabindex="-1"></a>``</span>
<span id="cb624-18"><a href="#cb624-18" tabindex="-1"></a></span>
<span id="cb624-19"><a href="#cb624-19" tabindex="-1"></a>``{r}</span>
<span id="cb624-20"><a href="#cb624-20" tabindex="-1"></a>penguins_raw &lt;- read_csv(&quot;https://raw.githubusercontent.com/UEABIO/data-sci-v1/main/book/files/penguins_raw.csv&quot;)</span>
<span id="cb624-21"><a href="#cb624-21" tabindex="-1"></a>``</span>
<span id="cb624-22"><a href="#cb624-22" tabindex="-1"></a></span>
<span id="cb624-23"><a href="#cb624-23" tabindex="-1"></a><span class="fu"># Introduction</span></span>
<span id="cb624-24"><a href="#cb624-24" tabindex="-1"></a></span>
<span id="cb624-25"><a href="#cb624-25" tabindex="-1"></a>We are writing a report about the **Palmer Penguins**. These penguins are *really* amazing. There are three species:</span>
<span id="cb624-26"><a href="#cb624-26" tabindex="-1"></a></span>
<span id="cb624-27"><a href="#cb624-27" tabindex="-1"></a><span class="ss">- </span>Adelie</span>
<span id="cb624-28"><a href="#cb624-28" tabindex="-1"></a><span class="ss">- </span>Gentoo</span>
<span id="cb624-29"><a href="#cb624-29" tabindex="-1"></a><span class="ss">- </span>Chinstrap</span>
<span id="cb624-30"><a href="#cb624-30" tabindex="-1"></a></span>
<span id="cb624-31"><a href="#cb624-31" tabindex="-1"></a><span class="fu">## Bill Length</span></span>
<span id="cb624-32"><a href="#cb624-32" tabindex="-1"></a></span>
<span id="cb624-33"><a href="#cb624-33" tabindex="-1"></a>We can make a histogram to see the distribution of bill lengths.</span>
<span id="cb624-34"><a href="#cb624-34" tabindex="-1"></a></span>
<span id="cb624-35"><a href="#cb624-35" tabindex="-1"></a>``{r}</span>
<span id="cb624-36"><a href="#cb624-36" tabindex="-1"></a>penguins_raw |&gt; </span>
<span id="cb624-37"><a href="#cb624-37" tabindex="-1"></a>  ggplot(aes(x = bill_length_mm)) +</span>
<span id="cb624-38"><a href="#cb624-38" tabindex="-1"></a>  geom_histogram() +</span>
<span id="cb624-39"><a href="#cb624-39" tabindex="-1"></a>  theme_minimal()</span>
<span id="cb624-40"><a href="#cb624-40" tabindex="-1"></a>``</span>
<span id="cb624-41"><a href="#cb624-41" tabindex="-1"></a></span>
<span id="cb624-42"><a href="#cb624-42" tabindex="-1"></a>``{r}</span>
<span id="cb624-43"><a href="#cb624-43" tabindex="-1"></a>average_bill_length &lt;- penguins_raw |&gt; </span>
<span id="cb624-44"><a href="#cb624-44" tabindex="-1"></a>  summarize(avg_bill_length = mean(bill_length_mm,</span>
<span id="cb624-45"><a href="#cb624-45" tabindex="-1"></a>                                   na.rm = TRUE)) |&gt; </span>
<span id="cb624-46"><a href="#cb624-46" tabindex="-1"></a>  pull(avg_bill_length)</span>
<span id="cb624-47"><a href="#cb624-47" tabindex="-1"></a>``</span>
<span id="cb624-48"><a href="#cb624-48" tabindex="-1"></a></span>
<span id="cb624-49"><a href="#cb624-49" tabindex="-1"></a>The chart shows the distribution of bill lengths. The average bill length is <span class="in">`r average_bill_length`</span> millimeters.</span></code></pre></div>
<p>This document contains several sections, each of which we will discuss below. First, though, let’s skip to the finish line by doing what’s called <em>knitting</em> our document. The <strong>Knit</strong> button at the top of RStudio converts the R Markdown document into whatever format we selected.</p>
<p><strong>To make your Rmd publish - hit the knit button at the top of the doc</strong></p>
<p><img src="images/knit.png" width="80%" style="display: block; margin: auto;" /></p>
<p>We’ve set the output format to be HTML (see the output_format: html). Some features are not immediately visible in R Markdown that do appear in the rendered document, including the histogram. This is because the R Markdown document doesn’t directly include this plot. Rather, it includes the code needed to produce the plot when knitted.</p>
<p>It may seem convoluted to constantly knit R Markdown documents to Word, but this workflow allows us to update our reports at any point with new code or data. This ability is known as reproducibility, and it is central to the value of R Markdown.</p>
</div>
<div id="background-to-rmarkdown" class="section level2 unnumbered">
<h2 class="unnumbered">Background to Rmarkdown</h2>
<ul>
<li><p>Markdown is a “language” that allows you to write a document using plain text, that can be converted to html and other formats. It is not specific to R. Files written in Markdown have a ‘.md’ extension.</p></li>
<li><p>R Markdown: is a variation on markdown that is specific to R - it allows you to write a document using markdown to produce text and to embed R code and display their outputs. R Markdown files have ‘.Rmd’ extension.</p></li>
<li><p>rmarkdown - the package: This is used by R to render the .Rmd file into the desired output. It’s focus is converting the markdown (text) syntax, so we also need…</p></li>
<li><p>knitr: This R package <span class="citation">Xie (<a href="#ref-R-knitr">2023</a>)</span> will read the code chunks, execute it, and ‘knit’ it back into the document. This is how tables and graphs are included alongside the text.</p></li>
<li><p>Pandoc: Finally, pandoc actually convert the output into word/pdf/powerpoint etc. It is a software separate from R but is installed automatically with RStudio.</p></li>
</ul>
<p>Most of this process happens in the background (you do not need to know all these steps!) and it involves feeding the <code>.Rmd</code> file to <code>knitr</code>, which executes the R code chunks and creates a new <code>.md</code> (Markdown) file which includes the R code <strong>and its rendered output</strong>.</p>
<p>The .md file is then processed by pandoc to create the finished product: a Microsoft Word document, HTML file, Powerpoint document, pdf, etc.</p>
<p><img src="images/0_rmd.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="rmarkdown-parts" class="section level2 unnumbered">
<h2 class="unnumbered">Rmarkdown parts</h2>
<p>As you can see, there are three basic components to any Rmd file:</p>
<ul>
<li><p>YAML</p></li>
<li><p>Markdown text</p></li>
<li><p>R code chunks.</p></li>
</ul>
<p><img src="images/rmarkdown_translation.png" width="100%" style="display: block; margin: auto;" /></p>
<div id="yaml-metadata" class="section level3 unnumbered">
<h3 class="unnumbered">YAML Metadata</h3>
<p>The YAML section is the very beginning of an R Markdown document. The name YAML comes from the recursive acronym YAML ain’t markup language, whose meaning isn’t important for our purposes. Three dashes indicate its beginning and end, and the text inside of it contains metadata about the R Markdown document. Here is my YAML:</p>
<div class="sourceCode" id="cb625"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb625-1"><a href="#cb625-1" tabindex="-1"></a></span>
<span id="cb625-2"><a href="#cb625-2" tabindex="-1"></a>---</span>
<span id="cb625-3"><a href="#cb625-3" tabindex="-1"></a>title: &quot;Penguins Report&quot;</span>
<span id="cb625-4"><a href="#cb625-4" tabindex="-1"></a>author: &quot;Philip Leftwich&quot;</span>
<span id="cb625-5"><a href="#cb625-5" tabindex="-1"></a>date: &quot;2024-01-12&quot;</span>
<span id="cb625-6"><a href="#cb625-6" tabindex="-1"></a>output: html_document</span>
<span id="cb625-7"><a href="#cb625-7" tabindex="-1"></a>---</span></code></pre></div>
<p>As you can see, it provides the title, author, date, and output format. All elements of the YAML are given in <code>key: value</code> syntax, where each key is a label for a piece of metadata (for example, the title) followed by a value in quotes.</p>
<p>In the example above, because we clicked that our default output would be an html file, we can see that the YAML says output: <code>html_document</code>. However we can also change this to say <code>powerpoint_presentation</code> or <code>word_document</code> or even <code>pdf_document</code>.</p>
<div class="try">
<p>
Can you edit the YAML in the Rmarkdown file in the markdown folder to
have your name as author, today’s date and the title of the file should
be called “Penguins of the Palmer Archipelago, Antarctica”.
</p>
</div>
</div>
<div id="code-chunks" class="section level3 unnumbered">
<h3 class="unnumbered">Code chunks</h3>
<p>R Markdown documents have a different structure from the R script files you might be familiar with (those with the .R extension). R script files treat all content as code unless you comment out a line by putting a pound sign (#) in front of it. In the following code, the first line is a comment while the second line is code.</p>
<div class="sourceCode" id="cb626"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb626-1"><a href="#cb626-1" tabindex="-1"></a></span>
<span id="cb626-2"><a href="#cb626-2" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb626-3"><a href="#cb626-3" tabindex="-1"></a><span class="in"># Import our data</span></span>
<span id="cb626-4"><a href="#cb626-4" tabindex="-1"></a><span class="in">data &lt;- read_csv(&quot;data.csv&quot;)</span></span>
<span id="cb626-5"><a href="#cb626-5" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>In R Markdown, the situation is reversed. Everything after the YAML is treated as text unless we specify otherwise by creating what are known as code chunks. Each chunk is opened with a line that starts with three back-ticks, and curly brackets that contain parameters for the chunk { }. The chunk ends with three more back-ticks.</p>
<div class="sourceCode" id="cb627"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb627-1"><a href="#cb627-1" tabindex="-1"></a></span>
<span id="cb627-2"><a href="#cb627-2" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb627-3"><a href="#cb627-3" tabindex="-1"></a><span class="in">library(tidyverse)</span></span>
<span id="cb627-4"><a href="#cb627-4" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>R Markdown treats anything in the code chunk as R code when we knit. For example, this code chunk will produce a histogram in the final Word document.</p>
<div class="sourceCode" id="cb628"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb628-1"><a href="#cb628-1" tabindex="-1"></a></span>
<span id="cb628-2"><a href="#cb628-2" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb628-3"><a href="#cb628-3" tabindex="-1"></a></span>
<span id="cb628-4"><a href="#cb628-4" tabindex="-1"></a><span class="in">penguins_raw |&gt;  </span></span>
<span id="cb628-5"><a href="#cb628-5" tabindex="-1"></a><span class="in">  ggplot(aes(x = bill_length_mm)) +</span></span>
<span id="cb628-6"><a href="#cb628-6" tabindex="-1"></a><span class="in">  geom_histogram() +</span></span>
<span id="cb628-7"><a href="#cb628-7" tabindex="-1"></a><span class="in">  theme_minimal()</span></span>
<span id="cb628-8"><a href="#cb628-8" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<div class="info">
<p>
Some notes about the contents of the curly brackets { }:
</p>
<p>
They start with ‘r’ to indicate that the language name within this
chunk is <strong>R</strong>. It is possible to include other programming
language chunks here such as <strong>SQL</strong>,
<strong>Python</strong> or <strong>Bash</strong>.
</p>
<p>
After the r you can optionally write a chunk “name” – these are not
necessary but can help you organise your work. Note that if you name
your chunks, you should ALWAYS use unique names or else R will
<em>complain</em> when you try to render.
</p>
<p>
After the language name and optional chunk name put a comma, then you
can include other options too, written as <code>tag=value</code>, such
as:
</p>
<ul>
<li>
<p>
eval = FALSE to not run the R code
</p>
</li>
<li>
<p>
echo = FALSE to not print the chunk’s R source code in the output
document
</p>
</li>
<li>
<p>
warning = FALSE to not print warnings produced by the R
code
</p>
</li>
<li>
<p>
message = FALSE to not print any messages produced by the R
code
</p>
</li>
<li>
<p>
include = either TRUE/FALSE whether to include chunk outputs
(e.g. plots) in the document
</p>
</li>
<li>
<p>
out.width = and out.height = - size of ouput e.g. out.width =
“75%”
</p>
</li>
<li>
<p>
fig.align = “center” adjust how a figure is aligned across the
page
</p>
</li>
<li>
<p>
fig.show=‘hold’ if your chunk prints multiple figures and you
want them printed next to each other (pair with out.width = c(“33%”,
“67%”).
</p>
</li>
</ul>
</div>
<p>A special code chunk at the top of each R Markdown document, known as the setup code chunk, gives instructions for what should happen when knitting a document.</p>
<p>In cases where you’re using R Markdown to generate a report for a non-R user, you likely want to hide the code, messages, and warnings but show the output (which would include any visualizations you generate). To do this, create a setup code chunk that looks like this:</p>
<div class="sourceCode" id="cb629"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb629-1"><a href="#cb629-1" tabindex="-1"></a></span>
<span id="cb629-2"><a href="#cb629-2" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb629-3"><a href="#cb629-3" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(include = TRUE, </span></span>
<span id="cb629-4"><a href="#cb629-4" tabindex="-1"></a><span class="in">                      echo = FALSE,</span></span>
<span id="cb629-5"><a href="#cb629-5" tabindex="-1"></a><span class="in">                      message = FALSE,</span></span>
<span id="cb629-6"><a href="#cb629-6" tabindex="-1"></a><span class="in">                      warning = FALSE)</span></span>
<span id="cb629-7"><a href="#cb629-7" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>The <code>include = FALSE</code> option on the first line applies to the setup code chunk itself. It tells R Markdown to not include the output of the setup code chunk when knitting. The options within <code>knitr::opts_chunk$set(</code>) apply to all future code chunks. <strong>However, you can also override these global code chunk options on individual chunks</strong>. If I wanted my document to show both the plot itself and the code used to make it, I could set <code>echo = TRUE</code> for that code chunk only:</p>
<div class="sourceCode" id="cb630"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb630-1"><a href="#cb630-1" tabindex="-1"></a></span>
<span id="cb630-2"><a href="#cb630-2" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb630-3"><a href="#cb630-3" tabindex="-1"></a><span class="in">penguins %&gt;% </span></span>
<span id="cb630-4"><a href="#cb630-4" tabindex="-1"></a><span class="in">  ggplot(aes(x = bill_length_mm)) +</span></span>
<span id="cb630-5"><a href="#cb630-5" tabindex="-1"></a><span class="in">  geom_histogram() +</span></span>
<span id="cb630-6"><a href="#cb630-6" tabindex="-1"></a><span class="in">  theme_minimal()</span></span>
<span id="cb630-7"><a href="#cb630-7" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
</div>
<div id="text-2" class="section level3 unnumbered">
<h3 class="unnumbered">Text</h3>
<p>This is the narrative of your document, including the titles and headings. It is written in the “markdown” language, which is used across many different software.</p>
<p>Below are the core ways to write this text. See more extensive documentation available on R Markdown “cheatsheets” at the RStudio website<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a>.</p>
<div id="new-lines" class="section level4 unnumbered">
<h4 class="unnumbered">New lines</h4>
<p>Uniquely in R Markdown, to initiate a new line, enter *two spaces** at the end of the previous line and then Enter/Return.</p>
</div>
<div id="text-emphasis" class="section level4 unnumbered">
<h4 class="unnumbered">Text emphasis</h4>
<p>Surround your normal text with these characters to change how it appears in the output.</p>
<p>Underscores (_text_) or single asterisk (*text*) to <em>italicise</em></p>
<p>Double asterisks (**text**) for <strong>bold</strong> text</p>
<p>Back-ticks (` text `) to display text as <code>code</code></p>
<p>The actual appearance of the font can be set by using specific templates (specified in the YAML metadata).</p>
</div>
<div id="titles-and-headings" class="section level4 unnumbered">
<h4 class="unnumbered">Titles and headings</h4>
<p>A hash symbol in a text portion of a R Markdown script creates a heading. This is different than in a chunk of R code in the script, in which a hash symbol is a mechanism to comment/annotate/de-activate, as in a normal R script.</p>
<p>Different heading levels are established with different numbers of hash symbols at the start of a new line. One hash symbol is a title or primary heading. Two hash symbols are a second-level heading. Third- and fourth-level headings can be made with successively more hash symbols.</p>
<pre><code>
# First-level heading / Title

## Second level heading  

### Third-level heading
</code></pre>
</div>
<div id="bullets-and-numbering" class="section level4 unnumbered">
<h4 class="unnumbered">Bullets and numbering</h4>
<p>Use asterisks (*) to created a bullets list. Finish the previous sentence, enter two spaces, Enter/Return twice, and then start your bullets. Include a space between the asterisk and your bullet text. After each bullet enter two spaces and then Enter/Return. Sub-bullets work the same way but are indented. Numbers work the same way but instead of an asterisk, write 1), 2), etc. Below is how your R Markdown script text might look.</p>
<p>Here are my bullets (there are two spaces after this colon):</p>
<pre><code>* Bullet 1 (followed by two spaces and Enter/Return)  
* Bullet 2 (followed by two spaces and Enter/Return)  
  * Sub-bullet 1 (followed by two spaces and Enter/Return)  
  * Sub-bullet 2 (followed by two spaces and Enter/Return)  </code></pre>
</div>
</div>
<div id="in-text-code" class="section level3 unnumbered">
<h3 class="unnumbered">In-text code</h3>
<p>You can also include minimal R code within back-ticks. Within the back-ticks, begin the code with “r” and a space, so RStudio knows to evaluate the code as R code. See the example below.</p>
<p>This book was printed on <code>`r Sys.Date()`</code></p>
<p>When typed in-line within a section of what would otherwise be Markdown text, it knows to produce an r output instead:</p>
<p>This book was printed on 2023-11-09</p>
</div>
<div id="running-code" class="section level3 unnumbered">
<h3 class="unnumbered">Running code</h3>
<p>You can run the code in an R Markdown document in two ways. The first way is by knitting the entire document. The second way is to run code chunks manually (also known as interactively) by hitting the little green play button at the top-right of a code chunk. The down arrow next to the green play button will run all code until that point.</p>
<p><img src="images/green_button.png" width="100%" style="display: block; margin: auto;" /></p>
<p>The one downside to running code interactively is that you can sometimes make mistakes that cause your R Markdown document to fail to knit. That is because, in order to knit, an R Markdown document must contain all the code it uses. If you are working interactively and, say, load data from a separate file, you will be unable to knit your document. When working in R Markdown, always keep all code within a single document.</p>
<p>The code must also always appear in the right order.</p>
</div>
</div>
<div id="useful-tips" class="section level2 unnumbered">
<h2 class="unnumbered">Useful tips</h2>
<div class="info">
<p>
The working directory for .rmd files is a little different to working
with scripts.
</p>
<p>
With a .Rmd file, the <strong>working directory is wherever the Rmd
file itself is saved</strong>.
</p>
<p>
For example if you have your .Rmd file in a subfolder
~/markdownfiles/markdown.Rmd the code for read_csv(“data/data.csv”)
within the markdown will look for a <code>.csv</code> file in a
subfolder called data <em>inside</em> the ‘markdown’ folder and not the
root project folder where the <code>.RProj</code> file lives.
</p>
<p>
So we have two options when using .Rmd files
</p>
<ol style="list-style-type: decimal">
<li>
<p>
Don’t put the .Rmd file in a subfolder and make sure it lives in
the same directory as your .RProj file - that way relative filepaths are
the same between R scripts and Rmarkdown files
</p>
</li>
<li>
<p>
Use the <code>here</code> package to describe file locations -
more later
</p>
</li>
</ol>
</div>
</div>
<div id="exercises-setting-code-chunks" class="section level2 unnumbered">
<h2 class="unnumbered">Exercises: Setting code chunks</h2>
<p><strong>Question 1.</strong> The global option for this document is set to show the R code used to render chunks <select class='webex-select'><option value='blank'></option><option value=''>FALSE</option><option value='answer'>TRUE</option></select></p>
<div class="webex-solution">
<button>
Explain This Answer
</button>
<p>knitr::opts_chunk$set(echo = TRUE)</p>
</div>
<p><strong>Question 2.</strong> Options set in individual code chunks override the global options <select class='webex-select'><option value='blank'></option><option value='answer'>TRUE</option><option value=''>FALSE</option></select></p>
<div class="webex-solution">
<button>
Explain This Answer
</button>
<p>In the second chunk we see echo = FALSE and this has prevented the code from being printed, we only see the rendered output</p>
</div>
<p><br>
<strong>Question 3.</strong> If we wanted to see the R code, but <strong>not</strong> its output we need to select what combo of code chunk options? <select class='webex-select'><option value='blank'></option><option value=''>echo = TRUE, eval = TRUE</option><option value='answer'>echo = TRUE, eval = FALSE</option><option value=''>echo = FALSE, eval = FALSE</option><option value=''>echo = FALSE, eval = TRUE</option></select></p>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Generate a self-contained report from data
</div>
</div>
<p>For a relatively simple report, you may elect to organize your R Markdown script such that it is “self-contained” and does not involve any external scripts.</p>
<p><strong>Set up your Rmd file to 'read' the penguins data file.</strong></p>
<p>Everything you need to run the R markdown is imported or created within the Rmd file, including all the code chunks and package loading. This “self-contained” approach is appropriate when you do not need to do much data processing (e.g. it brings in a clean or semi-clean data file) and the rendering of the R Markdown will not take too long.</p>
<p>In this scenario, one logical organization of the R Markdown script might be:</p>
<ul>
<li><p>Set global knitr options</p></li>
<li><p>Load packages</p></li>
<li><p>Import data</p></li>
<li><p>Process data</p></li>
<li><p>Produce outputs (tables, plots, etc.)</p></li>
<li><p>Save outputs, <em>if applicable</em> (.csv, .png, etc.)</p></li>
</ul>
<div id="heuristic-file-paths-with-here" class="section level3 unnumbered">
<h3 class="unnumbered">Heuristic file paths with <code>here()</code></h3>
<p>The package <code>here</code> <span class="citation">Müller (<a href="#ref-R-here">2020</a>)</span> and its function <code>here()</code> (<code>here::here()</code>), make it easy to tell R where to find and to save your files - in essence, it builds file paths. It becomes especially useful for dealing with the alternate filepaths generated by .Rmd files, but can be used for exporting/importing any scripts, functions or data.</p>
<p>This is how <code>here()</code> works within an R project:</p>
<ul>
<li><p>When the <code>here</code> package is first loaded within the R project, it places a small file called “.here” in the root folder of your R project as a “benchmark” or “anchor”</p></li>
<li><p>In your scripts, to reference a file in the R project’s sub-folders, you use the function <code>here()</code> to build the file path in relation to that anchor</p></li>
<li><p>To build the file path, write the names of folders beyond the root, within quotes, separated by commas, finally ending with the file name and file extension as shown below</p></li>
<li><p><code>here()</code> file paths can be used for both importing and exporting</p></li>
</ul>
<p>So when you use <code>here()</code> wrapped inside other functions for importing/exporting (like <code>read_csv()</code> or <code>ggsave()</code>) if you include <code>here()</code> you can still use the RProject location as the root directory when 'knitting' Rmarkdown files, even if your markdown is tidied away into a <strong>separate sub-folder</strong>.</p>
<p>This means your previous relative filepaths should be replaced with:</p>
<div class="sourceCode" id="cb633"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb633-1"><a href="#cb633-1" tabindex="-1"></a><span class="in">```{r, include=FALSE}</span></span>
<span id="cb633-2"><a href="#cb633-2" tabindex="-1"></a><span class="in"># GLOBAL KNITR OPTIONS ----</span></span>
<span id="cb633-3"><a href="#cb633-3" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(echo = TRUE)</span></span>
<span id="cb633-4"><a href="#cb633-4" tabindex="-1"></a><span class="in"># ____________________----</span></span>
<span id="cb633-5"><a href="#cb633-5" tabindex="-1"></a></span>
<span id="cb633-6"><a href="#cb633-6" tabindex="-1"></a><span class="in"># PACKAGES ----</span></span>
<span id="cb633-7"><a href="#cb633-7" tabindex="-1"></a><span class="in">library(tidyverse)</span></span>
<span id="cb633-8"><a href="#cb633-8" tabindex="-1"></a><span class="in">library(here)</span></span>
<span id="cb633-9"><a href="#cb633-9" tabindex="-1"></a></span>
<span id="cb633-10"><a href="#cb633-10" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<div class="sourceCode" id="cb634"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb634-1"><a href="#cb634-1" tabindex="-1"></a><span class="in">```{r, include=FALSE}</span></span>
<span id="cb634-2"><a href="#cb634-2" tabindex="-1"></a><span class="in"># READ DATA ----</span></span>
<span id="cb634-3"><a href="#cb634-3" tabindex="-1"></a></span>
<span id="cb634-4"><a href="#cb634-4" tabindex="-1"></a><span class="in">penguins &lt;- read_csv(here(&quot;data&quot;, &quot;penguins_raw.csv&quot;))</span></span>
<span id="cb634-5"><a href="#cb634-5" tabindex="-1"></a></span>
<span id="cb634-6"><a href="#cb634-6" tabindex="-1"></a><span class="in">head(penguins)</span></span>
<span id="cb634-7"><a href="#cb634-7" tabindex="-1"></a></span>
<span id="cb634-8"><a href="#cb634-8" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<div class="try">
<p>
Try replacing your previous code with the examples above then
re-knitting your .Rmd file.
</p>
</div>
<div class="warning">
<p>
You might want start using the <code>here()</code> from now on to
read in and export data from scripts. Make sure you are consistent in
whether you use <code>here()</code> heuristic file paths or relative
file paths across <strong>all .R and .Rmd files in a project</strong> -
otherwise you might encounter errors.
</p>
</div>
</div>
</div>
<div id="activity-can-you-change-the-global-options-of-your-rmd-file-so-that-it-doesnt-display-any-code-warnings-or-messages" class="section level2 unnumbered">
<h2 class="unnumbered">Activity: Can you change the global options of your Rmd file so that it doesn't display any code, warnings or messages?</h2>
<p>Once you have made your edits to the <a href="#code-chunks">chunk options</a> try hitting 'knit' again.</p>
</div>
<div id="ggplot" class="section level2 unnumbered">
<h2 class="unnumbered">ggplot</h2>
<div id="size-options-for-figures" class="section level3 unnumbered">
<h3 class="unnumbered">Size options for figures</h3>
<ul>
<li><p><code>fig.width</code> and <code>fig.height</code> enable to set width and height of R produced figures.
The default value is set to <strong>7 (inches)</strong>. When I play with these options, I prefer using only one of them (<code>fig.width</code>).</p></li>
<li><p><code>fig.asp</code> sets the <em>height-to-width</em> ratio of the figure. It’s easier in my mind to play with this ratio than to give a width and a height separately. The default value of fig.asp is NULL but I often set it to <code>(0.8)</code>, which often corresponds to the expected result.</p></li>
</ul>
<p>Size options of figures produced by R have consequences on relative sizes of elements in this figures. For a <code>ggplot2</code> figure, these elements will remain to the size defined in the used theme, whatever the chosen size of the figure. Therefore a huge size can lead to a very small text and vice versa.</p>
<div class="info">
<p>
The base font size is 11 pts by default. You can change it with the
<code>base_size</code> argument in the theme you’re using.
</p>
</div>
<div class="sourceCode" id="cb635"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb635-1"><a href="#cb635-1" tabindex="-1"></a><span class="co"># snake_case names need to be made</span></span>
<span id="cb635-2"><a href="#cb635-2" tabindex="-1"></a></span>
<span id="cb635-3"><a href="#cb635-3" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(penguins)</span></code></pre></div>
<div class="sourceCode" id="cb636"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb636-1"><a href="#cb636-1" tabindex="-1"></a>penguin_colours <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;darkolivegreen4&quot;</span>, <span class="st">&quot;darkorchid3&quot;</span>, <span class="st">&quot;goldenrod1&quot;</span>)</span>
<span id="cb636-2"><a href="#cb636-2" tabindex="-1"></a></span>
<span id="cb636-3"><a href="#cb636-3" tabindex="-1"></a>plot <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb636-4"><a href="#cb636-4" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>flipper_length_mm, </span>
<span id="cb636-5"><a href="#cb636-5" tabindex="-1"></a>             <span class="at">y =</span> body_mass_g))<span class="sc">+</span></span>
<span id="cb636-6"><a href="#cb636-6" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour=</span>species))<span class="sc">+</span></span>
<span id="cb636-7"><a href="#cb636-7" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values=</span>penguin_colours)<span class="sc">+</span></span>
<span id="cb636-8"><a href="#cb636-8" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">11</span>)</span></code></pre></div>
<div class="sourceCode" id="cb637"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb637-1"><a href="#cb637-1" tabindex="-1"></a><span class="in">```{r fig.asp = 0.8, fig.width = 3}</span></span>
<span id="cb637-2"><a href="#cb637-2" tabindex="-1"></a><span class="in">plot</span></span>
<span id="cb637-3"><a href="#cb637-3" tabindex="-1"></a><span class="in"># figure elements are too big</span></span>
<span id="cb637-4"><a href="#cb637-4" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p><img src="08-reproducible-reports_files/figure-html/unnamed-chunk-22-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb638"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb638-1"><a href="#cb638-1" tabindex="-1"></a><span class="in">```{r fig.asp = 0.8, fig.width = 10}</span></span>
<span id="cb638-2"><a href="#cb638-2" tabindex="-1"></a><span class="in">plot</span></span>
<span id="cb638-3"><a href="#cb638-3" tabindex="-1"></a><span class="in"># figure elements are too small</span></span>
<span id="cb638-4"><a href="#cb638-4" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p><img src="08-reproducible-reports_files/figure-html/unnamed-chunk-23-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>To find the result you like, you’ll need to combine sizes set in your theme and set in the chunk options. With my customised theme, the default size (<code>7</code>) looks good to me.</p>
<div class="sourceCode" id="cb639"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb639-1"><a href="#cb639-1" tabindex="-1"></a><span class="in">```{r fig.asp = 0.8, fig.width = 7}</span></span>
<span id="cb639-2"><a href="#cb639-2" tabindex="-1"></a><span class="in">plot</span></span>
<span id="cb639-3"><a href="#cb639-3" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p><img src="08-reproducible-reports_files/figure-html/unnamed-chunk-24-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>When texts axis are longer or when figures is overloaded, you can choose bigger size (8 or 9) to relatively reduce the figure elements. it’s worth noting that for the text sizes, you can also modify the base size in your theme to obtain similar figures.</p>
<div class="sourceCode" id="cb640"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb640-1"><a href="#cb640-1" tabindex="-1"></a><span class="in">```{r fig.asp = 0.8, fig.width = 7}</span></span>
<span id="cb640-2"><a href="#cb640-2" tabindex="-1"></a><span class="in">plot + theme(base_size = 14)</span></span>
<span id="cb640-3"><a href="#cb640-3" tabindex="-1"></a><span class="in"># figure width stays the same, but modify the text size in ggplot</span></span>
<span id="cb640-4"><a href="#cb640-4" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p><img src="08-reproducible-reports_files/figure-html/unnamed-chunk-25-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="size-of-final-figure-in-document" class="section level3 unnumbered">
<h3 class="unnumbered">Size of final figure in document</h3>
<p>With the previous examples, you could see the relative size of the elements within th figures was changed - but the area occupied by the figures remained the same. In order to change this I need <code>out.width</code> or <code>out.height</code></p>
<p>Figures made with R in a R Markdown document are exported (by default in png format) and then inserted into the final rendered document. Options <code>out.width</code> and <code>out.height</code> enable us to choose the size of the figure in the final document.</p>
<p>It is rare I need to re-scale height-to-width ratio after the figures were produced with R and this ratio is kept if you modify only one option therefore I only use <code>out.width</code>. i like to use percentage to define the size of output figures. For example hre with a size set to 50%</p>
<div class="sourceCode" id="cb641"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb641-1"><a href="#cb641-1" tabindex="-1"></a><span class="in">```{r fig.asp = 0.8, fig.width = 7, out.width = &quot;50%&quot;}</span></span>
<span id="cb641-2"><a href="#cb641-2" tabindex="-1"></a><span class="in">plot </span></span>
<span id="cb641-3"><a href="#cb641-3" tabindex="-1"></a><span class="in"># The final rendered size of the image changes according to out.width</span></span>
<span id="cb641-4"><a href="#cb641-4" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p><img src="08-reproducible-reports_files/figure-html/unnamed-chunk-26-1.png" width="50%" style="display: block; margin: auto;" /></p>
</div>
<div id="changing-default-values-of-chunk-options" class="section level3 unnumbered">
<h3 class="unnumbered">Changing default values of chunk options</h3>
<p>You can also change default values of chunk options by writing this at the beginning of your R Markdown document.</p>
<div class="sourceCode" id="cb642"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb642-1"><a href="#cb642-1" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb642-2"><a href="#cb642-2" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(</span></span>
<span id="cb642-3"><a href="#cb642-3" tabindex="-1"></a><span class="in"> fig.width = 6,</span></span>
<span id="cb642-4"><a href="#cb642-4" tabindex="-1"></a><span class="in"> fig.asp = 0.8,</span></span>
<span id="cb642-5"><a href="#cb642-5" tabindex="-1"></a><span class="in"> out.width = &quot;80%&quot;</span></span>
<span id="cb642-6"><a href="#cb642-6" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb642-7"><a href="#cb642-7" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>These values will be applied for all chunks unless you specify other value in a chunk locally. You can set values often used (which differ from the default one) and avoid repeating them for each chunk.</p>
</div>
</div>
<div id="static-images" class="section level2 unnumbered">
<h2 class="unnumbered">Static images</h2>
<p>You can include images in your R Markdown:</p>
<div class="sourceCode" id="cb643"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb643-1"><a href="#cb643-1" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb643-2"><a href="#cb643-2" tabindex="-1"></a><span class="in">knitr::include_graphics(&quot;path/to/image.png&quot;)</span></span>
<span id="cb643-3"><a href="#cb643-3" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
</div>
<div id="tables" class="section level2 unnumbered">
<h2 class="unnumbered">Tables</h2>
<div id="markdown-tables" class="section level3 unnumbered">
<h3 class="unnumbered">Markdown tables</h3>
<pre><code>| Syntax      | Description |
| ----------- | ----------- |
| Header      | Title       |
| Paragraph   | Text        |
</code></pre>
<p>Which will render as this</p>
<table>
<thead>
<tr class="header">
<th>Syntax</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Header</td>
<td>Title</td>
</tr>
<tr class="even">
<td>Paragraph</td>
<td>Text</td>
</tr>
</tbody>
</table>
</div>
<div id="gt" class="section level3 unnumbered">
<h3 class="unnumbered">gt()</h3>
<p>The <code>gt</code> <span class="citation">Iannone et al. (<a href="#ref-R-gt">2023</a>)</span> package is all about making it simple to produce nice-looking display tables. <a href="https://gt.rstudio.com/index.html">It has a lot of customisation options.</a></p>
<div class="sourceCode" id="cb645"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb645-1"><a href="#cb645-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span>  </span>
<span id="cb645-2"><a href="#cb645-2" tabindex="-1"></a>    <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span>  </span>
<span id="cb645-3"><a href="#cb645-3" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span><span class="ot">=</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> T),</span>
<span id="cb645-4"><a href="#cb645-4" tabindex="-1"></a>              <span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span><span class="ot">=</span> <span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span>  </span>
<span id="cb645-5"><a href="#cb645-5" tabindex="-1"></a>  gt<span class="sc">::</span><span class="fu">gt</span>()</span></code></pre></div>
<div id="lyyjsjsoxx" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#lyyjsjsoxx table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#lyyjsjsoxx thead, #lyyjsjsoxx tbody, #lyyjsjsoxx tfoot, #lyyjsjsoxx tr, #lyyjsjsoxx td, #lyyjsjsoxx th {
  border-style: none;
}

#lyyjsjsoxx p {
  margin: 0;
  padding: 0;
}

#lyyjsjsoxx .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#lyyjsjsoxx .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#lyyjsjsoxx .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#lyyjsjsoxx .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#lyyjsjsoxx .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lyyjsjsoxx .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lyyjsjsoxx .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lyyjsjsoxx .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#lyyjsjsoxx .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#lyyjsjsoxx .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#lyyjsjsoxx .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#lyyjsjsoxx .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#lyyjsjsoxx .gt_spanner_row {
  border-bottom-style: hidden;
}

#lyyjsjsoxx .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#lyyjsjsoxx .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#lyyjsjsoxx .gt_from_md > :first-child {
  margin-top: 0;
}

#lyyjsjsoxx .gt_from_md > :last-child {
  margin-bottom: 0;
}

#lyyjsjsoxx .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#lyyjsjsoxx .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#lyyjsjsoxx .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#lyyjsjsoxx .gt_row_group_first td {
  border-top-width: 2px;
}

#lyyjsjsoxx .gt_row_group_first th {
  border-top-width: 2px;
}

#lyyjsjsoxx .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lyyjsjsoxx .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#lyyjsjsoxx .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#lyyjsjsoxx .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lyyjsjsoxx .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lyyjsjsoxx .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#lyyjsjsoxx .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#lyyjsjsoxx .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#lyyjsjsoxx .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lyyjsjsoxx .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lyyjsjsoxx .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lyyjsjsoxx .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lyyjsjsoxx .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lyyjsjsoxx .gt_left {
  text-align: left;
}

#lyyjsjsoxx .gt_center {
  text-align: center;
}

#lyyjsjsoxx .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#lyyjsjsoxx .gt_font_normal {
  font-weight: normal;
}

#lyyjsjsoxx .gt_font_bold {
  font-weight: bold;
}

#lyyjsjsoxx .gt_font_italic {
  font-style: italic;
}

#lyyjsjsoxx .gt_super {
  font-size: 65%;
}

#lyyjsjsoxx .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#lyyjsjsoxx .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#lyyjsjsoxx .gt_indent_1 {
  text-indent: 5px;
}

#lyyjsjsoxx .gt_indent_2 {
  text-indent: 10px;
}

#lyyjsjsoxx .gt_indent_3 {
  text-indent: 15px;
}

#lyyjsjsoxx .gt_indent_4 {
  text-indent: 20px;
}

#lyyjsjsoxx .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="species">species</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Body Mass (g)">Body Mass (g)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Flipper Length (mm)">Flipper Length (mm)</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="species" class="gt_row gt_left">Adelie</td>
<td headers="Body Mass (g)" class="gt_row gt_right">3700.662</td>
<td headers="Flipper Length (mm)" class="gt_row gt_right">189.9536</td></tr>
    <tr><td headers="species" class="gt_row gt_left">Chinstrap</td>
<td headers="Body Mass (g)" class="gt_row gt_right">3733.088</td>
<td headers="Flipper Length (mm)" class="gt_row gt_right">195.8235</td></tr>
    <tr><td headers="species" class="gt_row gt_left">Gentoo</td>
<td headers="Body Mass (g)" class="gt_row gt_right">5076.016</td>
<td headers="Flipper Length (mm)" class="gt_row gt_right">217.1870</td></tr>
  </tbody>
  
  
</table>
</div>
<div class="try">
<p>
You won’t be able to see these tables unless you try re-knitting your
.Rmd file.
</p>
</div>
</div>
</div>
<div id="source-files" class="section level2 unnumbered">
<h2 class="unnumbered">Source files</h2>
<p>One variation of the “self-contained” approach is to have R Markdown code chunks “source” (run) other R scripts.</p>
<p>This can make your R Markdown script less cluttered, more simple, and easier to organize. It can also help if you want to display final figures at the beginning of the report.</p>
<p>In this approach, the final R Markdown script simply combines pre-processed outputs into a document. We already used the <code>source()</code> function to feed R objects from one script to another, now we can do the same thing to our report.</p>
<p>The advantage is all the data cleaning and organising happens "elsewhere" and we don't need to repeat our code. If you make any changes in your analysis scripts, these will be reflected by changes in your report the next time you compile (knit) it.</p>
<pre><code>source(&quot;scripts/your-script.R&quot;)</code></pre>
<div class="warning">
<p>
Don’t try using <code>here()</code> unless ALL of your script
dependencies ALSO use this. When knitting an Rmd file it treats the
absolute file path as relative to the .Rmd file (even when running
scripts written outside of the document).
</p>
<p>
This is why it’s usually simpler to save your .Rmd file in the same
place as your .RProj file
</p>
</div>
</div>
<div id="activity-connecting-scripts-and-reports" class="section level2 unnumbered">
<h2 class="unnumbered">Activity: Connecting scripts and reports</h2>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Create a separate R script for data import and quick cleaning, then source this into a new .Rmd file.
</div>
</div>
<ul>
<li><p>Create a <strong>new</strong> Rmarkdown file.</p></li>
<li><p>Create a new .R file</p></li>
<li><p>Save this (without changes) to the same folder as your <code>.Rproj</code> file and call it <code>linked_report_penguins.Rmd</code>.</p></li>
</ul>
<div class="try">
<p>
We will now source pre-written scripts for data loading and wrangling
in your R project, just use the source command to read in this script -
then you can call objects made externally - in this case a penguin plot
- put the code block in and hit knit.
</p>
</div>
<div class="sourceCode" id="cb647"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb647-1"><a href="#cb647-1" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb647-2"><a href="#cb647-2" tabindex="-1"></a><span class="in"># GLOBAL KNITR OPTIONS ----</span></span>
<span id="cb647-3"><a href="#cb647-3" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(echo = TRUE)</span></span>
<span id="cb647-4"><a href="#cb647-4" tabindex="-1"></a><span class="in"># ____________________----</span></span>
<span id="cb647-5"><a href="#cb647-5" tabindex="-1"></a></span>
<span id="cb647-6"><a href="#cb647-6" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<div class="sourceCode" id="cb648"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb648-1"><a href="#cb648-1" tabindex="-1"></a><span class="in">```{r read-data, include=FALSE}</span></span>
<span id="cb648-2"><a href="#cb648-2" tabindex="-1"></a><span class="in"># READ DATA ----</span></span>
<span id="cb648-3"><a href="#cb648-3" tabindex="-1"></a></span>
<span id="cb648-4"><a href="#cb648-4" tabindex="-1"></a><span class="in">source(&quot;scripts/penguins.R&quot;)</span></span>
<span id="cb648-5"><a href="#cb648-5" tabindex="-1"></a></span>
<span id="cb648-6"><a href="#cb648-6" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
</div>
<div id="activity-test-yourself-2" class="section level2 unnumbered">
<h2 class="unnumbered">Activity: Test yourself</h2>
<ul>
<li><p>Make any summary figure you want from the penguins data with <code>ggplot</code></p></li>
<li><p>Make a summary table with <code>summarise</code> and make it beautiful with <code>kableExtra</code> or <code>gt()</code></p></li>
<li><p>Write a few sentences explaining what you are presenting</p></li>
<li><p>Knit the report to <strong>html</strong></p></li>
<li><p>Use chunk options to optimise your figure layout and text and make it so that raw code and rendered outputs are visible. An example of literate programming</p></li>
</ul>
<div id="hygiene-tips" class="section level3 unnumbered">
<h3 class="unnumbered">Hygiene tips</h3>
<p>I recommend having three chunks at the top of any document</p>
<ul>
<li><p>Global chunk options</p></li>
<li><p>All packages</p></li>
<li><p>Reading data</p></li>
</ul>
<div class="sourceCode" id="cb649"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb649-1"><a href="#cb649-1" tabindex="-1"></a></span>
<span id="cb649-2"><a href="#cb649-2" tabindex="-1"></a><span class="in">```{r setup , include=FALSE}</span></span>
<span id="cb649-3"><a href="#cb649-3" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(echo = TRUE, </span></span>
<span id="cb649-4"><a href="#cb649-4" tabindex="-1"></a><span class="in">                      fig.align = &quot;center&quot;,</span></span>
<span id="cb649-5"><a href="#cb649-5" tabindex="-1"></a><span class="in">                      fig.width = 6,</span></span>
<span id="cb649-6"><a href="#cb649-6" tabindex="-1"></a><span class="in">                      fig.asp = 0.8,</span></span>
<span id="cb649-7"><a href="#cb649-7" tabindex="-1"></a><span class="in">                      out.width = &quot;80%</span></span>
<span id="cb649-8"><a href="#cb649-8" tabindex="-1"></a><span class="in">                      )</span></span>
<span id="cb649-9"><a href="#cb649-9" tabindex="-1"></a><span class="in">                      </span></span>
<span id="cb649-10"><a href="#cb649-10" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb649-11"><a href="#cb649-11" tabindex="-1"></a></span>
<span id="cb649-12"><a href="#cb649-12" tabindex="-1"></a><span class="in">```{r library}</span></span>
<span id="cb649-13"><a href="#cb649-13" tabindex="-1"></a><span class="in">library(tidyverse)</span></span>
<span id="cb649-14"><a href="#cb649-14" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb649-15"><a href="#cb649-15" tabindex="-1"></a></span>
<span id="cb649-16"><a href="#cb649-16" tabindex="-1"></a><span class="in">```{r read-data}</span></span>
<span id="cb649-17"><a href="#cb649-17" tabindex="-1"></a><span class="in">source(&quot;scripts/02_visualisation_penguins.R&quot;)</span></span>
<span id="cb649-18"><a href="#cb649-18" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
</div>
</div>
<div id="common-knit-issues" class="section level2 unnumbered">
<h2 class="unnumbered">Common knit issues</h2>
<p>Any of these issues will cause the Rmd document to fail to knit in its entirety. A failed knit is usually an easy fix, but needs you to READ the error message, and do a little detective work.</p>
<div id="duplication" class="section level3 unnumbered">
<h3 class="unnumbered">Duplication</h3>
<div class="sourceCode" id="cb650"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb650-1"><a href="#cb650-1" tabindex="-1"></a></span>
<span id="cb650-2"><a href="#cb650-2" tabindex="-1"></a><span class="in">```{r title-one}</span></span>
<span id="cb650-3"><a href="#cb650-3" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb650-4"><a href="#cb650-4" tabindex="-1"></a></span>
<span id="cb650-5"><a href="#cb650-5" tabindex="-1"></a><span class="in">```{r title-one}</span></span>
<span id="cb650-6"><a href="#cb650-6" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
</div>
<div id="not-the-right-order" class="section level3 unnumbered">
<h3 class="unnumbered">Not the right order</h3>
<pre><code>plot(my_table)

my_table &lt;- table(mtcars$cyl)</code></pre>
</div>
<div id="forgotten-trails" class="section level3 unnumbered">
<h3 class="unnumbered">Forgotten trails</h3>
<p>: Missing “,”, or “(”, “}”, or “’”</p>
</div>
<div id="path-not-taken" class="section level3 unnumbered">
<h3 class="unnumbered">Path not taken</h3>
<p>The Rmd document is in a different location the .Rproj file causing issues with relative filepaths</p>
</div>
<div id="spolling" class="section level3 unnumbered">
<h3 class="unnumbered">Spolling</h3>
<ul>
<li><p>Incorrectly labelled chunk options</p></li>
<li><p>Incorrectly evaluated R code</p></li>
</ul>
</div>
</div>
<div id="visual-editor" class="section level2 unnumbered">
<h2 class="unnumbered">Visual editor</h2>
<p>RStudio comes with a pretty nifty <a href="https://www.rstudio.com/blog/exploring-rstudio-visual-markdown-editor/">Visual Markdown Editor</a> which includes:</p>
<ul>
<li><p>Spellcheck</p></li>
<li><p>Easy table &amp; equation insertion</p></li>
<li><p>Easy citations and reference list building</p></li>
</ul>
<p>You can switch between modes with a button push, try it out!</p>
</div>
<div id="quarto" class="section level2 unnumbered">
<h2 class="unnumbered">Quarto</h2>
<p>The visual editor was a precursor to a new type of publishing tool - Quarto. this tool takes what R Markdown has done for R and extends it to other languages, including Python, Julia, and Observable JS. As I write this book, Quarto is gaining traction. Luckily, the concepts you’ve learned in this chapter apply to Quarto as well. Quarto documents have a YAML section, code chunks, and Markdown text. You can export Quarto documents to HTML, PDF, and Word. However, R Markdown and Quarto documents have some syntactic differences.</p>
<div id="further-reading-guides-and-tips" class="section level3 unnumbered">
<h3 class="unnumbered">Further Reading, Guides and tips</h3>
<ul>
<li><p><a href="https://www.rstudio.com/resources/cheatsheets/">R Cheat Sheets</a></p></li>
<li><p><span class="citation">Xie (<a href="#ref-xie2015">2015</a>)</span> Dynamic documents with Rmarkdown</p></li>
</ul>
<p><em>The fully comprehensive guide</em></p>
<p>(<a href="https://rmarkdown.rstudio.com/articles_intro.html" class="uri">https://rmarkdown.rstudio.com/articles_intro.html</a>)</p>
<p>(<a href="https://rmarkdown.rstudio.com/authoring_quick_tour.html" class="uri">https://rmarkdown.rstudio.com/authoring_quick_tour.html</a>)</p>
<ul>
<li><p><a href="https://www.apreshill.com/blog/2022-04-we-dont-talk-about-quarto/" class="uri">https://www.apreshill.com/blog/2022-04-we-dont-talk-about-quarto/</a></p></li>
<li><p><a href="https://www.njtierney.com/post/2022/04/11/rmd-to-qmd/" class="uri">https://www.njtierney.com/post/2022/04/11/rmd-to-qmd/</a></p></li>
<li><p><a href="https://www.jumpingrivers.com/blog/quarto-rmarkdown-comparison/" class="uri">https://www.jumpingrivers.com/blog/quarto-rmarkdown-comparison/</a></p></li>
</ul>
<!--chapter:end:08-reproducible-reports.Rmd-->
</div>
</div>
</div>
<div id="github-1" class="section level1" number="41">
<h1><span class="header-section-number">41</span> Github</h1>
<div id="lets-git-it-started" class="section level2" number="41.1">
<h2><span class="header-section-number">41.1</span> Let's Git it started</h2>
<p>Git is a <strong>version control system</strong>. Originally built to help groups of developers work collaboratively on big software projects. It helps us manage our RStudio projects - with tracked changes.</p>
<p>Git and GitHub are a big part of the data science community. We can use GitHub in a number of ways</p>
<ol style="list-style-type: decimal">
<li><p>To source code and repurpose analyses built by others for our own uses</p></li>
<li><p>Manage our analysis projects so that all parts of it:</p>
<p>🔢 Data</p>
<p>✍ ️Scripts</p>
<p>📊 Figures</p>
<p>📝 Reports</p></li>
</ol>
<p>Are version controlled and open access</p>
<ol start="3" style="list-style-type: decimal">
<li><p>Version control lets you recover from any mistakes &amp; your analysis is <em>backed up</em> externally</p></li>
<li><p>When you come to publish any reports - your analysis is accessible to others</p></li>
<li><p>Build up your own library of projects to show what you can do in Data Science</p></li>
</ol>
<p>If you work alone, git is great to track changes and recover previous version of your files. You can also use a remote repository to have a back up and share your work.</p>
<p>If you work as a team you can take advantage of all the above and also use version control as a tool to collaborate and organize the various versions of the same file present in the multiple computers you and they use.</p>
</div>
<div id="what-is-version-control" class="section level2" number="41.2">
<h2><span class="header-section-number">41.2</span> What is version control?</h2>
<p>Let’s imagine that we have a git repository. When you create a new file as part of the repository (or repo), that file is untracked. This means that git will ignore the file and any change you make to it <em>until you add it to the repo</em>. At that point the file is <strong>staged</strong> and ready to get into the repository. To do that you do a <strong>commit</strong> and save that version of the file to the repo. This workflow <code>modify --&gt; add --&gt; commit</code> will repeat every time you want to save a version of the file. It's a good idea to commit every time you end a task or objective in your project.</p>
<p><img src="images/git_stage.png" width="100%" style="display: block; margin: auto;" /></p>
<p><code>add</code> and <code>commit</code> are also git commands.RStudio provides a basic GUI for git, which we are going to use in this workshop. But you can also use the Terminal to talk to git on the command line</p>
<div class="info">
<p>
to add a file to the staging area.
</p>
<p>
git add <file>
</p>
<p>
git commit -m “A descriptive message to commit the files on the
staging area.”
</p>
</div>
</div>
<div id="remote-repositories" class="section level2" number="41.3">
<h2><span class="header-section-number">41.3</span> Remote repositories</h2>
<p>What we explained before is the local workflow. This is when the repo lives in your computer and that’s it. But you can also connect the local repository with a remote repository. For this workshop we are going to use GitHub to host remote repositories, but there are other options you can explore, such as GitLab.</p>
<p>Let’s imagine we have a local repository, we made some commits and we want to send those changes to the remote repository (we’ll how to create the remote repository later). For that we push the commits to the remote repository and the two repos are “up to date”.</p>
<p>If a team-mate changes a file and pushes the changes it to the remote repository, your local repo will be “outdated”. To download those new commits from the remote repository you pull the commits.</p>
<p><img src="images/collab.png" width="100%" style="display: block; margin: auto;" /></p>
<p>And if you want to try the command line:</p>
<div class="info">
<h1 id="to-upload-commits-to-the-remote-repository.">
to upload commits
to the remote repository.
</h1>
<p>
git push
</p>
<h1 id="to-download-commits-from-the-remote-repository-to-the-local-repo.">
to
download commits from the remote repository to the local repo.
</h1>
<p>
git pull
</p>
</div>
</div>
<div id="git-introductions" class="section level2" number="41.4">
<h2><span class="header-section-number">41.4</span> Git introductions</h2>
<p>Before you create your first repository you need to make sure that git and RStudio are friends and that git knows you. That means you have:</p>
<ul>
<li><p>Installed Git on your machine (not needed if using Posit Cloud)</p></li>
<li><p>Created a Github Account - go to <a href="https://github.com/">github.com</a></p></li>
</ul>
<div class="info">
<p>
You can check that RStudio “sees” git by going to Tools –&gt; Global
Options –&gt; Git/SVN. There you should find the path in your computer
to the git installation.
</p>
</div>
<p>You can now introduce yourself to Github with the <code>usethis</code> package</p>
<div class="sourceCode" id="cb652"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb652-1"><a href="#cb652-1" tabindex="-1"></a><span class="fu">library</span>(usethis) </span>
<span id="cb652-2"><a href="#cb652-2" tabindex="-1"></a><span class="fu">use_git_config</span>(<span class="at">user.name  =</span> <span class="st">&quot;Jane Doe&quot;</span>,</span>
<span id="cb652-3"><a href="#cb652-3" tabindex="-1"></a>               <span class="at">user.email =</span> <span class="st">&quot;jane@example.org&quot;</span>)</span></code></pre></div>
<p>Substituting with your name and the email associated with your GitHub account, or you can also do this on the command line:</p>
<div class="info">
<p>
git config –global user.name ‘Jane Doe’
</p>
<p>
git config –global user.email ’<a href="mailto:jane@example.com" class="email">jane@example.com</a>
</p>
</div>
<p>You will also need a Personal Access Token (PAT), Github has started using these <em>in lieu</em> of passwords.</p>
<p>Create a PAT with</p>
<div class="sourceCode" id="cb653"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb653-1"><a href="#cb653-1" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">create_github_token</span>()</span></code></pre></div>
<p>This will likely open a new window allowing you to create a token. Do now close this window, as you will need to copy the token to your clipboard. Then run this other command:</p>
<div class="sourceCode" id="cb654"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb654-1"><a href="#cb654-1" tabindex="-1"></a>gitcreds<span class="sc">::</span><span class="fu">gitcreds_set</span>()</span></code></pre></div>
<p>This will ask you for your access token. Go to the previous window, copy the token, paste it on your console and press enter.</p>
<p>Finally, to check that everything’s ok with this command.</p>
<div class="sourceCode" id="cb655"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb655-1"><a href="#cb655-1" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">gh_token_help</span>()</span></code></pre></div>
<p>Irritatingly the PAT seems to be forgotten on linux systems very quickly, which is what Posit Cloud is hosted on:</p>
<p>A simple solution to this problem is to ask git to store information in the cache for just a teeny tiny little bit longer. Instead of having the cache expire after the default 900 seconds, maybe set it to expire after 10 million seconds. That way, you’ll only have to refresh the cache using gitcreds::gitcreds_set() once every four months instead of four times an hour. Implementing this solution requires only one line of code at the terminal:</p>
<pre><code>
git config --global credential.helper &#39;cache --timeout=10000000&#39;
</code></pre>
<p>Thanks to <a href="https://blog.djnavarro.net/posts/2021-08-08_git-credential-helpers/" class="uri">https://blog.djnavarro.net/posts/2021-08-08_git-credential-helpers/</a> for this bit of information!</p>
</div>
<div id="create-a-new-repository" class="section level2" number="41.5">
<h2><span class="header-section-number">41.5</span> Create a new repository</h2>
<p>There are many ways to start a new repository, the easiest is <em>Github first</em></p>
<div id="create-an-online-repository." class="section level3" number="41.5.1">
<h3><span class="header-section-number">41.5.1</span> 1. Create an online repository.</h3>
<ul>
<li><p>Go to github.com and log in.</p></li>
<li><p>On the top right corner, click on the “+” bottom and then “New repository”</p></li>
</ul>
<p>Then:</p>
<ul>
<li><p>Repository template: No template.</p></li>
<li><p>Repository name: myrepo or whatever you wish to name your new project.</p></li>
<li><p>Description: Any short description of the project. Write this for humans.</p></li>
<li><p>Public.</p></li>
<li><p>Initialize this repository with: nothing (we can set up everything from R).</p></li>
</ul>
<p>Before going back to RStudio, copy the url for the repository.</p>
</div>
<div id="section" class="section level3" number="41.5.2">
<h3><span class="header-section-number">41.5.2</span> 2.</h3>
<ul>
<li><p>File &gt; New Project &gt; Version Control &gt; Git. In the “repository URL” paste the URL of your new GitHub repository</p></li>
<li><p>Choose the folder where you want to create the project.</p></li>
<li><p>Choose “Open in new session”.</p></li>
<li><p>And Click on “Create Project”.</p></li>
</ul>
<p>The new folder in your computer will be a git repository, linked to a remote GitHub repository and an RStudio Project at the same time. This workflow also makes sure that all the configuration between the local and remote repos are done correctly.</p>
<p>It also adds a .gitignore file that includes a list of files that we don’t need to track (i.e. .Rhistory).</p>
<div class="note">
<p>
The .gitignore file can be a good place to store your PAT file. Make
a plain text file and write in your token code, save it as anything you
like e.g. token.txt. Add the name of this to your .gitignore file and it
will save locally but never be pushed to your repo. Watch the Git pane
in Rstudio to check it is not being tracked.
</p>
</div>
</div>
<div id="local-changes" class="section level3" number="41.5.3">
<h3><span class="header-section-number">41.5.3</span> Local changes</h3>
<ul>
<li><p>Create a new .Rmd file</p></li>
<li><p>Save the file</p></li>
<li><p>Add it to the staging area by selecting the file in the Git pane</p></li>
<li><p>Select commit and write a descriptive message in the commit message pane</p></li>
</ul>
<p>At this point you should be able to see all the files in the staging area, and by selecting each one, the line by line differences in any changes you have made since your last commit</p>
<p><img src="images/git_pane.png" width="100%" style="display: block; margin: auto;" /></p>
<p><strong>Now Push</strong> - push your commits to the remote repository. You won't see any changes on Github until you push those commits.</p>
</div>
</div>
<div id="remote-changes" class="section level2" number="41.6">
<h2><span class="header-section-number">41.6</span> Remote changes</h2>
<p>Let's head back to GitHub now. If you refresh the page, now you’ll see the files you committed just now. Let’s click on “Commits” to see the history of the repository. From this view, you can explore the repository at the “state” of each commit and look at the file differences.</p>
<p>Now, we can try to make changes here at github.com</p>
<div id="create-a-readme" class="section level3" number="41.6.1">
<h3><span class="header-section-number">41.6.1</span> Create a README</h3>
<ul>
<li><p>On the main page, click on the green bottom that says “Add a README”.</p></li>
<li><p>Add something to the file. READMEs usually are written in Markdown and contain information about the repo.</p></li>
<li><p>At the end of the page add a message on the first line and click on “Commit new file”.</p></li>
<li><p>Come back to the main page to see the README.</p></li>
</ul>
<p>The new file and the changes you do on GitHub are only on the remote repository until you make a pull from the local repo. If you make changes on the local repo while it not up to date, you may encounter <strong>merge conflicts</strong>, which lead to headaches. This happens when the version of a file on the local repo is not compatible with its version on the remote repo. In those cases, git cannot decide which version is the right one and you have to do it yourself.</p>
<p>To avoid this problem (most of the time), you should do a <strong>pull everytime you load up a project</strong> before doing anything else. Most of the time the message will be "Already up to-date", but this is a good habit.</p>
<p>Now we should head to the GitPane in RStudio and select the blue "Pull" button. The README should appear in your files.</p>
</div>
</div>
<div id="collaborating-on-a-repo" class="section level2" number="41.7">
<h2><span class="header-section-number">41.7</span> Collaborating on a repo</h2>
<p>When collaborating on a project you can find yourself in one of two scenarios</p>
<ul>
<li><p>You have write permission of the repo you are working on.</p></li>
<li><p>You don’t have write permission on the repo.</p></li>
</ul>
<p>The first situation is the most common when working together with an team on a long term project. You can clone the repo following the these same instructions and use the same workflow as before. When you try to push your changes to the remote repository, GitHub will check if you have the rights to modify the repo. The only difference between this and working on your own is that you need to <strong>communicate well so that two people are not working on the same thing</strong>. Otherwise this will lead to <strong>merge conflicts</strong>.</p>
<p>The second situation is common when contributing to strangers' projects, such as fixing bugs in open source packages. In this case, you need to first fork the repository, which creates a remote repository linked to your GitHub account to which you will have complete access. Now you work in this fork using the normal workflow: modify, add, commit and push. But for your changes to integrate into the original repository, you need to create a pull request (or PR). This will let the owner of the original repo that you made some changes that you think should be merged. The owner can then accept, reject or ask for modifications. Once they accept your Pull Request, your modifications will be safe in the original repository.</p>
<div id="working-with-an-external-collaborator" class="section level3" number="41.7.1">
<h3><span class="header-section-number">41.7.1</span> Working with an external collaborator</h3>
<p><strong>1.</strong> Go to <a href="https://github.com/">github.com</a> and log in (you need your own account - for sign up with your uea.ac.uk e-mail)</p>
<p><strong>2.</strong> In the Search bar, look for repo <strong>Philip-Leftwich/5023Y-Happy-Git</strong></p>
<p><strong>3.</strong> Click on the repo name, and look at the existing repo structure</p>
<p><strong>4.</strong> <strong>FORK</strong> the repo</p>
</div>
<div id="what-the-hell-is-a-fork" class="section level3" number="41.7.2">
<h3><span class="header-section-number">41.7.2</span> What the hell is a fork?</h3>
<p><img src="images/fork.png" width="100%" style="display: block; margin: auto;" /></p>
<p>A fork is when you generate a <em>personal</em> copy of another user's <a href="#glossary-github">repository</a>.</p>
<p><strong>5.</strong> Press Clone/download and copy the URL, then create a <strong>new</strong> project in RStudio Cloud selecting the <strong>New project from Git repository</strong> option - make sure you are in the 5023Y Workspace</p>
<p><img src="images/new-project.png" width="100%" style="display: block; margin: auto;" /></p>
<p><strong>6.</strong> Open the some_cool_animals.Rmd document, and the accompanying html</p>
<p><strong>7.</strong> Add <em>your name</em> to the top of the document</p>
<p><strong>8.</strong> BUT WAIT. We have forgotten to add YOUR favourite animal and facts! Make a new tab in the markdown file add an image and some information</p>
<p><strong>9.</strong> Once you’ve added your updates, knit the Rmd document to update the html</p>
<p><strong>10.</strong> Stage, Commit &amp; Push all files <a href="#glossary-github">(glossary)</a></p>
<p>Staged - pick those files which you intend to bind to a commit</p>
<p>Commit - write a short descriptive message, binds changes to a single <a href="#commit">commit</a></p>
<p>Push - "Pushes" your changes from the local repo to the remote repo on GitHub, <a href="#push">(push)</a></p>
<p><strong>11.</strong> On GitHub, refresh and see that files are updated. Cool! Now you’ve used something someone else has created, customized it, and saved your updated version.</p>
</div>
<div id="make-a-pull-request" class="section level3" number="41.7.3">
<h3><span class="header-section-number">41.7.3</span> Make a pull request</h3>
<p><strong>1.</strong> Go to your repo in GitHub, you will see that you made the last commit and a message about being ahead of my project:</p>
<p><strong>2.</strong> Click on “Open pull request”.</p>
<p><strong>3.</strong> And click on “Create pull request”.</p>
<p><strong>4.</strong> We are almost there. Complete the pull request with a title and a message and then finish the pull request.</p>
<p>The owner/s of the repo will receive an email. They can review the pull request, comment on it and eventually accept the contribution. When that happen the changes you made will appear in their repo.</p>
</div>
</div>
<div id="see-changes" class="section level2" number="41.8">
<h2><span class="header-section-number">41.8</span> See changes</h2>
<p>The first and most immediate benefit of using GitHub with your RStudio Project is seeing the changes you have made since your last commit.</p>
<p>The RStudio Git pane lists every file that’s been added, modified or deleted. The icon describes the change:</p>
<ul>
<li><p>You've changed a file
<img src="images/git-modified.png" width="5%" style="display: block; margin: auto auto auto 0;" /></p></li>
<li><p>You've added a new file Git hasn't seen before
<img src="images/git-unknown.png" width="5%" style="display: block; margin: auto auto auto 0;" /></p></li>
<li><p>You've deleted a file
<img src="images/git-deleted.png" width="5%" style="display: block; margin: auto auto auto 0;" /></p></li>
</ul>
<p>You can get more details on the changes that have been made to each file by right-clicking and selecting diff</p>
<p><img src="images/git-diff.png" width="15%" style="display: block; margin: auto auto auto 0;" /></p>
<p>This opens a new window highlighting the <strong>diff</strong>erences between your current file and the previous commit.</p>
<p><img src="images/git-diff-window.png" width="100%" style="display: block; margin: auto;" /></p>
<p>The background colours tells you whether the text has been added (green) or removed (red). (If you’re colourblind you can use the line numbers in the two columns at the far left as a guide).</p>
</div>
<div id="a-couple-of-general-tips" class="section level2" number="41.9">
<h2><span class="header-section-number">41.9</span> A couple of general tips:</h2>
<div class="note">
<ul>
<li>
<p>
Pull at the start of <strong>every session</strong> this
retrieves the master repo from GitHub - which you update at the end of
every session. This helps prevent <em>conflicts</em>
</p>
</li>
<li>
<p>
<strong>Commit/push</strong> in small, meaningful increments and
do this often. You can make <strong>multiple</strong> commits in a
session - and <strong>always push at the end of the
session</strong>
</p>
</li>
<li>
<p>
In this way your GitHub Repo becomes the <strong>master
copy</strong> of your project.
</p>
</li>
</ul>
</div>
</div>
<div id="beautify-your-profile" class="section level2" number="41.10">
<h2><span class="header-section-number">41.10</span> Beautify your profile</h2>
<p>You can share information about yourself with the community on GitHub.com by creating a profile README. GitHub shows your profile README at the top of your profile page.</p>
<p>You decide what information to include in your profile README, so you have full control over how you present yourself on GitHub. Here are some examples of information that visitors may find interesting, fun, or useful in your profile README.</p>
<p>An "About me" section that describes your work and interests</p>
<p>Contributions you're proud of, and context about those contributions</p>
<p>Guidance for getting help in communities where you're involved</p>
<p><img src="images/profile-with-readme.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Handy links:</p>
<p><a href="https://dev.to/ruppysuppy/beautify-your-github-profile-like-a-pro-5093" class="uri">https://dev.to/ruppysuppy/beautify-your-github-profile-like-a-pro-5093</a></p>
<p><a href="https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-github-profile/customizing-your-profile/managing-your-profile-readme" class="uri">https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-github-profile/customizing-your-profile/managing-your-profile-readme</a></p>
</div>
<div id="glossary-github" class="section level2" number="41.11">
<h2><span class="header-section-number">41.11</span> Glossary-GitHub</h2>
<table>
<thead>
<tr>
<th style="text-align:left;">
Terms
</th>
<th style="text-align:left;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
clone
</td>
<td style="text-align:left;">
A clone is a copy of a repository that lives on your computer instead of on a website's server somewhere, or the act of making that copy. When you make a clone, you can edit the files in your preferred editor and use Git to keep track of your changes without having to be online. The repository you cloned is still connected to the remote version so that you can push your local changes to the remote to keep them synced when you're online.
</td>
</tr>
<tr>
<td style="text-align:left;">
commit
</td>
<td style="text-align:left;">
A commit, or revision, is an individual change to a file (or set of files). When you make a commit to save your work, Git creates a unique ID that allows you to keep record of the specific changes committed along with who made them and when. Commits usually contain a commit message which is a brief description of what changes were made.
</td>
</tr>
<tr>
<td style="text-align:left;">
commit message
</td>
<td style="text-align:left;">
Short, descriptive text that accompanies a commit and communicates the change the commit is introducing.
</td>
</tr>
<tr>
<td style="text-align:left;">
fork
</td>
<td style="text-align:left;">
A fork is a personal copy of another user's repository that lives on your account. Forks allow you to freely make changes to a project without affecting the original upstream repository. You can also open a pull request in the upstream repository and keep your fork synced with the latest changes since both repositories are still connected.
</td>
</tr>
<tr>
<td style="text-align:left;">
Git
</td>
<td style="text-align:left;">
Git is an open source program for tracking changes in text files. It was written by the author of the Linux operating system, and is the core technology that GitHub, the social and user interface, is built on top of.
</td>
</tr>
<tr>
<td style="text-align:left;">
GitHub Classroom
</td>
<td style="text-align:left;">
GitHub Classroom automates repository creation and access control, making it easy to distribute starter code and collect assignments on GitHub
</td>
</tr>
<tr>
<td style="text-align:left;">
Markdown
</td>
<td style="text-align:left;">
Markdown is an incredibly simple semantic file format, not too dissimilar from .doc, .rtf and .txt. Markdown makes it easy for even those without a web-publishing background to write prose (including with links, lists, bullets, etc.) and have it displayed like a website.
</td>
</tr>
<tr>
<td style="text-align:left;">
pull
</td>
<td style="text-align:left;">
Pull refers to when you are fetching in changes and merging them. For instance, if someone has edited the remote file you're both working on, you'll want to pull in those changes to your local copy so that it's up to date
</td>
</tr>
<tr>
<td style="text-align:left;">
push
</td>
<td style="text-align:left;">
To push means to send your committed changes to a remote repository on GitHub.com. For instance, if you change something locally, you can push those changes so that others may access them.
</td>
</tr>
<tr>
<td style="text-align:left;">
README
</td>
<td style="text-align:left;">
A text file containing information about the files in a repository that is typically the first file a visitor to your repository will see. A README file, along with a repository license, contribution guidelines, and a code of conduct, helps you share expectations and manage contributions to your project.
</td>
</tr>
<tr>
<td style="text-align:left;">
repository
</td>
<td style="text-align:left;">
A repository (repo) is the most basic element of GitHub. They're easiest to imagine as a project's folder. A repository contains all of the project files (including documentation), and stores each file's revision history. Repositories can have multiple collaborators and can be either public or private.
</td>
</tr>
<tr>
<td style="text-align:left;">
RMarkdown
</td>
<td style="text-align:left;">
Rmarkdown is a package and filetype that are deeply embedded with RStudio to allow the integration of Markdown and output chunks of programming code (such as R) to publish a variety of different file types
</td>
</tr>
<tr>
<td style="text-align:left;">
personal access token
</td>
<td style="text-align:left;">
A token that is used in place of a password when performing Git operations over HTTPS. Also called a PAT.
</td>
</tr>
</tbody>
</table>
<p>Reading</p>
<ul>
<li><a href="https://happygitwithr.com/">Happy Git</a></li>
</ul>
<!--chapter:end:09-github.Rmd-->
</div>
</div>
<div id="part-working-with-big-data" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) Working with big data</h1>
</div>
<div id="reading-4" class="section level1" number="42">
<h1><span class="header-section-number">42</span> Reading</h1>
<p>We did not cover the different approaches to working with really big data in R. Instead I have provided a list of extra reading and exercises that cover this in more depth, as well as introductions to using SQL with dplyr functions:</p>
<p><a href="https://www.r-bloggers.com/2020/09/the-fastest-way-to-read-and-writes-file-in-r/" class="uri">https://www.r-bloggers.com/2020/09/the-fastest-way-to-read-and-writes-file-in-r/</a></p>
<p><a href="https://www.r-bloggers.com/2019/05/how-to-save-and-load-datasets-in-r-an-overview/" class="uri">https://www.r-bloggers.com/2019/05/how-to-save-and-load-datasets-in-r-an-overview/</a></p>
<p><a href="http://www.sthda.com/english/wiki/saving-data-into-r-data-format-rds-and-rdata" class="uri">http://www.sthda.com/english/wiki/saving-data-into-r-data-format-rds-and-rdata</a></p>
<p><a href="https://waterdata.usgs.gov/blog/formats/" class="uri">https://waterdata.usgs.gov/blog/formats/</a></p>
<p><a href="https://inbo.github.io/tutorials/tutorials/r_large_data_files_handling/" class="uri">https://inbo.github.io/tutorials/tutorials/r_large_data_files_handling/</a></p>
<p><a href="https://bookdown.org/csgillespie/efficientR/preface.html" class="uri">https://bookdown.org/csgillespie/efficientR/preface.html</a></p>
<p><a href="https://github.com/sbreitbart/DataSci_for_Ecologists/blob/main/SQL_intro/SQL_intro.rmd" class="uri">https://github.com/sbreitbart/DataSci_for_Ecologists/blob/main/SQL_intro/SQL_intro.rmd</a></p>
<!--chapter:end:10-sql.Rmd-->
</div>
<div id="part-bonus-automated-exploratory-analysis" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) BONUS: Automated Exploratory Analysis</h1>
</div>
<div id="packages-for-automated-exploratory-data-analysis" class="section level1" number="43">
<h1><span class="header-section-number">43</span> Packages for Automated Exploratory Data Analysis</h1>
<p>In the realm of data science, the use of automated exploratory analysis is gaining prominence as a powerful approach. This methodology offers a way for data analysts and scientists to rapidly gain insights into their datasets, particularly when they have been working with tidyverse tools, without the need for laborious manual inspections of individual variables or the creation of numerous plots. The aim is to streamline and speed up the workflow, making data exploration more efficient and effective. To achieve this, data professionals turn to specific R packages such as skimr, ggally, and dataxray.</p>
<p><code>skimr</code>: The skimr package is tailored to provide a concise and informative summary of a dataset's variables. It supplies a variety of functions for generating descriptive statistics, data type details, and visual representations. This empowers you to efficiently grasp the structure and characteristics of your data, aligning with the tidyverse principles. Skimr is particularly valuable for gaining an initial understanding of your dataset and for spotting potential issues or patterns.</p>
<p><code>ggally</code>: Known as the "ggplot2 extension for exploring correlations," ggally is an R package that extends the capabilities of the well-known ggplot2 package. If you're already familiar with tidyverse, you'll appreciate ggally's seamless integration with tidy data principles. It is primarily used to create visualizations and plots for exploring relationships and correlations among variables. With ggally, you can readily produce scatterplots, density plots, and other types of graphs that shed light on the connections within your data.</p>
<p><code>dataxray</code>: For data professionals who have been using tidyverse tools, the dataxray package is a natural extension of the workflow. This new R package provides quick statistical summaries in an interactive table inside of the Rstudio Viewer Pane.</p>
<p>Together, these R packages serve to streamline and automate the exploratory analysis process within the tidyverse framework. They make data exploration more efficient and effective, enabling data scientists and analysts to swiftly gain insights into their datasets, pinpoint potential problems, and lay the foundation for more in-depth analyses and modeling. Automated exploratory analysis, when seamlessly integrated with tidyverse tools, plays a pivotal role in the data analysis workflow, providing a deeper understanding of the data and guiding informed decisions about subsequent steps in analysis and modeling tasks.</p>
<div id="skimr-for-automated-data-quality-checking" class="section level2" number="43.1">
<h2><span class="header-section-number">43.1</span> Skimr for automated data quality checking</h2>
<p>Skimr is my preferred R package for quickly assessing data quality, serving as my initial step in exploratory data analysis. Before proceeding with any other tasks, I rely on skimr to conduct a thorough data quality check.</p>
<div class="sourceCode" id="cb657"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb657-1"><a href="#cb657-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;skimr&quot;</span>)</span>
<span id="cb657-2"><a href="#cb657-2" tabindex="-1"></a><span class="fu">library</span>(skimr)</span></code></pre></div>
<div class="sourceCode" id="cb658"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb658-1"><a href="#cb658-1" tabindex="-1"></a>skimr<span class="sc">::</span><span class="fu">skim</span>(penguins)</span></code></pre></div>
<table>
<caption>(#tab:unnamed-chunk-5)Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">penguins</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">344</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">20</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">10</td>
</tr>
<tr class="odd">
<td align="left">Date</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">factor</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">8</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table style="width:100%;">
<colgroup>
<col width="23%" />
<col width="13%" />
<col width="18%" />
<col width="5%" />
<col width="5%" />
<col width="7%" />
<col width="11%" />
<col width="14%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">study_name</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">species</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">6</td>
<td align="right">9</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">region</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">6</td>
<td align="right">6</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">island</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">5</td>
<td align="right">9</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">stage</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">18</td>
<td align="right">18</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">individual_id</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">4</td>
<td align="right">6</td>
<td align="right">0</td>
<td align="right">190</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">clutch_completion</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">date_egg</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">10</td>
<td align="right">10</td>
<td align="right">0</td>
<td align="right">50</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">sex</td>
<td align="right">11</td>
<td align="right">0.97</td>
<td align="right">4</td>
<td align="right">6</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">comments</td>
<td align="right">290</td>
<td align="right">0.16</td>
<td align="right">18</td>
<td align="right">68</td>
<td align="right">0</td>
<td align="right">10</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: Date</strong></p>
<table>
<colgroup>
<col width="19%" />
<col width="12%" />
<col width="17%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="10%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">max</th>
<th align="left">median</th>
<th align="right">n_unique</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">date_egg_proper</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">2007-11-09</td>
<td align="left">2009-12-01</td>
<td align="left">2008-11-09</td>
<td align="right">50</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table>
<colgroup>
<col width="17%" />
<col width="12%" />
<col width="17%" />
<col width="9%" />
<col width="10%" />
<col width="32%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">ordered</th>
<th align="right">n_unique</th>
<th align="left">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">flipper_range</td>
<td align="right">2</td>
<td align="right">0.99</td>
<td align="left">FALSE</td>
<td align="right">3</td>
<td align="left">med: 152, sma: 99, lar: 91</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table style="width:100%;">
<colgroup>
<col width="17%" />
<col width="9%" />
<col width="13%" />
<col width="7%" />
<col width="6%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">sample_number</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">63.15</td>
<td align="right">40.43</td>
<td align="right">1.00</td>
<td align="right">29.00</td>
<td align="right">58.00</td>
<td align="right">95.25</td>
<td align="right">152.00</td>
<td align="left">▇▇▆▅▃</td>
</tr>
<tr class="even">
<td align="left">culmen_length_mm</td>
<td align="right">2</td>
<td align="right">0.99</td>
<td align="right">43.92</td>
<td align="right">5.46</td>
<td align="right">32.10</td>
<td align="right">39.23</td>
<td align="right">44.45</td>
<td align="right">48.50</td>
<td align="right">59.60</td>
<td align="left">▃▇▇▆▁</td>
</tr>
<tr class="odd">
<td align="left">culmen_depth_mm</td>
<td align="right">2</td>
<td align="right">0.99</td>
<td align="right">17.15</td>
<td align="right">1.97</td>
<td align="right">13.10</td>
<td align="right">15.60</td>
<td align="right">17.30</td>
<td align="right">18.70</td>
<td align="right">21.50</td>
<td align="left">▅▅▇▇▂</td>
</tr>
<tr class="even">
<td align="left">flipper_length_mm</td>
<td align="right">2</td>
<td align="right">0.99</td>
<td align="right">200.92</td>
<td align="right">14.06</td>
<td align="right">172.00</td>
<td align="right">190.00</td>
<td align="right">197.00</td>
<td align="right">213.00</td>
<td align="right">231.00</td>
<td align="left">▂▇▃▅▂</td>
</tr>
<tr class="odd">
<td align="left">body_mass_g</td>
<td align="right">2</td>
<td align="right">0.99</td>
<td align="right">4201.75</td>
<td align="right">801.95</td>
<td align="right">2700.00</td>
<td align="right">3550.00</td>
<td align="right">4050.00</td>
<td align="right">4750.00</td>
<td align="right">6300.00</td>
<td align="left">▃▇▆▃▂</td>
</tr>
<tr class="even">
<td align="left">delta_15n</td>
<td align="right">14</td>
<td align="right">0.96</td>
<td align="right">8.73</td>
<td align="right">0.55</td>
<td align="right">7.63</td>
<td align="right">8.30</td>
<td align="right">8.65</td>
<td align="right">9.17</td>
<td align="right">10.03</td>
<td align="left">▃▇▆▅▂</td>
</tr>
<tr class="odd">
<td align="left">delta_13c</td>
<td align="right">13</td>
<td align="right">0.96</td>
<td align="right">-25.69</td>
<td align="right">0.79</td>
<td align="right">-27.02</td>
<td align="right">-26.32</td>
<td align="right">-25.83</td>
<td align="right">-25.06</td>
<td align="right">-23.79</td>
<td align="left">▆▇▅▅▂</td>
</tr>
<tr class="even">
<td align="left">year</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">2008.03</td>
<td align="right">0.82</td>
<td align="right">2007.00</td>
<td align="right">2007.00</td>
<td align="right">2008.00</td>
<td align="right">2009.00</td>
<td align="right">2009.00</td>
<td align="left">▇▁▇▁▇</td>
</tr>
</tbody>
</table>
<p>We can end up dedicating a significant amount of our time to tasks such as data comprehension, exploration, wrangling, and preparation for analysis.</p>
<p>However, we can significantly expedite this process. In every single data project I undertake, I rely on <code>skimr</code>, which is my go-to solution for achieving efficiency and speed.</p>
<div id="how-skimr-works" class="section level3" number="43.1.1">
<h3><span class="header-section-number">43.1.1</span> How Skimr works</h3>
<p>One of the best features of Skimr is its capability to generate a comprehensive Data Quality Report with just a single line of code. This automation encompasses:</p>
<ul>
<li><p>Data Profiling</p></li>
<li><p>Compatibility with Numeric, Categorical, Text, Date, Nested List Columns, and even dplyr groups</p></li>
</ul>
<p>In essence, this remarkable functionality translates to significant time savings for data scientists 🕒</p>
<p>Assessing data with <code>skimr</code> makes simple quality checks easy!</p>
</div>
<div id="reporting" class="section level3" number="43.1.2">
<h3><span class="header-section-number">43.1.2</span> Reporting</h3>
<p>The penguins dataset has a lot of information in it, 344 rows of data and 19 independent variables. It has multiple data types and frequent missing data. With <code>skimr::skim()</code> we get an overall data summary of th number of rows, columns, data types by column and any group variables.</p>
<div id="character-summaries" class="section level4" number="43.1.2.1">
<h4><span class="header-section-number">43.1.2.1</span> Character summaries</h4>
<p>Missing/completion rate, number of unique observations, and text features.</p>
</div>
<div id="factor-summaries" class="section level4" number="43.1.2.2">
<h4><span class="header-section-number">43.1.2.2</span> Factor summaries</h4>
<p>If data is recognised as factorial we get missing/completion rate, whether the factor is ordered, numbr of unique levels and the number of observations for each factor</p>
</div>
<div id="date-summaries" class="section level4" number="43.1.2.3">
<h4><span class="header-section-number">43.1.2.3</span> Date summaries</h4>
<p>Missing/completion rates, min/max dates, and the number of unique dates.</p>
</div>
<div id="numeric-summaries" class="section level4" number="43.1.2.4">
<h4><span class="header-section-number">43.1.2.4</span> Numeric summaries</h4>
<p>Missing/completion rates and distributions.</p>
</div>
</div>
</div>
<div id="ggally-for-exploratory-analysis" class="section level2" number="43.2">
<h2><span class="header-section-number">43.2</span> GGally for exploratory analysis</h2>
<p><code>GGally</code> is another invaluable tool in a researcher's toolkit. It seamlessly extends the capabilities of the widely used <code>ggplot2</code> package. With <code>GGally</code>, you can effortlessly create a variety of visualizations to explore and understand distributions and correlations among your variables. Its flexibility and ease of use make it a go-to choice for streamlining the process of creating insightful plots and charts for data analysis.</p>
<div id="pairs" class="section level3" number="43.2.1">
<h3><span class="header-section-number">43.2.1</span> pairs</h3>
<div class="sourceCode" id="cb659"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb659-1"><a href="#cb659-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb659-2"><a href="#cb659-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">|&gt;</span> </span>
<span id="cb659-3"><a href="#cb659-3" tabindex="-1"></a>  <span class="fu">pairs</span>()</span></code></pre></div>
<div class="sourceCode" id="cb660"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb660-1"><a href="#cb660-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb660-2"><a href="#cb660-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">12</span>,<span class="dv">13</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb660-3"><a href="#cb660-3" tabindex="-1"></a>  <span class="fu">pairs</span>()</span></code></pre></div>
<p><img src="11-data-exploration-bonus_files/figure-html/unnamed-chunk-7-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="ggally" class="section level3" number="43.2.2">
<h3><span class="header-section-number">43.2.2</span> GGally</h3>
<p>So far, we have only used the pairs function that comes together with the base installation of R. However, the ggplot2 and GGally packages provide an even more advanced pairs function, which is called <code>ggpairs()</code>. Let’s install and load the packages:</p>
<div class="sourceCode" id="cb661"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb661-1"><a href="#cb661-1" tabindex="-1"></a><span class="fu">library</span>(GGally)</span></code></pre></div>
<div class="sourceCode" id="cb662"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb662-1"><a href="#cb662-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb662-2"><a href="#cb662-2" tabindex="-1"></a>  <span class="fu">select</span>(species, island, culmen_length_mm, culmen_depth_mm, flipper_length_mm, body_mass_g, sex) <span class="sc">|&gt;</span> </span>
<span id="cb662-3"><a href="#cb662-3" tabindex="-1"></a>  <span class="fu">ggpairs</span>()</span></code></pre></div>
<p><img src="11-data-exploration-bonus_files/figure-html/unnamed-chunk-9-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb663"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb663-1"><a href="#cb663-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb663-2"><a href="#cb663-2" tabindex="-1"></a>  <span class="fu">ggpairs</span>(<span class="at">columns =</span> <span class="dv">10</span><span class="sc">:</span><span class="dv">12</span>, ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">colour =</span> species))</span></code></pre></div>
<p><img src="11-data-exploration-bonus_files/figure-html/unnamed-chunk-10-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb664"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb664-1"><a href="#cb664-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb664-2"><a href="#cb664-2" tabindex="-1"></a>  <span class="fu">ggpairs</span>(<span class="at">columns =</span> <span class="dv">10</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">upper =</span> <span class="st">&quot;blank&quot;</span>)</span></code></pre></div>
<p><img src="11-data-exploration-bonus_files/figure-html/unnamed-chunk-11-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb665"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb665-1"><a href="#cb665-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb665-2"><a href="#cb665-2" tabindex="-1"></a>  <span class="fu">ggpairs</span>(<span class="at">columns =</span> <span class="dv">10</span><span class="sc">:</span><span class="dv">14</span>, <span class="at">columnLabels =</span> <span class="fu">c</span>(<span class="st">&quot;Bill length&quot;</span>, <span class="st">&quot;Bill depth&quot;</span>, <span class="st">&quot;Flipper length&quot;</span>, <span class="st">&quot;Body mass&quot;</span>, <span class="st">&quot;Sex&quot;</span>))</span></code></pre></div>
<p><img src="11-data-exploration-bonus_files/figure-html/unnamed-chunk-12-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb666"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb666-1"><a href="#cb666-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb666-2"><a href="#cb666-2" tabindex="-1"></a>  <span class="fu">ggpairs</span>(<span class="at">columns =</span> <span class="dv">10</span><span class="sc">:</span><span class="dv">14</span>, <span class="at">upper =</span> <span class="fu">list</span>(<span class="at">continuous =</span> <span class="st">&quot;density&quot;</span>, <span class="at">combo =</span> <span class="st">&quot;box_no_facet&quot;</span>),</span>
<span id="cb666-3"><a href="#cb666-3" tabindex="-1"></a>          <span class="at">lower =</span> <span class="fu">list</span>(<span class="at">continuous =</span> <span class="st">&quot;points&quot;</span>, <span class="at">combo =</span> <span class="st">&quot;dot_no_facet&quot;</span>))</span></code></pre></div>
<p><img src="11-data-exploration-bonus_files/figure-html/unnamed-chunk-13-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb667"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb667-1"><a href="#cb667-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb667-2"><a href="#cb667-2" tabindex="-1"></a>  <span class="fu">ggpairs</span>(<span class="at">columns =</span> <span class="dv">10</span><span class="sc">:</span><span class="dv">14</span>, <span class="at">upper =</span> <span class="fu">list</span>(<span class="at">continuous =</span> <span class="st">&quot;density&quot;</span>, <span class="at">combo =</span> <span class="st">&quot;box_no_facet&quot;</span>),</span>
<span id="cb667-3"><a href="#cb667-3" tabindex="-1"></a>          <span class="at">lower =</span> <span class="fu">list</span>(<span class="at">continuous =</span> <span class="st">&quot;points&quot;</span>, <span class="at">combo =</span> <span class="st">&quot;dot_no_facet&quot;</span>),</span>
<span id="cb667-4"><a href="#cb667-4" tabindex="-1"></a>          ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">colour =</span> species))</span></code></pre></div>
<p><img src="11-data-exploration-bonus_files/figure-html/unnamed-chunk-14-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb668"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb668-1"><a href="#cb668-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb668-2"><a href="#cb668-2" tabindex="-1"></a>  <span class="fu">ggpairs</span>(<span class="at">columns =</span> <span class="dv">10</span><span class="sc">:</span><span class="dv">14</span>, <span class="at">axisLabels =</span> <span class="st">&quot;internal&quot;</span>)</span></code></pre></div>
<p><img src="11-data-exploration-bonus_files/figure-html/unnamed-chunk-15-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="dataxray" class="section level2" number="43.3">
<h2><span class="header-section-number">43.3</span> dataxray</h2>
<p><code>dataxray</code> is a new R package that provides quick statistical summaries in an interactive table inside of the Rstudio Viewer Pane. To use this package we need to install from Github, which means we need the <code>devtools</code> package and <code>devtools::install_github()</code></p>
<div class="sourceCode" id="cb669"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb669-1"><a href="#cb669-1" tabindex="-1"></a><span class="co"># install.packages(&quot;devtools&quot;)</span></span>
<span id="cb669-2"><a href="#cb669-2" tabindex="-1"></a><span class="co"># devtools::install_github(&quot;agstn/dataxray&quot;)</span></span>
<span id="cb669-3"><a href="#cb669-3" tabindex="-1"></a><span class="fu">library</span>(dataxray)</span></code></pre></div>
<p><code>dataxray</code> emphasises an interactive exploration of the exploratory summaries. This goes beyond what <code>skimr</code> can do by adding an interactive exploration element to feature summaries. So if you like interactivity, then try <code>dataxray</code>.</p>
<p>There are just two functions we require with this package</p>
<ul>
<li><p><code>dataxray::make_xray()</code> to convert the raw data to preformatted data for the reactable interactive table</p></li>
<li><p><code>dataxray::view_xray()</code> to display the interactive exploratory table using the underlying reactable library.</p></li>
</ul>
<div class="sourceCode" id="cb670"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb670-1"><a href="#cb670-1" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb670-2"><a href="#cb670-2" tabindex="-1"></a>  <span class="fu">make_xray</span>() <span class="sc">|&gt;</span> </span>
<span id="cb670-3"><a href="#cb670-3" tabindex="-1"></a>  <span class="fu">view_xray</span>()</span></code></pre></div>
<p>Now you can explore each column to see:</p>
<ul>
<li><p>Count and Percent Missing - How many NA values</p></li>
<li><p>Number of Distinct - How many unique observations</p></li>
<li><p>Categorical Data - Bar charts for frequency by category</p></li>
<li><p>Numeric Data - Distribution with histogram and quantiles</p></li>
<li><p>Expandable Groups - You can expand the groups to find out more information about the features</p></li>
<li><p>Search Features - Use regex to search the name. Great if you have a lot of features (columns)</p></li>
</ul>
<div class="sourceCode" id="cb671"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb671-1"><a href="#cb671-1" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code></pre></div>
<pre><code>## R version 4.3.1 (2023-06-16)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 20.04.6 LTS
## 
## Matrix products: default
## BLAS:   /usr/lib/x86_64-linux-gnu/atlas/libblas.so.3.10.3 
## LAPACK: /usr/lib/x86_64-linux-gnu/atlas/liblapack.so.3.10.3;  LAPACK version 3.9.0
## 
## locale:
##  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       
##  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   
##  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          
## [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   
## 
## time zone: UTC
## tzcode source: system (glibc)
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] janitor_2.2.0      dataxray_0.1.0     skimr_2.1.5        GGally_2.1.2      
##  [5] knitr_1.43         webexercises_1.1.0 glossary_1.0.0     lubridate_1.9.2   
##  [9] forcats_1.0.0      stringr_1.5.0      dplyr_1.1.2        purrr_1.0.1       
## [13] readr_2.1.4        tidyr_1.3.0        tibble_3.2.1       ggplot2_3.4.2     
## [17] tidyverse_2.0.0   
## 
## loaded via a namespace (and not attached):
##  [1] tidyselect_1.2.0    viridisLite_0.4.2   farver_2.1.1       
##  [4] fastmap_1.1.1       lazyeval_0.2.2      reshape_0.8.9      
##  [7] promises_1.2.0.1    digest_0.6.33       rpart_4.1.19       
## [10] timechange_0.2.0    mime_0.12           lifecycle_1.0.3    
## [13] cluster_2.1.4       ellipsis_0.3.2      magrittr_2.0.3     
## [16] compiler_4.3.1      rlang_1.1.1         Hmisc_5.1-1        
## [19] sass_0.4.6          tools_4.3.1         utf8_1.2.3         
## [22] yaml_2.3.7          data.table_1.14.8   labeling_0.4.2     
## [25] htmlwidgets_1.6.2   here_1.0.1          plyr_1.8.8         
## [28] xml2_1.3.5          repr_1.1.6          RColorBrewer_1.1-3 
## [31] withr_2.5.0         foreign_0.8-84      nnet_7.3-19        
## [34] grid_4.3.1          fansi_1.0.4         xtable_1.8-4       
## [37] colorspace_2.1-0    MASS_7.3-60         scales_1.2.1       
## [40] isoband_0.2.7       cli_3.6.1           rmarkdown_2.23     
## [43] generics_0.1.3      rstudioapi_0.15.0   httr_1.4.6         
## [46] tzdb_0.4.0          cachem_1.0.8        base64enc_0.1-3    
## [49] vctrs_0.6.3         jsonlite_1.8.7      bookdown_0.34      
## [52] hms_1.1.3           Formula_1.2-5       htmlTable_2.4.1    
## [55] plotly_4.10.2       jquerylib_0.1.4     glue_1.6.2         
## [58] codetools_0.2-19    stringi_1.7.12      gtable_0.3.3       
## [61] later_1.3.1         downlit_0.4.3       munsell_0.5.0      
## [64] pillar_1.9.0        htmltools_0.5.5     reactable_0.4.4    
## [67] R6_2.5.1            reactablefmtr_2.0.0 rprojroot_2.0.3    
## [70] evaluate_0.21       shiny_1.7.4.1       highr_0.10         
## [73] backports_1.4.1     snakecase_0.11.0    memoise_2.0.1      
## [76] httpuv_1.6.11       bslib_0.5.0         Rcpp_1.0.11        
## [79] gridExtra_2.3       checkmate_2.2.0     xfun_0.39          
## [82] fs_1.6.2            pkgconfig_2.0.3</code></pre>
<!--chapter:end:11-data-exploration-bonus.Rmd-->
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-Antarctic" class="csl-entry">
Gorman, K., Williams, T., &amp; Fraser, W. (2014). Ecological sexual dimorphism and environmental variability within a community of antarctic penguins (genus pygoscelis). <em>PLos One</em>, <em>9</em>(3), e90081. <a href="https://doi.org/10.1371/journal.pone.0090081">https://doi.org/10.1371/journal.pone.0090081</a>
</div>
<div id="ref-R-palmerpenguins" class="csl-entry">
Horst, A., Hill, A., &amp; Gorman, K. (2022). <em>Palmerpenguins: Palmer archipelago (antarctica) penguin data</em>.
</div>
<div id="ref-R-gt" class="csl-entry">
Iannone, R., Cheng, J., Schloerke, B., Hughes, E., Lauer, A., &amp; Seo, J. (2023). <em>Gt: Easily create presentation-ready display tables</em>.
</div>
<div id="ref-R-here" class="csl-entry">
Müller, K. (2020). <em>Here: A simpler way to find your files</em>.
</div>
<div id="ref-R-patchwork" class="csl-entry">
Pedersen, T. L. (2022). <em>Patchwork: The composer of plots</em>.
</div>
<div id="ref-R-tidyverse" class="csl-entry">
Wickham, H. (2023). <em>Tidyverse: Easily install and load the tidyverse</em>.
</div>
<div id="ref-R-ggplot2" class="csl-entry">
Wickham, H., Chang, W., Henry, L., Pedersen, T. L., Takahashi, K., Wilke, C., Woo, K., Yutani, H., &amp; Dunnington, D. (2023). <em>ggplot2: Create elegant data visualisations using the grammar of graphics</em>.
</div>
<div id="ref-R-scales" class="csl-entry">
Wickham, H., &amp; Seidel, D. (2022). <em>Scales: Scale functions for visualization</em>.
</div>
<div id="ref-R-ggridges" class="csl-entry">
Wilke, C. O. (2022). <em>Ggridges: Ridgeline plots in ggplot2</em>. <a href="https://wilkelab.org/ggridges/">https://wilkelab.org/ggridges/</a>
</div>
<div id="ref-xie2015" class="csl-entry">
Xie, Y. (2015). <em>Dynamic documents with <span>R</span> and knitr</em> (2nd ed.). Chapman; Hall/CRC. <a href="http://yihui.name/knitr/">http://yihui.name/knitr/</a>
</div>
<div id="ref-R-knitr" class="csl-entry">
Xie, Y. (2023). <em>Knitr: A general-purpose package for dynamic report generation in r</em>. <a href="https://yihui.org/knitr/">https://yihui.org/knitr/</a>
</div>
</div>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>More on projects can be found in the R4DS book (<a href="https://r4ds.had.co.nz/workflow-projects.html" class="uri">https://r4ds.had.co.nz/workflow-projects.html</a>)<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>(<a href="http://vita.had.co.nz/papers/tidy-data.pdf" class="uri">http://vita.had.co.nz/papers/tidy-data.pdf</a>)<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>(<a href="https://rmarkdown.rstudio.com/gallery.html" class="uri">https://rmarkdown.rstudio.com/gallery.html</a>)<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>(<a href="https://www.rstudio.com/resources/cheatsheets/" class="uri">https://www.rstudio.com/resources/cheatsheets/</a>)<a href="#fnref4" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<!--bookdown:body:end-->
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>
<script>
$( document ).ready(function() {
  var cite = ' ';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    license
  );
});
</script>

  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Advancing in R</strong>: A guide for Biologists and Ecologists" was written by Philip T. Leftwich. It was last built on 2023-11-09.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>

</html>
